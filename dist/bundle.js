!function (e) {
    function t(n) {
        if (r[n])return r[n].exports;
        var o = r[n] = {exports: {}, id: n, loaded: !1};
        return e[n].call(o.exports, o, o.exports, t), o.loaded = !0, o.exports
    }

    var r = {};
    return t.m = e, t.c = r, t.p = "/", t(0)
}([function (e, t, r) {
    try {
        (function () {
            "use strict";
            function e(e) {
                return e && e.__esModule ? e : {"default": e}
            }

            var t = r(3), n = e(t);
            n["default"].start()
        }).call(this)
    } finally {
    }
}, function (e, t) {
    e.exports = React
}, function (e, t, r) {
    var n, o, i;
    !function (r, u) {
        o = [t, e], n = u, i = "function" == typeof n ? n.apply(t, o) : n, !(void 0 !== i && (e.exports = i))
    }(this, function (e, t) {
        "use strict";
        function r() {
            return "jsonp_" + Date.now() + "_" + Math.ceil(1e5 * Math.random())
        }

        function n(e) {
            try {
                delete window[e]
            } catch (t) {
                window[e] = void 0
            }
        }

        function o(e) {
            var t = document.getElementById(e);
            document.getElementsByTagName("head")[0].removeChild(t)
        }

        var i = {timeout: 5e3, jsonpCallback: "callback"}, u = function (e) {
            var t = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1], u = null != t.timeout ? t.timeout : i.timeout, a = null != t.jsonpCallback ? t.jsonpCallback : i.jsonpCallback, l = void 0;
            return new Promise(function (t, i) {
                var c = r();
                window[c] = function (e) {
                    t({
                        ok: !0, json: function () {
                            return Promise.resolve(e)
                        }
                    }), l && clearTimeout(l), o(a + "_" + c), n(c)
                }, e += -1 === e.indexOf("?") ? "?" : "&";
                var s = document.createElement("script");
                s.setAttribute("src", e + a + "=" + c), s.id = a + "_" + c, document.getElementsByTagName("head")[0].appendChild(s), l = setTimeout(function () {
                    i(new Error("JSONP request to " + e + " timed out")), n(c), o(a + "_" + c)
                }, u)
            })
        };
        t.exports = u
    })
}, function (e, t, r) {
    try {
        (function () {
            "use strict";
            function n(e) {
                return e && e.__esModule ? e : {"default": e}
            }

            Object.defineProperty(t, "__esModule", {value: !0});
            var o = r(1), i = n(o), u = r(8), a = n(u), l = {
                start: function () {
                    i["default"].render(i["default"].createElement(a["default"], {collectionId: "55a7d29945284ef60c0ce772"}), document.getElementById("app"))
                }
            };
            t["default"] = l, e.exports = t["default"]
        }).call(this)
    } finally {
    }
}, function (e, t, r) {
    try {
        (function () {
            "use strict";
            function n(e) {
                return e && e.__esModule ? e : {"default": e}
            }

            function o(e, t) {
                if (!(e instanceof t))throw new TypeError("Cannot call a class as a function")
            }

            function i(e, t) {
                if ("function" != typeof t && null !== t)throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }

            Object.defineProperty(t, "__esModule", {value: !0});
            var u = function () {
                function e(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value"in n && (n.writable = !0), Object.defineProperty(e, n.key, n)
                    }
                }

                return function (t, r, n) {
                    return r && e(t.prototype, r), n && e(t, n), t
                }
            }(), a = function (e, t, r) {
                for (var n = !0; n;) {
                    var o = e, i = t, u = r;
                    a = c = l = void 0, n = !1, null === o && (o = Function.prototype);
                    var a = Object.getOwnPropertyDescriptor(o, i);
                    if (void 0 !== a) {
                        if ("value"in a)return a.value;
                        var l = a.get;
                        return void 0 === l ? void 0 : l.call(u)
                    }
                    var c = Object.getPrototypeOf(o);
                    if (null === c)return void 0;
                    e = c, t = i, r = u, n = !0
                }
            }, l = r(1), c = n(l), s = function (e) {
                function t() {
                    o(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
                }

                return i(t, e), u(t, [{
                    key: "render", value: function () {
                        return c["default"].createElement("a", {
                            className: "climb__tile__author",
                            href: this.props.link
                        }, c["default"].createElement("img", {
                            src: this.props.picture,
                            alt: "Profile pic of " + this.props.name
                        }), c["default"].createElement("h4", {className: "climb__tile__author__username"}, this.props.username))
                    }
                }]), t
            }(c["default"].Component);
            s.propTypes = {}, t["default"] = s, e.exports = t["default"]
        }).call(this)
    } finally {
    }
}, function (e, t, r) {
    try {
        (function () {
            "use strict";
            function n(e) {
                return e && e.__esModule ? e : {"default": e}
            }

            function o(e, t) {
                if (!(e instanceof t))throw new TypeError("Cannot call a class as a function")
            }

            function i(e, t) {
                if ("function" != typeof t && null !== t)throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }

            Object.defineProperty(t, "__esModule", {value: !0});
            var u = function () {
                function e(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value"in n && (n.writable = !0), Object.defineProperty(e, n.key, n)
                    }
                }

                return function (t, r, n) {
                    return r && e(t.prototype, r), n && e(t, n), t
                }
            }(), a = function (e, t, r) {
                for (var n = !0; n;) {
                    var o = e, i = t, u = r;
                    a = c = l = void 0, n = !1, null === o && (o = Function.prototype);
                    var a = Object.getOwnPropertyDescriptor(o, i);
                    if (void 0 !== a) {
                        if ("value"in a)return a.value;
                        var l = a.get;
                        return void 0 === l ? void 0 : l.call(u)
                    }
                    var c = Object.getPrototypeOf(o);
                    if (null === c)return void 0;
                    e = c, t = i, r = u, n = !0
                }
            }, l = r(1), c = n(l), s = function (e) {
                function t() {
                    o(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
                }

                return i(t, e), u(t, [{
                    key: "render", value: function () {
                        return c["default"].createElement("img", {className: "climb__tile__image", src: this.props.src})
                    }
                }]), t
            }(c["default"].Component);
            s.propTypes = {
                src: c["default"].PropTypes.string.isRequired,
                width: c["default"].PropTypes.number,
                height: c["default"].PropTypes.number
            }, t["default"] = s, e.exports = t["default"]
        }).call(this)
    } finally {
    }
}, function (e, t, r) {
    try {
        (function () {
            "use strict";
            function n(e) {
                return e && e.__esModule ? e : {"default": e}
            }

            function o(e, t) {
                if (!(e instanceof t))throw new TypeError("Cannot call a class as a function")
            }

            function i(e, t) {
                if ("function" != typeof t && null !== t)throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }

            Object.defineProperty(t, "__esModule", {value: !0});
            var u = function () {
                function e(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value"in n && (n.writable = !0), Object.defineProperty(e, n.key, n)
                    }
                }

                return function (t, r, n) {
                    return r && e(t.prototype, r), n && e(t, n), t
                }
            }(), a = function (e, t, r) {
                for (var n = !0; n;) {
                    var o = e, i = t, u = r;
                    a = c = l = void 0, n = !1, null === o && (o = Function.prototype);
                    var a = Object.getOwnPropertyDescriptor(o, i);
                    if (void 0 !== a) {
                        if ("value"in a)return a.value;
                        var l = a.get;
                        return void 0 === l ? void 0 : l.call(u)
                    }
                    var c = Object.getPrototypeOf(o);
                    if (null === c)return void 0;
                    e = c, t = i, r = u, n = !0
                }
            }, l = r(1), c = n(l), s = function (e) {
                function t() {
                    o(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
                }

                return i(t, e), u(t, [{
                    key: "render", value: function () {
                        return c["default"].createElement("div", {
                            className: "climb__tile__message",
                            dangerouslySetInnerHTML: {__html: this.props.body}
                        })
                    }
                }]), t
            }(c["default"].Component);
            s.propTypes = {body: c["default"].PropTypes.string.isRequired}, t["default"] = s, e.exports = t["default"]
        }).call(this)
    } finally {
    }
}, function (e, t, r) {
    try {
        (function () {
            "use strict";
            function n(e) {
                return e && e.__esModule ? e : {"default": e}
            }

            function o(e, t) {
                if (!(e instanceof t))throw new TypeError("Cannot call a class as a function")
            }

            function i(e, t) {
                if ("function" != typeof t && null !== t)throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }

            Object.defineProperty(t, "__esModule", {value: !0});
            var u = function () {
                function e(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value"in n && (n.writable = !0), Object.defineProperty(e, n.key, n)
                    }
                }

                return function (t, r, n) {
                    return r && e(t.prototype, r), n && e(t, n), t
                }
            }(), a = function (e, t, r) {
                for (var n = !0; n;) {
                    var o = e, i = t, u = r;
                    a = c = l = void 0, n = !1, null === o && (o = Function.prototype);
                    var a = Object.getOwnPropertyDescriptor(o, i);
                    if (void 0 !== a) {
                        if ("value"in a)return a.value;
                        var l = a.get;
                        return void 0 === l ? void 0 : l.call(u)
                    }
                    var c = Object.getPrototypeOf(o);
                    if (null === c)return void 0;
                    e = c, t = i, r = u, n = !0
                }
            }, l = r(1), c = n(l), s = r(5), f = n(s), p = r(6), d = n(p), y = r(4), v = n(y), m = function (e) {
                function t(e) {
                    o(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e), this.createImage.bind(this), this.createMessage.bind(this), this.createClassString.bind(this)
                }

                return i(t, e), u(t, [{
                    key: "createImage", value: function () {
                        if (null !== this.props.image) {
                            var e = this.props.image, t = e.url, r = e.width, n = e.height;
                            return c["default"].createElement(f["default"], {src: t, width: r, height: n})
                        }
                        return null
                    }
                }, {
                    key: "createMessage", value: function () {
                        return this.props.message ? c["default"].createElement(d["default"], {body: this.props.message}) : null
                    }
                }, {
                    key: "createClassString", value: function () {
                        var e = "climb__tile climb__tile--" + this.props.source_type;
                        return this.props.image && (e += " climb__tile--has-media climb__tile--has-image"), this.props.video_url && (e += " climb__tile--has-media climb__tile--has-video"), e
                    }
                }, {
                    key: "render", value: function () {
                        var e = this.createImage(), t = this.createMessage(), r = this.createClassString(), n = this.props.author;
                        return c["default"].createElement("div", {className: r}, e, c["default"].createElement("div", {className: "climb__tile__content"}, t), c["default"].createElement(v["default"], n))
                    }
                }]), t
            }(c["default"].Component);
            m.propTypes = {
                link: c["default"].PropTypes.string.isRequired,
                source_type: c["default"].PropTypes.string.isRequired,
                timestamp: c["default"].PropTypes.number.isRequired,
                author: c["default"].PropTypes.shape({
                    username: c["default"].PropTypes.string.isRequired,
                    picture: c["default"].PropTypes.string.isRequired,
                    link: c["default"].PropTypes.string.isRequired
                }),
                message: c["default"].PropTypes.string,
                video_src: c["default"].PropTypes.string,
                image: c["default"].PropTypes.shape({
                    url: c["default"].PropTypes.string.isRequired,
                    width: c["default"].PropTypes.number.isRequired,
                    height: c["default"].PropTypes.number.isRequired
                })
            }, t["default"] = m, e.exports = t["default"]
        }).call(this)
    } finally {
    }
}, function (e, t, r) {
    try {
        (function () {
            "use strict";
            function n(e) {
                return e && e.__esModule ? e : {"default": e}
            }

            function o(e, t) {
                var r = {};
                for (var n in e)t.indexOf(n) >= 0 || Object.prototype.hasOwnProperty.call(e, n) && (r[n] = e[n]);
                return r
            }

            function i(e, t) {
                if (!(e instanceof t))throw new TypeError("Cannot call a class as a function")
            }

            function u(e, t) {
                if ("function" != typeof t && null !== t)throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }

            Object.defineProperty(t, "__esModule", {value: !0});
            var a = Object.assign || function (e) {
                    for (var t = 1; t < arguments.length; t++) {
                        var r = arguments[t];
                        for (var n in r)Object.prototype.hasOwnProperty.call(r, n) && (e[n] = r[n])
                    }
                    return e
                }, l = function () {
                function e(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value"in n && (n.writable = !0), Object.defineProperty(e, n.key, n)
                    }
                }

                return function (t, r, n) {
                    return r && e(t.prototype, r), n && e(t, n), t
                }
            }(), c = function (e, t, r) {
                for (var n = !0; n;) {
                    var o = e, i = t, u = r;
                    a = c = l = void 0, n = !1, null === o && (o = Function.prototype);
                    var a = Object.getOwnPropertyDescriptor(o, i);
                    if (void 0 !== a) {
                        if ("value"in a)return a.value;
                        var l = a.get;
                        return void 0 === l ? void 0 : l.call(u)
                    }
                    var c = Object.getPrototypeOf(o);
                    if (null === c)return void 0;
                    e = c, t = i, r = u, n = !0
                }
            }, s = r(1), f = n(s), p = r(9), d = n(p), y = r(7), v = n(y), m = function (e) {
                function t(e) {
                    i(this, t), c(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e), this.state = {items: []}
                }

                return u(t, e), l(t, [{
                    key: "init", value: function () {
                        var e = this;
                        d["default"].getFeed(this.props.collectionId).then(function (t) {
                            e.setState({items: t})
                        })
                    }
                }, {
                    key: "componentDidMount", value: function () {
                        this.init()
                    }
                }, {
                    key: "render", value: function () {
                        var e = [];
                        return this.state.items.forEach(function (t) {
                            var r = t.id, n = o(t, ["id"]);
                            e.push(f["default"].createElement(v["default"], a({ref: r, key: r}, n)))
                        }), f["default"].createElement("div", {className: "climb__wall"}, e)
                    }
                }]), t
            }(f["default"].Component);
            m.propTypes = {collectionId: f["default"].PropTypes.string.isRequired}, t["default"] = m, e.exports = t["default"]
        }).call(this)
    } finally {
    }
}, function (e, t, r) {
    try {
        (function () {
            "use strict";
            function n(e) {
                return e && e.__esModule ? e : {"default": e}
            }

            Object.defineProperty(t, "__esModule", {value: !0});
            var o = r(2), i = n(o), u = function (e) {
                return i["default"]("http://app.climb.social/api/v1/collections/" + e).then(function (e) {
                    return e.json()
                })
            }, a = {getFeed: u};
            t["default"] = a, e.exports = t["default"]
        }).call(this)
    } finally {
    }
}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAwYTk1YmUyODVhOWI3MWE3NGZlZCIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiUmVhY3RcIiIsIndlYnBhY2s6Ly8vLi9+L2ZldGNoLWpzb25wL2J1aWxkL2ZldGNoLWpzb25wLmpzIiwid2VicGFjazovLy8uL3NyYy9hcHAuanN4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0F1dGhvci5qc3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvSW1hZ2UuanN4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL01lc3NhZ2UuanN4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1RpbGUuanN4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1dhbGwuanN4Iiwid2VicGFjazovLy8uL3NyYy91dGlscy9jbGltYi5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfYXBwSnN4IiwiX2FwcEpzeDIiLCJzdGFydCIsInRoaXMiLCJSZWFjdCIsIl9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyIsIl9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18iLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsImdsb2JhbCIsImZhY3RvcnkiLCJhcHBseSIsInVuZGVmaW5lZCIsImdlbmVyYXRlQ2FsbGJhY2tGdW5jdGlvbiIsIkRhdGUiLCJub3ciLCJNYXRoIiwiY2VpbCIsInJhbmRvbSIsImNsZWFyRnVuY3Rpb24iLCJmdW5jdGlvbk5hbWUiLCJ3aW5kb3ciLCJlIiwicmVtb3ZlU2NyaXB0Iiwic2NyaXB0SWQiLCJzY3JpcHQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJyZW1vdmVDaGlsZCIsImRlZmF1bHRPcHRpb25zIiwidGltZW91dCIsImpzb25wQ2FsbGJhY2siLCJmZXRjaEpzb25wIiwidXJsIiwib3B0aW9ucyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInRpbWVvdXRJZCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiY2FsbGJhY2tGdW5jdGlvbiIsInJlc3BvbnNlIiwib2siLCJqc29uIiwiY2xlYXJUaW1lb3V0IiwiaW5kZXhPZiIsImpzb25wU2NyaXB0IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwic2V0VGltZW91dCIsIkVycm9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl9yZWFjdCIsIl9yZWFjdDIiLCJfY29tcG9uZW50c1dhbGxKc3giLCJfY29tcG9uZW50c1dhbGxKc3gyIiwiQm9vdHN0cmFwcGVyIiwicmVuZGVyIiwiY29sbGVjdGlvbklkIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsInByb3RvdHlwZSIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwiZGVzY3JpcHRvciIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl9nZXQiLCJfeCIsIl94MiIsIl94MyIsIl9hZ2FpbiIsIm9iamVjdCIsInByb3BlcnR5IiwicmVjZWl2ZXIiLCJkZXNjIiwicGFyZW50IiwiZ2V0dGVyIiwiRnVuY3Rpb24iLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXQiLCJnZXRQcm90b3R5cGVPZiIsIkF1dGhvciIsIl9SZWFjdCRDb21wb25lbnQiLCJjbGFzc05hbWUiLCJocmVmIiwibGluayIsInNyYyIsInBpY3R1cmUiLCJhbHQiLCJuYW1lIiwidXNlcm5hbWUiLCJDb21wb25lbnQiLCJwcm9wVHlwZXMiLCJJbWFnZSIsIlByb3BUeXBlcyIsInN0cmluZyIsImlzUmVxdWlyZWQiLCJ3aWR0aCIsIm51bWJlciIsImhlaWdodCIsIk1lc3NhZ2UiLCJkYW5nZXJvdXNseVNldElubmVySFRNTCIsIl9faHRtbCIsImJvZHkiLCJfSW1hZ2UiLCJfSW1hZ2UyIiwiX01lc3NhZ2UiLCJfTWVzc2FnZTIiLCJfQXV0aG9yIiwiX0F1dGhvcjIiLCJUaWxlIiwiY3JlYXRlSW1hZ2UiLCJiaW5kIiwiY3JlYXRlTWVzc2FnZSIsImNyZWF0ZUNsYXNzU3RyaW5nIiwiaW1hZ2UiLCJfcHJvcHMkaW1hZ2UiLCJtZXNzYWdlIiwiY2xhc3NTdHJpbmciLCJzb3VyY2VfdHlwZSIsInZpZGVvX3VybCIsImF1dGhvciIsInRpbWVzdGFtcCIsInNoYXBlIiwidmlkZW9fc3JjIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwia2V5cyIsImhhc093blByb3BlcnR5IiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJzb3VyY2UiLCJfdXRpbHNDbGltYiIsIl91dGlsc0NsaW1iMiIsIl9UaWxlIiwiX1RpbGUyIiwiV2FsbCIsInN0YXRlIiwiaXRlbXMiLCJfdGhpcyIsImdldEZlZWQiLCJ0aGVuIiwic2V0U3RhdGUiLCJpbml0IiwidGlsZXMiLCJmb3JFYWNoIiwiaXRlbSIsIm90aGVyUHJvcHMiLCJwdXNoIiwicmVmIiwiX2ZldGNoSnNvbnAiLCJfZmV0Y2hKc29ucDIiLCJyZXNwIiwiY2xpbWIiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdB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QUNKaUwsT0FLWjlHLEVBQUEsV0FBQVQsY1Z5akJLLE9VempCQXdELFVBQVUsZUFDVDRELE9BekNaUixHQUFhbkcsRUFBQSxXQUFNdUQsVUErQ3pCNEMsR0FBSzNDLFdBQ0RuRCxhQUFjTCxFQUFBLFdBQU0wRCxVQUFVQyxPQUFPQyxZVitqQnhDakksRUFBUSxXVTVqQk13SyxFVjZqQmR2SyxFQUFPRCxRQUFVQSxFQUFRLGFBRUNJLEtBQUtXLE1BQVMsV0FJbkMsU0FBU2QsRUFBUUQsRUFBU0gsR0FFdWhCLEtBQU0sV0FNNWpCLFlBTUEsU0FBU1csR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsVUFBV0YsR0FKekZ3RCxPQUFPQyxlQUFlbEUsRUFBUyxjQUMzQm1FLE9BQU8sR0FLWCxJQUFJbUgsR0FBY3pMLEVXdm9CSSxHWHlvQmxCMEwsRUFBZS9LLEVBQXVCOEssR1d2b0JyQ1YsRUFBVSxTQUFDbEcsR0FDYixNQUFPNkcsR0FBQSx5REFBeUQ3RyxHQUMzRG1HLEtBQUssU0FBQVcsR0FDRixNQUFPQSxHQUFLaEksVUFJbEJpSSxHQUNGYixVWDJvQkg1SyxHQUFRLFdXeG9CTXlMLEVYeW9CZHhMLEVBQU9ELFFBQVVBLEVBQVEsYUFFQ0ksS0FBS1csTUFBUyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBSRUFDVCBIT1QgTE9BREVSICovIGlmIChmYWxzZSkgeyAoZnVuY3Rpb24gKCkgeyB2YXIgUmVhY3RIb3RBUEkgPSByZXF1aXJlKFwiL1VzZXJzL21pY2hlbGUvUHJvamVjdHMvcmVhY3QtY2xpbWItc29jaWFsL25vZGVfbW9kdWxlcy9yZWFjdC1ob3QtbG9hZGVyL25vZGVfbW9kdWxlcy9yZWFjdC1ob3QtYXBpL21vZHVsZXMvaW5kZXguanNcIiksIFJvb3RJbnN0YW5jZVByb3ZpZGVyID0gcmVxdWlyZShcIi9Vc2Vycy9taWNoZWxlL1Byb2plY3RzL3JlYWN0LWNsaW1iLXNvY2lhbC9ub2RlX21vZHVsZXMvcmVhY3QtaG90LWxvYWRlci9Sb290SW5zdGFuY2VQcm92aWRlci5qc1wiKSwgUmVhY3RNb3VudCA9IHJlcXVpcmUoXCJyZWFjdC9saWIvUmVhY3RNb3VudFwiKSwgUmVhY3QgPSByZXF1aXJlKFwicmVhY3RcIik7IG1vZHVsZS5tYWtlSG90ID0gbW9kdWxlLmhvdC5kYXRhID8gbW9kdWxlLmhvdC5kYXRhLm1ha2VIb3QgOiBSZWFjdEhvdEFQSShmdW5jdGlvbiAoKSB7IHJldHVybiBSb290SW5zdGFuY2VQcm92aWRlci5nZXRSb290SW5zdGFuY2VzKFJlYWN0TW91bnQpOyB9LCBSZWFjdCk7IH0pKCk7IH0gdHJ5IHsgKGZ1bmN0aW9uICgpIHtcblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdHZhciBfYXBwSnN4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfYXBwSnN4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FwcEpzeCk7XG5cdFxuXHRfYXBwSnN4MlsnZGVmYXVsdCddLnN0YXJ0KCk7XG5cdFxuXHQvKiBSRUFDVCBIT1QgTE9BREVSICovIH0pLmNhbGwodGhpcyk7IH0gZmluYWxseSB7IGlmIChmYWxzZSkgeyAoZnVuY3Rpb24gKCkgeyB2YXIgZm91bmRSZWFjdENsYXNzZXMgPSBtb2R1bGUuaG90LmRhdGEgJiYgbW9kdWxlLmhvdC5kYXRhLmZvdW5kUmVhY3RDbGFzc2VzIHx8IGZhbHNlOyBpZiAobW9kdWxlLmV4cG9ydHMgJiYgbW9kdWxlLm1ha2VIb3QpIHsgdmFyIG1ha2VFeHBvcnRzSG90ID0gcmVxdWlyZShcIi9Vc2Vycy9taWNoZWxlL1Byb2plY3RzL3JlYWN0LWNsaW1iLXNvY2lhbC9ub2RlX21vZHVsZXMvcmVhY3QtaG90LWxvYWRlci9tYWtlRXhwb3J0c0hvdC5qc1wiKTsgaWYgKG1ha2VFeHBvcnRzSG90KG1vZHVsZSwgcmVxdWlyZShcInJlYWN0XCIpKSkgeyBmb3VuZFJlYWN0Q2xhc3NlcyA9IHRydWU7IH0gdmFyIHNob3VsZEFjY2VwdE1vZHVsZSA9IHRydWUgJiYgZm91bmRSZWFjdENsYXNzZXM7IGlmIChzaG91bGRBY2NlcHRNb2R1bGUpIHsgbW9kdWxlLmhvdC5hY2NlcHQoZnVuY3Rpb24gKGVycikgeyBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJDYW5ub3Qgbm90IGFwcGx5IGhvdCB1cGRhdGUgdG8gXCIgKyBcImluZGV4LmpzXCIgKyBcIjogXCIgKyBlcnIubWVzc2FnZSk7IH0gfSk7IH0gfSBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24gKGRhdGEpIHsgZGF0YS5tYWtlSG90ID0gbW9kdWxlLm1ha2VIb3Q7IGRhdGEuZm91bmRSZWFjdENsYXNzZXMgPSBmb3VuZFJlYWN0Q2xhc3NlczsgfSk7IH0pKCk7IH0gfVxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdDtcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOyhmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdCAgaWYgKHRydWUpIHtcblx0ICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFtleHBvcnRzLCBtb2R1bGVdLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPSAoZmFjdG9yeSksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gKHR5cGVvZiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPT09ICdmdW5jdGlvbicgPyAoX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pKSA6IF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgZmFjdG9yeShleHBvcnRzLCBtb2R1bGUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgbW9kID0ge1xuXHQgICAgICBleHBvcnRzOiB7fVxuXHQgICAgfTtcblx0ICAgIGZhY3RvcnkobW9kLmV4cG9ydHMsIG1vZCk7XG5cdCAgICBnbG9iYWwuZmV0Y2hKc29ucCA9IG1vZC5leHBvcnRzO1xuXHQgIH1cblx0fSkodGhpcywgZnVuY3Rpb24gKGV4cG9ydHMsIG1vZHVsZSkge1xuXHQgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuXHQgICAgdGltZW91dDogNTAwMCxcblx0ICAgIGpzb25wQ2FsbGJhY2s6ICdjYWxsYmFjaydcblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBnZW5lcmF0ZUNhbGxiYWNrRnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gJ2pzb25wXycgKyBEYXRlLm5vdygpICsgJ18nICsgTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMDAwMDApO1xuXHQgIH1cblx0XG5cdCAgLy8gS25vd24gaXNzdWU6IFdpbGwgdGhyb3cgJ1VuY2F1Z2h0IFJlZmVyZW5jZUVycm9yOiBjYWxsYmFja18qKiogaXMgbm90IGRlZmluZWQnIGVycm9yIGlmIHJlcXVlc3QgdGltZW91dFxuXHQgIGZ1bmN0aW9uIGNsZWFyRnVuY3Rpb24oZnVuY3Rpb25OYW1lKSB7XG5cdCAgICAvLyBJRTggdGhyb3dzIGFuIGV4Y2VwdGlvbiB3aGVuIHlvdSB0cnkgdG8gZGVsZXRlIGEgcHJvcGVydHkgb24gd2luZG93XG5cdCAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xODI0MjI4Lzc1MTA4OVxuXHQgICAgdHJ5IHtcblx0ICAgICAgZGVsZXRlIHdpbmRvd1tmdW5jdGlvbk5hbWVdO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB3aW5kb3dbZnVuY3Rpb25OYW1lXSA9IHVuZGVmaW5lZDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlbW92ZVNjcmlwdChzY3JpcHRJZCkge1xuXHQgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNjcmlwdElkKTtcblx0ICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHQgIH1cblx0XG5cdCAgdmFyIGZldGNoSnNvbnAgPSBmdW5jdGlvbiBmZXRjaEpzb25wKHVybCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTtcblx0XG5cdCAgICB2YXIgdGltZW91dCA9IG9wdGlvbnMudGltZW91dCAhPSBudWxsID8gb3B0aW9ucy50aW1lb3V0IDogZGVmYXVsdE9wdGlvbnMudGltZW91dDtcblx0ICAgIHZhciBqc29ucENhbGxiYWNrID0gb3B0aW9ucy5qc29ucENhbGxiYWNrICE9IG51bGwgPyBvcHRpb25zLmpzb25wQ2FsbGJhY2sgOiBkZWZhdWx0T3B0aW9ucy5qc29ucENhbGxiYWNrO1xuXHRcblx0ICAgIHZhciB0aW1lb3V0SWQgPSB1bmRlZmluZWQ7XG5cdFxuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgdmFyIGNhbGxiYWNrRnVuY3Rpb24gPSBnZW5lcmF0ZUNhbGxiYWNrRnVuY3Rpb24oKTtcblx0XG5cdCAgICAgIHdpbmRvd1tjYWxsYmFja0Z1bmN0aW9uXSA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHQgICAgICAgIHJlc29sdmUoe1xuXHQgICAgICAgICAgb2s6IHRydWUsXG5cdCAgICAgICAgICAvLyBrZWVwIGNvbnNpc3RlbnQgd2l0aCBmZXRjaCBBUElcblx0ICAgICAgICAgIGpzb246IGZ1bmN0aW9uIGpzb24oKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzcG9uc2UpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBpZiAodGltZW91dElkKSBjbGVhclRpbWVvdXQodGltZW91dElkKTtcblx0XG5cdCAgICAgICAgcmVtb3ZlU2NyaXB0KGpzb25wQ2FsbGJhY2sgKyAnXycgKyBjYWxsYmFja0Z1bmN0aW9uKTtcblx0XG5cdCAgICAgICAgY2xlYXJGdW5jdGlvbihjYWxsYmFja0Z1bmN0aW9uKTtcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIC8vIENoZWNrIGlmIHRoZSB1c2VyIHNldCB0aGVpciBvd24gcGFyYW1zLCBhbmQgaWYgbm90IGFkZCBhID8gdG8gc3RhcnQgYSBsaXN0IG9mIHBhcmFtc1xuXHQgICAgICB1cmwgKz0gdXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJic7XG5cdFxuXHQgICAgICB2YXIganNvbnBTY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblx0ICAgICAganNvbnBTY3JpcHQuc2V0QXR0cmlidXRlKFwic3JjXCIsIHVybCArIGpzb25wQ2FsbGJhY2sgKyAnPScgKyBjYWxsYmFja0Z1bmN0aW9uKTtcblx0ICAgICAganNvbnBTY3JpcHQuaWQgPSBqc29ucENhbGxiYWNrICsgJ18nICsgY2FsbGJhY2tGdW5jdGlvbjtcblx0ICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKGpzb25wU2NyaXB0KTtcblx0XG5cdCAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0pTT05QIHJlcXVlc3QgdG8gJyArIHVybCArICcgdGltZWQgb3V0JykpO1xuXHRcblx0ICAgICAgICBjbGVhckZ1bmN0aW9uKGNhbGxiYWNrRnVuY3Rpb24pO1xuXHQgICAgICAgIHJlbW92ZVNjcmlwdChqc29ucENhbGxiYWNrICsgJ18nICsgY2FsbGJhY2tGdW5jdGlvbik7XG5cdCAgICAgIH0sIHRpbWVvdXQpO1xuXHQgICAgfSk7XG5cdCAgfTtcblx0XG5cdCAgLy8gZXhwb3J0IGFzIGdsb2JhbCBmdW5jdGlvblxuXHQgIC8qXG5cdCAgbGV0IGxvY2FsO1xuXHQgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgbG9jYWwgPSBnbG9iYWw7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIGxvY2FsID0gc2VsZjtcblx0ICB9IGVsc2Uge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBcblx0ICBsb2NhbC5mZXRjaEpzb25wID0gZmV0Y2hKc29ucDtcblx0ICAqL1xuXHRcblx0ICBtb2R1bGUuZXhwb3J0cyA9IGZldGNoSnNvbnA7XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogUkVBQ1QgSE9UIExPQURFUiAqLyBpZiAoZmFsc2UpIHsgKGZ1bmN0aW9uICgpIHsgdmFyIFJlYWN0SG90QVBJID0gcmVxdWlyZShcIi9Vc2Vycy9taWNoZWxlL1Byb2plY3RzL3JlYWN0LWNsaW1iLXNvY2lhbC9ub2RlX21vZHVsZXMvcmVhY3QtaG90LWxvYWRlci9ub2RlX21vZHVsZXMvcmVhY3QtaG90LWFwaS9tb2R1bGVzL2luZGV4LmpzXCIpLCBSb290SW5zdGFuY2VQcm92aWRlciA9IHJlcXVpcmUoXCIvVXNlcnMvbWljaGVsZS9Qcm9qZWN0cy9yZWFjdC1jbGltYi1zb2NpYWwvbm9kZV9tb2R1bGVzL3JlYWN0LWhvdC1sb2FkZXIvUm9vdEluc3RhbmNlUHJvdmlkZXIuanNcIiksIFJlYWN0TW91bnQgPSByZXF1aXJlKFwicmVhY3QvbGliL1JlYWN0TW91bnRcIiksIFJlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpOyBtb2R1bGUubWFrZUhvdCA9IG1vZHVsZS5ob3QuZGF0YSA/IG1vZHVsZS5ob3QuZGF0YS5tYWtlSG90IDogUmVhY3RIb3RBUEkoZnVuY3Rpb24gKCkgeyByZXR1cm4gUm9vdEluc3RhbmNlUHJvdmlkZXIuZ2V0Um9vdEluc3RhbmNlcyhSZWFjdE1vdW50KTsgfSwgUmVhY3QpOyB9KSgpOyB9IHRyeSB7IChmdW5jdGlvbiAoKSB7XG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX2NvbXBvbmVudHNXYWxsSnN4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdHZhciBfY29tcG9uZW50c1dhbGxKc3gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tcG9uZW50c1dhbGxKc3gpO1xuXHRcblx0dmFyIEJvb3RzdHJhcHBlciA9IHtcblx0ICAgIHN0YXJ0OiBmdW5jdGlvbiBzdGFydCgpIHtcblx0ICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10ucmVuZGVyKF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KF9jb21wb25lbnRzV2FsbEpzeDJbJ2RlZmF1bHQnXSwgeyBjb2xsZWN0aW9uSWQ6ICc1NWE3ZDI5OTQ1Mjg0ZWY2MGMwY2U3NzInIH0pLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwJykpO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0c1snZGVmYXVsdCddID0gQm9vdHN0cmFwcGVyO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXHQvKiBSRUFDVCBIT1QgTE9BREVSICovIH0pLmNhbGwodGhpcyk7IH0gZmluYWxseSB7IGlmIChmYWxzZSkgeyAoZnVuY3Rpb24gKCkgeyB2YXIgZm91bmRSZWFjdENsYXNzZXMgPSBtb2R1bGUuaG90LmRhdGEgJiYgbW9kdWxlLmhvdC5kYXRhLmZvdW5kUmVhY3RDbGFzc2VzIHx8IGZhbHNlOyBpZiAobW9kdWxlLmV4cG9ydHMgJiYgbW9kdWxlLm1ha2VIb3QpIHsgdmFyIG1ha2VFeHBvcnRzSG90ID0gcmVxdWlyZShcIi9Vc2Vycy9taWNoZWxlL1Byb2plY3RzL3JlYWN0LWNsaW1iLXNvY2lhbC9ub2RlX21vZHVsZXMvcmVhY3QtaG90LWxvYWRlci9tYWtlRXhwb3J0c0hvdC5qc1wiKTsgaWYgKG1ha2VFeHBvcnRzSG90KG1vZHVsZSwgcmVxdWlyZShcInJlYWN0XCIpKSkgeyBmb3VuZFJlYWN0Q2xhc3NlcyA9IHRydWU7IH0gdmFyIHNob3VsZEFjY2VwdE1vZHVsZSA9IHRydWUgJiYgZm91bmRSZWFjdENsYXNzZXM7IGlmIChzaG91bGRBY2NlcHRNb2R1bGUpIHsgbW9kdWxlLmhvdC5hY2NlcHQoZnVuY3Rpb24gKGVycikgeyBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJDYW5ub3Qgbm90IGFwcGx5IGhvdCB1cGRhdGUgdG8gXCIgKyBcImFwcC5qc3hcIiArIFwiOiBcIiArIGVyci5tZXNzYWdlKTsgfSB9KTsgfSB9IG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbiAoZGF0YSkgeyBkYXRhLm1ha2VIb3QgPSBtb2R1bGUubWFrZUhvdDsgZGF0YS5mb3VuZFJlYWN0Q2xhc3NlcyA9IGZvdW5kUmVhY3RDbGFzc2VzOyB9KTsgfSkoKTsgfSB9XG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBSRUFDVCBIT1QgTE9BREVSICovIGlmIChmYWxzZSkgeyAoZnVuY3Rpb24gKCkgeyB2YXIgUmVhY3RIb3RBUEkgPSByZXF1aXJlKFwiL1VzZXJzL21pY2hlbGUvUHJvamVjdHMvcmVhY3QtY2xpbWItc29jaWFsL25vZGVfbW9kdWxlcy9yZWFjdC1ob3QtbG9hZGVyL25vZGVfbW9kdWxlcy9yZWFjdC1ob3QtYXBpL21vZHVsZXMvaW5kZXguanNcIiksIFJvb3RJbnN0YW5jZVByb3ZpZGVyID0gcmVxdWlyZShcIi9Vc2Vycy9taWNoZWxlL1Byb2plY3RzL3JlYWN0LWNsaW1iLXNvY2lhbC9ub2RlX21vZHVsZXMvcmVhY3QtaG90LWxvYWRlci9Sb290SW5zdGFuY2VQcm92aWRlci5qc1wiKSwgUmVhY3RNb3VudCA9IHJlcXVpcmUoXCJyZWFjdC9saWIvUmVhY3RNb3VudFwiKSwgUmVhY3QgPSByZXF1aXJlKFwicmVhY3RcIik7IG1vZHVsZS5tYWtlSG90ID0gbW9kdWxlLmhvdC5kYXRhID8gbW9kdWxlLmhvdC5kYXRhLm1ha2VIb3QgOiBSZWFjdEhvdEFQSShmdW5jdGlvbiAoKSB7IHJldHVybiBSb290SW5zdGFuY2VQcm92aWRlci5nZXRSb290SW5zdGFuY2VzKFJlYWN0TW91bnQpOyB9LCBSZWFjdCk7IH0pKCk7IH0gdHJ5IHsgKGZ1bmN0aW9uICgpIHtcblx0XG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdHZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94LCBfeDIsIF94MykgeyB2YXIgX2FnYWluID0gdHJ1ZTsgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7IHZhciBvYmplY3QgPSBfeCwgcHJvcGVydHkgPSBfeDIsIHJlY2VpdmVyID0gX3gzOyBkZXNjID0gcGFyZW50ID0gZ2V0dGVyID0gdW5kZWZpbmVkOyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94ID0gcGFyZW50OyBfeDIgPSBwcm9wZXJ0eTsgX3gzID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKFwidmFsdWVcIiBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIEF1dGhvciA9IChmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuXHQgICAgX2luaGVyaXRzKEF1dGhvciwgX1JlYWN0JENvbXBvbmVudCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gQXV0aG9yKCkge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdXRob3IpO1xuXHRcblx0ICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihBdXRob3IucHJvdG90eXBlKSwgXCJjb25zdHJ1Y3RvclwiLCB0aGlzKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhBdXRob3IsIFt7XG5cdCAgICAgICAga2V5OiBcInJlbmRlclwiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgIFwiYVwiLFxuXHQgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IFwiY2xpbWJfX3RpbGVfX2F1dGhvclwiLFxuXHQgICAgICAgICAgICAgICAgICAgIGhyZWY6IHRoaXMucHJvcHMubGluayB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImltZ1wiLCB7IHNyYzogdGhpcy5wcm9wcy5waWN0dXJlLFxuXHQgICAgICAgICAgICAgICAgICAgIGFsdDogXCJQcm9maWxlIHBpYyBvZiBcIiArIHRoaXMucHJvcHMubmFtZSB9KSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgXCJoNFwiLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBcImNsaW1iX190aWxlX19hdXRob3JfX3VzZXJuYW1lXCIgfSxcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnVzZXJuYW1lXG5cdCAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBBdXRob3I7XG5cdH0pKF9yZWFjdDJbXCJkZWZhdWx0XCJdLkNvbXBvbmVudCk7XG5cdFxuXHRBdXRob3IucHJvcFR5cGVzID0ge307XG5cdFxuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IEF1dGhvcjtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTtcblxuXHQvKiBSRUFDVCBIT1QgTE9BREVSICovIH0pLmNhbGwodGhpcyk7IH0gZmluYWxseSB7IGlmIChmYWxzZSkgeyAoZnVuY3Rpb24gKCkgeyB2YXIgZm91bmRSZWFjdENsYXNzZXMgPSBtb2R1bGUuaG90LmRhdGEgJiYgbW9kdWxlLmhvdC5kYXRhLmZvdW5kUmVhY3RDbGFzc2VzIHx8IGZhbHNlOyBpZiAobW9kdWxlLmV4cG9ydHMgJiYgbW9kdWxlLm1ha2VIb3QpIHsgdmFyIG1ha2VFeHBvcnRzSG90ID0gcmVxdWlyZShcIi9Vc2Vycy9taWNoZWxlL1Byb2plY3RzL3JlYWN0LWNsaW1iLXNvY2lhbC9ub2RlX21vZHVsZXMvcmVhY3QtaG90LWxvYWRlci9tYWtlRXhwb3J0c0hvdC5qc1wiKTsgaWYgKG1ha2VFeHBvcnRzSG90KG1vZHVsZSwgcmVxdWlyZShcInJlYWN0XCIpKSkgeyBmb3VuZFJlYWN0Q2xhc3NlcyA9IHRydWU7IH0gdmFyIHNob3VsZEFjY2VwdE1vZHVsZSA9IHRydWUgJiYgZm91bmRSZWFjdENsYXNzZXM7IGlmIChzaG91bGRBY2NlcHRNb2R1bGUpIHsgbW9kdWxlLmhvdC5hY2NlcHQoZnVuY3Rpb24gKGVycikgeyBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJDYW5ub3Qgbm90IGFwcGx5IGhvdCB1cGRhdGUgdG8gXCIgKyBcIkF1dGhvci5qc3hcIiArIFwiOiBcIiArIGVyci5tZXNzYWdlKTsgfSB9KTsgfSB9IG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbiAoZGF0YSkgeyBkYXRhLm1ha2VIb3QgPSBtb2R1bGUubWFrZUhvdDsgZGF0YS5mb3VuZFJlYWN0Q2xhc3NlcyA9IGZvdW5kUmVhY3RDbGFzc2VzOyB9KTsgfSkoKTsgfSB9XG5cbi8qKiovIH0sXG4vKiA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBSRUFDVCBIT1QgTE9BREVSICovIGlmIChmYWxzZSkgeyAoZnVuY3Rpb24gKCkgeyB2YXIgUmVhY3RIb3RBUEkgPSByZXF1aXJlKFwiL1VzZXJzL21pY2hlbGUvUHJvamVjdHMvcmVhY3QtY2xpbWItc29jaWFsL25vZGVfbW9kdWxlcy9yZWFjdC1ob3QtbG9hZGVyL25vZGVfbW9kdWxlcy9yZWFjdC1ob3QtYXBpL21vZHVsZXMvaW5kZXguanNcIiksIFJvb3RJbnN0YW5jZVByb3ZpZGVyID0gcmVxdWlyZShcIi9Vc2Vycy9taWNoZWxlL1Byb2plY3RzL3JlYWN0LWNsaW1iLXNvY2lhbC9ub2RlX21vZHVsZXMvcmVhY3QtaG90LWxvYWRlci9Sb290SW5zdGFuY2VQcm92aWRlci5qc1wiKSwgUmVhY3RNb3VudCA9IHJlcXVpcmUoXCJyZWFjdC9saWIvUmVhY3RNb3VudFwiKSwgUmVhY3QgPSByZXF1aXJlKFwicmVhY3RcIik7IG1vZHVsZS5tYWtlSG90ID0gbW9kdWxlLmhvdC5kYXRhID8gbW9kdWxlLmhvdC5kYXRhLm1ha2VIb3QgOiBSZWFjdEhvdEFQSShmdW5jdGlvbiAoKSB7IHJldHVybiBSb290SW5zdGFuY2VQcm92aWRlci5nZXRSb290SW5zdGFuY2VzKFJlYWN0TW91bnQpOyB9LCBSZWFjdCk7IH0pKCk7IH0gdHJ5IHsgKGZ1bmN0aW9uICgpIHtcblx0XG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdHZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94LCBfeDIsIF94MykgeyB2YXIgX2FnYWluID0gdHJ1ZTsgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7IHZhciBvYmplY3QgPSBfeCwgcHJvcGVydHkgPSBfeDIsIHJlY2VpdmVyID0gX3gzOyBkZXNjID0gcGFyZW50ID0gZ2V0dGVyID0gdW5kZWZpbmVkOyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94ID0gcGFyZW50OyBfeDIgPSBwcm9wZXJ0eTsgX3gzID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKFwidmFsdWVcIiBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIEltYWdlID0gKGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG5cdCAgICBfaW5oZXJpdHMoSW1hZ2UsIF9SZWFjdCRDb21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIEltYWdlKCkge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbWFnZSk7XG5cdFxuXHQgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEltYWdlLnByb3RvdHlwZSksIFwiY29uc3RydWN0b3JcIiwgdGhpcykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoSW1hZ2UsIFt7XG5cdCAgICAgICAga2V5OiBcInJlbmRlclwiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiaW1nXCIsIHsgY2xhc3NOYW1lOiBcImNsaW1iX190aWxlX19pbWFnZVwiLFxuXHQgICAgICAgICAgICAgICAgc3JjOiB0aGlzLnByb3BzLnNyYyB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIEltYWdlO1xuXHR9KShfcmVhY3QyW1wiZGVmYXVsdFwiXS5Db21wb25lbnQpO1xuXHRcblx0SW1hZ2UucHJvcFR5cGVzID0ge1xuXHQgICAgc3JjOiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG5cdCAgICB3aWR0aDogX3JlYWN0MltcImRlZmF1bHRcIl0uUHJvcFR5cGVzLm51bWJlcixcblx0ICAgIGhlaWdodDogX3JlYWN0MltcImRlZmF1bHRcIl0uUHJvcFR5cGVzLm51bWJlclxuXHR9O1xuXHRcblx0ZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBJbWFnZTtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTtcblxuXHQvKiBSRUFDVCBIT1QgTE9BREVSICovIH0pLmNhbGwodGhpcyk7IH0gZmluYWxseSB7IGlmIChmYWxzZSkgeyAoZnVuY3Rpb24gKCkgeyB2YXIgZm91bmRSZWFjdENsYXNzZXMgPSBtb2R1bGUuaG90LmRhdGEgJiYgbW9kdWxlLmhvdC5kYXRhLmZvdW5kUmVhY3RDbGFzc2VzIHx8IGZhbHNlOyBpZiAobW9kdWxlLmV4cG9ydHMgJiYgbW9kdWxlLm1ha2VIb3QpIHsgdmFyIG1ha2VFeHBvcnRzSG90ID0gcmVxdWlyZShcIi9Vc2Vycy9taWNoZWxlL1Byb2plY3RzL3JlYWN0LWNsaW1iLXNvY2lhbC9ub2RlX21vZHVsZXMvcmVhY3QtaG90LWxvYWRlci9tYWtlRXhwb3J0c0hvdC5qc1wiKTsgaWYgKG1ha2VFeHBvcnRzSG90KG1vZHVsZSwgcmVxdWlyZShcInJlYWN0XCIpKSkgeyBmb3VuZFJlYWN0Q2xhc3NlcyA9IHRydWU7IH0gdmFyIHNob3VsZEFjY2VwdE1vZHVsZSA9IHRydWUgJiYgZm91bmRSZWFjdENsYXNzZXM7IGlmIChzaG91bGRBY2NlcHRNb2R1bGUpIHsgbW9kdWxlLmhvdC5hY2NlcHQoZnVuY3Rpb24gKGVycikgeyBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJDYW5ub3Qgbm90IGFwcGx5IGhvdCB1cGRhdGUgdG8gXCIgKyBcIkltYWdlLmpzeFwiICsgXCI6IFwiICsgZXJyLm1lc3NhZ2UpOyB9IH0pOyB9IH0gbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uIChkYXRhKSB7IGRhdGEubWFrZUhvdCA9IG1vZHVsZS5tYWtlSG90OyBkYXRhLmZvdW5kUmVhY3RDbGFzc2VzID0gZm91bmRSZWFjdENsYXNzZXM7IH0pOyB9KSgpOyB9IH1cblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFJFQUNUIEhPVCBMT0FERVIgKi8gaWYgKGZhbHNlKSB7IChmdW5jdGlvbiAoKSB7IHZhciBSZWFjdEhvdEFQSSA9IHJlcXVpcmUoXCIvVXNlcnMvbWljaGVsZS9Qcm9qZWN0cy9yZWFjdC1jbGltYi1zb2NpYWwvbm9kZV9tb2R1bGVzL3JlYWN0LWhvdC1sb2FkZXIvbm9kZV9tb2R1bGVzL3JlYWN0LWhvdC1hcGkvbW9kdWxlcy9pbmRleC5qc1wiKSwgUm9vdEluc3RhbmNlUHJvdmlkZXIgPSByZXF1aXJlKFwiL1VzZXJzL21pY2hlbGUvUHJvamVjdHMvcmVhY3QtY2xpbWItc29jaWFsL25vZGVfbW9kdWxlcy9yZWFjdC1ob3QtbG9hZGVyL1Jvb3RJbnN0YW5jZVByb3ZpZGVyLmpzXCIpLCBSZWFjdE1vdW50ID0gcmVxdWlyZShcInJlYWN0L2xpYi9SZWFjdE1vdW50XCIpLCBSZWFjdCA9IHJlcXVpcmUoXCJyZWFjdFwiKTsgbW9kdWxlLm1ha2VIb3QgPSBtb2R1bGUuaG90LmRhdGEgPyBtb2R1bGUuaG90LmRhdGEubWFrZUhvdCA6IFJlYWN0SG90QVBJKGZ1bmN0aW9uICgpIHsgcmV0dXJuIFJvb3RJbnN0YW5jZVByb3ZpZGVyLmdldFJvb3RJbnN0YW5jZXMoUmVhY3RNb3VudCk7IH0sIFJlYWN0KTsgfSkoKTsgfSB0cnkgeyAoZnVuY3Rpb24gKCkge1xuXHRcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IGRlc2MgPSBwYXJlbnQgPSBnZXR0ZXIgPSB1bmRlZmluZWQ7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9IH07XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgTWVzc2FnZSA9IChmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuXHQgICAgX2luaGVyaXRzKE1lc3NhZ2UsIF9SZWFjdCRDb21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIE1lc3NhZ2UoKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1lc3NhZ2UpO1xuXHRcblx0ICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihNZXNzYWdlLnByb3RvdHlwZSksIFwiY29uc3RydWN0b3JcIiwgdGhpcykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoTWVzc2FnZSwgW3tcblx0ICAgICAgICBrZXk6IFwicmVuZGVyXCIsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY2xpbWJfX3RpbGVfX21lc3NhZ2VcIixcblx0ICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7IF9faHRtbDogdGhpcy5wcm9wcy5ib2R5IH0gfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBNZXNzYWdlO1xuXHR9KShfcmVhY3QyW1wiZGVmYXVsdFwiXS5Db21wb25lbnQpO1xuXHRcblx0TWVzc2FnZS5wcm9wVHlwZXMgPSB7XG5cdCAgICBib2R5OiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcblx0fTtcblx0XG5cdGV4cG9ydHNbXCJkZWZhdWx0XCJdID0gTWVzc2FnZTtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTtcblxuXHQvKiBSRUFDVCBIT1QgTE9BREVSICovIH0pLmNhbGwodGhpcyk7IH0gZmluYWxseSB7IGlmIChmYWxzZSkgeyAoZnVuY3Rpb24gKCkgeyB2YXIgZm91bmRSZWFjdENsYXNzZXMgPSBtb2R1bGUuaG90LmRhdGEgJiYgbW9kdWxlLmhvdC5kYXRhLmZvdW5kUmVhY3RDbGFzc2VzIHx8IGZhbHNlOyBpZiAobW9kdWxlLmV4cG9ydHMgJiYgbW9kdWxlLm1ha2VIb3QpIHsgdmFyIG1ha2VFeHBvcnRzSG90ID0gcmVxdWlyZShcIi9Vc2Vycy9taWNoZWxlL1Byb2plY3RzL3JlYWN0LWNsaW1iLXNvY2lhbC9ub2RlX21vZHVsZXMvcmVhY3QtaG90LWxvYWRlci9tYWtlRXhwb3J0c0hvdC5qc1wiKTsgaWYgKG1ha2VFeHBvcnRzSG90KG1vZHVsZSwgcmVxdWlyZShcInJlYWN0XCIpKSkgeyBmb3VuZFJlYWN0Q2xhc3NlcyA9IHRydWU7IH0gdmFyIHNob3VsZEFjY2VwdE1vZHVsZSA9IHRydWUgJiYgZm91bmRSZWFjdENsYXNzZXM7IGlmIChzaG91bGRBY2NlcHRNb2R1bGUpIHsgbW9kdWxlLmhvdC5hY2NlcHQoZnVuY3Rpb24gKGVycikgeyBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJDYW5ub3Qgbm90IGFwcGx5IGhvdCB1cGRhdGUgdG8gXCIgKyBcIk1lc3NhZ2UuanN4XCIgKyBcIjogXCIgKyBlcnIubWVzc2FnZSk7IH0gfSk7IH0gfSBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24gKGRhdGEpIHsgZGF0YS5tYWtlSG90ID0gbW9kdWxlLm1ha2VIb3Q7IGRhdGEuZm91bmRSZWFjdENsYXNzZXMgPSBmb3VuZFJlYWN0Q2xhc3NlczsgfSk7IH0pKCk7IH0gfVxuXG4vKioqLyB9LFxuLyogNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogUkVBQ1QgSE9UIExPQURFUiAqLyBpZiAoZmFsc2UpIHsgKGZ1bmN0aW9uICgpIHsgdmFyIFJlYWN0SG90QVBJID0gcmVxdWlyZShcIi9Vc2Vycy9taWNoZWxlL1Byb2plY3RzL3JlYWN0LWNsaW1iLXNvY2lhbC9ub2RlX21vZHVsZXMvcmVhY3QtaG90LWxvYWRlci9ub2RlX21vZHVsZXMvcmVhY3QtaG90LWFwaS9tb2R1bGVzL2luZGV4LmpzXCIpLCBSb290SW5zdGFuY2VQcm92aWRlciA9IHJlcXVpcmUoXCIvVXNlcnMvbWljaGVsZS9Qcm9qZWN0cy9yZWFjdC1jbGltYi1zb2NpYWwvbm9kZV9tb2R1bGVzL3JlYWN0LWhvdC1sb2FkZXIvUm9vdEluc3RhbmNlUHJvdmlkZXIuanNcIiksIFJlYWN0TW91bnQgPSByZXF1aXJlKFwicmVhY3QvbGliL1JlYWN0TW91bnRcIiksIFJlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpOyBtb2R1bGUubWFrZUhvdCA9IG1vZHVsZS5ob3QuZGF0YSA/IG1vZHVsZS5ob3QuZGF0YS5tYWtlSG90IDogUmVhY3RIb3RBUEkoZnVuY3Rpb24gKCkgeyByZXR1cm4gUm9vdEluc3RhbmNlUHJvdmlkZXIuZ2V0Um9vdEluc3RhbmNlcyhSZWFjdE1vdW50KTsgfSwgUmVhY3QpOyB9KSgpOyB9IHRyeSB7IChmdW5jdGlvbiAoKSB7XG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cdFxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChfeCwgX3gyLCBfeDMpIHsgdmFyIF9hZ2FpbiA9IHRydWU7IF9mdW5jdGlvbjogd2hpbGUgKF9hZ2FpbikgeyB2YXIgb2JqZWN0ID0gX3gsIHByb3BlcnR5ID0gX3gyLCByZWNlaXZlciA9IF94MzsgZGVzYyA9IHBhcmVudCA9IGdldHRlciA9IHVuZGVmaW5lZDsgX2FnYWluID0gZmFsc2U7IGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyBfeCA9IHBhcmVudDsgX3gyID0gcHJvcGVydHk7IF94MyA9IHJlY2VpdmVyOyBfYWdhaW4gPSB0cnVlOyBjb250aW51ZSBfZnVuY3Rpb247IH0gfSBlbHNlIGlmICgndmFsdWUnIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9IH07XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICcgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9JbWFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX0ltYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ltYWdlKTtcblx0XG5cdHZhciBfTWVzc2FnZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX01lc3NhZ2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTWVzc2FnZSk7XG5cdFxuXHR2YXIgX0F1dGhvciA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX0F1dGhvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9BdXRob3IpO1xuXHRcblx0dmFyIFRpbGUgPSAoZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcblx0ICAgIF9pbmhlcml0cyhUaWxlLCBfUmVhY3QkQ29tcG9uZW50KTtcblx0XG5cdCAgICBmdW5jdGlvbiBUaWxlKHByb3BzKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRpbGUpO1xuXHRcblx0ICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihUaWxlLnByb3RvdHlwZSksICdjb25zdHJ1Y3RvcicsIHRoaXMpLmNhbGwodGhpcywgcHJvcHMpO1xuXHQgICAgICAgIHRoaXMuY3JlYXRlSW1hZ2UuYmluZCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmNyZWF0ZU1lc3NhZ2UuYmluZCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmNyZWF0ZUNsYXNzU3RyaW5nLmJpbmQodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKFRpbGUsIFt7XG5cdCAgICAgICAga2V5OiAnY3JlYXRlSW1hZ2UnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVJbWFnZSgpIHtcblx0XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmltYWdlICE9PSBudWxsKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgX3Byb3BzJGltYWdlID0gdGhpcy5wcm9wcy5pbWFnZTtcblx0ICAgICAgICAgICAgICAgIHZhciBzcmMgPSBfcHJvcHMkaW1hZ2UudXJsO1xuXHQgICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gX3Byb3BzJGltYWdlLndpZHRoO1xuXHQgICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IF9wcm9wcyRpbWFnZS5oZWlnaHQ7XG5cdFxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KF9JbWFnZTJbJ2RlZmF1bHQnXSwgeyBzcmM6IHNyYyxcblx0ICAgICAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsXG5cdCAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQgfSk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHJldHVybiBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdjcmVhdGVNZXNzYWdlJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlTWVzc2FnZSgpIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMubWVzc2FnZSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KF9NZXNzYWdlMlsnZGVmYXVsdCddLCB7IGJvZHk6IHRoaXMucHJvcHMubWVzc2FnZSB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnY3JlYXRlQ2xhc3NTdHJpbmcnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVDbGFzc1N0cmluZygpIHtcblx0XG5cdCAgICAgICAgICAgIHZhciBjbGFzc1N0cmluZyA9ICdjbGltYl9fdGlsZSBjbGltYl9fdGlsZS0tJyArIHRoaXMucHJvcHMuc291cmNlX3R5cGU7XG5cdFxuXHQgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5pbWFnZSkge1xuXHQgICAgICAgICAgICAgICAgY2xhc3NTdHJpbmcgKz0gJyBjbGltYl9fdGlsZS0taGFzLW1lZGlhIGNsaW1iX190aWxlLS1oYXMtaW1hZ2UnO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy52aWRlb191cmwpIHtcblx0ICAgICAgICAgICAgICAgIGNsYXNzU3RyaW5nICs9ICcgY2xpbWJfX3RpbGUtLWhhcy1tZWRpYSBjbGltYl9fdGlsZS0taGFzLXZpZGVvJztcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIGNsYXNzU3RyaW5nO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdFxuXHQgICAgICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmNyZWF0ZUltYWdlKCk7XG5cdCAgICAgICAgICAgIHZhciBtZXNzYWdlID0gdGhpcy5jcmVhdGVNZXNzYWdlKCk7XG5cdCAgICAgICAgICAgIHZhciBjbGFzc1N0cmluZyA9IHRoaXMuY3JlYXRlQ2xhc3NTdHJpbmcoKTtcblx0ICAgICAgICAgICAgdmFyIGF1dGhvciA9IHRoaXMucHJvcHMuYXV0aG9yO1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogY2xhc3NTdHJpbmcgfSxcblx0ICAgICAgICAgICAgICAgIGltYWdlLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjbGltYl9fdGlsZV9fY29udGVudCcgfSxcblx0ICAgICAgICAgICAgICAgICAgICBtZXNzYWdlXG5cdCAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoX0F1dGhvcjJbJ2RlZmF1bHQnXSwgYXV0aG9yKVxuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gVGlsZTtcblx0fSkoX3JlYWN0MlsnZGVmYXVsdCddLkNvbXBvbmVudCk7XG5cdFxuXHRUaWxlLnByb3BUeXBlcyA9IHtcblx0XG5cdCAgICAvLyBSZXF1aXJlZCBhdHRyc1xuXHQgICAgbGluazogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcblx0ICAgIHNvdXJjZV90eXBlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXHQgICAgdGltZXN0YW1wOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuXHQgICAgYXV0aG9yOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnNoYXBlKHtcblx0ICAgICAgICB1c2VybmFtZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcblx0ICAgICAgICBwaWN0dXJlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXHQgICAgICAgIGxpbms6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcblx0ICAgIH0pLFxuXHRcblx0ICAgIC8vIE9wdGlvbmFsIGF0dHJzXG5cdCAgICBtZXNzYWdlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZyxcblx0ICAgIHZpZGVvX3NyYzogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICBpbWFnZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zaGFwZSh7XG5cdCAgICAgICAgdXJsOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXHQgICAgICAgIHdpZHRoOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuXHQgICAgICAgIGhlaWdodDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZFxuXHQgICAgfSlcblx0XG5cdH07XG5cdFxuXHRleHBvcnRzWydkZWZhdWx0J10gPSBUaWxlO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXHQvKiBSRUFDVCBIT1QgTE9BREVSICovIH0pLmNhbGwodGhpcyk7IH0gZmluYWxseSB7IGlmIChmYWxzZSkgeyAoZnVuY3Rpb24gKCkgeyB2YXIgZm91bmRSZWFjdENsYXNzZXMgPSBtb2R1bGUuaG90LmRhdGEgJiYgbW9kdWxlLmhvdC5kYXRhLmZvdW5kUmVhY3RDbGFzc2VzIHx8IGZhbHNlOyBpZiAobW9kdWxlLmV4cG9ydHMgJiYgbW9kdWxlLm1ha2VIb3QpIHsgdmFyIG1ha2VFeHBvcnRzSG90ID0gcmVxdWlyZShcIi9Vc2Vycy9taWNoZWxlL1Byb2plY3RzL3JlYWN0LWNsaW1iLXNvY2lhbC9ub2RlX21vZHVsZXMvcmVhY3QtaG90LWxvYWRlci9tYWtlRXhwb3J0c0hvdC5qc1wiKTsgaWYgKG1ha2VFeHBvcnRzSG90KG1vZHVsZSwgcmVxdWlyZShcInJlYWN0XCIpKSkgeyBmb3VuZFJlYWN0Q2xhc3NlcyA9IHRydWU7IH0gdmFyIHNob3VsZEFjY2VwdE1vZHVsZSA9IHRydWUgJiYgZm91bmRSZWFjdENsYXNzZXM7IGlmIChzaG91bGRBY2NlcHRNb2R1bGUpIHsgbW9kdWxlLmhvdC5hY2NlcHQoZnVuY3Rpb24gKGVycikgeyBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJDYW5ub3Qgbm90IGFwcGx5IGhvdCB1cGRhdGUgdG8gXCIgKyBcIlRpbGUuanN4XCIgKyBcIjogXCIgKyBlcnIubWVzc2FnZSk7IH0gfSk7IH0gfSBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24gKGRhdGEpIHsgZGF0YS5tYWtlSG90ID0gbW9kdWxlLm1ha2VIb3Q7IGRhdGEuZm91bmRSZWFjdENsYXNzZXMgPSBmb3VuZFJlYWN0Q2xhc3NlczsgfSk7IH0pKCk7IH0gfVxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogUkVBQ1QgSE9UIExPQURFUiAqLyBpZiAoZmFsc2UpIHsgKGZ1bmN0aW9uICgpIHsgdmFyIFJlYWN0SG90QVBJID0gcmVxdWlyZShcIi9Vc2Vycy9taWNoZWxlL1Byb2plY3RzL3JlYWN0LWNsaW1iLXNvY2lhbC9ub2RlX21vZHVsZXMvcmVhY3QtaG90LWxvYWRlci9ub2RlX21vZHVsZXMvcmVhY3QtaG90LWFwaS9tb2R1bGVzL2luZGV4LmpzXCIpLCBSb290SW5zdGFuY2VQcm92aWRlciA9IHJlcXVpcmUoXCIvVXNlcnMvbWljaGVsZS9Qcm9qZWN0cy9yZWFjdC1jbGltYi1zb2NpYWwvbm9kZV9tb2R1bGVzL3JlYWN0LWhvdC1sb2FkZXIvUm9vdEluc3RhbmNlUHJvdmlkZXIuanNcIiksIFJlYWN0TW91bnQgPSByZXF1aXJlKFwicmVhY3QvbGliL1JlYWN0TW91bnRcIiksIFJlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpOyBtb2R1bGUubWFrZUhvdCA9IG1vZHVsZS5ob3QuZGF0YSA/IG1vZHVsZS5ob3QuZGF0YS5tYWtlSG90IDogUmVhY3RIb3RBUEkoZnVuY3Rpb24gKCkgeyByZXR1cm4gUm9vdEluc3RhbmNlUHJvdmlkZXIuZ2V0Um9vdEluc3RhbmNlcyhSZWFjdE1vdW50KTsgfSwgUmVhY3QpOyB9KSgpOyB9IHRyeSB7IChmdW5jdGlvbiAoKSB7XG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IGRlc2MgPSBwYXJlbnQgPSBnZXR0ZXIgPSB1bmRlZmluZWQ7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykgeyB2YXIgdGFyZ2V0ID0ge307IGZvciAodmFyIGkgaW4gb2JqKSB7IGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlOyB0YXJnZXRbaV0gPSBvYmpbaV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfdXRpbHNDbGltYiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgX3V0aWxzQ2xpbWIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXRpbHNDbGltYik7XG5cdFxuXHR2YXIgX1RpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF9UaWxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1RpbGUpO1xuXHRcblx0dmFyIFdhbGwgPSAoZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcblx0ICAgIF9pbmhlcml0cyhXYWxsLCBfUmVhY3QkQ29tcG9uZW50KTtcblx0XG5cdCAgICBmdW5jdGlvbiBXYWxsKHByb3BzKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFdhbGwpO1xuXHRcblx0ICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihXYWxsLnByb3RvdHlwZSksICdjb25zdHJ1Y3RvcicsIHRoaXMpLmNhbGwodGhpcywgcHJvcHMpO1xuXHQgICAgICAgIHRoaXMuc3RhdGUgPSB7XG5cdCAgICAgICAgICAgIGl0ZW1zOiBbXVxuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKFdhbGwsIFt7XG5cdCAgICAgICAga2V5OiAnaW5pdCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7XG5cdCAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICAgICAgICBfdXRpbHNDbGltYjJbJ2RlZmF1bHQnXS5nZXRGZWVkKHRoaXMucHJvcHMuY29sbGVjdGlvbklkKS50aGVuKGZ1bmN0aW9uIChpdGVtcykge1xuXHQgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBpdGVtc1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHQgICAgICAgICAgICB0aGlzLmluaXQoKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAncmVuZGVyJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICAgICAgICB2YXIgdGlsZXMgPSBbXTtcblx0ICAgICAgICAgICAgdGhpcy5zdGF0ZS5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gV2hhdCdzIHdpdGggdGhlIGAuLi5gP1xuXHQgICAgICAgICAgICAgICAgLy8gSXQncyBFUzYuXG5cdCAgICAgICAgICAgICAgICAvLyBodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RyYW5zZmVycmluZy1wcm9wcy5odG1sI3RyYW5zZmVycmluZy13aXRoLS4uLi1pbi1qc3hcblx0ICAgICAgICAgICAgICAgIHZhciBpZCA9IGl0ZW0uaWQ7XG5cdFxuXHQgICAgICAgICAgICAgICAgdmFyIG90aGVyUHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoaXRlbSwgWydpZCddKTtcblx0XG5cdCAgICAgICAgICAgICAgICB0aWxlcy5wdXNoKF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KF9UaWxlMlsnZGVmYXVsdCddLCBfZXh0ZW5kcyh7IHJlZjogaWQsXG5cdCAgICAgICAgICAgICAgICAgICAga2V5OiBpZFxuXHQgICAgICAgICAgICAgICAgfSwgb3RoZXJQcm9wcykpKTtcblx0ICAgICAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2xpbWJfX3dhbGwnIH0sXG5cdCAgICAgICAgICAgICAgICB0aWxlc1xuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gV2FsbDtcblx0fSkoX3JlYWN0MlsnZGVmYXVsdCddLkNvbXBvbmVudCk7XG5cdFxuXHRXYWxsLnByb3BUeXBlcyA9IHtcblx0ICAgIGNvbGxlY3Rpb25JZDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxuXHR9O1xuXHRcblx0ZXhwb3J0c1snZGVmYXVsdCddID0gV2FsbDtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cblx0LyogUkVBQ1QgSE9UIExPQURFUiAqLyB9KS5jYWxsKHRoaXMpOyB9IGZpbmFsbHkgeyBpZiAoZmFsc2UpIHsgKGZ1bmN0aW9uICgpIHsgdmFyIGZvdW5kUmVhY3RDbGFzc2VzID0gbW9kdWxlLmhvdC5kYXRhICYmIG1vZHVsZS5ob3QuZGF0YS5mb3VuZFJlYWN0Q2xhc3NlcyB8fCBmYWxzZTsgaWYgKG1vZHVsZS5leHBvcnRzICYmIG1vZHVsZS5tYWtlSG90KSB7IHZhciBtYWtlRXhwb3J0c0hvdCA9IHJlcXVpcmUoXCIvVXNlcnMvbWljaGVsZS9Qcm9qZWN0cy9yZWFjdC1jbGltYi1zb2NpYWwvbm9kZV9tb2R1bGVzL3JlYWN0LWhvdC1sb2FkZXIvbWFrZUV4cG9ydHNIb3QuanNcIik7IGlmIChtYWtlRXhwb3J0c0hvdChtb2R1bGUsIHJlcXVpcmUoXCJyZWFjdFwiKSkpIHsgZm91bmRSZWFjdENsYXNzZXMgPSB0cnVlOyB9IHZhciBzaG91bGRBY2NlcHRNb2R1bGUgPSB0cnVlICYmIGZvdW5kUmVhY3RDbGFzc2VzOyBpZiAoc2hvdWxkQWNjZXB0TW9kdWxlKSB7IG1vZHVsZS5ob3QuYWNjZXB0KGZ1bmN0aW9uIChlcnIpIHsgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiQ2Fubm90IG5vdCBhcHBseSBob3QgdXBkYXRlIHRvIFwiICsgXCJXYWxsLmpzeFwiICsgXCI6IFwiICsgZXJyLm1lc3NhZ2UpOyB9IH0pOyB9IH0gbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uIChkYXRhKSB7IGRhdGEubWFrZUhvdCA9IG1vZHVsZS5tYWtlSG90OyBkYXRhLmZvdW5kUmVhY3RDbGFzc2VzID0gZm91bmRSZWFjdENsYXNzZXM7IH0pOyB9KSgpOyB9IH1cblxuLyoqKi8gfSxcbi8qIDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFJFQUNUIEhPVCBMT0FERVIgKi8gaWYgKGZhbHNlKSB7IChmdW5jdGlvbiAoKSB7IHZhciBSZWFjdEhvdEFQSSA9IHJlcXVpcmUoXCIvVXNlcnMvbWljaGVsZS9Qcm9qZWN0cy9yZWFjdC1jbGltYi1zb2NpYWwvbm9kZV9tb2R1bGVzL3JlYWN0LWhvdC1sb2FkZXIvbm9kZV9tb2R1bGVzL3JlYWN0LWhvdC1hcGkvbW9kdWxlcy9pbmRleC5qc1wiKSwgUm9vdEluc3RhbmNlUHJvdmlkZXIgPSByZXF1aXJlKFwiL1VzZXJzL21pY2hlbGUvUHJvamVjdHMvcmVhY3QtY2xpbWItc29jaWFsL25vZGVfbW9kdWxlcy9yZWFjdC1ob3QtbG9hZGVyL1Jvb3RJbnN0YW5jZVByb3ZpZGVyLmpzXCIpLCBSZWFjdE1vdW50ID0gcmVxdWlyZShcInJlYWN0L2xpYi9SZWFjdE1vdW50XCIpLCBSZWFjdCA9IHJlcXVpcmUoXCJyZWFjdFwiKTsgbW9kdWxlLm1ha2VIb3QgPSBtb2R1bGUuaG90LmRhdGEgPyBtb2R1bGUuaG90LmRhdGEubWFrZUhvdCA6IFJlYWN0SG90QVBJKGZ1bmN0aW9uICgpIHsgcmV0dXJuIFJvb3RJbnN0YW5jZVByb3ZpZGVyLmdldFJvb3RJbnN0YW5jZXMoUmVhY3RNb3VudCk7IH0sIFJlYWN0KTsgfSkoKTsgfSB0cnkgeyAoZnVuY3Rpb24gKCkge1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZWQgYnkgbWljaGVsZSBvbiAyMy8wOS8xNS5cblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdHZhciBfZmV0Y2hKc29ucCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX2ZldGNoSnNvbnAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmV0Y2hKc29ucCk7XG5cdFxuXHR2YXIgZ2V0RmVlZCA9IGZ1bmN0aW9uIGdldEZlZWQoY29sbGVjdGlvbklkKSB7XG5cdCAgICByZXR1cm4gKDAsIF9mZXRjaEpzb25wMlsnZGVmYXVsdCddKSgnaHR0cDovL2FwcC5jbGltYi5zb2NpYWwvYXBpL3YxL2NvbGxlY3Rpb25zLycgKyBjb2xsZWN0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcblx0ICAgICAgICByZXR1cm4gcmVzcC5qc29uKCk7XG5cdCAgICB9KTtcblx0fTtcblx0XG5cdHZhciBjbGltYiA9IHtcblx0ICAgIGdldEZlZWQ6IGdldEZlZWRcblx0fTtcblx0XG5cdGV4cG9ydHNbJ2RlZmF1bHQnXSA9IGNsaW1iO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXHQvKiBSRUFDVCBIT1QgTE9BREVSICovIH0pLmNhbGwodGhpcyk7IH0gZmluYWxseSB7IGlmIChmYWxzZSkgeyAoZnVuY3Rpb24gKCkgeyB2YXIgZm91bmRSZWFjdENsYXNzZXMgPSBtb2R1bGUuaG90LmRhdGEgJiYgbW9kdWxlLmhvdC5kYXRhLmZvdW5kUmVhY3RDbGFzc2VzIHx8IGZhbHNlOyBpZiAobW9kdWxlLmV4cG9ydHMgJiYgbW9kdWxlLm1ha2VIb3QpIHsgdmFyIG1ha2VFeHBvcnRzSG90ID0gcmVxdWlyZShcIi9Vc2Vycy9taWNoZWxlL1Byb2plY3RzL3JlYWN0LWNsaW1iLXNvY2lhbC9ub2RlX21vZHVsZXMvcmVhY3QtaG90LWxvYWRlci9tYWtlRXhwb3J0c0hvdC5qc1wiKTsgaWYgKG1ha2VFeHBvcnRzSG90KG1vZHVsZSwgcmVxdWlyZShcInJlYWN0XCIpKSkgeyBmb3VuZFJlYWN0Q2xhc3NlcyA9IHRydWU7IH0gdmFyIHNob3VsZEFjY2VwdE1vZHVsZSA9IHRydWUgJiYgZm91bmRSZWFjdENsYXNzZXM7IGlmIChzaG91bGRBY2NlcHRNb2R1bGUpIHsgbW9kdWxlLmhvdC5hY2NlcHQoZnVuY3Rpb24gKGVycikgeyBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJDYW5ub3Qgbm90IGFwcGx5IGhvdCB1cGRhdGUgdG8gXCIgKyBcImNsaW1iLmpzXCIgKyBcIjogXCIgKyBlcnIubWVzc2FnZSk7IH0gfSk7IH0gfSBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24gKGRhdGEpIHsgZGF0YS5tYWtlSG90ID0gbW9kdWxlLm1ha2VIb3Q7IGRhdGEuZm91bmRSZWFjdENsYXNzZXMgPSBmb3VuZFJlYWN0Q2xhc3NlczsgfSk7IH0pKCk7IH0gfVxuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBidW5kbGUuanNcbiAqKi8iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCAwYTk1YmUyODVhOWI3MWE3NGZlZFxuICoqLyIsImltcG9ydCBBcHAgZnJvbSAnLi9hcHAuanN4JztcblxuQXBwLnN0YXJ0KCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL34vZXNsaW50LWxvYWRlciEuL3NyYy9pbmRleC5qc1xuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcIlJlYWN0XCJcbiAqKiBtb2R1bGUgaWQgPSAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFsnZXhwb3J0cycsICdtb2R1bGUnXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgZmFjdG9yeShleHBvcnRzLCBtb2R1bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciBtb2QgPSB7XG4gICAgICBleHBvcnRzOiB7fVxuICAgIH07XG4gICAgZmFjdG9yeShtb2QuZXhwb3J0cywgbW9kKTtcbiAgICBnbG9iYWwuZmV0Y2hKc29ucCA9IG1vZC5leHBvcnRzO1xuICB9XG59KSh0aGlzLCBmdW5jdGlvbiAoZXhwb3J0cywgbW9kdWxlKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgdGltZW91dDogNTAwMCxcbiAgICBqc29ucENhbGxiYWNrOiAnY2FsbGJhY2snXG4gIH07XG5cbiAgZnVuY3Rpb24gZ2VuZXJhdGVDYWxsYmFja0Z1bmN0aW9uKCkge1xuICAgIHJldHVybiAnanNvbnBfJyArIERhdGUubm93KCkgKyAnXycgKyBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDEwMDAwMCk7XG4gIH1cblxuICAvLyBLbm93biBpc3N1ZTogV2lsbCB0aHJvdyAnVW5jYXVnaHQgUmVmZXJlbmNlRXJyb3I6IGNhbGxiYWNrXyoqKiBpcyBub3QgZGVmaW5lZCcgZXJyb3IgaWYgcmVxdWVzdCB0aW1lb3V0XG4gIGZ1bmN0aW9uIGNsZWFyRnVuY3Rpb24oZnVuY3Rpb25OYW1lKSB7XG4gICAgLy8gSUU4IHRocm93cyBhbiBleGNlcHRpb24gd2hlbiB5b3UgdHJ5IHRvIGRlbGV0ZSBhIHByb3BlcnR5IG9uIHdpbmRvd1xuICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE4MjQyMjgvNzUxMDg5XG4gICAgdHJ5IHtcbiAgICAgIGRlbGV0ZSB3aW5kb3dbZnVuY3Rpb25OYW1lXTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB3aW5kb3dbZnVuY3Rpb25OYW1lXSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVTY3JpcHQoc2NyaXB0SWQpIHtcbiAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2NyaXB0SWQpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICB9XG5cbiAgdmFyIGZldGNoSnNvbnAgPSBmdW5jdGlvbiBmZXRjaEpzb25wKHVybCkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMV07XG5cbiAgICB2YXIgdGltZW91dCA9IG9wdGlvbnMudGltZW91dCAhPSBudWxsID8gb3B0aW9ucy50aW1lb3V0IDogZGVmYXVsdE9wdGlvbnMudGltZW91dDtcbiAgICB2YXIganNvbnBDYWxsYmFjayA9IG9wdGlvbnMuanNvbnBDYWxsYmFjayAhPSBudWxsID8gb3B0aW9ucy5qc29ucENhbGxiYWNrIDogZGVmYXVsdE9wdGlvbnMuanNvbnBDYWxsYmFjaztcblxuICAgIHZhciB0aW1lb3V0SWQgPSB1bmRlZmluZWQ7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGNhbGxiYWNrRnVuY3Rpb24gPSBnZW5lcmF0ZUNhbGxiYWNrRnVuY3Rpb24oKTtcblxuICAgICAgd2luZG93W2NhbGxiYWNrRnVuY3Rpb25dID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIC8vIGtlZXAgY29uc2lzdGVudCB3aXRoIGZldGNoIEFQSVxuICAgICAgICAgIGpzb246IGZ1bmN0aW9uIGpzb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aW1lb3V0SWQpIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXG4gICAgICAgIHJlbW92ZVNjcmlwdChqc29ucENhbGxiYWNrICsgJ18nICsgY2FsbGJhY2tGdW5jdGlvbik7XG5cbiAgICAgICAgY2xlYXJGdW5jdGlvbihjYWxsYmFja0Z1bmN0aW9uKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIENoZWNrIGlmIHRoZSB1c2VyIHNldCB0aGVpciBvd24gcGFyYW1zLCBhbmQgaWYgbm90IGFkZCBhID8gdG8gc3RhcnQgYSBsaXN0IG9mIHBhcmFtc1xuICAgICAgdXJsICs9IHVybC5pbmRleE9mKCc/JykgPT09IC0xID8gJz8nIDogJyYnO1xuXG4gICAgICB2YXIganNvbnBTY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgIGpzb25wU2NyaXB0LnNldEF0dHJpYnV0ZShcInNyY1wiLCB1cmwgKyBqc29ucENhbGxiYWNrICsgJz0nICsgY2FsbGJhY2tGdW5jdGlvbik7XG4gICAgICBqc29ucFNjcmlwdC5pZCA9IGpzb25wQ2FsbGJhY2sgKyAnXycgKyBjYWxsYmFja0Z1bmN0aW9uO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKGpzb25wU2NyaXB0KTtcblxuICAgICAgdGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0pTT05QIHJlcXVlc3QgdG8gJyArIHVybCArICcgdGltZWQgb3V0JykpO1xuXG4gICAgICAgIGNsZWFyRnVuY3Rpb24oY2FsbGJhY2tGdW5jdGlvbik7XG4gICAgICAgIHJlbW92ZVNjcmlwdChqc29ucENhbGxiYWNrICsgJ18nICsgY2FsbGJhY2tGdW5jdGlvbik7XG4gICAgICB9LCB0aW1lb3V0KTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBleHBvcnQgYXMgZ2xvYmFsIGZ1bmN0aW9uXG4gIC8qXG4gIGxldCBsb2NhbDtcbiAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbG9jYWwgPSBnbG9iYWw7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbG9jYWwgPSBzZWxmO1xuICB9IGVsc2Uge1xuICAgIHRyeSB7XG4gICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICB9XG4gIH1cbiAgXG4gIGxvY2FsLmZldGNoSnNvbnAgPSBmZXRjaEpzb25wO1xuICAqL1xuXG4gIG1vZHVsZS5leHBvcnRzID0gZmV0Y2hKc29ucDtcbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2ZldGNoLWpzb25wL2J1aWxkL2ZldGNoLWpzb25wLmpzXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBXYWxsIGZyb20gJy4vY29tcG9uZW50cy9XYWxsLmpzeCc7XG5cbmNvbnN0IEJvb3RzdHJhcHBlciA9IHtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgUmVhY3QucmVuZGVyKDxXYWxsIGNvbGxlY3Rpb25JZD1cIjU1YTdkMjk5NDUyODRlZjYwYzBjZTc3MlwiLz4sIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKSk7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgQm9vdHN0cmFwcGVyO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9+L2VzbGludC1sb2FkZXIhLi9zcmMvYXBwLmpzeFxuICoqLyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cblxuY2xhc3MgQXV0aG9yIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuICAgIHJlbmRlcigpIHtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiY2xpbWJfX3RpbGVfX2F1dGhvclwiXG4gICAgICAgICAgICAgICBocmVmPXsgdGhpcy5wcm9wcy5saW5rIH0+XG5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz17IHRoaXMucHJvcHMucGljdHVyZX1cbiAgICAgICAgICAgICAgICAgICAgIGFsdD17IGBQcm9maWxlIHBpYyBvZiAke3RoaXMucHJvcHMubmFtZX1gIH0vPlxuXG4gICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cImNsaW1iX190aWxlX19hdXRob3JfX3VzZXJuYW1lXCI+XG4gICAgICAgICAgICAgICAgICAgIHsgdGhpcy5wcm9wcy51c2VybmFtZSB9XG4gICAgICAgICAgICAgICAgPC9oND5cblxuICAgICAgICAgICAgPC9hPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuQXV0aG9yLnByb3BUeXBlcyA9IHt9O1xuXG5leHBvcnQgZGVmYXVsdCBBdXRob3I7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL34vZXNsaW50LWxvYWRlciEuL3NyYy9jb21wb25lbnRzL0F1dGhvci5qc3hcbiAqKi8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5cbmNsYXNzIEltYWdlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxpbWcgY2xhc3NOYW1lPVwiY2xpbWJfX3RpbGVfX2ltYWdlXCJcbiAgICAgICAgICAgICAgICAgc3JjPXsgdGhpcy5wcm9wcy5zcmMgfS8+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5JbWFnZS5wcm9wVHlwZXMgPSB7XG4gICAgc3JjOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgd2lkdGg6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIsXG4gICAgaGVpZ2h0OiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyXG59O1xuXG5leHBvcnQgZGVmYXVsdCBJbWFnZTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vfi9lc2xpbnQtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvSW1hZ2UuanN4XG4gKiovIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuXG5jbGFzcyBNZXNzYWdlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2xpbWJfX3RpbGVfX21lc3NhZ2VcIlxuICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogdGhpcy5wcm9wcy5ib2R5fX0+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbk1lc3NhZ2UucHJvcFR5cGVzID0ge1xuICAgIGJvZHk6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxufTtcblxuZXhwb3J0IGRlZmF1bHQgTWVzc2FnZTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vfi9lc2xpbnQtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvTWVzc2FnZS5qc3hcbiAqKi8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEltYWdlIGZyb20gJy4vSW1hZ2UnO1xuaW1wb3J0IE1lc3NhZ2UgZnJvbSAnLi9NZXNzYWdlJztcbmltcG9ydCBBdXRob3IgZnJvbSAnLi9BdXRob3InO1xuXG5cbmNsYXNzIFRpbGUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLmNyZWF0ZUltYWdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuY3JlYXRlTWVzc2FnZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNyZWF0ZUNsYXNzU3RyaW5nLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgY3JlYXRlSW1hZ2UoKSB7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHt1cmw6IHNyYywgd2lkdGgsIGhlaWdodH0gPSB0aGlzLnByb3BzLmltYWdlO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8SW1hZ2Ugc3JjPXsgc3JjIH1cbiAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9eyB3aWR0aCB9XG4gICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17IGhlaWdodCB9Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjcmVhdGVNZXNzYWdlKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5tZXNzYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxNZXNzYWdlIGJvZHk9eyB0aGlzLnByb3BzLm1lc3NhZ2UgfS8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNyZWF0ZUNsYXNzU3RyaW5nKCkge1xuXG4gICAgICAgIGxldCBjbGFzc1N0cmluZyA9IGBjbGltYl9fdGlsZSBjbGltYl9fdGlsZS0tJHt0aGlzLnByb3BzLnNvdXJjZV90eXBlfWA7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaW1hZ2UpIHtcbiAgICAgICAgICAgIGNsYXNzU3RyaW5nICs9ICcgY2xpbWJfX3RpbGUtLWhhcy1tZWRpYSBjbGltYl9fdGlsZS0taGFzLWltYWdlJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZpZGVvX3VybCkge1xuICAgICAgICAgICAgY2xhc3NTdHJpbmcgKz0gJyBjbGltYl9fdGlsZS0taGFzLW1lZGlhIGNsaW1iX190aWxlLS1oYXMtdmlkZW8nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNsYXNzU3RyaW5nO1xuXG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuXG4gICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5jcmVhdGVJbWFnZSgpO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5jcmVhdGVNZXNzYWdlKCk7XG4gICAgICAgIGNvbnN0IGNsYXNzU3RyaW5nID0gdGhpcy5jcmVhdGVDbGFzc1N0cmluZygpO1xuICAgICAgICBjb25zdCB7YXV0aG9yfSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXsgY2xhc3NTdHJpbmcgfT5cblxuICAgICAgICAgICAgICAgIHsgaW1hZ2UgfVxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjbGltYl9fdGlsZV9fY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICB7IG1lc3NhZ2UgfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPEF1dGhvciB7Li4uYXV0aG9yfSAvPlxuXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblxuVGlsZS5wcm9wVHlwZXMgPSB7XG5cbiAgICAvLyBSZXF1aXJlZCBhdHRyc1xuICAgIGxpbms6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBzb3VyY2VfdHlwZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHRpbWVzdGFtcDogUmVhY3QuUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgIGF1dGhvcjogUmVhY3QuUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgdXNlcm5hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgICAgcGljdHVyZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICBsaW5rOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgfSksXG5cbiAgICAvLyBPcHRpb25hbCBhdHRyc1xuICAgIG1lc3NhZ2U6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgdmlkZW9fc3JjOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIGltYWdlOiBSZWFjdC5Qcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICB1cmw6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgICAgd2lkdGg6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICAgICAgaGVpZ2h0OiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgfSlcblxufTtcblxuZXhwb3J0IGRlZmF1bHQgVGlsZTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vfi9lc2xpbnQtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvVGlsZS5qc3hcbiAqKi8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsaW1iIGZyb20gJy4uL3V0aWxzL2NsaW1iJztcbmltcG9ydCBUaWxlIGZyb20gJy4vVGlsZSc7XG5cblxuY2xhc3MgV2FsbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBpdGVtczogW11cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBpbml0KCkge1xuICAgICAgICBjbGltYlxuICAgICAgICAgICAgLmdldEZlZWQodGhpcy5wcm9wcy5jb2xsZWN0aW9uSWQpXG4gICAgICAgICAgICAudGhlbigoaXRlbXMpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHRpbGVzID0gW107XG4gICAgICAgIHRoaXMuc3RhdGUuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcblxuICAgICAgICAgICAgLy8gV2hhdCdzIHdpdGggdGhlIGAuLi5gP1xuICAgICAgICAgICAgLy8gSXQncyBFUzYuXG4gICAgICAgICAgICAvLyBodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RyYW5zZmVycmluZy1wcm9wcy5odG1sI3RyYW5zZmVycmluZy13aXRoLS4uLi1pbi1qc3hcbiAgICAgICAgICAgIGNvbnN0IHtpZCwgLi4ub3RoZXJQcm9wc30gPSBpdGVtO1xuXG4gICAgICAgICAgICB0aWxlcy5wdXNoKFxuICAgICAgICAgICAgICAgIDxUaWxlIHJlZj17IGlkIH1cbiAgICAgICAgICAgICAgICAgICAgICBrZXk9eyBpZCB9XG4gICAgICAgICAgICAgICAgICAgIHsuLi5vdGhlclByb3BzIH0gLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNsaW1iX193YWxsXCI+XG4gICAgICAgICAgICAgICAgeyB0aWxlcyB9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbldhbGwucHJvcFR5cGVzID0ge1xuICAgIGNvbGxlY3Rpb25JZDogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG59O1xuXG5leHBvcnQgZGVmYXVsdCBXYWxsO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9+L2VzbGludC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy9XYWxsLmpzeFxuICoqLyIsIi8qKlxuICogQ3JlYXRlZCBieSBtaWNoZWxlIG9uIDIzLzA5LzE1LlxuICovXG5cbmltcG9ydCBmZXRjaEpzb25wIGZyb20gJ2ZldGNoLWpzb25wJztcblxuY29uc3QgZ2V0RmVlZCA9IChjb2xsZWN0aW9uSWQpID0+IHtcbiAgICByZXR1cm4gZmV0Y2hKc29ucChgaHR0cDovL2FwcC5jbGltYi5zb2NpYWwvYXBpL3YxL2NvbGxlY3Rpb25zLyR7Y29sbGVjdGlvbklkfWApXG4gICAgICAgIC50aGVuKHJlc3AgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3AuanNvbigpO1xuICAgICAgICB9KTtcbn07XG5cbmNvbnN0IGNsaW1iID0ge1xuICAgIGdldEZlZWRcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsaW1iO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9+L2VzbGludC1sb2FkZXIhLi9zcmMvdXRpbHMvY2xpbWIuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9
