!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("ReactDOM")):"function"==typeof define&&define.amd?define(["react","ReactDOM"],e):"object"==typeof exports?exports["react-climb-social"]=e(require("react"),require("ReactDOM")):t["react-climb-social"]=e(t.React,t.ReactDOM)}(this,function(t,e){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="/",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=r(o),s=n(44),u=r(s),a=n(18),c=r(a),l=n(15),h=r(l);if(n(37),window){window.Climb=window.Climb||{};for(var p=document.querySelectorAll(".climb-wall"),f=0;f<p.length;++f){var d=p[f],v=d.dataset.collectionId,b=d.dataset.limit,m=d.dataset.domain;u["default"].render(i["default"].createElement(c["default"],{collectionId:v,limit:b,domain:m}),d)}for(var y=document.querySelectorAll(".climb-slideshow"),f=0;f<y.length;++f){var d=y[f],v=d.dataset.collectionId,_=parseInt(d.dataset.delay,0),m=d.dataset.domain;u["default"].render(i["default"].createElement(h["default"],{collectionId:v,delay:_,domain:m}),d)}}e.WallContainer=c["default"];var g=n(7);Object.defineProperty(e,"Wall",{enumerable:!0,get:function(){return g.Wall}});var w=n(6);Object.defineProperty(e,"Tile",{enumerable:!0,get:function(){return w.Tile}})},function(e,n){e.exports=t},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=n(1),i=r(o),s=n(23),u=r(s),a=n(28),c=r(a),l=u["default"](i["default"]),h=l.Spring,p=l.TransitionSpring,f=l.Motion,d=l.StaggeredMotion,v=l.TransitionMotion;e.Spring=h,e.TransitionSpring=p,e.Motion=f,e.StaggeredMotion=d,e.TransitionMotion=v;var b=n(29),m=r(b);e.spring=m["default"];var y=n(9),_=r(y);e.presets=_["default"];var g={reorderKeys:c["default"]};e.utils=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,s=n;u=c=a=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var a=u.get;return void 0===a?void 0:a.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=s,r=!0}},a=n(1),c=r(a),l=function(t){function e(){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return i(e,t),s(e,[{key:"render",value:function(){return c["default"].createElement("a",{className:"climb__author",href:this.props.link},c["default"].createElement("img",{height:"34",width:"34",src:this.props.picture,alt:"Profile pic of "+this.props.name}),c["default"].createElement("h4",{className:"climb__tile__author__username"},this.props.username))}}],[{key:"propTypes",value:{link:a.PropTypes.string,picture:a.PropTypes.string.isRequired,name:a.PropTypes.string.isRequired,username:a.PropTypes.string.isRequired},enumerable:!0}]),e}(a.Component);e["default"]=l,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,s=n;u=c=a=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var a=u.get;return void 0===a?void 0:a.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=s,r=!0}},a=n(1),c=r(a),l=function(t){function e(){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return i(e,t),s(e,[{key:"render",value:function(){return c["default"].createElement("img",{className:"climb__image",src:this.props.src,"data-width":this.props.width,"data-height":this.props.height})}}]),e}(c["default"].Component);l.propTypes={src:c["default"].PropTypes.string.isRequired,width:c["default"].PropTypes.number,height:c["default"].PropTypes.number},e["default"]=l,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,s=n;u=c=a=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var a=u.get;return void 0===a?void 0:a.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=s,r=!0}},a=n(1),c=r(a),l=function(t){function e(){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return i(e,t),s(e,[{key:"render",value:function(){var t=this.props.body.replace(/<a href="http:\/\/pic.twitter.com\/[^>]*>([^<]+)<\/a>/g,"");return c["default"].createElement("div",{className:"climb__message",dangerouslySetInnerHTML:{__html:t}})}}]),e}(c["default"].Component);l.propTypes={body:c["default"].PropTypes.string.isRequired},e["default"]=l,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,s=n;u=c=a=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var a=u.get;return void 0===a?void 0:a.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=s,r=!0}},a=n(1),c=r(a),l=n(4),h=r(l),p=n(5),f=r(p),d=n(3),v=r(d),b=function(t){function e(t){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return i(e,t),s(e,[{key:"createImage",value:function(){if(null!==this.props.image){var t=this.props.image,e=t.url,n=t.width,r=t.height;return c["default"].createElement(h["default"],{src:e,width:n,height:r})}return null}},{key:"createMessage",value:function(){return this.props.message?c["default"].createElement(f["default"],{body:this.props.message}):null}},{key:"createClassString",value:function(){var t="climb__tile climb__tile--"+this.props.source_type;return t+=this.props.image?" climb__tile--has-media climb__tile--has-image":" climb__tile--has-no-image",t+=this.props.video_url?" climb__tile--has-media climb__tile--has-video":" climb__tile--has-no-video"}},{key:"render",value:function(){var t=this.createImage(),e=this.createMessage(),n=this.createClassString(),r=this.props.author;return c["default"].createElement("div",{className:n,style:this.props.style},c["default"].createElement("a",{href:this.props.link},t),c["default"].createElement("div",{className:"climb__tile__content"},e,c["default"].createElement(v["default"],r)))}}]),e}(c["default"].Component);b.propTypes={link:c["default"].PropTypes.string.isRequired,source_type:c["default"].PropTypes.string.isRequired,timestamp:c["default"].PropTypes.number.isRequired,author:c["default"].PropTypes.shape({username:c["default"].PropTypes.string.isRequired,picture:c["default"].PropTypes.string.isRequired,link:c["default"].PropTypes.string.isRequired}),message:c["default"].PropTypes.string,video_src:c["default"].PropTypes.string,image:c["default"].PropTypes.shape({url:c["default"].PropTypes.string.isRequired,width:c["default"].PropTypes.number.isRequired,height:c["default"].PropTypes.number.isRequired})},e["default"]=b,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t,e,n){for(var r=!0;r;){var o=t,i=e,s=n;u=c=a=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var a=u.get;return void 0===a?void 0:a.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=s,r=!0}},l=n(1),h=r(l),p=n(6),f=r(p),d=n(2),v=function(t){function e(){i(this,e),c(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return s(e,t),a(e,[{key:"getStyles",value:function(){var t=this,e={};return Object.keys(this.props.items).map(function(n){e[n]={opacity:d.spring(1),width:d.spring(30),margin:d.spring(1),item:t.props.items[n]}}),e}},{key:"willEnter",value:function(t){return{opacity:d.spring(0),width:d.spring(0),margin:d.spring(0),item:this.props.items[t]}}},{key:"willLeave",value:function(t,e){return{opacity:d.spring(0),width:d.spring(0),margin:d.spring(0),item:e.item}}},{key:"renderTile",value:function(t,e){var n=e.item,r=o(e,["item"]),i=o(n,[]),s={opacity:r.opacity,width:r.width+"%",marginLeft:r.margin+"%",marginRight:r.margin+"%"};return h["default"].createElement(f["default"],u({key:t,style:s},i))}},{key:"render",value:function(){var t=this;return h["default"].createElement(d.TransitionMotion,{styles:this.getStyles.bind(this)(),willEnter:this.willEnter.bind(this),willLeave:this.willLeave.bind(this)},function(e){return h["default"].createElement("div",{className:"climb__wall"},Object.keys(e).map(function(n){var r=e[n];return t.renderTile(n,r)}))})}}],[{key:"propTypes",value:{items:l.PropTypes.object.isRequired},enumerable:!0}]),e}(l.Component);e["default"]=v,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(35),i=n(21),s=r(i),u=n(43),a=function(t){var e=arguments.length<=1||void 0===arguments[1]?8:arguments[1],n=arguments.length<=2||void 0===arguments[2]?"http://app.climb.social":arguments[2];if(!t)throw new Error("Please specify a collectionId");if("number"!=typeof e)throw new Error("Polling interval should be a positive integer. A "+typeof e+" was provided.");if(0>=e)throw new Error("Polling interval should be a positive integer. "+e+" was specified.");var r=1e3*e,i=u.resolve(n,"/api/v1/collections/"+t),a=o.Observable.just(i),c=o.Observable.interval(r).startWith(null),l=c.combineLatest(a,function(t,e){return e}).flatMap(function(t){var e=""+t;return o.Observable.fromPromise(s["default"](e).then(function(t){return t.json()}))});return l};e["default"]={getStream:a},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={noWobble:[170,26],gentle:[120,14],wobbly:[180,12],stiff:[210,20]},t.exports=e["default"]},function(t,e,n){(function(e){(function(){var n,r,o;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-o)/1e6},r=e.hrtime,n=function(){var t;return t=r(),1e9*t[0]+t[1]},o=n()):Date.now?(t.exports=function(){return Date.now()-o},o=Date.now()):(t.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(e,n(12))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){function n(){c=!1,s.length?a=s.concat(a):l=-1,a.length&&r()}function r(){if(!c){var t=setTimeout(n);c=!0;for(var e=a.length;e;){for(s=a,a=[];++l<e;)s&&s[l].run();l=-1,e=a.length}s=null,c=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function i(){}var s,u=t.exports={},a=[],c=!1,l=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new o(t,e)),1!==a.length||c||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=i,u.addListener=i,u.once=i,u.off=i,u.removeListener=i,u.removeAllListeners=i,u.emit=i,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,s=n;u=c=a=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var a=u.get;return void 0===a?void 0:a.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=s,r=!0}},a=n(1),c=r(a),l=n(5),h=r(l),p=n(3),f=r(p),d=function(t){function e(){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return i(e,t),s(e,[{key:"createAuthor",value:function(){var t=this.props.author;return c["default"].createElement(f["default"],t)}},{key:"createMessage",value:function(){return c["default"].createElement(h["default"],{body:this.props.message})}},{key:"render",value:function(){var t=this.createAuthor(),e=this.createMessage();return c["default"].createElement("div",{style:this.props.style,className:"climb-slideshow__panel"},t,e)}}],[{key:"propTypes",value:{message:a.PropTypes.string.isRequired,author:a.PropTypes.object.isRequired},enumerable:!0}]),e}(a.Component);e["default"]=d,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var o=t,i=e,s=n;u=c=a=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var a=u.get;return void 0===a?void 0:a.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=s,r=!0}},c=n(1),l=r(c),h=n(16),p=r(h),f=n(2),d=function(t){function e(t){i(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.state={currentKey:""}}return s(e,t),u(e,[{key:"componentDidMount",value:function(){var t=this.props.delay;this.timer=setInterval(this.nextSlide.bind(this),1e3*t)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"nextSlide",value:function(){var t=Object.keys(this.props.items),e=t[t.length*Math.random()<<0];this.setState({currentKey:e})}},{key:"getStyles",value:function(){var t=this,e=this.state.currentKey,n={};return Object.keys(this.props.items).map(function(r){n[r]={opacity:f.spring(0),scale:f.spring(0),zIndex:-5,item:t.props.items[r]},r===e&&Object.assign(n[r],{opacity:f.spring(1),scale:f.spring(1),zIndex:1})}),n}},{key:"willEnter",value:function(t){return{opacity:f.spring(0),scale:f.spring(0),zIndex:-5,item:this.props.items[t]}}},{key:"willLeave",value:function(t,e){return{opacity:f.spring(0),scale:f.spring(0),zIndex:-5,item:e.item}}},{key:"renderSlide",value:function(t,e){var n=e.item,r=o(e,["item"]),i={opacity:r.opacity,zIndex:Math.floor(r.zIndex),transform:"scale("+r.scale+")"};return l["default"].createElement(p["default"],{key:t,isCurrent:t===this.state.currentKey,item:n,style:i})}},{key:"render",value:function(){var t=this;return l["default"].createElement(f.TransitionMotion,{styles:this.getStyles.bind(this)(),willEnter:this.willEnter.bind(this),willLeave:this.willLeave.bind(this)},function(e){return l["default"].createElement("div",{className:"climb__slideshow__container"},Object.keys(e).map(function(n){var r=e[n];return t.renderSlide(n,r)}))})}}],[{key:"propTypes",value:{items:c.PropTypes.object.isRequired,delay:c.PropTypes.number.isRequired},enumerable:!0}]),e}(c.Component);e["default"]=d,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,s=n;u=c=a=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var a=u.get;return void 0===a?void 0:a.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=s,r=!0}},a=n(1),c=r(a),l=n(8),h=r(l),p=n(14),f=r(p),d=function(t){function e(t){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.state={items:{}}}return i(e,t),s(e,[{key:"init",value:function(){var t=this;this.props.collectionId&&h["default"].getStream(this.props.collectionId,this.props.refresh,this.props.domain).subscribe(function(e){var n={};e.map(function(t){n[t.id]=t}),t.setState({items:n})})}},{key:"componentDidMount",value:function(){this.init()}},{key:"render",value:function(){return c["default"].createElement(f["default"],{items:this.state.items,delay:this.props.delay})}}],[{key:"propTypes",value:{collectionId:a.PropTypes.string.isRequired,domain:a.PropTypes.string,delay:a.PropTypes.number},enumerable:!0},{key:"defaultProps",value:{collectionId:"561ba63445284e1740e016f7",delay:5,refresh:8,domain:"http://app.climb.social"},enumerable:!0}]),e}(a.Component);e["default"]=d,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,s=n;u=c=a=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var a=u.get;return void 0===a?void 0:a.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=s,r=!0}},a=n(1),c=r(a),l=n(13),h=r(l),p=n(4),f=r(p),d=n(2),v=function(t){function e(t){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.state={shouldDisplayPanel:!1}}return i(e,t),s(e,[{key:"componentWillReceiveProps",value:function(t){var e=this;t.isCurrent?setTimeout(function(){e.setState({shouldDisplayPanel:!0})},850):this.setState({shouldDisplayPanel:!1})}},{key:"createImage",value:function(){var t=this.props.item.image;if(null!==t){var e=t.url,n=t.width,r=t.height;return c["default"].createElement(f["default"],{src:e,width:n,height:r})}return null}},{key:"createPanel",value:function(){var t=this;if(!this.props.item.image)return c["default"].createElement(h["default"],{author:this.props.item.author,message:this.props.item.message});var e=300,n={x:this.state.shouldDisplayPanel?d.spring(0):d.spring(e)},r={x:0};return c["default"].createElement(d.Motion,{defaultStyle:r,style:n},function(n){return c["default"].createElement(h["default"],{author:t.props.item.author,message:t.props.item.message,style:{marginLeft:"-"+n.x+"px",width:e}})})}},{key:"createClassString",value:function(){var t="climb-slideshow__slide climb__tile--"+this.props.item.source_type;return t+=this.props.item.image?" climb-slideshow__slide--has-media climb-slideshow__slide--has-image":" climb-slideshow__slide--has-no-image",t+=this.props.item.video_url?" climb-slideshow__slide--has-media climb-slideshow__slide--has-video":" climb-slideshow__slide--has-no-video"}},{key:"render",value:function(){var t=this.createImage(),e=this.createPanel(),n=this.createClassString();return c["default"].createElement("div",{className:n,style:this.props.style},t,e)}}],[{key:"propTypes",value:{item:a.PropTypes.object.isRequired,isCurrent:a.PropTypes.bool},enumerable:!0},{key:"defaultProps",value:{isCurrent:!1},enumerable:!0}]),e}(a.Component);e["default"]=v,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,s=n;u=c=a=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var a=u.get;return void 0===a?void 0:a.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=s,r=!0}},a=n(1),c=r(a),l=function(t){function e(){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return i(e,t),s(e,[{key:"render",value:function(){var t=n(38);return c["default"].createElement("a",{href:"http://climb.social/",className:"climb-social-badge",dangerouslySetInnerHTML:{__html:t}})}}]),e}(a.Component);e["default"]=l,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,s=n;u=c=a=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var a=u.get;return void 0===a?void 0:a.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=s,r=!0}},a=n(1),c=r(a),l=n(8),h=r(l),p=n(7),f=r(p),d=n(17),v=r(d),b=function(t){function e(t){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.state={items:{}}}return i(e,t),s(e,[{key:"init",value:function(){var t=this;this.props.collectionId&&h["default"].getStream(this.props.collectionId,this.props.refresh,this.props.domain).subscribe(function(e){var n=parseInt(t.props.limit,0),r={};e.splice(0,n).map(function(t){r[t.id]=t}),t.setState({items:r})})}},{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(){var t=void 0;(t=window.Climb&&window.Climb.onUpdate?window.Climb.onUpdate:function(){})()}},{key:"render",value:function(){return c["default"].createElement("div",null,c["default"].createElement(f["default"],{items:this.state.items}),c["default"].createElement(v["default"],null))}}],[{key:"propTypes",value:{collectionId:a.PropTypes.string.isRequired,domain:a.PropTypes.string,limit:a.PropTypes.oneOfType([a.PropTypes.number,a.PropTypes.string])},enumerable:!0},{key:"defaultProps",value:{collectionId:"561ba63445284e1740e016f7",limit:30,refresh:8,domain:"http://app.climb.social"},enumerable:!0}]),e}(a.Component);e["default"]=b,t.exports=e["default"]},function(t,e,n){e=t.exports=n(20)(),e.push([t.id,".climb__wall{width:100%;padding:0;margin:0;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;font-size:100%}.climb__tile,.climb__wall{display:-webkit-flex;display:-ms-flexbox;display:flex}.climb__tile{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;height:425px;box-sizing:border-box;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-bottom:20px;overflow:hidden;text-align:left;border-radius:7px;background-color:#f6f6f6;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000px;perspective:1000px}.climb__tile__content{z-index:1;padding:26px;background-color:#f6f6f6}.climb__tile--has-no-image .climb__tile__content{height:100%;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;box-sizing:border-box}.climb__image{display:block;max-width:100%;z-index:5}.climb__tile .climb__image{position:absolute;top:0;border-top-left-radius:7px;border-top-right-radius:7px}.climb-slideshow .climb__image{box-shadow:0 0 14px 0 rgba(0,0,0,.75);border-radius:7px}.climb__message{z-index:1}.climb__message>a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:260px;display:inline-block;vertical-align:bottom}.climb-tile .climb__message{margin-bottom:24px}.climb__tile--has-no-image .climb__message{font-size:185%}.climb-slideshow__slide--has-no-image .climb__message{font-size:220%}.climb__author{display:inline-block;margin:-10px}.climb__author img{border-radius:25px}.climb__author .climb__tile__author__username{display:inline-block;margin:0 0 0 10px;line-height:34px;vertical-align:top}.climb-social-badge{position:fixed;bottom:20px;right:20px;z-index:9;background-color:#a9cae2;width:200px;height:66px;border-radius:5px}.climb-social-badge>span{position:absolute!important;top:-9999px!important;left:-9999px!important}.climb-slideshow{height:100vh;width:100vw;font-size:160%}.climb__slideshow__container{width:100%;height:100%;position:relative}.climb-slideshow__slide{position:absolute;width:100%;height:100%;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.climb-slideshow__panel,.climb-slideshow__slide{-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000px;perspective:1000px}.climb-slideshow__panel{box-sizing:border-box;display:inline-block;position:relative;padding:30px 15px 5px;width:50%;border-radius:3px;background-color:#f6f6f6}.climb-slideshow__slide--has-no-image .climb-slideshow__panel{padding:30px;border-radius:7px;box-shadow:0 0 14px 0 rgba(0,0,0,.75)}",""]);
},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var s=e[o];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(t,e,n){var r,o,i;!function(n,s){o=[e,t],r=s,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t,e){"use strict";function n(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function r(t){try{delete window[t]}catch(e){window[t]=void 0}}function o(t){var e=document.getElementById(t);document.getElementsByTagName("head")[0].removeChild(e)}var i={timeout:5e3,jsonpCallback:"callback"},s=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=null!=e.timeout?e.timeout:i.timeout,u=null!=e.jsonpCallback?e.jsonpCallback:i.jsonpCallback,a=void 0;return new Promise(function(e,i){var c=n();window[c]=function(t){e({ok:!0,json:function(){return Promise.resolve(t)}}),a&&clearTimeout(a),o(u+"_"+c),r(c)},t+=-1===t.indexOf("?")?"?":"&";var l=document.createElement("script");l.setAttribute("src",t+u+"="+c),l.id=u+"_"+c,document.getElementsByTagName("head")[0].appendChild(l),a=setTimeout(function(){i(new Error("JSONP request to "+t+" timed out")),r(c),o(u+"_"+c)},s)})};e.exports=s})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(){function t(){var e=d(),n=e-m;m=e,y+=n*u,y>o*l&&(y=0);for(var r=Math.ceil(y/o),i=0;i<v.length;i++){var s=v[i],a=s.active,c=s.animationStep,h=s.prevState,f=v[i].nextState;if(a)if(0>=y)v[i].nextState=c(o/1e3,h);else for(var _=0;r>_;_++){v[i].nextState=c(o/1e3,f);var g=[f,v[i].nextState];v[i].prevState=g[0],f=g[1]}}y-=r*o;for(var w=1+y/o,i=0;i<v.length;i++){var C=v[i],x=C.animationRender,O=C.nextState,E=C.prevState;x(w,O,E)}v=v.filter(function(t){var e=t.active;return e}),0===v.length?b=!1:p(t)}function e(){b||(b=!0,m=d(),y=0,p(t))}var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=n.timeStep,o=void 0===r?1/60*1e3:r,i=n.timeScale,u=void 0===i?1:i,c=n.maxSteps,l=void 0===c?10:c,h=n.raf,p=void 0===h?a["default"]:h,f=n.now,d=void 0===f?s["default"]:f,v=[],b=!1,m=0,y=0;return function(t,n,r){for(var o=0;o<v.length;o++){var i=v[o];if(i.animationStep===n)return i.active=!0,i.prevState=t,e(),i.stop}var s={animationStep:n,animationRender:r,prevState:t,nextState:t,active:!0};return s.stop=function(){return s.active=!1},v.push(s),e(),s.stop}}e.__esModule=!0,e["default"]=o;var i=n(10),s=r(i),u=n(34),a=r(u);t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r));return n}function i(t,e){for(var n in e)if(e.hasOwnProperty(n)&&!t(e[n],n))return!1;return!0}function s(t){var e=t.PropTypes,n=t.createClass({displayName:"Motion",propTypes:{defaultValue:function(t,e){return t[e]?new Error("Spring's `defaultValue` has been changed to `defaultStyle`. Its format received a few (easy to update!) changes as well."):void 0},endValue:function(t,e){return t[e]?new Error("Spring's `endValue` has been changed to `style`. Its format received a few (easy to update!) changes as well."):void 0},defaultStyle:e.object,style:e.object.isRequired,children:e.func.isRequired},getInitialState:function(){var t=this.props,e=t.defaultStyle,n=t.style,r=e||n;return{currentStyle:r,currentVelocity:o(m["default"],r)}},componentDidMount:function(){this.startAnimating()},componentWillReceiveProps:function(){this.startAnimating()},animationStep:function(t,e){var n=e.currentStyle,r=e.currentVelocity,o=this.props.style,i=y.updateCurrentStyle(t,n,r,o),s=y.updateCurrentVelocity(t,n,r,o);return c["default"](r,i)&&c["default"](s,i)&&this.stopAnimation(),{currentStyle:i,currentVelocity:s}},stopAnimation:null,hasUnmounted:!1,componentWillUnmount:function(){this.stopAnimation(),this.hasUnmounted=!0},startAnimating:function(){this.stopAnimation=x(this.state,this.animationStep,this.animationRender)},animationRender:function(t,e,n){this.hasUnmounted||this.setState({currentStyle:y.interpolateValue(t,e.currentStyle,n.currentStyle),currentVelocity:e.currentVelocity})},render:function(){var e=C["default"](this.state.currentStyle),n=this.props.children(e);return n&&t.Children.only(n)}}),r=t.createClass({displayName:"StaggeredMotion",propTypes:{defaultStyle:function(t,e){return t[e]?new Error('You forgot the "s" for `StaggeredMotion`\'s `defaultStyles`.'):void 0},style:function(t,e){return t[e]?new Error('You forgot the "s" for `StaggeredMotion`\'s `styles`.'):void 0},defaultStyles:e.arrayOf(e.object),styles:e.func.isRequired,children:e.func.isRequired},getInitialState:function(){var t=this.props,e=t.styles,n=t.defaultStyles,r=n?n:e();return{currentStyles:r,currentVelocities:r.map(function(t){return o(m["default"],t)})}},componentDidMount:function(){this.startAnimating()},componentWillReceiveProps:function(){this.startAnimating()},animationStep:function(t,e){var n=e.currentStyles,r=e.currentVelocities,o=this.props.styles(n.map(C["default"])),i=n.map(function(e,n){return y.updateCurrentStyle(t,e,r[n],o[n])}),s=n.map(function(e,n){return y.updateCurrentVelocity(t,e,r[n],o[n])});return r.every(function(t,e){return c["default"](t,n[e])})&&s.every(function(t,e){return c["default"](t,i[e])})&&this.stopAnimation(),{currentStyles:i,currentVelocities:s}},stopAnimation:null,hasUnmounted:!1,componentWillUnmount:function(){this.stopAnimation(),this.hasUnmounted=!0},startAnimating:function(){this.stopAnimation=x(this.state,this.animationStep,this.animationRender)},animationRender:function(t,e,n){if(!this.hasUnmounted){var r=e.currentStyles.map(function(e,r){return y.interpolateValue(t,e,n.currentStyles[r])});this.setState({currentStyles:r,currentVelocities:e.currentVelocities})}},render:function(){var e=this.state.currentStyles.map(C["default"]),n=this.props.children(e);return n&&t.Children.only(n)}}),s=t.createClass({displayName:"TransitionMotion",propTypes:{defaultValue:function(t,e){return t[e]?new Error("TransitionSpring's `defaultValue` has been changed to `defaultStyles`. Its format received a few (easy to update!) changes as well."):void 0},endValue:function(t,e){return t[e]?new Error("TransitionSpring's `endValue` has been changed to `styles`. Its format received a few (easy to update!) changes as well."):void 0},defaultStyle:function(t,e){return t[e]?new Error('You forgot the "s" for `TransitionMotion`\'s `defaultStyles`.'):void 0},style:function(t,e){return t[e]?new Error('You forgot the "s" for `TransitionMotion`\'s `styles`.'):void 0},defaultStyles:e.objectOf(e.any),styles:e.oneOfType([e.func,e.objectOf(e.any.isRequired)]).isRequired,willLeave:e.oneOfType([e.func]),willEnter:e.oneOfType([e.func]),children:e.func.isRequired},getDefaultProps:function(){return{willEnter:function(t,e){return e},willLeave:function(){return null}}},getInitialState:function(){var t=this.props,e=t.styles,n=t.defaultStyles,r=void 0;return r=null==n?"function"==typeof e?e():e:n,{currentStyles:r,currentVelocities:o(function(t){return o(m["default"],t)},r)}},componentDidMount:function(){this.startAnimating()},componentWillReceiveProps:function(){this.startAnimating()},animationStep:function(t,e){var n=e.currentStyles,r=e.currentVelocities,s=this.props,a=s.styles,l=s.willEnter,p=s.willLeave;"function"==typeof a&&(a=a(n));var d=a,v=!1;d=f["default"](n,a,function(t){var e=p(t,n[t],a,n,r);return null==e?null:c["default"](r[t],n[t])&&h["default"](n[t],e)?null:e}),Object.keys(d).filter(function(t){return!n.hasOwnProperty(t)}).forEach(function(t){var e,i;v=!0;var s=l(t,d[t],a,n,r);d[t]=s,n=u({},n,(e={},e[t]=s,e)),r=u({},r,(i={},i[t]=o(m["default"],s),i))});var b=o(function(e,o){return y.updateCurrentStyle(t,n[o],r[o],e)},d),_=o(function(e,o){return y.updateCurrentVelocity(t,n[o],r[o],e)},d);return!v&&i(function(t,e){return c["default"](t,n[e])},r)&&i(function(t,e){return c["default"](t,b[e])},_)&&this.stopAnimation(),{currentStyles:b,currentVelocities:_}},stopAnimation:null,hasUnmounted:!1,componentWillUnmount:function(){this.stopAnimation(),this.hasUnmounted=!0},startAnimating:function(){this.stopAnimation=x(this.state,this.animationStep,this.animationRender)},animationRender:function(t,e,n){if(!this.hasUnmounted){var r=o(function(e,r){return y.interpolateValue(t,e,n.currentStyles[r])},e.currentStyles);this.setState({currentStyles:r,currentVelocities:e.currentVelocities})}},render:function(){var e=o(C["default"],this.state.currentStyles),n=this.props.children(e);return n&&t.Children.only(n)}}),a=g["default"](t),l=a.Spring,p=a.TransitionSpring;return{Spring:l,TransitionSpring:p,Motion:n,StaggeredMotion:r,TransitionMotion:s}}e.__esModule=!0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e["default"]=s;var a=n(27),c=r(a),l=n(25),h=r(l),p=n(26),f=r(p),d=n(22),v=r(d),b=n(33),m=r(b),y=n(32),_=n(24),g=r(_),w=n(31),C=r(w),x=v["default"]();t.exports=e["default"]},function(t,e,n){"use strict";function r(t){var e=t.createClass({displayName:"Spring",componentWillMount:function(){},render:function(){return null}}),n=t.createClass({displayName:"TransitionSpring",componentWillMount:function(){},render:function(){return null}});return{Spring:e,TransitionSpring:n}}e.__esModule=!0,e["default"]=r;t.exports=e["default"]},function(t,e){"use strict";function n(t,e){for(var n in e)if(e.hasOwnProperty(n)){var r=t[n],o=e[n];if(o.config){if(r.config&&r.val!==o.val)return!1;if(!r.config&&r!==o.val)return!1}}return!0}e.__esModule=!0,e["default"]=n,t.exports=e["default"]},function(t,e){"use strict";function n(t,e,n,r,o,i,s){for(var u=!0;u;){var a=t,c=e,l=n,h=r,p=o,f=i,d=s;v=b=m=y=_=_=void 0,u=!1;var v=h===a.length,b=p===c.length,m=a[h],y=c[p];if(v&&b)return null;if(v)d[y]=l[y],t=a,e=c,n=l,r=h,o=p+1,i=f,s=d,u=!0;else if(b){var _=f(m);null!=_&&(d[m]=_),t=a,e=c,n=l,r=h+1,o=p,i=f,s=d,u=!0}else if(m!==y)if(l.hasOwnProperty(m))t=a,e=c,n=l,r=h+1,o=p,i=f,s=d,u=!0;else{var _=f(m);null!=_&&(d[m]=_),t=a,e=c,n=l,r=h+1,o=p,i=f,s=d,u=!0}else d[m]=l[m],t=a,e=c,n=l,r=h+1,o=p+1,i=f,s=d,u=!0}}function r(t,e,r){var o={};return n(Object.keys(t),Object.keys(e),e,0,0,r,o),o}e.__esModule=!0,e["default"]=r,t.exports=e["default"]},function(t,e){"use strict";function n(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e[n].config&&0!==t[n])return!1;return!0}e.__esModule=!0,e["default"]=n,t.exports=e["default"]},function(t,e){"use strict";function n(t,e){for(var n=e(Object.keys(t)),r={},o=0;o<n.length;o++){var i=n[o];r[i]=t[i]}return r}e.__esModule=!0,e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){var e=arguments.length<=1||void 0===arguments[1]?s["default"].noWobble:arguments[1];return{val:t,config:e}}e.__esModule=!0,e["default"]=o;var i=n(9),s=r(i);t.exports=e["default"]},function(t,e){"use strict";function n(t,e,n,o,i,s){var u=-i*(e-o),a=-s*n,c=u+a,l=n+c*t,h=e+l*t;return Math.abs(l-n)<r&&Math.abs(h-e)<r?[o,0]:[h,l]}e.__esModule=!0,e["default"]=n;var r=1e-4;t.exports=e["default"]},function(t,e){"use strict";function n(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=null==t[n].val?t[n]:t[n].val);return e}e.__esModule=!0,e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n){if(!n)return e;var r={};for(var o in e)if(e.hasOwnProperty(o))if(e[o].config){var i=n[o].config?n[o].val:n[o];r[o]={val:e[o].val*t+i*(1-t),config:e[o].config}}else r[o]=e[o];return r}function i(t,e,n,r){var o={};for(var i in r)if(r.hasOwnProperty(i))if(r[i].config){var s=r[i].config,u=s[0],c=s[1],l=a["default"](t,null==e[i].val?e[i]:e[i].val,n[i],r[i].val,u,c)[0];o[i]={val:l,config:r[i].config}}else o[i]=r[i];return o}function s(t,e,n,r){var o={};for(var i in r)if(r.hasOwnProperty(i))if(r[i].config){var s=r[i].config,u=s[0],c=s[1],l=a["default"](t,null==e[i].val?e[i]:e[i].val,n[i],r[i].val,u,c)[1];o[i]=l}else o[i]=0;return o}e.__esModule=!0,e.interpolateValue=o,e.updateCurrentStyle=i,e.updateCurrentVelocity=s;var u=n(30),a=r(u)},function(t,e){"use strict";function n(){return 0}e.__esModule=!0,e["default"]=n,t.exports=e["default"]},function(t,e,n){for(var r=n(10),o="undefined"==typeof window?{}:window,i=["moz","webkit"],s="AnimationFrame",u=o["request"+s],a=o["cancel"+s]||o["cancelRequest"+s],c=0;c<i.length&&!u;c++)u=o[i[c]+"Request"+s],a=o[i[c]+"Cancel"+s]||o[i[c]+"CancelRequest"+s];if(!u||!a){var l=0,h=0,p=[],f=1e3/60;u=function(t){if(0===p.length){var e=r(),n=Math.max(0,f-(e-l));l=n+e,setTimeout(function(){var t=p.slice(0);p.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(l)}catch(n){setTimeout(function(){throw n},0)}},Math.round(n))}return p.push({handle:++h,callback:t,cancelled:!1}),h},a=function(t){for(var e=0;e<p.length;e++)p[e].handle===t&&(p[e].cancelled=!0)}}t.exports=function(t){return u.call(o,t)},t.exports.cancel=function(){a.apply(o,arguments)}},function(t,e,n){var r;(function(t,o,i){(function(s){function u(t){return t&&t.Object===Object?t:null}function a(t){for(var e=t.length,n=new Array(e),r=0;e>r;r++)n[r]=t[r];return n}function c(t){return function(){try{return t.apply(this,arguments)}catch(e){return jt.e=e,jt}}}function l(t){throw t}function h(t,e){if(kt&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(Tt)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var o=n.join("\n"+Tt+"\n");t.stack=p(o)}}function p(t){for(var e=t.split("\n"),n=[],r=0,o=e.length;o>r;r++){var i=e[r];f(i)||d(i)||!i||n.push(i)}return n.join("\n")}function f(t){var e=b(t);if(!e)return!1;var n=e[0],r=e[1];return n===Nt&&r>=At&&_o>=r}function d(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function v(){if(kt)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=b(n);if(!r)return;return Nt=r[0],r[1]}}function b(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function m(t,e,n,r,o,i){var u=ge(t),a=u.length,c=ge(e),l=c.length;if(a!==l&&!r)return!1;for(var h,p=a;p--;)if(h=u[p],!(r?h in e:me.call(e,h)))return!1;for(var f=r;++p<a;){h=u[p];var d,v=t[h],b=e[h];if(!(d===s?n(v,b,r,o,i):d))return!1;f||(f="constructor"===h)}if(!f){var m=t.constructor,y=e.constructor;if(m!==y&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y))return!1}return!0}function y(t,e,n){switch(n){case $t:case Qt:return+t===+e;case Yt:return t.name===e.name&&t.message===e.message;case Xt:return t!==+t?e!==+e:t===+e;case ee:case re:return t===e+""}return!1}function _(t){return!!t&&"object"==typeof t}function g(t){return"number"==typeof t&&t>-1&&t%1===0&&_e>=t}function w(t){return _(t)&&g(t.length)&&!!ve[ye.call(t)]}function C(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function x(t,e,n,r,o,i){var u=-1,a=t.length,c=e.length;if(a!==c&&!(r&&c>a))return!1;for(;++u<a;){var l,h=t[u],p=e[u];if(l!==s){if(l)continue;return!1}if(r){if(!C(e,function(t){return h===t||n(h,t,r,o,i)}))return!1}else if(h!==p&&!n(h,p,r,o,i))return!1}return!0}function O(t,e,n,r,o,i){var s=xe(t),u=xe(e),a=Ht,c=Ht;s||(a=ye.call(t),a===Kt?a=te:a!==te&&(s=w(t))),u||(c=ye.call(e),c===Kt&&(c=te));var l=a===te&&!Ce(t),h=c===te&&!Ce(e),p=a===c;if(p&&!s&&!l)return y(t,e,a);if(!r){var f=l&&me.call(t,"__wrapped__"),d=h&&me.call(e,"__wrapped__");if(f||d)return n(f?t.value():t,d?e.value():e,r,o,i)}if(!p)return!1;o||(o=[]),i||(i=[]);for(var v=o.length;v--;)if(o[v]===t)return i[v]===e;o.push(t),i.push(e);var b=(s?x:m)(t,e,n,r,o,i);return o.pop(),i.pop(),b}function E(t,e,n,r,o){return t===e?!0:null==t||null==e||!we(t)&&!_(e)?t!==t&&e!==e:O(t,e,E,n,r,o)}function S(t,e){for(var n=new Array(t),r=0;t>r;r++)n[r]=e();return n}function j(t,e){this.id=t,this.value=e}function D(t){this._s=t,this.isDisposed=!1}function k(t){this._s=t}function P(t){this._s=t,this._l=t.length,this._i=0}function N(t){this._a=t}function A(t){this._a=t,this._l=L(t),this._i=0}function T(t){return"number"==typeof t&&mt.isFinite(t)}function M(t){var e,n=t[Ut];if(!n&&"string"==typeof t)return e=new k(t),e[Ut]();if(!n&&t.length!==s)return e=new N(t),e[Ut]();if(!n)throw new TypeError("Object is not iterable");return t[Ut]()}function q(t){var e=+t;return 0===e?e:isNaN(e)?e:0>e?-1:1}function L(t){var e=+t.length;return isNaN(e)?0:0!==e&&T(e)?(e=q(e)*Math.floor(Math.abs(e)),0>=e?0:e>Tn?Tn:e):e}function R(t,e){return ze(t)||(t=$e),new qn(e,t)}function I(t,e){this.observer=t,this.parent=e}function F(){return!1}function U(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function F(){return!1}function U(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function F(){return!1}function V(){return[]}function F(){return!1}function V(){return[]}function U(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function z(t){return function(e){return t.subscribe(e)}}function W(t,e){return function(n){for(var r=n,o=0;e>o;o++){var i=r[t[o]];if("undefined"==typeof i)return s;r=i}return r}}function Z(t,e,n,r){var o=new vo;return r.push(B(o,e,n)),t.apply(e,r),o.asObservable()}function B(t,e,n){return function(){for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];if(St(n)){if(o=Dt(n).apply(e,o),o===jt)return t.onError(o.e);t.onNext(o)}else o.length<=1?t.onNext(o[0]):t.onNext(o);t.onCompleted()}}function K(t,e,n,r){var o=new vo;return r.push(H(o,e,n)),t.apply(e,r),o.asObservable()}function H(t,e,n){return function(){var r=arguments[0];if(r)return t.onError(r);for(var o=arguments.length,i=[],s=1;o>s;s++)i[s-1]=arguments[s];if(St(n)){var i=Dt(n).apply(e,i);if(i===jt)return t.onError(i.e);t.onNext(i)}else i.length<=1?t.onNext(i[0]):t.onNext(i);t.onCompleted()}}function $(t){return mt.StaticNodeList?t instanceof mt.StaticNodeList||t instanceof mt.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}function Q(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function Y(t,e,n){var r=new je,o=Object.prototype.toString.call(t);if($(t)||"[object HTMLCollection]"===o)for(var i=0,s=t.length;s>i;i++)r.add(Y(t.item(i),e,n));else t&&r.add(new Q(t,e,n));return r}function G(t,e){return new Jr(t,e)}function J(t,e,n){return new lo(function(r){var o=t,i=Ve(e);return n.scheduleRecursiveFuture(0,o,function(t,e){if(i>0){var s=n.now();o=new Date(o.getTime()+i),o.getTime()<=s&&(o=new Date(s+i))}r.onNext(t),e(t+1,new Date(o))})})}function X(t,e,n){return t===e?new lo(function(t){return n.schedulePeriodic(0,e,function(e){return t.onNext(e),e+1})}):Dn(function(){return J(new Date(n.now()+t),e,n)})}function tt(t,e,n){return new lo(function(r){var o,i=!1,s=new Le,u=null,a=[],c=!1;return o=t.materialize().timestamp(n).subscribe(function(t){var o,l;"E"===t.value.kind?(a=[],a.push(t),u=t.value.error,l=!c):(a.push({value:t.value,timestamp:t.timestamp+e}),l=!i,i=!0),l&&(null!==u?r.onError(u):(o=new qe,s.setDisposable(o),o.setDisposable(n.scheduleRecursiveFuture(null,e,function(t,e){var o,s,l,h;if(null===u){c=!0;do l=null,a.length>0&&a[0].timestamp-n.now()<=0&&(l=a.shift().value),null!==l&&l.accept(r);while(null!==l);h=!1,s=0,a.length>0?(h=!0,s=Math.max(0,a[0].timestamp-n.now())):i=!1,o=u,c=!1,null!==o?r.onError(o):h&&e(null,s)}}))))}),new Re(o,s)},t)}function et(t,e,n){return Dn(function(){return tt(t,e-n.now(),n)})}function nt(t,e,n){var r,o;return St(e)?o=e:(r=e,o=n),new lo(function(e){function n(){a.setDisposable(t.subscribe(function(t){var n=Dt(o)(t);if(n===jt)return e.onError(n.e);var r=new qe;s.add(r),r.setDisposable(n.subscribe(function(){e.onNext(t),s.remove(r),i()},function(t){e.onError(t)},function(){e.onNext(t),s.remove(r),i()}))},function(t){e.onError(t)},function(){u=!0,a.dispose(),i()}))}function i(){u&&0===s.length&&e.onCompleted()}var s=new je,u=!1,a=new Le;return r?a.setDisposable(r.subscribe(n,function(t){e.onError(t)},n)):n(),new Re(a,s)},this)}function rt(t,e){return new lo(function(n){var r,o=!1,i=new Le,s=0,u=t.subscribe(function(t){var u=Dt(e)(t);if(u===jt)return n.onError(u.e);Et(u)&&(u=$r(u)),o=!0,r=t,s++;var a=s,c=new qe;i.setDisposable(c),c.setDisposable(u.subscribe(function(){o&&s===a&&n.onNext(r),o=!1,c.dispose()},function(t){n.onError(t)},function(){o&&s===a&&n.onNext(r),o=!1,c.dispose()}))},function(t){i.dispose(),n.onError(t),o=!1,s++},function(){i.dispose(),o&&n.onNext(r),n.onCompleted(),o=!1,s++});return new Re(u,i)},t)}function ot(t,e){return new lo(function(n){function r(){s&&(s=!1,n.onNext(o)),i&&n.onCompleted()}var o,i=!1,s=!1,u=new qe;return u.setDisposable(t.subscribe(function(t){s=!0,o=t},function(t){n.onError(t)},function(){i=!0,u.dispose()})),new Re(u,e.subscribe(r,function(t){n.onError(t)},r))},t)}function it(t,e,n,r){return St(e)&&(r=n,n=e,e=Fn()),vn.isObservable(r)||(r=Bn(new oo)),new lo(function(o){function i(t){function e(){return h=n===l}var n=l,i=new qe;a.setDisposable(i),i.setDisposable(t.subscribe(function(){e()&&u.setDisposable(r.subscribe(o)),i.dispose()},function(t){e()&&o.onError(t)},function(){e()&&u.setDisposable(r.subscribe(o))}))}function s(){var t=!h;return t&&l++,t}var u=new Le,a=new Le,c=new qe;u.setDisposable(c);var l=0,h=!1;return i(e),c.setDisposable(t.subscribe(function(t){if(s()){o.onNext(t);var e=Dt(n)(t);if(e===jt)return o.onError(e.e);i(Et(e)?$r(e):e)}},function(t){s()&&o.onError(t)},function(){s()&&o.onCompleted()})),new Re(u,a)},t)}function st(t,e,n,r){return ze(n)&&(r=n,n=Bn(new oo)),n instanceof Error&&(n=Bn(n)),ze(r)||(r=Xe),vn.isObservable(n)||(n=Bn(new oo)),new lo(function(o){function i(){var t=s;l.setDisposable(r.scheduleFuture(null,e,function(){c=s===t,c&&(Et(n)&&(n=$r(n)),a.setDisposable(n.subscribe(o)))}))}var s=0,u=new qe,a=new Le,c=!1,l=new Le;return a.setDisposable(u),i(),u.setDisposable(t.subscribe(function(t){c||(s++,o.onNext(t),i())},function(t){c||(s++,o.onError(t))},function(){c||(s++,o.onCompleted())})),new Re(a,l)},t)}function ut(t,e,n){return new lo(function(r){function o(t,e){if(c[e]=t,s[e]=!0,u||(u=s.every(gt))){if(i)return r.onError(i);var o=Dt(n).apply(null,c);if(o===jt)return r.onError(o.e);r.onNext(o)}a&&c[1]&&r.onCompleted()}var i,s=[!1,!1],u=!1,a=!1,c=new Array(2);return new Re(t.subscribe(function(t){o(t,0)},function(t){c[1]?r.onError(t):i=t},function(){a=!0,c[1]&&r.onCompleted()}),e.subscribe(function(t){o(t,1)},function(t){r.onError(t)},function(){a=!0,o(!0,1)}))},t)}function at(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}var ct={"function":!0,object:!0},lt=ct[typeof e]&&e&&!e.nodeType?e:null,ht=ct[typeof t]&&t&&!t.nodeType?t:null,pt=u(lt&&ht&&"object"==typeof o&&o),ft=u(ct[typeof self]&&self),dt=u(ct[typeof window]&&window),vt=ht&&ht.exports===lt?lt:null,bt=u(ct[typeof this]&&this),mt=pt||dt!==(bt&&bt.window)&&dt||ft||bt||Function("return this")(),yt={internals:{},config:{Promise:mt.Promise},helpers:{}},_t=yt.helpers.noop=function(){},gt=yt.helpers.identity=function(t){return t},wt=yt.helpers.defaultNow=Date.now,Ct=yt.helpers.defaultComparer=function(t,e){return Oe(t,e)},xt=yt.helpers.defaultSubComparer=function(t,e){return t>e?1:e>t?-1:0},Ot=(yt.helpers.defaultKeySerializer=function(t){return t.toString()},yt.helpers.defaultError=function(t){throw t}),Et=yt.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},St=yt.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),t}(),jt={e:{}},Dt=yt.internals.tryCatch=function(t){if(!St(t))throw new TypeError("fn must be a function");return c(t)};yt.config.longStackSupport=!1;var kt=!1,Pt=Dt(function(){throw new Error})();kt=!!Pt.e&&!!Pt.e.stack;var Nt,At=v(),Tt="From previous event:",Mt=yt.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};Mt.prototype=Object.create(Error.prototype),Mt.prototype.name="EmptyError";var qt=yt.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};qt.prototype=Object.create(Error.prototype),qt.prototype.name="ObjectDisposedError";var Lt=yt.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};Lt.prototype=Object.create(Error.prototype),Lt.prototype.name="ArgumentOutOfRangeError";var Rt=yt.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};Rt.prototype=Object.create(Error.prototype),Rt.prototype.name="NotSupportedError";var It=yt.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};It.prototype=Object.create(Error.prototype),It.prototype.name="NotImplementedError";var Ft=yt.helpers.notImplemented=function(){throw new It},Ut=(yt.helpers.notSupported=function(){throw new Rt},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");mt.Set&&"function"==typeof(new mt.Set)["@@iterator"]&&(Ut="@@iterator");var Vt=yt.doneEnumerator={done:!0,value:s},zt=yt.helpers.isIterable=function(t){return t&&t[Ut]!==s},Wt=yt.helpers.isArrayLike=function(t){return t&&t.length!==s};yt.helpers.iterator=Ut;var Zt=yt.internals.bindCallback=function(t,e,n){if("undefined"==typeof e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},Bt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Kt=(Bt.length,"[object Arguments]"),Ht="[object Array]",$t="[object Boolean]",Qt="[object Date]",Yt="[object Error]",Gt="[object Function]",Jt="[object Map]",Xt="[object Number]",te="[object Object]",ee="[object RegExp]",ne="[object Set]",re="[object String]",oe="[object WeakMap]",ie="[object ArrayBuffer]",se="[object Float32Array]",ue="[object Float64Array]",ae="[object Int8Array]",ce="[object Int16Array]",le="[object Int32Array]",he="[object Uint8Array]",pe="[object Uint8ClampedArray]",fe="[object Uint16Array]",de="[object Uint32Array]",ve={};ve[se]=ve[ue]=ve[ae]=ve[ce]=ve[le]=ve[he]=ve[pe]=ve[fe]=ve[de]=!0,ve[Kt]=ve[Ht]=ve[ie]=ve[$t]=ve[Qt]=ve[Yt]=ve[Gt]=ve[Jt]=ve[Xt]=ve[te]=ve[ee]=ve[ne]=ve[re]=ve[oe]=!1;var be=Object.prototype,me=be.hasOwnProperty,ye=be.toString,_e=Math.pow(2,53)-1,ge=Object.keys||function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var i,s,u=[];for(i in o)t.call(o,i)&&u.push(i);if(e)for(s=0;r>s;s++)t.call(o,n[s])&&u.push(n[s]);return u}}(),we=yt.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)},Ce=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),xe=Array.isArray||function(t){return _(t)&&g(t.length)&&ye.call(t)===Ht},Oe=yt.internals.isEqual=function(t,e){return E(t,e)},Ee=({}.hasOwnProperty,Array.prototype.slice,yt.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}),Se=yt.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;r>n;n++)e.push(arguments[n]);for(var o=0,i=e.length;i>o;o++){var s=e[o];for(var u in s)t[u]=s[u]}},je=(yt.internals.addRef=function(t,e){return new lo(function(n){return new Re(e.getDisposable(),t.subscribe(n))})},yt.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,n=new Array(e),t=0;e>t;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length}),De=je.prototype;De.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},De.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);-1!==n&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},De.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;t>n;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;t>n;n++)e[n].dispose()}};var ke=yt.Disposable=function(t){this.isDisposed=!1,this.action=t||_t};ke.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var Pe=ke.create=function(t){return new ke(t)},Ne=ke.empty={dispose:_t},Ae=ke.isDisposable=function(t){return t&&St(t.dispose)},Te=ke.checkDisposed=function(t){if(t.isDisposed)throw new qt},Me=ke._fixup=function(t){return Ae(t)?t:Ne},qe=yt.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};qe.prototype.getDisposable=function(){return this.current},qe.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},qe.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}};var Le=yt.SerialDisposable=function(){this.isDisposed=!1,this.current=null};Le.prototype.getDisposable=function(){return this.current},Le.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},Le.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var Re=yt.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1};Re.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this._first;this._first=null,t&&t.dispose();var e=this._second;this._second=null,e&&e.dispose()}};var Ie=yt.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1};Ie.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=0,e=this._disposables.length;e>t;t++)this._disposables[t].dispose();this._disposables.length=0}};var Fe=(yt.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?Ne:new t(this)},e}(),yt.internals.ScheduledItem=function(t,e,n,r,o){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=o||xt,this.disposable=new qe});Fe.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},Fe.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},Fe.prototype.isCancelled=function(){return this.disposable.isDisposed},Fe.prototype.invokeCore=function(){return Me(this.action(this.scheduler,this.state))};var Ue=yt.Scheduler=function(){
function t(){}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(t,e){throw new It},e.scheduleFuture=function(e,n,r){var o=n;return o instanceof Date&&(o-=this.now()),o=t.normalize(o),0===o?this.schedule(e,r):this._scheduleFuture(e,o,r)},e._scheduleFuture=function(t,e,n){throw new It},t.now=wt,t.prototype.now=wt,t.normalize=function(t){return 0>t&&(t=0),t},t}(),Ve=Ue.normalize,ze=Ue.isScheduler;!function(t){function e(t,e){function n(e){function r(t,e){return s?i.remove(a):u=!0,o(e,n),Ne}var s=!1,u=!1,a=t.schedule(e,r);u||(i.add(a),s=!0)}var r=e[0],o=e[1],i=new je;return o(r,n),i}function n(t,e){function n(e,r){function s(t,e){return u?i.remove(c):a=!0,o(e,n),Ne}var u=!1,a=!1,c=t.scheduleFuture(e,r,s);a||(i.add(c),u=!0)}var r=e[0],o=e[1],i=new je;return o(r,n),i}t.scheduleRecursive=function(t,n){return this.schedule([t,n],e)},t.scheduleRecursiveFuture=function(t,e,r){return this.scheduleFuture([t,r],e,n)}}(Ue.prototype),function(t){t.schedulePeriodic=function(t,e,n){if("undefined"==typeof mt.setInterval)throw new Rt;e=Ve(e);var r=t,o=mt.setInterval(function(){r=n(r)},e);return Pe(function(){mt.clearInterval(o)})}}(Ue.prototype);var We,Ze,Be=function(t){function e(){t.call(this)}return Ee(e,t),e.prototype.schedule=function(t,e){return Me(e(this,t))},e}(Ue),Ke=Ue.immediate=new Be,He=function(t){function e(){for(;r.length>0;){var t=r.dequeue();!t.isCancelled()&&t.invoke()}}function n(){t.call(this)}var r;return Ee(n,t),n.prototype.schedule=function(t,n){var o=new Fe(this,t,n,this.now());if(r)r.enqueue(o);else{r=new tn(4),r.enqueue(o);var i=Dt(e)();r=null,i===jt&&l(i.e)}return o.disposable},n.prototype.scheduleRequired=function(){return!r},n}(Ue),$e=Ue.currentThread=new He,Qe=(yt.internals.SchedulePeriodicRecursive=function(){function t(t){return function(e,n){n(0,t._period);var r=Dt(t._action)(t._state);r===jt&&(t._cancel.dispose(),l(r.e)),t._state=r}}function e(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return e.prototype.start=function(){var e=new qe;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,t(this))),e},e}(),function(){var t,e=_t;if(mt.setTimeout)t=mt.setTimeout,e=mt.clearTimeout;else{if(!mt.WScript)throw new Rt;t=function(t,e){mt.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}()),Ye=Qe.setTimeout,Ge=Qe.clearTimeout;!function(){function t(e){if(o)Ye(function(){t(e)},0);else{var n=r[e];if(n){o=!0;var i=Dt(n)();Ze(e),o=!1,i===jt&&l(i.e)}}}function e(){if(!mt.postMessage||mt.importScripts)return!1;var t=!1,e=mt.onmessage;return mt.onmessage=function(){t=!0},mt.postMessage("","*"),mt.onmessage=e,t}var n=1,r={},o=!1;Ze=function(t){delete r[t]};var s=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),u="function"==typeof(u=pt&&vt&&pt.setImmediate)&&!s.test(u)&&u;if(St(u))We=function(e){var o=n++;return r[o]=e,u(function(){t(o)}),o};else if("undefined"!=typeof i&&"[object process]"==={}.toString.call(i))We=function(e){var o=n++;return r[o]=e,i.nextTick(function(){t(o)}),o};else if(e()){var a="ms.rx.schedule"+Math.random(),c=function(e){"string"==typeof e.data&&e.data.substring(0,a.length)===a&&t(e.data.substring(a.length))};mt.addEventListener("message",c,!1),We=function(t){var e=n++;return r[e]=t,mt.postMessage(a+currentId,"*"),e}}else if(mt.MessageChannel){var h=new mt.MessageChannel;h.port1.onmessage=function(e){t(e.data)},We=function(t){var e=n++;return r[e]=t,h.port2.postMessage(e),e}}else We="document"in mt&&"onreadystatechange"in mt.document.createElement("script")?function(e){var o=mt.document.createElement("script"),i=n++;return r[i]=e,o.onreadystatechange=function(){t(i),o.onreadystatechange=null,o.parentNode.removeChild(o),o=null},mt.document.documentElement.appendChild(o),i}:function(e){var o=n++;return r[o]=e,Ye(function(){t(o)},0),o}}();var Je=function(t){function e(){t.call(this)}function n(t,e,n,r){return function(){t.setDisposable(ke._fixup(e(n,r)))}}function r(t){this._id=t,this.isDisposed=!1}function o(t){this._id=t,this.isDisposed=!1}return Ee(e,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Ze(this._id))},o.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Ge(this._id))},e.prototype.schedule=function(t,e){var o=new qe,i=We(n(o,e,this,t));return new Re(o,new r(i))},e.prototype._scheduleFuture=function(t,e,r){if(0===e)return this.schedule(t,r);var i=new qe,s=Ye(n(i,r,this,t),e);return new Re(i,new o(s))},e}(Ue),Xe=Ue["default"]=Ue.async=new Je;j.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var tn=yt.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},en=tn.prototype;en.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},en.percolate=function(t){if(!(t>=this.length||0>t)){var e=t-1>>1;if(!(0>e||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},en.heapify=function(t){if(+t||(t=0),!(t>=this.length||0>t)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t){var o=this.items[t];this.items[t]=this.items[r],this.items[r]=o,this.heapify(r)}}},en.peek=function(){return this.items[0].value},en.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=s,this.heapify()},en.dequeue=function(){var t=this.peek();return this.removeAt(0),t},en.enqueue=function(t){var e=this.length++;this.items[e]=new j(tn.count++,t),this.percolate(e)},en.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},tn.count=0;var nn,rn=yt.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new It},t.prototype._acceptObserver=function(t,e,n){throw new It},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return ze(t)||(t=Ke),new lo(function(n){return t.schedule(e,function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()})})},t}(),on=function(t){function e(t){this.value=t,this.kind="N"}return Ee(e,t),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}(rn),sn=function(t){function e(t){this.error=t,this.kind="E"}return Ee(e,t),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}(rn),un=function(t){function e(){this.kind="C"}return Ee(e,t),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}(rn),an=rn.createOnNext=function(t){return new on(t)},cn=rn.createOnError=function(t){return new sn(t)},ln=rn.createOnCompleted=function(){return new un},hn=yt.Observer=function(){},pn=hn.create=function(t,e,n){return t||(t=_t),e||(e=Ot),n||(n=_t),new dn(t,e,n)},fn=yt.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return Ee(e,t),e.prototype.next=Ft,e.prototype.error=Ft,e.prototype.completed=Ft,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.error(t),!0)},e}(hn),dn=yt.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return Ee(e,t),e.prototype.next=function(t){this._onNext(t)},e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(fn),vn=yt.Observable=function(){function t(t,e){return function(n){var r=n.onError;return n.onError=function(e){h(e,t),r.call(n,e)},e.call(t,n)}}function e(){if(yt.config.longStackSupport&&kt){var e=this._subscribe,n=Dt(l)(new Error).e;this.stack=n.stack.substring(n.stack.indexOf("\n")+1),this._subscribe=t(this,e)}}return nn=e.prototype,e.isObservable=function(t){return t&&St(t.subscribe)},nn.subscribe=nn.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:pn(t,e,n))},nn.subscribeOnNext=function(t,e){return this._subscribe(pn("undefined"!=typeof e?function(n){t.call(e,n)}:t))},nn.subscribeOnError=function(t,e){return this._subscribe(pn(null,"undefined"!=typeof e?function(n){t.call(e,n)}:t))},nn.subscribeOnCompleted=function(t,e){return this._subscribe(pn(null,null,"undefined"!=typeof e?function(){t.call(e)}:t))},e}(),bn=yt.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new Le}function n(t,e){return function(){t.onNext(e)}}function r(t,e){return function(){t.onError(e)}}function o(t){return function(){t.onCompleted()}}function i(t,e){var n;if(!(t.queue.length>0))return void(t.isAcquired=!1);n=t.queue.shift();var r=Dt(n)();return r===jt?(t.queue=[],t.hasFaulted=!0,l(r.e)):void e(t)}return Ee(e,t),e.prototype.next=function(t){this.queue.push(n(this.observer,t))},e.prototype.error=function(t){this.queue.push(r(this.observer,t))},e.prototype.completed=function(){this.queue.push(o(this.observer))},e.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,i))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(fn),mn=yt.ObservableBase=function(t){function e(t){return t&&St(t.dispose)?t:St(t)?Pe(t):Ne}function n(t,n){var r=n[0],o=n[1],i=Dt(o.subscribeCore).call(o,r);i!==jt||r.fail(jt.e)||l(jt.e),r.setDisposable(e(i))}function r(){t.call(this)}return Ee(r,t),r.prototype._subscribe=function(t){var e=new ho(t),r=[e,this];return $e.scheduleRequired()?$e.schedule(r,n):n(null,r),e},r.prototype.subscribeCore=Ft,r}(vn),yn=yt.FlatMapObservable=function(t){function e(e,n,r,o){this.resultSelector=St(r)?r:null,this.selector=Zt(St(n)?n:function(){return n},o,3),this.source=e,t.call(this)}function n(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,fn.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this.resultSelector,this))},Ee(n,fn),n.prototype._wrapResult=function(t,e,n){return this.resultSelector?t.map(function(t,r){return this.resultSelector(e,t,n,r)},this):t},n.prototype.next=function(t){var e=this.i++,n=Dt(this.selector)(t,e,this.source);return n===jt?this.o.onError(n.e):(Et(n)&&(n=$r(n)),(Wt(n)||zt(n))&&(n=vn.from(n)),void this.o.onNext(this._wrapResult(n,t,e)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(mn),_n=yt.internals.Enumerable=function(){};D.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var gn=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=Dt(t.e.next).call(t.e);if(n===jt)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();var o=n.value;Et(o)&&(o=$r(o));var i=new qe;t.subscription.setDisposable(i),i.setDisposable(o.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,fn.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=new Le,r={isDisposed:!1,o:t,subscription:e,e:this.sources[Ut]()},o=$e.scheduleRecursive(r,n);return new Ie([e,o,new D(r)])},Ee(r,fn),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.o.onError(t)},r.prototype.completed=function(){this._recurse(this._state)},e}(mn);_n.prototype.concat=function(){return new gn(this)};var wn=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=Dt(t.e.next).call(t.e);if(n===jt)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();var o=n.value;Et(o)&&(o=$r(o));var i=new qe;t.subscription.setDisposable(i),i.setDisposable(o.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,fn.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=new Le,r={isDisposed:!1,e:this.sources[Ut](),subscription:e,lastError:null,o:t},o=$e.scheduleRecursive(r,n);return new Ie([e,o,new D(r)])},Ee(r,fn),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},r.prototype.completed=function(){this._state.o.onCompleted()},e}(mn);_n.prototype.catchError=function(){return new wn(this)},_n.prototype.catchErrorWhen=function(t){var e=this;return new lo(function(n){var r,o=new fo,i=new fo,s=t(o),u=s.subscribe(i),a=e[Ut](),c={isDisposed:!1},l=new Le,h=$e.scheduleRecursive(null,function(t,e){if(!c.isDisposed){var s=Dt(a.next).call(a);if(s===jt)return n.onError(s.e);if(s.done)return void(r?n.onError(r):n.onCompleted());var u=s.value;Et(u)&&(u=$r(u));var h=new qe,p=new qe;l.setDisposable(new Re(p,h)),h.setDisposable(u.subscribe(function(t){n.onNext(t)},function(t){p.setDisposable(i.subscribe(e,function(t){n.onError(t)},function(){n.onCompleted()})),o.onNext(t)},function(){n.onCompleted()}))}});return new Ie([u,l,h,new D(c)])})};var Cn=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return Ee(e,t),e.prototype[Ut]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?Vt:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(_n),xn=_n.repeat=function(t,e){return new Cn(t,e)},On=function(t){function e(t,e,n){this.s=t,this.fn=e?Zt(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return Ee(e,t),e.prototype[Ut]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:Vt},e}(_n),En=_n.of=function(t,e,n){return new On(t,e,n)},Sn=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],fn.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},Ee(n,fn),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},e}(mn);nn.toArray=function(){return new Sn(this)},vn.create=function(t,e){return new lo(t,e)};var jn=function(t){function e(e){this._f=e,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=Dt(this._f)();return e===jt?Bn(e.e).subscribe(t):(Et(e)&&(e=$r(e)),e.subscribe(t))},e}(mn),Dn=vn.defer=function(t){return new jn(t)},kn=function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),Ne}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=new n(t,this.scheduler);return e.run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===Ke?r(null,t):this.scheduler.schedule(t,r)},e}(mn),Pn=new kn(Ke),Nn=vn.empty=function(t){return ze(t)||(t=Ke),t===Ke?Pn:new kn(t)},An=function(t){function e(e,n,r){this._iterable=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e,n){return function(r,o){var i=Dt(e.next).call(e);if(i===jt)return t.onError(i.e);if(i.done)return t.onCompleted();var s=i.value;return St(n)&&(s=Dt(n)(s,r),s===jt)?t.onError(s.e):(t.onNext(s),void o(r+1))}}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=Object(this._iterable),r=M(e);return this._scheduler.scheduleRecursive(0,n(t,r,this._fn))},e}(mn),Tn=Math.pow(2,53)-1;k.prototype[Ut]=function(){return new P(this._s)},P.prototype[Ut]=function(){return this},P.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:Vt},N.prototype[Ut]=function(){return new A(this._a)},A.prototype[Ut]=function(){return this},A.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:Vt};var Mn=vn.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!St(e))throw new Error("mapFn when provided must be a function");if(e)var o=Zt(e,n,2);return ze(r)||(r=$e),new An(t,o,r)},qn=function(t){function e(e,n){this._args=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e.length;return function(r,o){n>r?(t.onNext(e[r]),o(r+1)):t.onCompleted()}}return Ee(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._args))},e}(mn),Ln=vn.fromArray=function(t,e){return ze(e)||(e=$e),new qn(t,e)},Rn=function(t){function e(){t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){return Ne},e}(mn),In=new Rn,Fn=vn.never=function(){return In};vn.of=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return new qn(e,$e)},vn.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;e>r;r++)n[r-1]=arguments[r];return new qn(n,t)};var Un=function(t){function e(e,n){this._o=e,this._keys=Object.keys(e),this._scheduler=n,t.call(this)}function n(t,e,n){return function(r,o){if(r<n.length){var i=n[r];t.onNext([i,e[i]]),o(r+1)}else t.onCompleted()}}return Ee(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._o,this._keys))},e}(mn);vn.pairs=function(t,e){return e||(e=$e),new Un(t,e)};var Vn=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}function n(t,e,n){return function(r,o){e>r?(n.onNext(t+r),o(r+1)):n.onCompleted()}}return Ee(e,t),e.prototype.subscribeCore=function(t){return this.scheduler.scheduleRecursive(0,n(this.start,this.rangeCount,t))},e}(mn);vn.range=function(t,e,n){return ze(n)||(n=$e),new Vn(t,e,n)};var zn=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=new I(t,this);return e.run()},e}(mn);I.prototype.run=function(){function t(t,r){return(-1===t||t>0)&&(e.onNext(n),t>0&&t--),0===t?e.onCompleted():void r(t)}var e=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,t)},vn.repeat=function(t,e,n){return ze(n)||(n=$e),new zn(t,e,n)};var Wn=function(t){function e(e,n){this._value=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),Ne}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===Ke?n(null,e):this._scheduler.schedule(e,n)},e}(mn),Zn=(vn["return"]=vn.just=function(t,e){return ze(e)||(e=Ke),new Wn(t,e)},function(t){function e(e,n){this._error=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onError(n),Ne}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=[this._error,t];return this._scheduler===Ke?n(null,e):this._scheduler.schedule(e,n)},e}(mn)),Bn=vn["throw"]=function(t,e){return ze(e)||(e=Ke),new Zn(t,e)},Kn=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=new qe,n=new Le;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new Hn(t,n,this._fn))),n},e}(mn),Hn=function(t){function e(e,n,r){this._o=e,this._s=n,this._fn=r,t.call(this)}return Ee(e,t),e.prototype.next=function(t){this._o.onNext(t)},e.prototype.completed=function(){return this._o.onCompleted()},e.prototype.error=function(t){var e=Dt(this._fn)(t);if(e===jt)return this._o.onError(e.e);Et(e)&&(e=$r(e));var n=new qe;this._s.setDisposable(n),n.setDisposable(e.subscribe(this._o))},e}(fn);nn["catch"]=function(t){return St(t)?new Kn(this,t):$n([this,t])};var $n=vn["catch"]=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return En(t).catchError()};nn.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Gn.apply(this,e)};var Qn=function(t){function e(e,n){this._params=e,this._cb=n,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){for(var e=this._params.length,n=new Array(e),r={hasValue:S(e,F),hasValueAll:!1,isDone:S(e,F),values:new Array(e)},o=0;e>o;o++){var i=this._params[o],s=new qe;n[o]=s,Et(i)&&(i=$r(i)),s.setDisposable(i.subscribe(new Yn(t,o,this._cb,r)))}return new Ie(n)},e}(mn),Yn=function(t){function e(e,n,r,o){this._o=e,this._i=n,this._cb=r,this._state=o,t.call(this)}function n(t){return function(e,n){return n!==t}}return Ee(e,t),e.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(gt))){var e=Dt(this._cb).apply(null,this._state.values);if(e===jt)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter(n(this._i)).every(gt)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(gt)&&this._o.onCompleted()},e}(fn),Gn=vn.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=St(e[t-1])?e.pop():U;return Array.isArray(e[0])&&(e=e[0]),new Qn(e,r)};nn.concat=function(){for(var t=[],e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return t.unshift(this),tr.apply(null,t)};var Jn=function(t){function e(e,n){this._s=e,this._fn=n,t.call(this)}return Ee(e,t),e.prototype.next=function(t){this._s.o.onNext(t)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.i++,this._fn(this._s)},e}(fn),Xn=function(t){function e(e){this._sources=e,t.call(this)}function n(t,e){if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();var n=t.sources[t.i];Et(n)&&(n=$r(n));var r=new qe;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Jn(t,e)))}}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=new Le,r=Pe(_t),o={o:t,i:0,subscription:e,disposable:r,sources:this._sources},i=Ke.scheduleRecursive(o,n);return new Ie([e,r,i])},e}(mn),tr=vn.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;n>e;e++)t[e]=arguments[e]}return new Xn(t)};nn.concatAll=function(){return this.merge(1)};var er=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=new je;return e.add(this.source.subscribe(new nr(t,this.maxConcurrent,e))),e},e}(mn),nr=function(t){function e(e,n,r){this.o=e,this.max=n,this.g=r,this.done=!1,this.q=[],this.activeCount=0,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return Ee(e,t),e.prototype.handleSubscribe=function(t){var e=new qe;this.g.add(e),Et(t)&&(t=$r(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},Ee(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},e}(fn);nn.merge=function(t){return"number"!=typeof t?rr(this,t):new er(this,t)};var rr=vn.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(ze(arguments[0]))for(t=arguments[0],e=1;r>e;e++)n.push(arguments[e]);else for(t=Ke,e=0;r>e;e++)n.push(arguments[e]);else for(t=Ke,e=1;r>e;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),R(t,n).mergeAll()},or=yt.CompositeError=function(t){this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};or.prototype=Object.create(Error.prototype),or.prototype.name="CompositeError";var ir=function(t){function e(e){this.source=e,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=new je,n=new qe,r={isStopped:!1,errors:[],o:t};return e.add(n),n.setDisposable(this.source.subscribe(new sr(e,r))),e},e}(mn),sr=function(t){function e(e,n){this._group=e,this._state=n,t.call(this)}function n(t,e){0===e.length?t.onCompleted():1===e.length?t.onError(e[0]):t.onError(new or(e))}function r(e,n,r){this._inner=e,this._group=n,this._state=r,t.call(this)}return Ee(e,t),e.prototype.next=function(t){var e=new qe;this._group.add(e),Et(t)&&(t=$r(t)),e.setDisposable(t.subscribe(new r(e,this._group,this._state)))},e.prototype.error=function(t){this._state.errors.push(t),this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},e.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},Ee(r,t),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.errors.push(t),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},r.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},e}(fn);vn.mergeDelayError=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}var r=R(null,t);return new ir(r)};var ur=function(t){function e(e){this.source=e,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=new je,n=new qe;return e.add(n),n.setDisposable(this.source.subscribe(new ar(t,e))),e},e}(mn),ar=function(t){function e(e,n){this.o=e,this.g=n,this.done=!1,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return Ee(e,t),e.prototype.next=function(t){var e=new qe;this.g.add(e),Et(t)&&(t=$r(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},Ee(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},e}(fn);nn.mergeAll=function(){return new ur(this)};var cr=function(t){function e(e,n){this._s=e,this._o=Et(n)?$r(n):n,this._open=!1,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=new qe;e.setDisposable(this._s.subscribe(new lr(t,this))),Et(this._o)&&(this._o=$r(this._o));var n=new qe;return n.setDisposable(this._o.subscribe(new hr(t,this,n))),new Re(e,n)},e}(mn),lr=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Ee(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},e}(fn),hr=function(t){function e(e,n,r){this._o=e,this._p=n,this._r=r,t.call(this)}return Ee(e,t),e.prototype.next=function(){this._p._open=!0,this._r.dispose()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._r.dispose()},e}(fn);nn.skipUntil=function(t){return new cr(this,t)};var pr=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,fn.call(this)}function r(t,e){this.parent=t,this.id=e,fn.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=new Le,r=this.source.subscribe(new n(t,e));return new Re(r,e)},Ee(n,fn),n.prototype.next=function(t){var e=new qe,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),Et(t)&&(t=$r(t)),e.setDisposable(t.subscribe(new r(this,n)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},Ee(r,fn),r.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},e}(mn);nn["switch"]=nn.switchLatest=function(){return new pr(this)};var fr=function(t){function e(e,n){this.source=e,this.other=Et(n)?$r(n):n,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){return new Re(this.source.subscribe(t),this.other.subscribe(new dr(t)))},e}(mn),dr=function(t){function e(e){this._o=e,t.call(this)}return Ee(e,t),e.prototype.next=function(){this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=_t,e}(fn);nn.takeUntil=function(t){return new fr(this,t)};var vr=function(t){function e(e,n,r){this._s=e,this._ss=n,this._cb=r,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){for(var e=this._ss.length,n={hasValue:S(e,F),hasValueAll:!1,values:new Array(e)},r=this._ss.length,o=new Array(r+1),i=0;r>i;i++){var s=this._ss[i],u=new qe;Et(s)&&(s=$r(s)),u.setDisposable(s.subscribe(new br(t,i,n))),o[i]=u}var a=new qe;return a.setDisposable(this._s.subscribe(new mr(t,this._cb,n))),o[r]=a,new Ie(o)},e}(mn),br=function(t){function e(e,n,r){this._o=e,this._i=n,this._state=r,t.call(this)}return Ee(e,t),e.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(gt)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=_t,e}(fn),mr=function(t){function e(e,n,r){this._o=e,this._cb=n,this._state=r,t.call(this)}return Ee(e,t),e.prototype.next=function(t){var e=[t].concat(this._state.values);if(this._state.hasValueAll){var n=Dt(this._cb).apply(null,e);return n===jt?this._o.onError(n.e):void this._o.onNext(n)}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(fn);nn.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=St(e[t-1])?e.pop():U;return Array.isArray(e[0])&&(e=e[0]),new vr(this,e,r)};var yr=function(t){function e(e,n){this._s=e,this._cb=n,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){for(var e=this._s.length,n=new Array(e),r=S(e,F),o=S(e,V),i=0;e>i;i++){var s=this._s[i],u=new qe;n[i]=u,Et(s)&&(s=$r(s)),u.setDisposable(s.subscribe(new _r(t,i,this,o,r)))}return new Ie(n)},e}(mn),_r=function(t){function e(e,n,r,o,i){this._o=e,this._i=n,this._p=r,this._q=o,this._d=i,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function o(t){return function(e,n){return n!==t}}return Ee(e,t),e.prototype.next=function(t){if(this._q[this._i].push(t),this._q.every(n)){var e=this._q.map(r),i=Dt(this._p._cb).apply(null,e);if(i===jt)return this._o.onError(i.e);this._o.onNext(i)}else this._d.filter(o(this._i)).every(gt)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d[this._i]=!0,this._d.every(gt)&&this._o.onCompleted()},e}(fn);nn.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=St(e[t-1])?e.pop():U;Array.isArray(e[0])&&(e=e[0]);var o=this;return e.unshift(o),new yr(e,r)},vn.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];
Array.isArray(e[0])&&(e=St(e[1])?e[0].concat(e[1]):e[0]);var r=e.shift();return r.zip.apply(r,e)};var gr=function(t){function e(e,n){this.sources=e,this._cb=n,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){for(var e=this.sources,n=e.length,r=new Array(n),o={q:S(n,V),done:S(n,F),cb:this._cb,o:t},i=0;n>i;i++)!function(t){var n=e[t],i=new qe;(Wt(n)||zt(n))&&(n=Mn(n)),r[t]=i,i.setDisposable(n.subscribe(new wr(o,t)))}(i);return new Ie(r)},e}(mn),wr=function(t){function e(e,n){this._s=e,this._i=n,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function o(t){return function(e,n){return n!==t}}return Ee(e,t),e.prototype.next=function(t){if(this._s.q[this._i].push(t),this._s.q.every(n)){var e=this._s.q.map(r),i=Dt(this._s.cb).apply(null,e);if(i===jt)return this._s.o.onError(i.e);this._s.o.onNext(i)}else this._s.done.filter(o(this._i)).every(gt)&&this._s.o.onCompleted()},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(gt)&&this._s.o.onCompleted()},e}(fn);nn.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=St(e[t-1])?e.pop():U,o=this;return e.unshift(o),new gr(e,r)},nn.asObservable=function(){return new lo(z(this),this)};var Cr=function(t){function e(e){this.source=e,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new xr(t))},e}(mn),xr=function(t){function e(e){this._o=e,t.call(this)}return Ee(e,t),e.prototype.next=function(t){t.accept(this._o)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(fn);nn.dematerialize=function(){return new Cr(this)};var Or=function(t){function e(e,n,r){this.source=e,this.keyFn=n,this.comparer=r,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Er(t,this.keyFn,this.comparer))},e}(mn),Er=function(t){function e(e,n,r){this.o=e,this.keyFn=n,this.comparer=r,this.hasCurrentKey=!1,this.currentKey=null,t.call(this)}return Ee(e,t),e.prototype.next=function(t){var e,n=t;return St(this.keyFn)&&(n=Dt(this.keyFn)(t),n===jt)?this.o.onError(n.e):this.hasCurrentKey&&(e=Dt(this.comparer)(this.currentKey,n),e===jt)?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},e}(fn);nn.distinctUntilChanged=function(t,e){return e||(e=Ct),new Or(this,t,e)};var Sr=function(t){function e(e,n,r,o){this.source=e,this._oN=n,this._oE=r,this._oC=o,t.call(this)}function n(t,e){this.o=t,this.t=!e._oN||St(e._oN)?pn(e._oN||_t,e._oE||_t,e._oC||_t):e._oN,this.isStopped=!1,fn.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},Ee(n,fn),n.prototype.next=function(t){var e=Dt(this.t.onNext).call(this.t,t);e===jt&&this.o.onError(e.e),this.o.onNext(t)},n.prototype.error=function(t){var e=Dt(this.t.onError).call(this.t,t);return e===jt?this.o.onError(e.e):void this.o.onError(t)},n.prototype.completed=function(){var t=Dt(this.t.onCompleted).call(this.t);return t===jt?this.o.onError(t.e):void this.o.onCompleted()},e}(mn);nn["do"]=nn.tap=nn.doAction=function(t,e,n){return new Sr(this,t,e,n)},nn.doOnNext=nn.tapOnNext=function(t,e){return this.tap("undefined"!=typeof e?function(n){t.call(e,n)}:t)},nn.doOnError=nn.tapOnError=function(t,e){return this.tap(_t,"undefined"!=typeof e?function(n){t.call(e,n)}:t)},nn.doOnCompleted=nn.tapOnCompleted=function(t,e){return this.tap(_t,null,"undefined"!=typeof e?function(){t.call(e)}:t)};var jr=function(t){function e(e,n,r){this.source=e,this._fn=Zt(n,r,0),t.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=Dt(this.source.subscribe).call(this.source,t);return e===jt&&(this._fn(),l(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=Dt(this._s.dispose).call(this._s);this._fn(),t===jt&&l(t.e)}},e}(mn);nn["finally"]=function(t,e){return new jr(this,t,e)};var Dr=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return Ee(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},n.prototype.onNext=_t,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(t),!0)},e}(mn);nn.ignoreElements=function(){return new Dr(this)};var kr=function(t){function e(e,n){this.source=e,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Pr(t))},e}(mn),Pr=function(t){function e(e){this._o=e,t.call(this)}return Ee(e,t),e.prototype.next=function(t){this._o.onNext(an(t))},e.prototype.error=function(t){this._o.onNext(cn(t)),this._o.onCompleted()},e.prototype.completed=function(){this._o.onNext(ln()),this._o.onCompleted()},e}(fn);nn.materialize=function(){return new kr(this)},nn.repeat=function(t){return xn(this,t).concat()},nn.retry=function(t){return xn(this,t).catchError()},nn.retryWhen=function(t){return xn(this).catchErrorWhen(t)};var Nr=function(t){function e(e,n,r,o){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=o,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ar(t,this))},e}(mn),Ar=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return Ee(e,t),e.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=Dt(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?Dt(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===jt?this._o.onError(this._a.e):(this._o.onNext(this._a),void this._i++)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},e}(fn);nn.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new Nr(this,n,e,t)};var Tr=function(t){function e(e,n){this.source=e,this._c=n,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Mr(t,this._c))},e}(mn),Mr=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Ee(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._o.onNext(this._q.shift())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(fn);nn.skipLast=function(t){if(0>t)throw new Lt;return new Tr(this,t)},nn.startWith=function(){var t,e=0;arguments.length&&ze(arguments[0])?(t=arguments[0],e=1):t=Ke;for(var n=[],r=e,o=arguments.length;o>r;r++)n.push(arguments[r]);return En([Ln(n,t),this]).concat()};var qr=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Ee(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},e}(fn);nn.takeLast=function(t){if(0>t)throw new Lt;var e=this;return new lo(function(n){return e.subscribe(new qr(n,t))},e)},nn.flatMapConcat=nn.concatMap=function(t,e,n){return new yn(this,t,e,n).merge(1)};var Lr=function(t){function e(e,n,r){this.source=e,this.selector=Zt(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return t.call(this,e.selector(n,r,o),r,o)}}function r(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,fn.call(this)}return Ee(e,t),e.prototype.internalMap=function(t,r){return new e(this.source,n(t,this),r)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.selector,this))},Ee(r,fn),r.prototype.next=function(t){var e=Dt(this.selector)(t,this.i++,this.source);return e===jt?this.o.onError(e.e):void this.o.onNext(e)},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(mn);nn.map=nn.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof Lr?this.internalMap(n,e):new Lr(this,n,e)},nn.pluck=function(){var t=arguments.length,e=new Array(t);if(0===t)throw new Error("List of properties cannot be empty.");for(var n=0;t>n;n++)e[n]=arguments[n];return this.map(W(e,t))},nn.flatMap=nn.selectMany=function(t,e,n){return new yn(this,t,e,n).mergeAll()},yt.Observable.prototype.flatMapLatest=function(t,e,n){return new yn(this,t,e,n).switchLatest()};var Rr=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._r=e,fn.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},Ee(n,fn),n.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(mn);nn.skip=function(t){if(0>t)throw new Lt;return new Rr(this,t)};var Ir=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Fr(t,this))},e}(mn),Fr=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!1,t.call(this)}return Ee(e,t),e.prototype.next=function(t){if(!this._r){var e=Dt(this._p._fn)(t,this._i++,this._p);if(e===jt)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(fn);nn.skipWhile=function(t,e){var n=Zt(t,e,3);return new Ir(this,n)};var Ur=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._c=e,this._r=e,fn.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},Ee(n,fn),n.prototype.next=function(t){this._r-->0&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(mn);nn.take=function(t,e){if(0>t)throw new Lt;return 0===t?Nn(e):new Ur(this,t)};var Vr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new zr(t,this))},e}(mn),zr=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!0,t.call(this)}return Ee(e,t),e.prototype.next=function(t){return this._r&&(this._r=Dt(this._p._fn)(t,this._i++,this._p),this._r===jt)?this._o.onError(this._r.e):void(this._r?this._o.onNext(t):this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(fn);nn.takeWhile=function(t,e){var n=Zt(t,e,3);return new Vr(this,n)};var Wr=function(t){function e(e,n,r){this.source=e,this.predicate=Zt(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return e.predicate(n,r,o)&&t.call(this,n,r,o)}}function r(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,fn.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.predicate,this))},e.prototype.internalFilter=function(t,r){return new e(this.source,n(t,this),r)},Ee(r,fn),r.prototype.next=function(t){var e=Dt(this.predicate)(t,this.i++,this.source);return e===jt?this.o.onError(e.e):void(e&&this.o.onNext(t))},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(mn);nn.filter=nn.where=function(t,e){return this instanceof Wr?this.internalFilter(t,e):new Wr(this,t,e)},vn.fromCallback=function(t,e,n){return function(){"undefined"==typeof e&&(e=this);for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];return Z(t,e,n,o)}},vn.fromNodeCallback=function(t,e,n){return function(){"undefined"==typeof e&&(e=this);for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];return K(t,e,n,o)}},Q.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},yt.config.useNativeEvents=!1;var Zr=function(t){function e(e,n,r){this._el=e,this._n=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return St(e)&&(n=Dt(e).apply(null,arguments),n===jt)?t.onError(n.e):void t.onNext(n)}}return Ee(e,t),e.prototype.subscribeCore=function(t){return Y(this._el,this._n,n(t,this._fn))},e}(mn);vn.fromEvent=function(t,e,n){return t.addListener?Kr(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n):yt.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new Zr(t,e,n).publish().refCount():Kr(function(n){t.on(e,n)},function(n){t.off(e,n)},n)};var Br=function(t){function e(e,n,r){this._add=e,this._del=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return St(e)&&(n=Dt(e).apply(null,arguments),n===jt)?t.onError(n.e):void t.onNext(n)}}function r(t,e,n){this._del=t,this._fn=e,this._ret=n,this.isDisposed=!1}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=n(t,this._fn),o=this._add(e);return new r(this._del,e,o)},r.prototype.dispose=function(){this.isDisposed||St(this._del)&&this._del(this._fn,this._ret)},e}(mn),Kr=vn.fromEventPattern=function(t,e,n){return new Br(t,e,n).publish().refCount()},Hr=function(t){function e(e,n){this._p=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function r(t,e){var n=e[0],r=e[1];n.onError(r)}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=new qe,o=this;return this._p.then(function(r){e.setDisposable(o._s.schedule([t,r],n))},function(n){e.setDisposable(o._s.schedule([t,n],r))}),e},e}(mn),$r=vn.fromPromise=function(t,e){return e||(e=Xe),new Hr(t,e)};nn.toPromise=function(t){if(t||(t=yt.config.Promise),!t)throw new Rt("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r;e.subscribe(function(t){r=t},n,function(){t(r)})})},vn.startAsync=function(t){var e=Dt(t)();return e===jt?Bn(e.e):$r(e)};var Qr=function(t){function e(e,n,r){this.source=e,this._fn1=n,this._fn2=r,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new Re(this._fn2(e).subscribe(t),e.connect())},e}(mn);nn.multicast=function(t,e){return St(t)?new Qr(this,t,e):new Gr(this,t)},nn.publish=function(t){return t&&St(t)?this.multicast(function(){return new fo},t):this.multicast(new fo)},nn.share=function(){return this.publish().refCount()},nn.publishLast=function(t){return t&&St(t)?this.multicast(function(){return new vo},t):this.multicast(new vo)},nn.publishValue=function(t,e){return 2===arguments.length?this.multicast(function(){return new mo(e)},t):this.multicast(new mo(t))},nn.shareValue=function(t){return this.publishValue(t).refCount()},nn.replay=function(t,e,n,r){return t&&St(t)?this.multicast(function(){return new yo(e,n,r)},t):this.multicast(new yo(e,n,r))},nn.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var Yr=function(t){function e(e){this.source=e,this._count=0,this._connectableSubscription=null,t.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1===++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0===--this._p._count&&this._p._connectableSubscription.dispose())},e}(mn),Gr=yt.ConnectableObservable=function(t){function e(e,n){this.source=e,this._connection=null,this._source=e.asObservable(),this._subject=n,t.call(this)}function n(t,e){this._p=t,this._s=e}return Ee(e,t),n.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},e.prototype.connect=function(){if(!this._connection){var t=this._source.subscribe(this._subject);this._connection=new n(this,t)}return this._connection},e.prototype._subscribe=function(t){return this._subject.subscribe(t)},e.prototype.refCount=function(){return new Yr(this)},e}(vn),Jr=function(t){function e(e,n){this._dt=e,this._s=n,t.call(this)}function n(t,e){e.onNext(0),e.onCompleted()}return Ee(e,t),e.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,n)},e}(mn),Xr=vn.interval=function(t,e){return X(t,t,ze(e)?e:Xe)};vn.timer=function(t,e,n){var r;return ze(n)||(n=Xe),null!=e&&"number"==typeof e?r=e:ze(e)&&(n=e),(t instanceof Date||"number"==typeof t)&&r===s?G(t,n):t instanceof Date&&r!==s?J(t.getTime(),e,n):X(t,r,n)};nn.delay=function(){var t=arguments[0];if("number"==typeof t||t instanceof Date){var e=t,n=arguments[1];return ze(n)||(n=Xe),e instanceof Date?et(this,e,n):tt(this,e,n)}if(vn.isObservable(t)||St(t))return nt(this,t,arguments[1]);throw new Error("Invalid arguments")};var to=function(t){function e(e,n,r){ze(r)||(r=Xe),this.source=e,this._dt=n,this._s=r,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){var e=new Le;return new Re(this.source.subscribe(new eo(t,this.source,this._dt,this._s,e)),e)},e}(mn),eo=function(t){function e(e,n,r,o,i){this._o=e,this._s=n,this._d=r,this._scheduler=o,this._c=i,this._v=null,this._hv=!1,this._id=0,t.call(this)}return Ee(e,t),e.prototype.next=function(t){this._hv=!0,this._v=t;var e=++this._id,n=new qe;this._c.setDisposable(n),n.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(n,r){r._hv&&r._id===e&&r._o.onNext(t),r._hv=!1}))},e.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},e.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},e}(fn);nn.debounce=function(){if(St(arguments[0]))return rt(this,arguments[0]);if("number"==typeof arguments[0])return new to(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")};var no=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Ee(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ro(t,this._s))},e}(mn),ro=function(t){function e(e,n){this._o=e,this._s=n,t.call(this)}return Ee(e,t),e.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(fn);nn.timestamp=function(t){return ze(t)||(t=Xe),new no(this,t)},nn.sample=nn.throttleLatest=function(t,e){return ze(e)||(e=Xe),"number"==typeof t?ot(this,Xr(t,e)):ot(this,t)};var oo=yt.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};oo.prototype=Object.create(Error.prototype),nn.timeout=function(){var t=arguments[0];if(t instanceof Date||"number"==typeof t)return st(this,t,arguments[1],arguments[2]);if(vn.isObservable(t)||St(t))return it(this,t,arguments[1],arguments[2]);throw new Error("Invalid arguments")},nn.throttle=function(t,e){ze(e)||(e=Xe);var n=+t||0;if(0>=n)throw new RangeError("windowDuration cannot be less or equal zero.");var r=this;return new lo(function(t){var o=0;return r.subscribe(function(r){var i=e.now();(0===o||i-o>=n)&&(o=i,t.onNext(r))},function(e){t.onError(e)},function(){t.onCompleted()})},r)};var io=function(t){function e(e,n){this.source=e,this.controller=new fo,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return Ee(e,t),e.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=Ne,o=this.pauser.distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=Ne)});return new Ie([n,r,o])},e.prototype.pause=function(){this.controller.onNext(!1)},e.prototype.resume=function(){this.controller.onNext(!0)},e}(vn);nn.pausable=function(t){return new io(this,t)};var so=function(t){function e(e,n){this.source=e,this.controller=new fo,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return Ee(e,t),e.prototype._subscribe=function(t){function e(){for(;r.length>0;)t.onNext(r.shift())}var n,r=[],o=ut(this.source,this.pauser.startWith(!1).distinctUntilChanged(),function(t,e){return{data:t,shouldFire:e}}).subscribe(function(o){n!==s&&o.shouldFire!==n?(n=o.shouldFire,o.shouldFire&&e()):(n=o.shouldFire,o.shouldFire?t.onNext(o.data):r.push(o.data))},function(n){e(),t.onError(n)},function(){e(),t.onCompleted()});return o},e.prototype.pause=function(){this.controller.onNext(!1)},e.prototype.resume=function(){this.controller.onNext(!0)},e}(vn);nn.pausableBuffered=function(t){return new so(this,t)};var uo=function(t){function e(e,n,r){t.call(this),this.subject=new ao(n,r),this.source=e.multicast(this.subject).refCount()}return Ee(e,t),e.prototype._subscribe=function(t){return this.source.subscribe(t)},e.prototype.request=function(t){return this.subject.request(null==t?-1:t)},e}(vn),ao=function(t){function e(e,n){null==e&&(e=!0),t.call(this),this.subject=new fo,this.enableQueue=e,this.queue=e?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=n||$e}return Ee(e,t),Se(e.prototype,hn,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(rn.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(rn.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push(rn.createOnNext(t)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;this.queue.length>0&&(t>0||"N"!==this.queue[0].kind);){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var e=this;return this.requestedDisposable=this.scheduler.schedule(t,function(t,n){var r=e._processRequest(n),o=e.hasCompleted||e.hasFailed;return!o&&r>0?(e.requestedCount=r,Pe(function(){e.requestedCount=0})):void 0}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),e}(vn);nn.controlled=function(t,e){return t&&ze(t)&&(e=t,t=!0),null==t&&(t=!0),new uo(this,t,e)},nn.pipe=function(t){function e(){n.resume()}var n=this.pausableBuffered();return t.addListener("drain",e),n.subscribe(function(e){!t.write(String(e))&&n.pause()},function(e){t.emit("error",e)},function(){!t._isStdio&&t.end(),t.removeListener("drain",e)}),n.resume(),t};var co=function(t){function e(e,n){this._o=e,this._xform=n,t.call(this)}return Ee(e,t),e.prototype.next=function(t){var e=Dt(this._xform["@@transducer/step"]).call(this._xform,this._o,t);e===jt&&this._o.onError(e.e)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},e}(fn);nn.transduce=function(t){var e=this;return new lo(function(n){var r=t(at(n));return e.subscribe(new co(n,r))},e)};var lo=yt.AnonymousObservable=function(t){function e(t){return t&&St(t.dispose)?t:St(t)?Pe(t):Ne}function n(t,n){var r=n[0],o=n[1],i=Dt(o.__subscribe).call(o,r);i!==jt||r.fail(jt.e)||l(jt.e),r.setDisposable(e(i))}function r(e,n){this.source=n,this.__subscribe=e,t.call(this)}return Ee(r,t),r.prototype._subscribe=function(t){var e=new ho(t),r=[e,this];return $e.scheduleRequired()?$e.schedule(r,n):n(null,r),e},r}(vn),ho=function(t){function e(e){t.call(this),this.observer=e,this.m=new qe}Ee(e,t);var n=e.prototype;return n.next=function(t){var e=Dt(this.observer.onNext).call(this.observer,t);e===jt&&(this.dispose(),l(e.e))},n.error=function(t){var e=Dt(this.observer.onError).call(this.observer,t);this.dispose(),e===jt&&l(e.e)},n.completed=function(){var t=Dt(this.observer.onCompleted).call(this.observer);this.dispose(),t===jt&&l(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(fn),po=function(t,e){this._s=t,this._o=e};po.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}};var fo=yt.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return Ee(e,t),Se(e.prototype,hn.prototype,{_subscribe:function(t){return Te(this),this.isStopped?this.hasError?(t.onError(this.error),Ne):(t.onCompleted(),Ne):(this.observers.push(t),new po(this,t))},hasObservers:function(){return this.observers.length>0},onCompleted:function(){if(Te(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=a(this.observers),n=e.length;n>t;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Te(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,n=a(this.observers),r=n.length;r>e;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(Te(this),!this.isStopped)for(var e=0,n=a(this.observers),r=n.length;r>e;e++)n[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new bo(t,e)},e}(vn),vo=yt.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return Ee(e,t),Se(e.prototype,hn.prototype,{_subscribe:function(t){return Te(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),Ne):(this.observers.push(t),new po(this,t))},hasObservers:function(){return Te(this),this.observers.length>0},onCompleted:function(){var t,e;if(Te(this),!this.isStopped){this.isStopped=!0;var n=a(this.observers),e=n.length;if(this.hasValue)for(t=0;e>t;t++){var r=n[t];r.onNext(this.value),r.onCompleted()}else for(t=0;e>t;t++)n[t].onCompleted();this.observers.length=0}},onError:function(t){if(Te(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=a(this.observers),r=n.length;r>e;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){Te(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}(vn),bo=yt.AnonymousSubject=function(t){function e(e,n){this.observer=e,this.observable=n,t.call(this)}return Ee(e,t),Se(e.prototype,hn.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),e}(vn),mo=yt.BehaviorSubject=function(t){function e(e){t.call(this),this.value=e,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return Ee(e,t),Se(e.prototype,hn.prototype,{_subscribe:function(t){return Te(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),Ne):(this.observers.push(t),t.onNext(this.value),new po(this,t))},getValue:function(){return Te(this),this.hasError&&l(this.error),this.value},hasObservers:function(){return this.observers.length>0},onCompleted:function(){if(Te(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=a(this.observers),n=e.length;n>t;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Te(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=a(this.observers),r=n.length;r>e;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(Te(this),!this.isStopped){this.value=t;for(var e=0,n=a(this.observers),r=n.length;r>e;e++)n[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),e}(vn),yo=yt.ReplaySubject=function(t){function e(t,e){return Pe(function(){e.dispose(),!t.isDisposed&&t.observers.splice(t.observers.indexOf(e),1)})}function n(e,n,o){this.bufferSize=null==e?r:e,this.windowSize=null==n?r:n,this.scheduler=o||$e,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this)}var r=Math.pow(2,53)-1;return Ee(n,t),Se(n.prototype,hn.prototype,{_subscribe:function(t){Te(this);var n=new bn(this.scheduler,t),r=e(this,n);this._trim(this.scheduler.now()),this.observers.push(n);for(var o=0,i=this.q.length;i>o;o++)n.onNext(this.q[o].value);return this.hasError?n.onError(this.error):this.isStopped&&n.onCompleted(),n.ensureActive(),r},hasObservers:function(){return this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(Te(this),!this.isStopped){var e=this.scheduler.now();this.q.push({interval:e,value:t}),this._trim(e);for(var n=0,r=a(this.observers),o=r.length;o>n;n++){var i=r[n];i.onNext(t),i.ensureActive()}}},onError:function(t){if(Te(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var e=this.scheduler.now();this._trim(e);for(var n=0,r=a(this.observers),o=r.length;o>n;n++){var i=r[n];i.onError(t),i.ensureActive()}this.observers.length=0}},onCompleted:function(){if(Te(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var e=0,n=a(this.observers),r=n.length;r>e;e++){var o=n[e];o.onCompleted(),o.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),n}(vn);yt.Pauser=function(t){function e(){t.call(this)}return Ee(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(fo),mt.Rx=yt,r=function(){return yt}.call(e,n,e,t),!(r!==s&&(t.exports=r));var _o=v()}).call(this)}).call(e,n(11)(t),function(){return this}(),n(12))},function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=h[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(u(r.parts[i],e))}else{for(var s=[],i=0;i<r.parts.length;i++)s.push(u(r.parts[i],e));h[r.id]={id:r.id,refs:1,parts:s}}}}function o(t){for(var e=[],n={},r=0;r<t.length;r++){var o=t[r],i=o[0],s=o[1],u=o[2],a=o[3],c={css:s,media:u,sourceMap:a};n[i]?n[i].parts.push(c):e.push(n[i]={id:i,parts:[c]})}return e}function i(){var t=document.createElement("style"),e=d();return t.type="text/css",e.appendChild(t),t}function s(){var t=document.createElement("link"),e=d();return t.rel="stylesheet",e.appendChild(t),t}function u(t,e){var n,r,o;if(e.singleton){var u=b++;n=v||(v=i()),r=a.bind(null,n,u,!1),o=a.bind(null,n,u,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(),r=l.bind(null,n),o=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=i(),r=c.bind(null,n),o=function(){n.parentNode.removeChild(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}function a(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=m(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function c(t,e){var n=e.css,r=e.media;e.sourceMap;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);
t.appendChild(document.createTextNode(n))}}function l(t,e){var n=e.css,r=(e.media,e.sourceMap);r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=t.href;t.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}var h={},p=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},f=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),d=p(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,b=0;t.exports=function(t,e){if("object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},"undefined"==typeof e.singleton&&(e.singleton=f());var n=o(t);return r(n,e),function(t){for(var i=[],s=0;s<n.length;s++){var u=n[s],a=h[u.id];a.refs--,i.push(a)}if(t){var c=o(t);r(c,e)}for(var s=0;s<i.length;s++){var a=i[s];if(0===a.refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete h[a.id]}}}};var m=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){var r=n(19);"string"==typeof r&&(r=[[t.id,r,""]]);n(36)(r,{});r.locals&&(t.exports=r.locals)},function(t,e){t.exports='<svg viewBox="0 0 2681 814" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><title>Climb Logo Beta</title><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"><g id="Climb-Logo-Beta" sketch:type="MSArtboardGroup" fill="#19374D"><g id="cli----b.social-+-Path-Copy-+-Type-something-Copy-Copy-Copy-Copy-Copy" sketch:type="MSLayerGroup" transform="translate(206.000000, 249.000000)"><g id="cli----b.social-+-Path-Copy" sketch:type="MSShapeGroup"><path d="M723.374207,187.442211 L767.027641,337.383575 C767.510889,341.265552 771.860124,345.147529 776.209359,345.147529 L833.232664,345.147529 C839.031644,345.147529 843.380879,340.780305 842.414383,334.472092 L739.482485,8.38601982 C738.999237,4.01879564 734.650002,0.622065728 730.784015,0.622065728 L723.052041,0.622065728 C720.6358,0.622065728 716.286565,2.56305425 714.83682,5.47453704 L643.514302,209.019062 L576.494003,105.431788 C573.721058,101.145895 567.342539,97.6714919 562.2556,97.6714919 L552.179033,97.6714919 C547.088326,97.6714919 541.529384,101.558749 539.770061,106.334187 L454.980068,336.484833 C453.21749,341.269108 455.927086,345.147529 461.014102,345.147529 L522.138067,345.147529 C527.23315,345.147529 532.791054,341.261733 534.552797,336.466171 L571.473144,235.966924 L642.108528,346.107712 C643.487141,348.257363 646.667092,350 649.212307,350 L659.971412,350 C662.516108,350 665.282044,348.045078 666.141982,345.653918 L683.827261,296.477872 L723.374207,187.442211 Z" id="Path-Copy"></path><path d="M0.145213441,247.085101 C0.145213441,305.23404 49.0872377,348.845745 104.32873,348.845745 C139.218094,348.845745 164.415968,335.277659 182.345224,308.141487 C185.737246,303.295742 183.314373,298.449997 178.953203,294.573401 L149.878733,269.375527 C146.971286,266.952655 142.610116,267.921804 139.218094,271.313825 C131.464902,279.067017 123.227136,286.335635 106.267028,286.335635 C84.9457505,286.335635 68.4702176,268.890953 68.4702176,247.085101 C68.4702176,225.763823 85.9148995,207.834566 107.236177,207.834566 C118.381391,207.834566 128.557455,213.164886 135.341498,220.433503 C137.764371,222.856376 143.579265,223.825525 146.002137,221.402652 L175.076607,193.781906 C179.437777,189.90531 180.891501,184.57499 177.49948,180.21382 C159.085649,157.923393 135.341498,145.324456 104.813305,145.324456 C49.5718122,145.324456 0.145213441,189.90531 0.145213441,247.085101 L0.145213441,247.085101 Z M218.688312,334.793085 C218.688312,339.63883 223.049482,344 227.895227,344 L281.198422,344 C286.044167,344 290.405337,339.63883 290.405337,334.793085 L290.405337,14.0047672 C290.405337,9.15902226 286.044167,4.79785179 281.198422,4.79785179 L227.895227,4.79785179 C223.049482,4.79785179 218.688312,9.15902226 218.688312,14.0047672 L218.688312,334.793085 Z M378.113321,91.5366868 C399.434599,91.5366868 416.879281,74.5765794 416.879281,53.2553015 C416.879281,31.9340236 399.434599,14.4893417 378.113321,14.4893417 C356.792044,14.4893417 339.831936,31.9340236 339.831936,53.2553015 C339.831936,74.5765794 356.792044,91.5366868 378.113321,91.5366868 L378.113321,91.5366868 Z M342.739383,334.793085 C342.739383,339.63883 347.100554,344 351.946299,344 L405.249493,344 C410.095238,344 414.456409,339.63883 414.456409,334.793085 L414.456409,159.377116 C414.456409,154.046797 410.095238,150.170201 405.249493,150.170201 L351.946299,150.170201 C347.100554,150.170201 342.739383,154.046797 342.739383,159.377116 L342.739383,334.793085 Z M889.15431,334.793085 C889.15431,339.63883 893.515481,344 898.361226,344 L921.136227,344 C925.981972,344 929.373994,339.63883 931.312292,334.30851 L937.127185,318.317552 C937.127185,318.317552 959.417612,348.845745 1002.06017,348.845745 C1056.81709,348.845745 1098.00592,302.811168 1098.00592,247.085101 C1098.00592,178.760096 1053.42506,145.324456 1001.57559,145.324456 C985.100061,145.324456 967.170804,151.13935 961.35591,154.531371 L961.35591,14.0047672 C961.35591,9.15902226 956.99474,4.79785179 952.148995,4.79785179 L898.361226,4.79785179 C893.515481,4.79785179 889.15431,9.15902226 889.15431,14.0047672 L889.15431,334.793085 Z M953.602718,246.600526 C953.602718,224.794674 970.078251,207.834566 992.368678,207.834566 C1014.65911,207.834566 1031.61921,224.794674 1031.61921,246.600526 C1031.61921,268.890953 1014.65911,286.335635 992.368678,286.335635 C970.078251,286.335635 953.602718,268.890953 953.602718,246.600526 L953.602718,246.600526 Z M1134.25645,321.224999 C1134.25645,336.246808 1146.85539,348.845745 1161.8772,348.845745 C1177.38358,348.845745 1189.49795,336.246808 1189.49795,321.224999 C1189.49795,305.718615 1177.38358,293.604252 1161.8772,293.604252 C1146.85539,293.604252 1134.25645,305.718615 1134.25645,321.224999 L1134.25645,321.224999 Z M1236.0171,332.854787 C1245.70859,340.607979 1269.93731,348.845745 1301.91923,348.845745 C1356.67615,348.845745 1383.81232,321.224999 1383.81232,287.304784 C1383.81232,248.538824 1356.67615,233.03244 1317.42561,219.464354 C1300.95008,213.64946 1295.61976,208.803715 1295.61976,203.95797 C1295.61976,198.627651 1299.98093,197.173927 1306.2804,197.173927 C1325.1788,197.173927 1347.46923,208.319141 1347.46923,208.319141 C1351.34583,209.772864 1356.19157,208.319141 1357.6453,205.411694 L1375.57455,172.460628 C1378.482,167.614883 1375.08998,163.253712 1370.72881,160.346265 C1360.06817,153.562223 1336.80859,145.324456 1306.2804,145.324456 C1253.94635,145.324456 1230.68678,171.491479 1230.68678,203.95797 C1230.68678,234.001589 1247.16231,255.807441 1284.95912,268.890953 C1309.67242,277.613294 1312.57987,284.397337 1312.57987,289.243082 C1312.57987,295.057976 1308.2187,297.965423 1303.37295,297.965423 C1282.53625,297.965423 1259.76125,285.366486 1259.76125,285.366486 C1255.88465,283.428188 1251.03891,286.335635 1249.58518,289.243082 L1232.62508,322.678722 C1230.2022,327.039893 1232.62508,329.94734 1236.0171,332.854787 L1236.0171,332.854787 Z M1407.55647,246.600526 C1407.55647,302.326593 1453.10647,348.845745 1508.34796,348.845745 C1563.58946,348.845745 1609.13946,302.326593 1609.13946,246.600526 C1609.13946,191.843608 1563.58946,145.324456 1508.34796,145.324456 C1453.10647,145.324456 1407.55647,191.843608 1407.55647,246.600526 L1407.55647,246.600526 Z M1470.06658,246.600526 C1470.06658,225.279248 1487.02669,207.834566 1508.34796,207.834566 C1529.66924,207.834566 1546.62935,225.279248 1546.62935,246.600526 C1546.62935,268.406378 1529.66924,286.335635 1508.34796,286.335635 C1487.02669,286.335635 1470.06658,268.406378 1470.06658,246.600526 L1470.06658,246.600526 Z M1631.42989,247.085101 C1631.42989,305.23404 1680.37191,348.845745 1735.6134,348.845745 C1770.50277,348.845745 1795.70064,335.277659 1813.6299,308.141487 C1817.02192,303.295742 1814.59905,298.449997 1810.23788,294.573401 L1781.16341,269.375527 C1778.25596,266.952655 1773.89479,267.921804 1770.50277,271.313825 C1762.74958,279.067017 1754.51181,286.335635 1737.5517,286.335635 C1716.23042,286.335635 1699.75489,268.890953 1699.75489,247.085101 C1699.75489,225.763823 1717.19957,207.834566 1738.52085,207.834566 C1749.66606,207.834566 1759.84213,213.164886 1766.62617,220.433503 C1769.04904,222.856376 1774.86394,223.825525 1777.28681,221.402652 L1806.36128,193.781906 C1810.72245,189.90531 1812.17617,184.57499 1808.78415,180.21382 C1790.37032,157.923393 1766.62617,145.324456 1736.09798,145.324456 C1680.85649,145.324456 1631.42989,189.90531 1631.42989,247.085101 L1631.42989,247.085101 Z M1885.34692,91.5366868 C1906.6682,91.5366868 1924.11288,74.5765794 1924.11288,53.2553015 C1924.11288,31.9340236 1906.6682,14.4893417 1885.34692,14.4893417 C1864.02565,14.4893417 1847.06554,31.9340236 1847.06554,53.2553015 C1847.06554,74.5765794 1864.02565,91.5366868 1885.34692,91.5366868 L1885.34692,91.5366868 Z M1849.97299,334.793085 C1849.97299,339.63883 1854.33416,344 1859.1799,344 L1912.4831,344 C1917.32884,344 1921.69001,339.63883 1921.69001,334.793085 L1921.69001,159.377116 C1921.69001,154.046797 1917.32884,150.170201 1912.4831,150.170201 L1859.1799,150.170201 C1854.33416,150.170201 1849.97299,154.046797 1849.97299,159.377116 L1849.97299,334.793085 Z M1960.94055,284.881911 C1960.94055,323.163297 1989.53044,348.845745 2027.81183,348.845745 C2058.34002,348.845745 2075.30013,334.793085 2086.44534,324.61702 L2093.22938,337.700532 C2095.65226,343.030851 2099.04428,344 2101.95172,344 L2123.273,344 C2128.11875,344 2132.47992,339.63883 2132.47992,334.793085 L2132.47992,227.702121 C2132.47992,170.52233 2110.67407,145.324456 2050.58683,145.324456 C2024.4198,145.324456 1990.49959,151.13935 1986.13842,152.593074 C1981.77725,154.046797 1977.41608,157.438818 1978.8698,165.676585 L1983.23097,196.204778 C1984.20012,203.473396 1987.59214,208.803715 1994.86076,206.380843 C2007.4597,202.504247 2030.2347,199.112225 2043.31821,199.112225 C2066.57779,199.112225 2069.48523,208.803715 2069.48523,227.702121 C2069.48523,227.702121 2053.97885,219.948929 2032.173,219.948929 C1988.07672,219.948929 1960.94055,247.569675 1960.94055,284.881911 L1960.94055,284.881911 Z M2023.93523,280.036166 C2023.93523,268.890953 2033.14215,259.684037 2044.77193,259.684037 C2056.40172,259.684037 2065.60864,268.890953 2066.09321,280.036166 C2066.09321,291.665954 2056.40172,301.357444 2044.77193,301.357444 C2033.14215,301.357444 2023.93523,291.665954 2023.93523,280.036166 L2023.93523,280.036166 Z M2181.90652,334.793085 C2181.90652,339.63883 2186.26769,344 2191.11343,344 L2244.41663,344 C2249.26237,344 2253.62354,339.63883 2253.62354,334.793085 L2253.62354,14.0047672 C2253.62354,9.15902226 2249.26237,4.79785179 2244.41663,4.79785179 L2191.11343,4.79785179 C2186.26769,4.79785179 2181.90652,9.15902226 2181.90652,14.0047672 L2181.90652,334.793085 Z" id="cli----b.social"></path></g></g></g></g></svg>'},function(t,e,n){var r;(function(t,o){!function(i){function s(t){throw RangeError(A[t])}function u(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function a(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(N,".");var o=t.split("."),i=u(o,e).join(".");return r+i}function c(t){for(var e,n,r=[],o=0,i=t.length;i>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&i>o?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function l(t){return u(t,function(t){var e="";return t>65535&&(t-=65536,e+=q(t>>>10&1023|55296),t=56320|1023&t),e+=q(t)}).join("")}function h(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:w}function p(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function f(t,e,n){var r=0;for(t=n?M(t/E):t>>1,t+=M(t/e);t>T*x>>1;r+=w)t=M(t/T);return M(r+(T+1)*t/(t+O))}function d(t){var e,n,r,o,i,u,a,c,p,d,v=[],b=t.length,m=0,y=j,_=S;for(n=t.lastIndexOf(D),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&s("not-basic"),v.push(t.charCodeAt(r));for(o=n>0?n+1:0;b>o;){for(i=m,u=1,a=w;o>=b&&s("invalid-input"),c=h(t.charCodeAt(o++)),(c>=w||c>M((g-m)/u))&&s("overflow"),m+=c*u,p=_>=a?C:a>=_+x?x:a-_,!(p>c);a+=w)d=w-p,u>M(g/d)&&s("overflow"),u*=d;e=v.length+1,_=f(m-i,e,0==i),M(m/e)>g-y&&s("overflow"),y+=M(m/e),m%=e,v.splice(m++,0,y)}return l(v)}function v(t){var e,n,r,o,i,u,a,l,h,d,v,b,m,y,_,O=[];for(t=c(t),b=t.length,e=j,n=0,i=S,u=0;b>u;++u)v=t[u],128>v&&O.push(q(v));for(r=o=O.length,o&&O.push(D);b>r;){for(a=g,u=0;b>u;++u)v=t[u],v>=e&&a>v&&(a=v);for(m=r+1,a-e>M((g-n)/m)&&s("overflow"),n+=(a-e)*m,e=a,u=0;b>u;++u)if(v=t[u],e>v&&++n>g&&s("overflow"),v==e){for(l=n,h=w;d=i>=h?C:h>=i+x?x:h-i,!(d>l);h+=w)_=l-d,y=w-d,O.push(q(p(d+_%y,0))),l=M(_/y);O.push(q(p(l,0))),i=f(n,m,r==o),n=0,++r}++n,++e}return O.join("")}function b(t){return a(t,function(t){return k.test(t)?d(t.slice(4).toLowerCase()):t})}function m(t){return a(t,function(t){return P.test(t)?"xn--"+v(t):t})}var y=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof o&&o);(y.global===y||y.window===y||y.self===y)&&(i=y);var _,g=2147483647,w=36,C=1,x=26,O=38,E=700,S=72,j=128,D="-",k=/^xn--/,P=/[^\x20-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=w-C,M=Math.floor,q=String.fromCharCode;_={version:"1.3.2",ucs2:{decode:c,encode:l},decode:d,encode:v,toASCII:m,toUnicode:b},r=function(){return _}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(11)(t),function(){return this}())},function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var a=t.length;u>0&&a>u&&(a=u);for(var c=0;a>c;++c){var l,h,p,f,d=t[c].replace(s,"%20"),v=d.indexOf(r);v>=0?(l=d.substr(0,v),h=d.substr(v+1)):(l=d,h=""),p=decodeURIComponent(l),f=decodeURIComponent(h),n(i,p)?Array.isArray(i[p])?i[p].push(f):i[p]=[i[p],f]:i[p]=f}return i}},function(t,e){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,o){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(t[o])?t[o].map(function(t){return i+encodeURIComponent(n(t))}).join(e):i+encodeURIComponent(n(t[o]))}).join(e):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(t)):""}},function(t,e,n){"use strict";e.decode=e.parse=n(40),e.encode=e.stringify=n(41)},function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,n){if(t&&c(t)&&t instanceof r)return t;var o=new r;return o.parse(t,e,n),o}function i(t){return a(t)&&(t=o(t)),t instanceof r?t.format():r.prototype.format.call(t)}function s(t,e){return o(t,!1,!0).resolve(e)}function u(t,e){return t?o(t,!1,!0).resolveObject(e):e}function a(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function l(t){return null===t}function h(t){return null==t}var p=n(39);e.parse=o,e.resolve=s,e.resolveObject=u,e.format=i,e.Url=r;var f=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","	"],b=["{","}","|","\\","^","`"].concat(v),m=["'"].concat(b),y=["%","/","?",";","#"].concat(m),_=["/","?","#"],g=255,w=/^[a-z0-9A-Z_-]{0,63}$/,C=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},O={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=n(42);r.prototype.parse=function(t,e,n){if(!a(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var o=f.exec(r);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,r=r.substr(o.length)}if(n||o||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===r.substr(0,2);!s||o&&O[o]||(r=r.substr(2),this.slashes=!0)}if(!O[o]&&(s||o&&!E[o])){for(var u=-1,c=0;c<_.length;c++){var l=r.indexOf(_[c]);-1!==l&&(-1===u||u>l)&&(u=l)}var h,d;d=-1===u?r.lastIndexOf("@"):r.lastIndexOf("@",u),-1!==d&&(h=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(h)),u=-1;for(var c=0;c<y.length;c++){var l=r.indexOf(y[c]);-1!==l&&(-1===u||u>l)&&(u=l)}-1===u&&(u=r.length),this.host=r.slice(0,u),r=r.slice(u),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var b=this.hostname.split(/\./),c=0,j=b.length;j>c;c++){var D=b[c];if(D&&!D.match(w)){for(var k="",P=0,N=D.length;N>P;P++)k+=D.charCodeAt(P)>127?"x":D[P];if(!k.match(w)){var A=b.slice(0,c),T=b.slice(c+1),M=D.match(C);M&&(A.push(M[1]),T.unshift(M[2])),T.length&&(r="/"+T.join(".")+r),this.hostname=A.join(".");break}}}if(this.hostname.length>g?this.hostname="":this.hostname=this.hostname.toLowerCase(),!v){for(var q=this.hostname.split("."),L=[],c=0;c<q.length;++c){var R=q[c];L.push(R.match(/[^A-Za-z0-9_-]/)?"xn--"+p.encode(R):R)}this.hostname=L.join(".")}var I=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+I,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!x[i])for(var c=0,j=m.length;j>c;c++){var U=m[c],V=encodeURIComponent(U);V===U&&(V=escape(U)),r=r.split(U).join(V)}var z=r.indexOf("#");-1!==z&&(this.hash=r.substr(z),r=r.slice(0,z));var W=r.indexOf("?");if(-1!==W?(this.search=r.substr(W),this.query=r.substr(W+1),e&&(this.query=S.parse(this.query)),r=r.slice(0,W)):e&&(this.search="",this.query={}),r&&(this.pathname=r),E[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var I=this.pathname||"",R=this.search||"";this.path=I+R}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(i=S.stringify(this.query));var s=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||E[e])&&o!==!1?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+o+n+s+r},r.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(a(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),E[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!E[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||O[t.protocol])n.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),n.pathname=o.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var i=n.pathname||"",s=n.search||"";n.path=i+s}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var u=n.pathname&&"/"===n.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),p=c||u||n.host&&t.pathname,f=p,d=n.pathname&&n.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],v=n.protocol&&!E[n.protocol];if(v&&(n.hostname="",n.port=null,n.host&&(""===d[0]?d[0]=n.host:d.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),p=p&&(""===o[0]||""===d[0])),c)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,d=o;else if(o.length)d||(d=[]),d.pop(),d=d.concat(o),n.search=t.search,n.query=t.query;else if(!h(t.search)){if(v){n.hostname=n.host=d.shift();var b=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;b&&(n.auth=b.shift(),n.host=n.hostname=b.shift())}return n.search=t.search,n.query=t.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!d.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var m=d.slice(-1)[0],y=(n.host||t.host)&&("."===m||".."===m)||""===m,_=0,g=d.length;g>=0;g--)m=d[g],"."==m?d.splice(g,1):".."===m?(d.splice(g,1),_++):_&&(d.splice(g,1),_--);if(!p&&!f)for(;_--;_)d.unshift("..");!p||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),y&&"/"!==d.join("/").substr(-1)&&d.push("");var w=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(v){n.hostname=n.host=w?"":d.length?d.shift():"";var b=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;b&&(n.auth=b.shift(),n.host=n.hostname=b.shift())}return p=p||n.host&&d.length,p&&!w&&d.unshift(""),d.length?n.pathname=d.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,n){t.exports=e}])});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9yZWFjdC1jbGltYi1zb2NpYWwubWluLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA4NmM1OTI2OTdmODNhNWMwMDM5ZiIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcInJvb3RcIjpcIlJlYWN0XCIsXCJjb21tb25qczJcIjpcInJlYWN0XCIsXCJjb21tb25qc1wiOlwicmVhY3RcIixcImFtZFwiOlwicmVhY3RcIn0iLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1tb3Rpb24vbGliL3JlYWN0LW1vdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jb21tb24vQXV0aG9yLmpzeCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jb21tb24vSW1hZ2UuanN4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbW1vbi9NZXNzYWdlLmpzeCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy93YWxsL1RpbGUuanN4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3dhbGwvV2FsbC5qc3giLCJ3ZWJwYWNrOi8vLy4vfi9jbGltYi1zb2NpYWwvZGlzdC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LW1vdGlvbi9saWIvcHJlc2V0cy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LW1vdGlvbi9+L3BlcmZvcm1hbmNlLW5vdy9saWIvcGVyZm9ybWFuY2Utbm93LmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3NsaWRlc2hvdy9QYW5lbC5qc3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc2xpZGVzaG93L1NsaWRlc2hvdy5qc3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc2xpZGVzaG93L1NsaWRlc2hvd0NvbnRhaW5lci5qc3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc2xpZGVzaG93L3NsaWRlLmpzeCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy93YWxsL0NsaW1iQmFkZ2UuanN4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3dhbGwvV2FsbENvbnRhaW5lci5qc3giLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlL21haW4uc2NzcyIsIndlYnBhY2s6Ly8vLi9+L2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzIiwid2VicGFjazovLy8uL34vZmV0Y2gtanNvbnAvYnVpbGQvZmV0Y2gtanNvbnAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1tb3Rpb24vbGliL2FuaW1hdGlvbkxvb3AuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1tb3Rpb24vbGliL2NvbXBvbmVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1tb3Rpb24vbGliL2RlcHJlY2F0ZWRTcHJpbmdzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtbW90aW9uL2xpYi9oYXNSZWFjaGVkU3R5bGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1tb3Rpb24vbGliL21lcmdlRGlmZi5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LW1vdGlvbi9saWIvbm9WZWxvY2l0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LW1vdGlvbi9saWIvcmVvcmRlcktleXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1tb3Rpb24vbGliL3NwcmluZy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LW1vdGlvbi9saWIvc3RlcHBlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LW1vdGlvbi9saWIvc3RyaXBTdHlsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LW1vdGlvbi9saWIvdXBkYXRlVHJlZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LW1vdGlvbi9saWIvemVyby5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LW1vdGlvbi9+L3JhZi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4LWxpdGUvcngubGl0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3N0eWxlLWxvYWRlci9hZGRTdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlL21haW4uc2Nzcz8zYWRiIiwid2VicGFjazovLy8uL3NyYy9pbWcvY2xpbWJfbG9nby5zdmciLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcHVueWNvZGUvcHVueWNvZGUuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vdXJsL34vcXVlcnlzdHJpbmcvZGVjb2RlLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3VybC9+L3F1ZXJ5c3RyaW5nL2VuY29kZS5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi91cmwvfi9xdWVyeXN0cmluZy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi91cmwvdXJsLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIlJlYWN0RE9NXCIiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsInRoaXMiLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzFfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNDRfXyIsIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl9yZWFjdCIsIl9yZWFjdDIiLCJfcmVhY3REb20iLCJfcmVhY3REb20yIiwiX2NvbXBvbmVudHNXYWxsV2FsbENvbnRhaW5lciIsIl9jb21wb25lbnRzV2FsbFdhbGxDb250YWluZXIyIiwiX2NvbXBvbmVudHNTbGlkZXNob3dTbGlkZXNob3dDb250YWluZXIiLCJfY29tcG9uZW50c1NsaWRlc2hvd1NsaWRlc2hvd0NvbnRhaW5lcjIiLCJ3aW5kb3ciLCJDbGltYiIsIiR3YWxscyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImkiLCJsZW5ndGgiLCIkaXRlbSIsImNvbGxlY3Rpb25JZCIsImRhdGFzZXQiLCJsaW1pdCIsImRvbWFpbiIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCIkc2xpZGVzaG93cyIsImRlbGF5IiwicGFyc2VJbnQiLCJXYWxsQ29udGFpbmVyIiwiX2NvbXBvbmVudHNXYWxsV2FsbCIsImVudW1lcmFibGUiLCJnZXQiLCJXYWxsIiwiX2NvbXBvbmVudHNXYWxsVGlsZSIsIlRpbGUiLCJfY29tcG9uZW50czIiLCJfY29tcG9uZW50czMiLCJfcmVvcmRlcktleXMiLCJfcmVvcmRlcktleXMyIiwiX2NvbXBvbmVudHMiLCJTcHJpbmciLCJUcmFuc2l0aW9uU3ByaW5nIiwiTW90aW9uIiwiU3RhZ2dlcmVkTW90aW9uIiwiVHJhbnNpdGlvbk1vdGlvbiIsIl9zcHJpbmcyIiwiX3NwcmluZzMiLCJzcHJpbmciLCJfcHJlc2V0czIiLCJfcHJlc2V0czMiLCJwcmVzZXRzIiwidXRpbHMiLCJyZW9yZGVyS2V5cyIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJwcm90b3R5cGUiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX2dldCIsIl94IiwiX3gyIiwiX3gzIiwiX2FnYWluIiwib2JqZWN0IiwicHJvcGVydHkiLCJyZWNlaXZlciIsImRlc2MiLCJwYXJlbnQiLCJnZXR0ZXIiLCJ1bmRlZmluZWQiLCJGdW5jdGlvbiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImdldFByb3RvdHlwZU9mIiwiQXV0aG9yIiwiX0NvbXBvbmVudCIsImFwcGx5IiwiYXJndW1lbnRzIiwiY2xhc3NOYW1lIiwiaHJlZiIsImxpbmsiLCJoZWlnaHQiLCJ3aWR0aCIsInNyYyIsInBpY3R1cmUiLCJhbHQiLCJuYW1lIiwidXNlcm5hbWUiLCJQcm9wVHlwZXMiLCJzdHJpbmciLCJpc1JlcXVpcmVkIiwiQ29tcG9uZW50IiwiSW1hZ2UiLCJfUmVhY3QkQ29tcG9uZW50IiwiZGF0YS13aWR0aCIsImRhdGEtaGVpZ2h0IiwicHJvcFR5cGVzIiwibnVtYmVyIiwiTWVzc2FnZSIsIm1lc3NhZ2UiLCJib2R5IiwicmVwbGFjZSIsImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiwiX19odG1sIiwiX2NvbW1vbkltYWdlIiwiX2NvbW1vbkltYWdlMiIsIl9jb21tb25NZXNzYWdlIiwiX2NvbW1vbk1lc3NhZ2UyIiwiX2NvbW1vbkF1dGhvciIsIl9jb21tb25BdXRob3IyIiwiaW1hZ2UiLCJfcHJvcHMkaW1hZ2UiLCJ1cmwiLCJjbGFzc1N0cmluZyIsInNvdXJjZV90eXBlIiwidmlkZW9fdXJsIiwiY3JlYXRlSW1hZ2UiLCJjcmVhdGVNZXNzYWdlIiwiY3JlYXRlQ2xhc3NTdHJpbmciLCJhdXRob3IiLCJzdHlsZSIsInRpbWVzdGFtcCIsInNoYXBlIiwidmlkZW9fc3JjIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwia2V5cyIsImluZGV4T2YiLCJoYXNPd25Qcm9wZXJ0eSIsIl9leHRlbmRzIiwiYXNzaWduIiwic291cmNlIiwiX1RpbGUiLCJfVGlsZTIiLCJfcmVhY3RNb3Rpb24iLCJfdGhpcyIsImNvbmZpZ3MiLCJpdGVtcyIsIm1hcCIsIm9wYWNpdHkiLCJtYXJnaW4iLCJpdGVtIiwiaXRlbVZhbHVlcyIsInN0eWxlQ29uZmlnIiwiaXRlbVByb3BzIiwibWFyZ2luTGVmdCIsIm1hcmdpblJpZ2h0IiwiX3RoaXMyIiwic3R5bGVzIiwiZ2V0U3R5bGVzIiwiYmluZCIsIndpbGxFbnRlciIsIndpbGxMZWF2ZSIsInZhbHVlcyIsInJlbmRlclRpbGUiLCJfcnhMaXRlIiwiX2ZldGNoSnNvbnAiLCJfZmV0Y2hKc29ucDIiLCJfdXJsIiwiZ2V0U3RyZWFtIiwiaW50ZXJ2YWxTZWNvbmRzIiwiRXJyb3IiLCJwb2xsUmF0ZSIsIlVSTCIsInJlc29sdmUiLCJyZXF1ZXN0U3RyZWFtIiwiT2JzZXJ2YWJsZSIsImp1c3QiLCJ1cGRhdGVTdHJlYW0iLCJpbnRlcnZhbCIsInN0YXJ0V2l0aCIsInJlc3BvbnNlU3RyZWFtIiwiY29tYmluZUxhdGVzdCIsInRpY2siLCJmbGF0TWFwIiwiYmFzZVVybCIsInJlcXVlc3RVcmwiLCJmcm9tUHJvbWlzZSIsInRoZW4iLCJyZXNwIiwianNvbiIsIm5vV29iYmxlIiwiZ2VudGxlIiwid29iYmx5Iiwic3RpZmYiLCJwcm9jZXNzIiwiZ2V0TmFub1NlY29uZHMiLCJocnRpbWUiLCJsb2FkVGltZSIsInBlcmZvcm1hbmNlIiwibm93IiwiaHIiLCJEYXRlIiwiZ2V0VGltZSIsIndlYnBhY2tQb2x5ZmlsbCIsImRlcHJlY2F0ZSIsInBhdGhzIiwiY2hpbGRyZW4iLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwiY29uY2F0IiwicXVldWVJbmRleCIsImRyYWluUXVldWUiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsImxlbiIsInJ1biIsImNsZWFyVGltZW91dCIsIkl0ZW0iLCJmdW4iLCJhcnJheSIsIm5vb3AiLCJuZXh0VGljayIsImFyZ3MiLCJBcnJheSIsInB1c2giLCJ0aXRsZSIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbiIsInZlcnNpb25zIiwib24iLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJiaW5kaW5nIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsIlBhbmVsIiwiY3JlYXRlQXV0aG9yIiwiX3NsaWRlIiwiX3NsaWRlMiIsIlNsaWRlc2hvdyIsInN0YXRlIiwiY3VycmVudEtleSIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJuZXh0U2xpZGUiLCJjbGVhckludGVydmFsIiwicmFuZG9tS2V5IiwiTWF0aCIsInJhbmRvbSIsInNldFN0YXRlIiwic2NhbGUiLCJ6SW5kZXgiLCJmbG9vciIsInRyYW5zZm9ybSIsImlzQ3VycmVudCIsInJlbmRlclNsaWRlIiwiX2NsaW1iU29jaWFsIiwiX2NsaW1iU29jaWFsMiIsIl9TbGlkZXNob3ciLCJfU2xpZGVzaG93MiIsIlNsaWRlc2hvd0NvbnRhaW5lciIsInJlZnJlc2giLCJzdWJzY3JpYmUiLCJtYXBwZWRJdGVtcyIsImluaXQiLCJfUGFuZWwiLCJfUGFuZWwyIiwiU2xpZGUiLCJzaG91bGREaXNwbGF5UGFuZWwiLCJuZXh0UHJvcHMiLCJwYW5lbFdpZHRoIiwieCIsImRlZmF1bHRWYWx1ZXMiLCJkZWZhdWx0U3R5bGUiLCJpbnRlcnBvbGF0ZWRWYWx1ZXMiLCJwYW5lbCIsImNyZWF0ZVBhbmVsIiwiYm9vbCIsIkNsaW1iQmFkZ2UiLCJsb2dvIiwiX1dhbGwiLCJfV2FsbDIiLCJfQ2xpbWJCYWRnZSIsIl9DbGltYkJhZGdlMiIsIm1heFNpemUiLCJzcGxpY2UiLCJjYiIsIm9uVXBkYXRlIiwib25lT2ZUeXBlIiwibGlzdCIsInRvU3RyaW5nIiwicmVzdWx0Iiwiam9pbiIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwiZ2xvYmFsIiwiZ2VuZXJhdGVDYWxsYmFja0Z1bmN0aW9uIiwiY2VpbCIsImNsZWFyRnVuY3Rpb24iLCJmdW5jdGlvbk5hbWUiLCJlIiwicmVtb3ZlU2NyaXB0Iiwic2NyaXB0SWQiLCJzY3JpcHQiLCJnZXRFbGVtZW50QnlJZCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicmVtb3ZlQ2hpbGQiLCJkZWZhdWx0T3B0aW9ucyIsImpzb25wQ2FsbGJhY2siLCJmZXRjaEpzb25wIiwib3B0aW9ucyIsInRpbWVvdXRJZCIsIlByb21pc2UiLCJyZWplY3QiLCJjYWxsYmFja0Z1bmN0aW9uIiwicmVzcG9uc2UiLCJvayIsImpzb25wU2NyaXB0Iiwic2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJjb25maWdBbmltYXRpb24iLCJsb29wIiwiY3VycmVudFRpbWUiLCJmcmFtZVRpbWUiLCJwcmV2VGltZSIsImFjY3VtdWxhdGVkVGltZSIsInRpbWVTY2FsZSIsInRpbWVTdGVwIiwibWF4U3RlcHMiLCJmcmFtZU51bWJlciIsImFuaW1SdW5uaW5nIiwiX2FuaW1SdW5uaW5nJGkiLCJhY3RpdmUiLCJhbmltYXRpb25TdGVwIiwicHJldlByZXZTdGF0ZSIsInByZXZTdGF0ZSIsInByZXZOZXh0U3RhdGUiLCJuZXh0U3RhdGUiLCJqIiwiX3JlZiIsImFscGhhIiwiX2FuaW1SdW5uaW5nJGkyIiwiYW5pbWF0aW9uUmVuZGVyIiwiZmlsdGVyIiwiX3JlZjIiLCJydW5uaW5nIiwicmFmIiwic3RhcnQiLCJjb25maWciLCJfY29uZmlnJHRpbWVTdGVwIiwiX2NvbmZpZyR0aW1lU2NhbGUiLCJfY29uZmlnJG1heFN0ZXBzIiwiX2NvbmZpZyRyYWYiLCJfcmFmMiIsIl9jb25maWckbm93IiwiX3BlcmZvcm1hbmNlTm93MiIsInZhbCIsInN0b3AiLCJuZXdBbmltIiwiX3BlcmZvcm1hbmNlTm93IiwiX3JhZiIsIm1hcE9iamVjdCIsImYiLCJyZXQiLCJldmVyeU9iaiIsImNvbXBvbmVudHMiLCJSZWFjdCIsImNyZWF0ZUNsYXNzIiwiZGlzcGxheU5hbWUiLCJkZWZhdWx0VmFsdWUiLCJwcm9wIiwicHJvcE5hbWUiLCJlbmRWYWx1ZSIsImZ1bmMiLCJnZXRJbml0aWFsU3RhdGUiLCJfcHJvcHMiLCJjdXJyZW50U3R5bGUiLCJjdXJyZW50VmVsb2NpdHkiLCJfemVybzIiLCJjb21wb25lbnREaWRNb3VudCIsInN0YXJ0QW5pbWF0aW5nIiwiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIsInRpbWVzdGVwIiwibmV3Q3VycmVudFN0eWxlIiwiX3VwZGF0ZVRyZWUiLCJ1cGRhdGVDdXJyZW50U3R5bGUiLCJuZXdDdXJyZW50VmVsb2NpdHkiLCJ1cGRhdGVDdXJyZW50VmVsb2NpdHkiLCJfbm9WZWxvY2l0eTIiLCJzdG9wQW5pbWF0aW9uIiwiaGFzVW5tb3VudGVkIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJzdGFydEFuaW1hdGlvbiIsImludGVycG9sYXRlVmFsdWUiLCJzdHJpcHBlZFN0eWxlIiwiX3N0cmlwU3R5bGUyIiwicmVuZGVyZWRDaGlsZHJlbiIsIkNoaWxkcmVuIiwib25seSIsImRlZmF1bHRTdHlsZXMiLCJhcnJheU9mIiwiX3Byb3BzMiIsImN1cnJlbnRTdHlsZXMiLCJjdXJyZW50VmVsb2NpdGllcyIsInMiLCJuZXdDdXJyZW50U3R5bGVzIiwibmV3Q3VycmVudFZlbG9jaXRpZXMiLCJldmVyeSIsInYiLCJrIiwib2JqZWN0T2YiLCJhbnkiLCJnZXREZWZhdWx0UHJvcHMiLCJfcHJvcHMzIiwiX3Byb3BzNCIsIm1lcmdlZFN0eWxlcyIsImhhc05ld0tleSIsIl9tZXJnZURpZmYyIiwicmVzIiwiX2hhc1JlYWNoZWRTdHlsZTIiLCJmb3JFYWNoIiwiX2V4dGVuZHMyIiwiX2V4dGVuZHMzIiwiZW50ZXJTdHlsZSIsIm1lcmdlZFN0eWxlIiwiX2RlcHJlY2F0ZWRTcHJpbmdzIiwiX2RlcHJlY2F0ZWRTcHJpbmdzMyIsIl9ub1ZlbG9jaXR5IiwiX2hhc1JlYWNoZWRTdHlsZSIsIl9tZXJnZURpZmYiLCJfYW5pbWF0aW9uTG9vcCIsIl9hbmltYXRpb25Mb29wMiIsIl96ZXJvIiwiX2RlcHJlY2F0ZWRTcHJpbmdzMiIsIl9zdHJpcFN0eWxlIiwiZGVwcmVjYXRlZFNwcmluZ3MiLCJjb21wb25lbnRXaWxsTW91bnQiLCJoYXNSZWFjaGVkU3R5bGUiLCJjdXJyZW50VmFsdWUiLCJkZXN0VmFsdWUiLCJtZXJnZURpZmZBcnIiLCJfeDQiLCJfeDUiLCJfeDYiLCJfeDciLCJhcnJBIiwiYXJyQiIsImNvbGxCIiwiaW5kZXhBIiwiaW5kZXhCIiwib25SZW1vdmUiLCJhY2N1bSIsImVuZEEiLCJlbmRCIiwia2V5QSIsImtleUIiLCJmaWxsIiwibWVyZ2VEaWZmIiwiYSIsImIiLCJub1ZlbG9jaXR5IiwibmV3S2V5cyIsIl9wcmVzZXRzIiwic3RlcHBlciIsImZyYW1lUmF0ZSIsImRlc3RYIiwiRnNwcmluZyIsIkZkYW1wZXIiLCJuZXdWIiwibmV3WCIsImFicyIsImVycm9yTWFyZ2luIiwic3RyaXBTdHlsZSIsIm5leHRTdHlsZSIsInByZXZTdHlsZSIsInByZXZWYWx1ZSIsIl9zdHlsZSRrZXkkY29uZmlnIiwiX3N0ZXBwZXIyIiwiX3N0eWxlJGtleSRjb25maWcyIiwiX3N0ZXBwZXIiLCJ6ZXJvIiwidmVuZG9ycyIsInN1ZmZpeCIsImNhZiIsImxhc3QiLCJmcmFtZUR1cmF0aW9uIiwiY2FsbGJhY2siLCJfbm93IiwibmV4dCIsIm1heCIsImNwIiwic2xpY2UiLCJjYW5jZWxsZWQiLCJyb3VuZCIsImhhbmRsZSIsImZuIiwiY2FuY2VsIiwiY2hlY2tHbG9iYWwiLCJjbG9uZUFycmF5IiwiYXJyIiwidHJ5Q2F0Y2hlckdlbiIsInRyeUNhdGNoVGFyZ2V0IiwiZXJyb3JPYmoiLCJ0aHJvd2VyIiwibWFrZVN0YWNrVHJhY2VMb25nIiwiZXJyb3IiLCJvYnNlcnZhYmxlIiwiaGFzU3RhY2tzIiwic3RhY2siLCJTVEFDS19KVU1QX1NFUEFSQVRPUiIsInN0YWNrcyIsIm8iLCJ1bnNoaWZ0IiwiY29uY2F0ZWRTdGFja3MiLCJmaWx0ZXJTdGFja1N0cmluZyIsInN0YWNrU3RyaW5nIiwibGluZXMiLCJzcGxpdCIsImRlc2lyZWRMaW5lcyIsImxpbmUiLCJpc0ludGVybmFsRnJhbWUiLCJpc05vZGVGcmFtZSIsInN0YWNrTGluZSIsImZpbGVOYW1lQW5kTGluZU51bWJlciIsImdldEZpbGVOYW1lQW5kTGluZU51bWJlciIsImZpbGVOYW1lIiwibGluZU51bWJlciIsInJGaWxlTmFtZSIsInJTdGFydGluZ0xpbmUiLCJyRW5kaW5nTGluZSIsImNhcHR1cmVMaW5lIiwiZmlyc3RMaW5lIiwiYXR0ZW1wdDEiLCJleGVjIiwiTnVtYmVyIiwiYXR0ZW1wdDIiLCJhdHRlbXB0MyIsImVxdWFsT2JqZWN0cyIsIm90aGVyIiwiZXF1YWxGdW5jIiwiaXNMb29zZSIsInN0YWNrQSIsInN0YWNrQiIsIm9ialByb3BzIiwib2JqTGVuZ3RoIiwib3RoUHJvcHMiLCJvdGhMZW5ndGgiLCJpbmRleCIsInNraXBDdG9yIiwib2JqVmFsdWUiLCJvdGhWYWx1ZSIsIm9iakN0b3IiLCJvdGhDdG9yIiwiZXF1YWxCeVRhZyIsInRhZyIsImJvb2xUYWciLCJkYXRlVGFnIiwiZXJyb3JUYWciLCJudW1iZXJUYWciLCJyZWdleHBUYWciLCJzdHJpbmdUYWciLCJpc09iamVjdExpa2UiLCJpc0xlbmd0aCIsIk1BWF9TQUZFX0lOVEVHRVIiLCJpc1R5cGVkQXJyYXkiLCJ0eXBlZEFycmF5VGFncyIsIm9ialRvU3RyaW5nIiwiYXJyYXlTb21lIiwicHJlZGljYXRlIiwiZXF1YWxBcnJheXMiLCJhcnJMZW5ndGgiLCJhcnJWYWx1ZSIsImJhc2VJc0VxdWFsRGVlcCIsIm9iaklzQXJyIiwiaXNBcnJheSIsIm90aElzQXJyIiwib2JqVGFnIiwiYXJyYXlUYWciLCJvdGhUYWciLCJhcmdzVGFnIiwib2JqZWN0VGFnIiwib2JqSXNPYmoiLCJpc0hvc3RPYmplY3QiLCJvdGhJc09iaiIsImlzU2FtZVRhZyIsIm9iaklzV3JhcHBlZCIsIm90aElzV3JhcHBlZCIsInBvcCIsImJhc2VJc0VxdWFsIiwiaXNPYmplY3QiLCJhcnJheUluaXRpYWxpemUiLCJjb3VudCIsIkluZGV4ZWRJdGVtIiwiSXNEaXNwb3NlZERpc3Bvc2FibGUiLCJfcyIsImlzRGlzcG9zZWQiLCJTdHJpbmdJdGVyYWJsZSIsIlN0cmluZ0l0ZXJhdG9yIiwiX2wiLCJfaSIsIkFycmF5SXRlcmFibGUiLCJfYSIsIkFycmF5SXRlcmF0b3IiLCJ0b0xlbmd0aCIsIm51bWJlcklzRmluaXRlIiwiaXNGaW5pdGUiLCJnZXRJdGVyYWJsZSIsIml0IiwiJGl0ZXJhdG9yJCIsInNpZ24iLCJpc05hTiIsIm1heFNhZmVJbnRlZ2VyIiwib2JzZXJ2YWJsZU9mIiwic2NoZWR1bGVyIiwiaXNTY2hlZHVsZXIiLCJjdXJyZW50VGhyZWFkU2NoZWR1bGVyIiwiRnJvbUFycmF5T2JzZXJ2YWJsZSIsIlJlcGVhdFNpbmsiLCJvYnNlcnZlciIsImZhbHNlRmFjdG9yeSIsImFyZ3VtZW50c1RvQXJyYXkiLCJlbXB0eUFycmF5RmFjdG9yeSIsImFzT2JzZXJ2YWJsZSIsInBsdWNrZXIiLCJjdXJyZW50UHJvcCIsImNyZWF0ZUNiT2JzZXJ2YWJsZSIsImN0eCIsInNlbGVjdG9yIiwiQXN5bmNTdWJqZWN0IiwiY3JlYXRlQ2JIYW5kbGVyIiwicmVzdWx0cyIsImlzRnVuY3Rpb24iLCJ0cnlDYXRjaCIsIm9uRXJyb3IiLCJvbk5leHQiLCJvbkNvbXBsZXRlZCIsImNyZWF0ZU5vZGVPYnNlcnZhYmxlIiwiY3JlYXRlTm9kZUhhbmRsZXIiLCJlcnIiLCJpc05vZGVMaXN0IiwiZWwiLCJTdGF0aWNOb2RlTGlzdCIsIk5vZGVMaXN0IiwiTGlzdGVuRGlzcG9zYWJsZSIsIm4iLCJfZSIsIl9uIiwiX2ZuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNyZWF0ZUV2ZW50TGlzdGVuZXIiLCJldmVudE5hbWUiLCJoYW5kbGVyIiwiZGlzcG9zYWJsZXMiLCJDb21wb3NpdGVEaXNwb3NhYmxlIiwiZWxlbVRvU3RyaW5nIiwiYWRkIiwiX29ic2VydmFibGVUaW1lciIsImR1ZVRpbWUiLCJUaW1lck9ic2VydmFibGUiLCJvYnNlcnZhYmxlVGltZXJEYXRlQW5kUGVyaW9kIiwicGVyaW9kIiwiQW5vbnltb3VzT2JzZXJ2YWJsZSIsImQiLCJub3JtYWxpemVUaW1lIiwic2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUiLCJzZWxmIiwib2JzZXJ2YWJsZVRpbWVyVGltZVNwYW5BbmRQZXJpb2QiLCJzY2hlZHVsZVBlcmlvZGljIiwib2JzZXJ2YWJsZURlZmVyIiwib2JzZXJ2YWJsZURlbGF5UmVsYXRpdmUiLCJzdWJzY3JpcHRpb24iLCJjYW5jZWxhYmxlIiwiU2VyaWFsRGlzcG9zYWJsZSIsImV4Y2VwdGlvbiIsInEiLCJtYXRlcmlhbGl6ZSIsIm5vdGlmaWNhdGlvbiIsInNob3VsZFJ1biIsImtpbmQiLCJTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSIsInNldERpc3Bvc2FibGUiLCJfIiwicmVjdXJzZUR1ZVRpbWUiLCJzaG91bGRSZWN1cnNlIiwic2hpZnQiLCJhY2NlcHQiLCJCaW5hcnlEaXNwb3NhYmxlIiwib2JzZXJ2YWJsZURlbGF5QWJzb2x1dGUiLCJkZWxheVdpdGhTZWxlY3RvciIsInN1YnNjcmlwdGlvbkRlbGF5IiwiZGVsYXlEdXJhdGlvblNlbGVjdG9yIiwic3ViRGVsYXkiLCJkZWxheXMiLCJyZW1vdmUiLCJkb25lIiwiYXRFbmQiLCJkaXNwb3NlIiwiZGVib3VuY2VXaXRoU2VsZWN0b3IiLCJkdXJhdGlvblNlbGVjdG9yIiwiaGFzVmFsdWUiLCJ0aHJvdHRsZSIsImlzUHJvbWlzZSIsIm9ic2VydmFibGVGcm9tUHJvbWlzZSIsImN1cnJlbnRpZCIsInNhbXBsZU9ic2VydmFibGUiLCJzYW1wbGVyIiwic2FtcGxlU3Vic2NyaWJlIiwic291cmNlU3Vic2NyaXB0aW9uIiwibmV3VmFsdWUiLCJ0aW1lb3V0V2l0aFNlbGVjdG9yIiwiZmlyc3RUaW1lb3V0IiwidGltZW91dER1cmF0aW9uU2VsZWN0b3IiLCJvYnNlcnZhYmxlTmV2ZXIiLCJpc09ic2VydmFibGUiLCJvYnNlcnZhYmxlVGhyb3ciLCJUaW1lb3V0RXJyb3IiLCJzZXRUaW1lciIsInRpbWVyV2lucyIsInN3aXRjaGVkIiwibXlJZCIsIm9XaW5zIiwib3JpZ2luYWwiLCJkZWZhdWx0U2NoZWR1bGVyIiwiY3JlYXRlVGltZXIiLCJzY2hlZHVsZUZ1dHVyZSIsImNvbWJpbmVMYXRlc3RTb3VyY2UiLCJzdWJqZWN0IiwicmVzdWx0U2VsZWN0b3IiLCJoYXNWYWx1ZUFsbCIsImlkZW50aXR5IiwiaXNEb25lIiwidHJhbnNmb3JtRm9yT2JzZXJ2ZXIiLCJAQHRyYW5zZHVjZXIvaW5pdCIsIkBAdHJhbnNkdWNlci9zdGVwIiwib2JzIiwiaW5wdXQiLCJAQHRyYW5zZHVjZXIvcmVzdWx0Iiwib2JqZWN0VHlwZXMiLCJmdW5jdGlvbiIsImZyZWVFeHBvcnRzIiwibm9kZVR5cGUiLCJmcmVlTW9kdWxlIiwiZnJlZUdsb2JhbCIsImZyZWVTZWxmIiwiZnJlZVdpbmRvdyIsIm1vZHVsZUV4cG9ydHMiLCJ0aGlzR2xvYmFsIiwiUngiLCJpbnRlcm5hbHMiLCJoZWxwZXJzIiwiZGVmYXVsdE5vdyIsImRlZmF1bHRDb21wYXJlciIsInkiLCJpc0VxdWFsIiwiZGVmYXVsdFN1YkNvbXBhcmVyIiwiZGVmYXVsdEVycm9yIiwiZGVmYXVsdEtleVNlcmlhbGl6ZXIiLCJpc0ZuIiwibG9uZ1N0YWNrU3VwcG9ydCIsIkVtcHR5RXJyb3IiLCJPYmplY3REaXNwb3NlZEVycm9yIiwiQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IiLCJOb3RTdXBwb3J0ZWRFcnJvciIsIk5vdEltcGxlbWVudGVkRXJyb3IiLCJub3RJbXBsZW1lbnRlZCIsIm5vdFN1cHBvcnRlZCIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiU2V0IiwiZG9uZUVudW1lcmF0b3IiLCJpc0l0ZXJhYmxlIiwiaXNBcnJheUxpa2UiLCJiaW5kQ2FsbGJhY2siLCJ0aGlzQXJnIiwiYXJnQ291bnQiLCJhcmciLCJjb2xsZWN0aW9uIiwiZG9udEVudW1zIiwiZnVuY1RhZyIsIm1hcFRhZyIsInNldFRhZyIsIndlYWtNYXBUYWciLCJhcnJheUJ1ZmZlclRhZyIsImZsb2F0MzJUYWciLCJmbG9hdDY0VGFnIiwiaW50OFRhZyIsImludDE2VGFnIiwiaW50MzJUYWciLCJ1aW50OFRhZyIsInVpbnQ4Q2xhbXBlZFRhZyIsInVpbnQxNlRhZyIsInVpbnQzMlRhZyIsIm9iamVjdFByb3RvIiwicG93IiwiaGFzRG9udEVudW1CdWciLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImRvbnRFbnVtc0xlbmd0aCIsInR5cGUiLCJpbmhlcml0cyIsImNoaWxkIiwiX18iLCJhZGRQcm9wZXJ0aWVzIiwic291cmNlcyIsImlkeCIsImxuIiwiYWRkUmVmIiwieHMiLCJyIiwiZ2V0RGlzcG9zYWJsZSIsIkNvbXBvc2l0ZURpc3Bvc2FibGVQcm90b3R5cGUiLCJzaG91bGREaXNwb3NlIiwiY3VycmVudERpc3Bvc2FibGVzIiwiRGlzcG9zYWJsZSIsImFjdGlvbiIsImRpc3Bvc2FibGVDcmVhdGUiLCJkaXNwb3NhYmxlRW1wdHkiLCJlbXB0eSIsImlzRGlzcG9zYWJsZSIsImNoZWNrRGlzcG9zZWQiLCJkaXNwb3NhYmxlIiwiZGlzcG9zYWJsZUZpeHVwIiwiX2ZpeHVwIiwiY3VycmVudCIsIm9sZCIsImZpcnN0Iiwic2Vjb25kIiwiX2ZpcnN0IiwiX3NlY29uZCIsIm9sZDEiLCJvbGQyIiwiTkFyeURpc3Bvc2FibGUiLCJfZGlzcG9zYWJsZXMiLCJTY2hlZHVsZWRJdGVtIiwiUmVmQ291bnREaXNwb3NhYmxlIiwiSW5uZXJEaXNwb3NhYmxlIiwiaXNJbm5lckRpc3Bvc2VkIiwidW5kZXJseWluZ0Rpc3Bvc2FibGUiLCJpc1ByaW1hcnlEaXNwb3NlZCIsImNvbXBhcmVyIiwiaW52b2tlIiwiaW52b2tlQ29yZSIsImNvbXBhcmVUbyIsImlzQ2FuY2VsbGVkIiwiU2NoZWR1bGVyIiwic2NoZWR1bGVyUHJvdG8iLCJzY2hlZHVsZSIsImR0Iiwibm9ybWFsaXplIiwiX3NjaGVkdWxlRnV0dXJlIiwidGltZVNwYW4iLCJpbnZva2VSZWNJbW1lZGlhdGUiLCJwYWlyIiwiaW5uZXJBY3Rpb24iLCJzdGF0ZTIiLCJzY2hlZHVsZVdvcmsiLCJzdGF0ZTMiLCJpc0FkZGVkIiwiZ3JvdXAiLCJpbnZva2VSZWNEYXRlIiwiZHVlVGltZTEiLCJzY2hlZHVsZVJlY3Vyc2l2ZSIsInNjaGVkdWxlTWV0aG9kIiwiY2xlYXJNZXRob2QiLCJJbW1lZGlhdGVTY2hlZHVsZXIiLCJfX3N1cGVyX18iLCJpbW1lZGlhdGVTY2hlZHVsZXIiLCJpbW1lZGlhdGUiLCJDdXJyZW50VGhyZWFkU2NoZWR1bGVyIiwicnVuVHJhbXBvbGluZSIsImRlcXVldWUiLCJzaSIsImVucXVldWUiLCJQcmlvcml0eVF1ZXVlIiwic2NoZWR1bGVSZXF1aXJlZCIsImN1cnJlbnRUaHJlYWQiLCJsb2NhbFRpbWVyIiwiU2NoZWR1bGVQZXJpb2RpY1JlY3Vyc2l2ZSIsImNyZWF0ZVRpY2siLCJjb21tYW5kIiwicmVjdXJzZSIsIl9wZXJpb2QiLCJfYWN0aW9uIiwiX3N0YXRlIiwiX2NhbmNlbCIsIl9zY2hlZHVsZXIiLCJsb2NhbFNldFRpbWVvdXQiLCJsb2NhbENsZWFyVGltZW91dCIsIldTY3JpcHQiLCJ0aW1lIiwiU2xlZXAiLCJydW5UYXNrIiwiY3VycmVudGx5UnVubmluZyIsInRhc2siLCJ0YXNrc0J5SGFuZGxlIiwicG9zdE1lc3NhZ2VTdXBwb3J0ZWQiLCJwb3N0TWVzc2FnZSIsImltcG9ydFNjcmlwdHMiLCJpc0FzeW5jIiwib2xkSGFuZGxlciIsIm9ubWVzc2FnZSIsIm5leHRIYW5kbGUiLCJyZU5hdGl2ZSIsIlJlZ0V4cCIsIlN0cmluZyIsInNldEltbWVkaWF0ZSIsInRlc3QiLCJNU0dfUFJFRklYIiwib25HbG9iYWxQb3N0TWVzc2FnZSIsImV2ZW50IiwiZGF0YSIsInN1YnN0cmluZyIsImN1cnJlbnRJZCIsIk1lc3NhZ2VDaGFubmVsIiwiY2hhbm5lbCIsInBvcnQxIiwicG9ydDIiLCJzY3JpcHRFbGVtZW50Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicGFyZW50Tm9kZSIsImRvY3VtZW50RWxlbWVudCIsIkRlZmF1bHRTY2hlZHVsZXIiLCJzY2hlZHVsZUFjdGlvbiIsIkNsZWFyRGlzcG9zYWJsZSIsIl9pZCIsIkxvY2FsQ2xlYXJEaXNwb3NhYmxlIiwiYXN5bmMiLCJjYXBhY2l0eSIsInByaW9yaXR5UHJvdG8iLCJpc0hpZ2hlclByaW9yaXR5IiwibGVmdCIsInJpZ2h0IiwicGVyY29sYXRlIiwidGVtcCIsImhlYXBpZnkiLCJwZWVrIiwicmVtb3ZlQXQiLCJvYnNlcnZhYmxlUHJvdG8iLCJOb3RpZmljYXRpb24iLCJfYWNjZXB0IiwiX2FjY2VwdE9ic2VydmVyIiwib2JzZXJ2ZXJPck9uTmV4dCIsInRvT2JzZXJ2YWJsZSIsIk9uTmV4dE5vdGlmaWNhdGlvbiIsIk9uRXJyb3JOb3RpZmljYXRpb24iLCJPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbiIsIm5vdGlmaWNhdGlvbkNyZWF0ZU9uTmV4dCIsImNyZWF0ZU9uTmV4dCIsIm5vdGlmaWNhdGlvbkNyZWF0ZU9uRXJyb3IiLCJjcmVhdGVPbkVycm9yIiwibm90aWZpY2F0aW9uQ3JlYXRlT25Db21wbGV0ZWQiLCJjcmVhdGVPbkNvbXBsZXRlZCIsIk9ic2VydmVyIiwib2JzZXJ2ZXJDcmVhdGUiLCJBbm9ueW1vdXNPYnNlcnZlciIsIkFic3RyYWN0T2JzZXJ2ZXIiLCJpc1N0b3BwZWQiLCJjb21wbGV0ZWQiLCJmYWlsIiwiX29uTmV4dCIsIl9vbkVycm9yIiwiX29uQ29tcGxldGVkIiwibWFrZVN1YnNjcmliZSIsIm9sZE9uRXJyb3IiLCJvbGRTdWJzY3JpYmUiLCJfc3Vic2NyaWJlIiwib09yT25OZXh0Iiwic3Vic2NyaWJlT25OZXh0Iiwic3Vic2NyaWJlT25FcnJvciIsInN1YnNjcmliZU9uQ29tcGxldGVkIiwiU2NoZWR1bGVkT2JzZXJ2ZXIiLCJpc0FjcXVpcmVkIiwiaGFzRmF1bHRlZCIsImVucXVldWVOZXh0IiwiZW5xdWV1ZUVycm9yIiwiZW5xdWV1ZUNvbXBsZXRlZCIsIndvcmsiLCJlbnN1cmVBY3RpdmUiLCJpc093bmVyIiwiT2JzZXJ2YWJsZUJhc2UiLCJmaXhTdWJzY3JpYmVyIiwic3Vic2NyaWJlciIsImFkbyIsInN1YiIsInN1YnNjcmliZUNvcmUiLCJBdXRvRGV0YWNoT2JzZXJ2ZXIiLCJGbGF0TWFwT2JzZXJ2YWJsZSIsIklubmVyT2JzZXJ2ZXIiLCJfd3JhcFJlc3VsdCIsImkyIiwiZnJvbSIsIkVudW1lcmFibGUiLCJDb25jYXRFbnVtZXJhYmxlT2JzZXJ2YWJsZSIsImN1cnJlbnRJdGVtIiwiX3JlY3Vyc2UiLCJDYXRjaEVycm9yT2JzZXJ2YWJsZSIsImxhc3RFcnJvciIsImNhdGNoRXJyb3IiLCJjYXRjaEVycm9yV2hlbiIsIm5vdGlmaWNhdGlvbkhhbmRsZXIiLCJleGNlcHRpb25zIiwiU3ViamVjdCIsIm5vdGlmaWVyIiwiaGFuZGxlZCIsIm5vdGlmaWNhdGlvbkRpc3Bvc2FibGUiLCJvdXRlciIsImlubmVyIiwiZXhuIiwiZXgiLCJSZXBlYXRFbnVtZXJhYmxlIiwiUmVwZWF0RW51bWVyYXRvciIsImwiLCJlbnVtZXJhYmxlUmVwZWF0IiwicmVwZWF0IiwicmVwZWF0Q291bnQiLCJPZkVudW1lcmFibGUiLCJPZkVudW1lcmF0b3IiLCJlbnVtZXJhYmxlT2YiLCJvZiIsIlRvQXJyYXlPYnNlcnZhYmxlIiwidG9BcnJheSIsIkRlZmVyIiwiX2YiLCJkZWZlciIsIm9ic2VydmFibGVGYWN0b3J5IiwiRW1wdHlPYnNlcnZhYmxlIiwiRW1wdHlTaW5rIiwic2NoZWR1bGVJdGVtIiwic2luayIsIkVNUFRZX09CU0VSVkFCTEUiLCJvYnNlcnZhYmxlRW1wdHkiLCJGcm9tT2JzZXJ2YWJsZSIsIml0ZXJhYmxlIiwiX2l0ZXJhYmxlIiwiY3JlYXRlU2NoZWR1bGVNZXRob2QiLCJjaGFyQXQiLCJvYnNlcnZhYmxlRnJvbSIsIm1hcEZuIiwibWFwcGVyIiwiX2FyZ3MiLCJvYnNlcnZhYmxlRnJvbUFycmF5IiwiZnJvbUFycmF5IiwiTmV2ZXJPYnNlcnZhYmxlIiwiTkVWRVJfT0JTRVJWQUJMRSIsIm5ldmVyIiwib2ZXaXRoU2NoZWR1bGVyIiwiUGFpcnNPYnNlcnZhYmxlIiwiX28iLCJfa2V5cyIsInBhaXJzIiwiUmFuZ2VPYnNlcnZhYmxlIiwicmFuZ2VDb3VudCIsImxvb3BSZWN1cnNpdmUiLCJyYW5nZSIsIlJlcGVhdE9ic2VydmFibGUiLCJKdXN0T2JzZXJ2YWJsZSIsIl92YWx1ZSIsIlRocm93T2JzZXJ2YWJsZSIsIl9lcnJvciIsIkNhdGNoT2JzZXJ2YWJsZSIsImQxIiwiQ2F0Y2hPYnNlcnZlciIsImhhbmRsZXJPclNlY29uZCIsIm9ic2VydmFibGVDYXRjaCIsIkNvbWJpbmVMYXRlc3RPYnNlcnZhYmxlIiwicGFyYW1zIiwiX3BhcmFtcyIsIl9jYiIsInN1YnNjcmlwdGlvbnMiLCJzYWQiLCJDb21iaW5lTGF0ZXN0T2JzZXJ2ZXIiLCJub3RUaGVTYW1lIiwib2JzZXJ2YWJsZUNvbmNhdCIsIkNvbmNhdE9ic2VydmVyIiwiQ29uY2F0T2JzZXJ2YWJsZSIsIl9zb3VyY2VzIiwiY29uY2F0QWxsIiwibWVyZ2UiLCJNZXJnZU9ic2VydmFibGUiLCJtYXhDb25jdXJyZW50IiwiZyIsIk1lcmdlT2JzZXJ2ZXIiLCJhY3RpdmVDb3VudCIsImhhbmRsZVN1YnNjcmliZSIsImlubmVyU291cmNlIiwibWF4Q29uY3VycmVudE9yT3RoZXIiLCJvYnNlcnZhYmxlTWVyZ2UiLCJtZXJnZUFsbCIsIkNvbXBvc2l0ZUVycm9yIiwiZXJyb3JzIiwiaW5uZXJFcnJvcnMiLCJNZXJnZURlbGF5RXJyb3JPYnNlcnZhYmxlIiwiTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIiLCJfZ3JvdXAiLCJzZXRDb21wbGV0aW9uIiwiX2lubmVyIiwibWVyZ2VEZWxheUVycm9yIiwiTWVyZ2VBbGxPYnNlcnZhYmxlIiwiTWVyZ2VBbGxPYnNlcnZlciIsIlNraXBVbnRpbE9ic2VydmFibGUiLCJfb3BlbiIsImxlZnRTdWJzY3JpcHRpb24iLCJTa2lwVW50aWxTb3VyY2VPYnNlcnZlciIsInJpZ2h0U3Vic2NyaXB0aW9uIiwiU2tpcFVudGlsT3RoZXJPYnNlcnZlciIsIl9wIiwiX3IiLCJza2lwVW50aWwiLCJTd2l0Y2hPYnNlcnZhYmxlIiwiU3dpdGNoT2JzZXJ2ZXIiLCJzdG9wcGVkIiwibGF0ZXN0IiwiaGFzTGF0ZXN0Iiwic3dpdGNoTGF0ZXN0IiwiVGFrZVVudGlsT2JzZXJ2YWJsZSIsIlRha2VVbnRpbE9ic2VydmVyIiwidGFrZVVudGlsIiwiV2l0aExhdGVzdEZyb21PYnNlcnZhYmxlIiwiX3NzIiwiV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyIiwib3V0ZXJTYWQiLCJXaXRoTGF0ZXN0RnJvbVNvdXJjZU9ic2VydmVyIiwiYWxsVmFsdWVzIiwid2l0aExhdGVzdEZyb20iLCJaaXBPYnNlcnZhYmxlIiwiWmlwT2JzZXJ2ZXIiLCJfcSIsIl9kIiwibm90RW1wdHkiLCJzaGlmdEVhY2giLCJxdWV1ZWRWYWx1ZXMiLCJ6aXAiLCJaaXBJdGVyYWJsZU9ic2VydmFibGUiLCJaaXBJdGVyYWJsZU9ic2VydmVyIiwiemlwSXRlcmFibGUiLCJEZW1hdGVyaWFsaXplT2JzZXJ2YWJsZSIsIkRlbWF0ZXJpYWxpemVPYnNlcnZlciIsImRlbWF0ZXJpYWxpemUiLCJEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmFibGUiLCJrZXlGbiIsIkRpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2ZXIiLCJoYXNDdXJyZW50S2V5IiwiY29tcGFyZXJFcXVhbHMiLCJkaXN0aW5jdFVudGlsQ2hhbmdlZCIsIlRhcE9ic2VydmFibGUiLCJfb04iLCJfb0UiLCJfb0MiLCJ0IiwidGFwIiwiZG9BY3Rpb24iLCJkb09uTmV4dCIsInRhcE9uTmV4dCIsImRvT25FcnJvciIsInRhcE9uRXJyb3IiLCJkb09uQ29tcGxldGVkIiwidGFwT25Db21wbGV0ZWQiLCJGaW5hbGx5T2JzZXJ2YWJsZSIsIkZpbmFsbHlEaXNwb3NhYmxlIiwiSWdub3JlRWxlbWVudHNPYnNlcnZhYmxlIiwiaWdub3JlRWxlbWVudHMiLCJNYXRlcmlhbGl6ZU9ic2VydmFibGUiLCJNYXRlcmlhbGl6ZU9ic2VydmVyIiwicmV0cnkiLCJyZXRyeUNvdW50IiwicmV0cnlXaGVuIiwiU2Nhbk9ic2VydmFibGUiLCJhY2N1bXVsYXRvciIsImhhc1NlZWQiLCJzZWVkIiwiU2Nhbk9ic2VydmVyIiwiX2hzIiwiX2hhIiwiX2h2Iiwic2NhbiIsIlNraXBMYXN0T2JzZXJ2YWJsZSIsIl9jIiwiU2tpcExhc3RPYnNlcnZlciIsInNraXBMYXN0IiwiVGFrZUxhc3RPYnNlcnZlciIsInRha2VMYXN0IiwiZmxhdE1hcENvbmNhdCIsImNvbmNhdE1hcCIsIk1hcE9ic2VydmFibGUiLCJpbm5lck1hcCIsImludGVybmFsTWFwIiwic2VsZWN0Iiwic2VsZWN0b3JGbiIsInBsdWNrIiwic2VsZWN0TWFueSIsImZsYXRNYXBMYXRlc3QiLCJTa2lwT2JzZXJ2YWJsZSIsIl9jb3VudCIsIlNraXBPYnNlcnZlciIsInNraXAiLCJTa2lwV2hpbGVPYnNlcnZhYmxlIiwiU2tpcFdoaWxlT2JzZXJ2ZXIiLCJza2lwV2hpbGUiLCJUYWtlT2JzZXJ2YWJsZSIsIlRha2VPYnNlcnZlciIsInRha2UiLCJUYWtlV2hpbGVPYnNlcnZhYmxlIiwiVGFrZVdoaWxlT2JzZXJ2ZXIiLCJ0YWtlV2hpbGUiLCJGaWx0ZXJPYnNlcnZhYmxlIiwiaW5uZXJQcmVkaWNhdGUiLCJpbnRlcm5hbEZpbHRlciIsInNob3VsZFlpZWxkIiwid2hlcmUiLCJmcm9tQ2FsbGJhY2siLCJmcm9tTm9kZUNhbGxiYWNrIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInVzZU5hdGl2ZUV2ZW50cyIsIkV2ZW50T2JzZXJ2YWJsZSIsIl9lbCIsImNyZWF0ZUhhbmRsZXIiLCJmcm9tRXZlbnQiLCJlbGVtZW50IiwiZnJvbUV2ZW50UGF0dGVybiIsImgiLCJwdWJsaXNoIiwicmVmQ291bnQiLCJFdmVudFBhdHRlcm5PYnNlcnZhYmxlIiwiZGVsIiwiX2FkZCIsIl9kZWwiLCJFdmVudFBhdHRlcm5EaXNwb3NhYmxlIiwiX3JldCIsInJldHVyblZhbHVlIiwiYWRkSGFuZGxlciIsInJlbW92ZUhhbmRsZXIiLCJGcm9tUHJvbWlzZU9ic2VydmFibGUiLCJzY2hlZHVsZU5leHQiLCJzY2hlZHVsZUVycm9yIiwicHJvbWlzZSIsInRvUHJvbWlzZSIsInByb21pc2VDdG9yIiwic3RhcnRBc3luYyIsImZ1bmN0aW9uQXN5bmMiLCJNdWx0aWNhc3RPYnNlcnZhYmxlIiwiZm4xIiwiZm4yIiwiX2ZuMSIsIl9mbjIiLCJjb25uZWN0YWJsZSIsIm11bHRpY2FzdCIsImNvbm5lY3QiLCJzdWJqZWN0T3JTdWJqZWN0U2VsZWN0b3IiLCJDb25uZWN0YWJsZU9ic2VydmFibGUiLCJzaGFyZSIsInB1Ymxpc2hMYXN0IiwicHVibGlzaFZhbHVlIiwiaW5pdGlhbFZhbHVlT3JTZWxlY3RvciIsImluaXRpYWxWYWx1ZSIsIkJlaGF2aW9yU3ViamVjdCIsInNoYXJlVmFsdWUiLCJyZXBsYXkiLCJidWZmZXJTaXplIiwid2luZG93U2l6ZSIsIlJlcGxheVN1YmplY3QiLCJzaGFyZVJlcGxheSIsIlJlZkNvdW50T2JzZXJ2YWJsZSIsIl9jb25uZWN0YWJsZVN1YnNjcmlwdGlvbiIsIl9jb25uZWN0aW9uIiwiX3NvdXJjZSIsIl9zdWJqZWN0IiwiQ29ubmVjdERpc3Bvc2FibGUiLCJfZHQiLCJvYnNlcnZhYmxlaW50ZXJ2YWwiLCJwZXJpb2RPclNjaGVkdWxlciIsImZpcnN0QXJnIiwiRGVib3VuY2VPYnNlcnZhYmxlIiwiRGVib3VuY2VPYnNlcnZlciIsIl92IiwiZGVib3VuY2UiLCJUaW1lc3RhbXBPYnNlcnZhYmxlIiwiVGltZXN0YW1wT2JzZXJ2ZXIiLCJzYW1wbGUiLCJ0aHJvdHRsZUxhdGVzdCIsImludGVydmFsT3JTYW1wbGVyIiwid2luZG93RHVyYXRpb24iLCJkdXJhdGlvbiIsIlJhbmdlRXJyb3IiLCJsYXN0T25OZXh0IiwiUGF1c2FibGVPYnNlcnZhYmxlIiwicGF1c2VyIiwiY29udHJvbGxlciIsImNvbm4iLCJjb25uZWN0aW9uIiwicGF1c2FibGUiLCJwYXVzZSIsInJlc3VtZSIsIlBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlIiwicHJldmlvdXNTaG91bGRGaXJlIiwic2hvdWxkRmlyZSIsInBhdXNhYmxlQnVmZmVyZWQiLCJDb250cm9sbGVkT2JzZXJ2YWJsZSIsImVuYWJsZVF1ZXVlIiwiQ29udHJvbGxlZFN1YmplY3QiLCJyZXF1ZXN0IiwibnVtYmVyT2ZJdGVtcyIsInJlcXVlc3RlZENvdW50IiwicmVxdWVzdGVkRGlzcG9zYWJsZSIsImhhc0ZhaWxlZCIsImhhc0NvbXBsZXRlZCIsImRpc3Bvc2VDdXJyZW50UmVxdWVzdCIsIl9wcm9jZXNzUmVxdWVzdCIsInJlbWFpbmluZyIsImNvbnRyb2xsZWQiLCJwaXBlIiwiZGVzdCIsIm9uRHJhaW4iLCJ3cml0ZSIsIl9pc1N0ZGlvIiwiZW5kIiwiVHJhbnNkdWNlT2JzZXJ2ZXIiLCJ4Zm9ybSIsIl94Zm9ybSIsInRyYW5zZHVjZSIsInRyYW5zZHVjZXIiLCJfX3N1YnNjcmliZSIsIkF1dG9EZXRhY2hPYnNlcnZlclByb3RvdHlwZSIsIklubmVyU3Vic2NyaXB0aW9uIiwib2JzZXJ2ZXJzIiwiaGFzRXJyb3IiLCJoYXNPYnNlcnZlcnMiLCJvcyIsIkFub255bW91c1N1YmplY3QiLCJnZXRWYWx1ZSIsImNyZWF0ZVJlbW92YWJsZURpc3Bvc2FibGUiLCJzbyIsIl90cmltIiwiUGF1c2VyIiwiYWRkU3R5bGVzVG9Eb20iLCJkb21TdHlsZSIsInN0eWxlc0luRG9tIiwicmVmcyIsInBhcnRzIiwiYWRkU3R5bGUiLCJsaXN0VG9TdHlsZXMiLCJuZXdTdHlsZXMiLCJjc3MiLCJtZWRpYSIsInNvdXJjZU1hcCIsInBhcnQiLCJjcmVhdGVTdHlsZUVsZW1lbnQiLCJzdHlsZUVsZW1lbnQiLCJoZWFkIiwiZ2V0SGVhZEVsZW1lbnQiLCJjcmVhdGVMaW5rRWxlbWVudCIsImxpbmtFbGVtZW50IiwicmVsIiwidXBkYXRlIiwic2luZ2xldG9uIiwic3R5bGVJbmRleCIsInNpbmdsZXRvbkNvdW50ZXIiLCJzaW5nbGV0b25FbGVtZW50IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJidG9hIiwidXBkYXRlTGluayIsImFwcGx5VG9UYWciLCJuZXdPYmoiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsInJlcGxhY2VUZXh0IiwiY3NzTm9kZSIsImNyZWF0ZVRleHROb2RlIiwiY2hpbGROb2RlcyIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJibG9iIiwib2xkU3JjIiwibWVtb2l6ZSIsIm1lbW8iLCJpc09sZElFIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJuZXdMaXN0IiwibWF5UmVtb3ZlIiwidGV4dFN0b3JlIiwicmVwbGFjZW1lbnQiLCJCb29sZWFuIiwiY29udGVudCIsImxvY2FscyIsIm1hcERvbWFpbiIsInJlZ2V4U2VwYXJhdG9ycyIsImxhYmVscyIsImVuY29kZWQiLCJ1Y3MyZGVjb2RlIiwiZXh0cmEiLCJvdXRwdXQiLCJjb3VudGVyIiwiY2hhckNvZGVBdCIsInVjczJlbmNvZGUiLCJzdHJpbmdGcm9tQ2hhckNvZGUiLCJiYXNpY1RvRGlnaXQiLCJjb2RlUG9pbnQiLCJiYXNlIiwiZGlnaXRUb0Jhc2ljIiwiZGlnaXQiLCJmbGFnIiwiYWRhcHQiLCJkZWx0YSIsIm51bVBvaW50cyIsImZpcnN0VGltZSIsImRhbXAiLCJiYXNlTWludXNUTWluIiwidE1heCIsInNrZXciLCJkZWNvZGUiLCJvdXQiLCJiYXNpYyIsIm9sZGkiLCJ3IiwiYmFzZU1pbnVzVCIsImlucHV0TGVuZ3RoIiwiaW5pdGlhbE4iLCJiaWFzIiwiaW5pdGlhbEJpYXMiLCJsYXN0SW5kZXhPZiIsImRlbGltaXRlciIsIm1heEludCIsInRNaW4iLCJlbmNvZGUiLCJoYW5kbGVkQ1BDb3VudCIsImJhc2ljTGVuZ3RoIiwiaGFuZGxlZENQQ291bnRQbHVzT25lIiwicU1pbnVzVCIsInRvVW5pY29kZSIsInJlZ2V4UHVueWNvZGUiLCJ0b0FTQ0lJIiwicmVnZXhOb25BU0NJSSIsInB1bnljb2RlIiwib3ZlcmZsb3ciLCJub3QtYmFzaWMiLCJpbnZhbGlkLWlucHV0IiwiZnJvbUNoYXJDb2RlIiwidWNzMiIsInFzIiwic2VwIiwiZXEiLCJyZWdleHAiLCJtYXhLZXlzIiwia3N0ciIsInZzdHIiLCJzdWJzdHIiLCJkZWNvZGVVUklDb21wb25lbnQiLCJzdHJpbmdpZnlQcmltaXRpdmUiLCJrcyIsInBhcnNlIiwiVXJsIiwicHJvdG9jb2wiLCJzbGFzaGVzIiwiYXV0aCIsImhvc3QiLCJwb3J0IiwiaG9zdG5hbWUiLCJoYXNoIiwic2VhcmNoIiwicXVlcnkiLCJwYXRobmFtZSIsInBhdGgiLCJ1cmxQYXJzZSIsInBhcnNlUXVlcnlTdHJpbmciLCJzbGFzaGVzRGVub3RlSG9zdCIsInUiLCJ1cmxGb3JtYXQiLCJpc1N0cmluZyIsImZvcm1hdCIsInVybFJlc29sdmUiLCJyZWxhdGl2ZSIsInVybFJlc29sdmVPYmplY3QiLCJyZXNvbHZlT2JqZWN0IiwiaXNOdWxsIiwiaXNOdWxsT3JVbmRlZmluZWQiLCJwcm90b2NvbFBhdHRlcm4iLCJwb3J0UGF0dGVybiIsImRlbGltcyIsInVud2lzZSIsImF1dG9Fc2NhcGUiLCJub25Ib3N0Q2hhcnMiLCJob3N0RW5kaW5nQ2hhcnMiLCJob3N0bmFtZU1heExlbiIsImhvc3RuYW1lUGFydFBhdHRlcm4iLCJob3N0bmFtZVBhcnRTdGFydCIsInVuc2FmZVByb3RvY29sIiwiamF2YXNjcmlwdCIsImphdmFzY3JpcHQ6IiwiaG9zdGxlc3NQcm90b2NvbCIsInNsYXNoZWRQcm90b2NvbCIsImh0dHAiLCJodHRwcyIsImZ0cCIsImdvcGhlciIsImZpbGUiLCJodHRwOiIsImh0dHBzOiIsImZ0cDoiLCJnb3BoZXI6IiwiZmlsZToiLCJxdWVyeXN0cmluZyIsInJlc3QiLCJ0cmltIiwicHJvdG8iLCJsb3dlclByb3RvIiwibWF0Y2giLCJob3N0RW5kIiwiaGVjIiwiYXRTaWduIiwicGFyc2VIb3N0IiwiaXB2Nkhvc3RuYW1lIiwiaG9zdHBhcnRzIiwibmV3cGFydCIsInZhbGlkUGFydHMiLCJub3RIb3N0IiwiYml0IiwiZG9tYWluQXJyYXkiLCJuZXdPdXQiLCJhZSIsImVzYyIsImVzY2FwZSIsInFtIiwicmVsUGF0aCIsImlzU291cmNlQWJzIiwiaXNSZWxBYnMiLCJtdXN0RW5kQWJzIiwicmVtb3ZlQWxsRG90cyIsInNyY1BhdGgiLCJwc3ljaG90aWMiLCJhdXRoSW5Ib3N0IiwiaGFzVHJhaWxpbmdTbGFzaCIsInVwIiwiaXNBYnNvbHV0ZSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxnQkFBQUMsVUFBQSxnQkFBQUMsUUFDQUEsT0FBQUQsUUFBQUQsRUFBQUcsUUFBQSxTQUFBQSxRQUFBLGFBQ0Esa0JBQUFDLGdCQUFBQyxJQUNBRCxRQUFBLG9CQUFBSixHQUNBLGdCQUFBQyxTQUNBQSxRQUFBLHNCQUFBRCxFQUFBRyxRQUFBLFNBQUFBLFFBQUEsYUFFQUosRUFBQSxzQkFBQUMsRUFBQUQsRUFBQSxNQUFBQSxFQUFBLFdBQ0NPLEtBQUEsU0FBQUMsRUFBQUMsR0FDRCxNQ0FnQixVQUFVQyxHQ04xQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQVYsT0FHQSxJQUFBQyxHQUFBVSxFQUFBRCxJQUNBVixXQUNBWSxHQUFBRixFQUNBRyxRQUFBLEVBVUEsT0FOQUwsR0FBQUUsR0FBQUksS0FBQWIsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQVMsR0FHQVIsRUFBQVksUUFBQSxFQUdBWixFQUFBRCxRQXZCQSxHQUFBVyxLQXFDQSxP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N0MsRUFBQXg3QyxTQUVBdTdDLElBQUF6OUMsS0FBQTI5QyxTQUFBRixLN0M2Z1ZNLFNBQVM3OUMsRUFBUUQsRzhDL3JXdkJDLEVBQUFELFFBQUFPIiwiZmlsZSI6InJlYWN0LWNsaW1iLXNvY2lhbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJyZWFjdFwiKSwgcmVxdWlyZShcIlJlYWN0RE9NXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcInJlYWN0XCIsIFwiUmVhY3RET01cIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wicmVhY3QtY2xpbWItc29jaWFsXCJdID0gZmFjdG9yeShyZXF1aXJlKFwicmVhY3RcIiksIHJlcXVpcmUoXCJSZWFjdERPTVwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wicmVhY3QtY2xpbWItc29jaWFsXCJdID0gZmFjdG9yeShyb290W1wiUmVhY3RcIl0sIHJvb3RbXCJSZWFjdERPTVwiXSk7XG59KSh0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzFfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80NF9fKSB7XG5yZXR1cm4gXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uXG4gKiovIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwicmVhY3RcIiksIHJlcXVpcmUoXCJSZWFjdERPTVwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJyZWFjdFwiLCBcIlJlYWN0RE9NXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcInJlYWN0LWNsaW1iLXNvY2lhbFwiXSA9IGZhY3RvcnkocmVxdWlyZShcInJlYWN0XCIpLCByZXF1aXJlKFwiUmVhY3RET01cIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcInJlYWN0LWNsaW1iLXNvY2lhbFwiXSA9IGZhY3Rvcnkocm9vdFtcIlJlYWN0XCJdLCByb290W1wiUmVhY3RET01cIl0pO1xufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNDRfXykge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9cIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KTtcblx0XG5cdHZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXHRcblx0dmFyIF9jb21wb25lbnRzV2FsbFdhbGxDb250YWluZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfY29tcG9uZW50c1dhbGxXYWxsQ29udGFpbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbXBvbmVudHNXYWxsV2FsbENvbnRhaW5lcik7XG5cdFxuXHR2YXIgX2NvbXBvbmVudHNTbGlkZXNob3dTbGlkZXNob3dDb250YWluZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0XG5cdHZhciBfY29tcG9uZW50c1NsaWRlc2hvd1NsaWRlc2hvd0NvbnRhaW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb21wb25lbnRzU2xpZGVzaG93U2xpZGVzaG93Q29udGFpbmVyKTtcblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzcpO1xuXHRcblx0aWYgKHdpbmRvdykge1xuXHQgICAgd2luZG93LkNsaW1iID0gd2luZG93LkNsaW1iIHx8IHt9O1xuXHRcblx0ICAgIHZhciAkd2FsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2xpbWItd2FsbCcpO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHdhbGxzLmxlbmd0aDsgKytpKSB7XG5cdCAgICAgICAgdmFyICRpdGVtID0gJHdhbGxzW2ldO1xuXHQgICAgICAgIHZhciBjb2xsZWN0aW9uSWQgPSAkaXRlbS5kYXRhc2V0LmNvbGxlY3Rpb25JZDtcblx0ICAgICAgICB2YXIgbGltaXQgPSAkaXRlbS5kYXRhc2V0LmxpbWl0O1xuXHQgICAgICAgIHZhciBkb21haW4gPSAkaXRlbS5kYXRhc2V0LmRvbWFpbjtcblx0XG5cdCAgICAgICAgX3JlYWN0RG9tMlsnZGVmYXVsdCddLnJlbmRlcihfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChfY29tcG9uZW50c1dhbGxXYWxsQ29udGFpbmVyMlsnZGVmYXVsdCddLCB7IGNvbGxlY3Rpb25JZDogY29sbGVjdGlvbklkLCBsaW1pdDogbGltaXQsIGRvbWFpbjogZG9tYWluIH0pLCAkaXRlbSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyICRzbGlkZXNob3dzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNsaW1iLXNsaWRlc2hvdycpO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNsaWRlc2hvd3MubGVuZ3RoOyArK2kpIHtcblx0ICAgICAgICB2YXIgJGl0ZW0gPSAkc2xpZGVzaG93c1tpXTtcblx0ICAgICAgICB2YXIgY29sbGVjdGlvbklkID0gJGl0ZW0uZGF0YXNldC5jb2xsZWN0aW9uSWQ7XG5cdCAgICAgICAgdmFyIGRlbGF5ID0gcGFyc2VJbnQoJGl0ZW0uZGF0YXNldC5kZWxheSwgMCk7XG5cdCAgICAgICAgdmFyIGRvbWFpbiA9ICRpdGVtLmRhdGFzZXQuZG9tYWluO1xuXHRcblx0ICAgICAgICBfcmVhY3REb20yWydkZWZhdWx0J10ucmVuZGVyKF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KF9jb21wb25lbnRzU2xpZGVzaG93U2xpZGVzaG93Q29udGFpbmVyMlsnZGVmYXVsdCddLCB7IGNvbGxlY3Rpb25JZDogY29sbGVjdGlvbklkLCBkZWxheTogZGVsYXksIGRvbWFpbjogZG9tYWluIH0pLCAkaXRlbSk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGV4cG9ydHMuV2FsbENvbnRhaW5lciA9IF9jb21wb25lbnRzV2FsbFdhbGxDb250YWluZXIyWydkZWZhdWx0J107XG5cdFxuXHR2YXIgX2NvbXBvbmVudHNXYWxsV2FsbCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1dhbGwnLCB7XG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIF9jb21wb25lbnRzV2FsbFdhbGwuV2FsbDtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHR2YXIgX2NvbXBvbmVudHNXYWxsVGlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1RpbGUnLCB7XG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIF9jb21wb25lbnRzV2FsbFRpbGUuVGlsZTtcblx0ICAgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMV9fO1xuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX2NvbXBvbmVudHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHR2YXIgX2NvbXBvbmVudHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tcG9uZW50czIpO1xuXHRcblx0dmFyIF9yZW9yZGVyS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHRcblx0dmFyIF9yZW9yZGVyS2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZW9yZGVyS2V5cyk7XG5cdFxuXHR2YXIgX2NvbXBvbmVudHMgPSBfY29tcG9uZW50czNbJ2RlZmF1bHQnXShfcmVhY3QyWydkZWZhdWx0J10pO1xuXHRcblx0dmFyIFNwcmluZyA9IF9jb21wb25lbnRzLlNwcmluZztcblx0dmFyIFRyYW5zaXRpb25TcHJpbmcgPSBfY29tcG9uZW50cy5UcmFuc2l0aW9uU3ByaW5nO1xuXHR2YXIgTW90aW9uID0gX2NvbXBvbmVudHMuTW90aW9uO1xuXHR2YXIgU3RhZ2dlcmVkTW90aW9uID0gX2NvbXBvbmVudHMuU3RhZ2dlcmVkTW90aW9uO1xuXHR2YXIgVHJhbnNpdGlvbk1vdGlvbiA9IF9jb21wb25lbnRzLlRyYW5zaXRpb25Nb3Rpb247XG5cdGV4cG9ydHMuU3ByaW5nID0gU3ByaW5nO1xuXHRleHBvcnRzLlRyYW5zaXRpb25TcHJpbmcgPSBUcmFuc2l0aW9uU3ByaW5nO1xuXHRleHBvcnRzLk1vdGlvbiA9IE1vdGlvbjtcblx0ZXhwb3J0cy5TdGFnZ2VyZWRNb3Rpb24gPSBTdGFnZ2VyZWRNb3Rpb247XG5cdGV4cG9ydHMuVHJhbnNpdGlvbk1vdGlvbiA9IFRyYW5zaXRpb25Nb3Rpb247XG5cdFxuXHR2YXIgX3NwcmluZzIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0XG5cdHZhciBfc3ByaW5nMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NwcmluZzIpO1xuXHRcblx0ZXhwb3J0cy5zcHJpbmcgPSBfc3ByaW5nM1snZGVmYXVsdCddO1xuXHRcblx0dmFyIF9wcmVzZXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgX3ByZXNldHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJlc2V0czIpO1xuXHRcblx0ZXhwb3J0cy5wcmVzZXRzID0gX3ByZXNldHMzWydkZWZhdWx0J107XG5cdHZhciB1dGlscyA9IHtcblx0ICByZW9yZGVyS2V5czogX3Jlb3JkZXJLZXlzMlsnZGVmYXVsdCddXG5cdH07XG5cdGV4cG9ydHMudXRpbHMgPSB1dGlscztcblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdHZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94LCBfeDIsIF94MykgeyB2YXIgX2FnYWluID0gdHJ1ZTsgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7IHZhciBvYmplY3QgPSBfeCwgcHJvcGVydHkgPSBfeDIsIHJlY2VpdmVyID0gX3gzOyBkZXNjID0gcGFyZW50ID0gZ2V0dGVyID0gdW5kZWZpbmVkOyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94ID0gcGFyZW50OyBfeDIgPSBwcm9wZXJ0eTsgX3gzID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKFwidmFsdWVcIiBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIEF1dGhvciA9IChmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuXHQgICAgX2luaGVyaXRzKEF1dGhvciwgX0NvbXBvbmVudCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gQXV0aG9yKCkge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdXRob3IpO1xuXHRcblx0ICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihBdXRob3IucHJvdG90eXBlKSwgXCJjb25zdHJ1Y3RvclwiLCB0aGlzKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhBdXRob3IsIFt7XG5cdCAgICAgICAga2V5OiBcInJlbmRlclwiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgIFwiYVwiLFxuXHQgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IFwiY2xpbWJfX2F1dGhvclwiLFxuXHQgICAgICAgICAgICAgICAgICAgIGhyZWY6IHRoaXMucHJvcHMubGluayB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImltZ1wiLCB7IGhlaWdodDogXCIzNFwiLFxuXHQgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjM0XCIsXG5cdCAgICAgICAgICAgICAgICAgICAgc3JjOiB0aGlzLnByb3BzLnBpY3R1cmUsXG5cdCAgICAgICAgICAgICAgICAgICAgYWx0OiBcIlByb2ZpbGUgcGljIG9mIFwiICsgdGhpcy5wcm9wcy5uYW1lIH0pLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICBcImg0XCIsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IFwiY2xpbWJfX3RpbGVfX2F1dGhvcl9fdXNlcm5hbWVcIiB9LFxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudXNlcm5hbWVcblx0ICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICB9XSwgW3tcblx0ICAgICAgICBrZXk6IFwicHJvcFR5cGVzXCIsXG5cdCAgICAgICAgdmFsdWU6IHtcblx0ICAgICAgICAgICAgbGluazogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICAgICAgICAgIHBpY3R1cmU6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG5cdCAgICAgICAgICAgIG5hbWU6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG5cdCAgICAgICAgICAgIHVzZXJuYW1lOiBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG5cdCAgICAgICAgfSxcblx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIEF1dGhvcjtcblx0fSkoX3JlYWN0LkNvbXBvbmVudCk7XG5cdFxuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IEF1dGhvcjtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTtcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdHZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94LCBfeDIsIF94MykgeyB2YXIgX2FnYWluID0gdHJ1ZTsgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7IHZhciBvYmplY3QgPSBfeCwgcHJvcGVydHkgPSBfeDIsIHJlY2VpdmVyID0gX3gzOyBkZXNjID0gcGFyZW50ID0gZ2V0dGVyID0gdW5kZWZpbmVkOyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94ID0gcGFyZW50OyBfeDIgPSBwcm9wZXJ0eTsgX3gzID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKFwidmFsdWVcIiBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIEltYWdlID0gKGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG5cdCAgICBfaW5oZXJpdHMoSW1hZ2UsIF9SZWFjdCRDb21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIEltYWdlKCkge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbWFnZSk7XG5cdFxuXHQgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEltYWdlLnByb3RvdHlwZSksIFwiY29uc3RydWN0b3JcIiwgdGhpcykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoSW1hZ2UsIFt7XG5cdCAgICAgICAga2V5OiBcInJlbmRlclwiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiaW1nXCIsIHsgY2xhc3NOYW1lOiBcImNsaW1iX19pbWFnZVwiLFxuXHQgICAgICAgICAgICAgICAgc3JjOiB0aGlzLnByb3BzLnNyYywgXCJkYXRhLXdpZHRoXCI6IHRoaXMucHJvcHMud2lkdGgsIFwiZGF0YS1oZWlnaHRcIjogdGhpcy5wcm9wcy5oZWlnaHQgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBJbWFnZTtcblx0fSkoX3JlYWN0MltcImRlZmF1bHRcIl0uQ29tcG9uZW50KTtcblx0XG5cdEltYWdlLnByb3BUeXBlcyA9IHtcblx0ICAgIHNyYzogX3JlYWN0MltcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXHQgICAgd2lkdGg6IF9yZWFjdDJbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5udW1iZXIsXG5cdCAgICBoZWlnaHQ6IF9yZWFjdDJbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5udW1iZXJcblx0fTtcblx0XG5cdGV4cG9ydHNbXCJkZWZhdWx0XCJdID0gSW1hZ2U7XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07XG5cbi8qKiovIH0sXG4vKiA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cdFxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChfeCwgX3gyLCBfeDMpIHsgdmFyIF9hZ2FpbiA9IHRydWU7IF9mdW5jdGlvbjogd2hpbGUgKF9hZ2FpbikgeyB2YXIgb2JqZWN0ID0gX3gsIHByb3BlcnR5ID0gX3gyLCByZWNlaXZlciA9IF94MzsgZGVzYyA9IHBhcmVudCA9IGdldHRlciA9IHVuZGVmaW5lZDsgX2FnYWluID0gZmFsc2U7IGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyBfeCA9IHBhcmVudDsgX3gyID0gcHJvcGVydHk7IF94MyA9IHJlY2VpdmVyOyBfYWdhaW4gPSB0cnVlOyBjb250aW51ZSBfZnVuY3Rpb247IH0gfSBlbHNlIGlmICgndmFsdWUnIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9IH07XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICcgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIE1lc3NhZ2UgPSAoZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcblx0ICAgIF9pbmhlcml0cyhNZXNzYWdlLCBfUmVhY3QkQ29tcG9uZW50KTtcblx0XG5cdCAgICBmdW5jdGlvbiBNZXNzYWdlKCkge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNZXNzYWdlKTtcblx0XG5cdCAgICAgICAgX2dldChPYmplY3QuZ2V0UHJvdG90eXBlT2YoTWVzc2FnZS5wcm90b3R5cGUpLCAnY29uc3RydWN0b3InLCB0aGlzKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhNZXNzYWdlLCBbe1xuXHQgICAgICAgIGtleTogJ3JlbmRlcicsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0XG5cdCAgICAgICAgICAgIHZhciBtZXNzYWdlID0gdGhpcy5wcm9wcy5ib2R5LnJlcGxhY2UoLzxhIGhyZWY9XCJodHRwOlxcL1xcL3BpYy50d2l0dGVyLmNvbVxcL1tePl0qPihbXjxdKyk8XFwvYT4vZywgJycpO1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2NsaW1iX19tZXNzYWdlJyxcblx0ICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7IF9faHRtbDogbWVzc2FnZSB9IH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gTWVzc2FnZTtcblx0fSkoX3JlYWN0MlsnZGVmYXVsdCddLkNvbXBvbmVudCk7XG5cdFxuXHRNZXNzYWdlLnByb3BUeXBlcyA9IHtcblx0ICAgIGJvZHk6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcblx0fTtcblx0XG5cdGV4cG9ydHNbJ2RlZmF1bHQnXSA9IE1lc3NhZ2U7XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IGRlc2MgPSBwYXJlbnQgPSBnZXR0ZXIgPSB1bmRlZmluZWQ7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfY29tbW9uSW1hZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIF9jb21tb25JbWFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb21tb25JbWFnZSk7XG5cdFxuXHR2YXIgX2NvbW1vbk1lc3NhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9jb21tb25NZXNzYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbW1vbk1lc3NhZ2UpO1xuXHRcblx0dmFyIF9jb21tb25BdXRob3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9jb21tb25BdXRob3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tbW9uQXV0aG9yKTtcblx0XG5cdHZhciBUaWxlID0gKGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG5cdCAgICBfaW5oZXJpdHMoVGlsZSwgX1JlYWN0JENvbXBvbmVudCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gVGlsZShwcm9wcykge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUaWxlKTtcblx0XG5cdCAgICAgICAgX2dldChPYmplY3QuZ2V0UHJvdG90eXBlT2YoVGlsZS5wcm90b3R5cGUpLCAnY29uc3RydWN0b3InLCB0aGlzKS5jYWxsKHRoaXMsIHByb3BzKTtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoVGlsZSwgW3tcblx0ICAgICAgICBrZXk6ICdjcmVhdGVJbWFnZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUltYWdlKCkge1xuXHRcblx0ICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuaW1hZ2UgIT09IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgIHZhciBfcHJvcHMkaW1hZ2UgPSB0aGlzLnByb3BzLmltYWdlO1xuXHQgICAgICAgICAgICAgICAgdmFyIHNyYyA9IF9wcm9wcyRpbWFnZS51cmw7XG5cdCAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBfcHJvcHMkaW1hZ2Uud2lkdGg7XG5cdCAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gX3Byb3BzJGltYWdlLmhlaWdodDtcblx0XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoX2NvbW1vbkltYWdlMlsnZGVmYXVsdCddLCB7IHNyYzogc3JjLFxuXHQgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcblx0ICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnY3JlYXRlTWVzc2FnZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2UoKSB7XG5cdFxuXHQgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5tZXNzYWdlKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoX2NvbW1vbk1lc3NhZ2UyWydkZWZhdWx0J10sIHsgYm9keTogdGhpcy5wcm9wcy5tZXNzYWdlIH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdjcmVhdGVDbGFzc1N0cmluZycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUNsYXNzU3RyaW5nKCkge1xuXHRcblx0ICAgICAgICAgICAgdmFyIGNsYXNzU3RyaW5nID0gJ2NsaW1iX190aWxlIGNsaW1iX190aWxlLS0nICsgdGhpcy5wcm9wcy5zb3VyY2VfdHlwZTtcblx0XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmltYWdlKSB7XG5cdCAgICAgICAgICAgICAgICBjbGFzc1N0cmluZyArPSAnIGNsaW1iX190aWxlLS1oYXMtbWVkaWEgY2xpbWJfX3RpbGUtLWhhcy1pbWFnZSc7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICBjbGFzc1N0cmluZyArPSAnIGNsaW1iX190aWxlLS1oYXMtbm8taW1hZ2UnO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy52aWRlb191cmwpIHtcblx0ICAgICAgICAgICAgICAgIGNsYXNzU3RyaW5nICs9ICcgY2xpbWJfX3RpbGUtLWhhcy1tZWRpYSBjbGltYl9fdGlsZS0taGFzLXZpZGVvJztcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGNsYXNzU3RyaW5nICs9ICcgY2xpbWJfX3RpbGUtLWhhcy1uby12aWRlbyc7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHJldHVybiBjbGFzc1N0cmluZztcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAncmVuZGVyJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHRcblx0ICAgICAgICAgICAgdmFyIGltYWdlID0gdGhpcy5jcmVhdGVJbWFnZSgpO1xuXHQgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHRoaXMuY3JlYXRlTWVzc2FnZSgpO1xuXHQgICAgICAgICAgICB2YXIgY2xhc3NTdHJpbmcgPSB0aGlzLmNyZWF0ZUNsYXNzU3RyaW5nKCk7XG5cdCAgICAgICAgICAgIHZhciBhdXRob3IgPSB0aGlzLnByb3BzLmF1dGhvcjtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IGNsYXNzU3RyaW5nLFxuXHQgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB0aGlzLnByb3BzLnN0eWxlIH0sXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAnYScsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBocmVmOiB0aGlzLnByb3BzLmxpbmsgfSxcblx0ICAgICAgICAgICAgICAgICAgICBpbWFnZVxuXHQgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2xpbWJfX3RpbGVfX2NvbnRlbnQnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChfY29tbW9uQXV0aG9yMlsnZGVmYXVsdCddLCBhdXRob3IpXG5cdCAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBUaWxlO1xuXHR9KShfcmVhY3QyWydkZWZhdWx0J10uQ29tcG9uZW50KTtcblx0XG5cdFRpbGUucHJvcFR5cGVzID0ge1xuXHRcblx0ICAgIC8vIFJlcXVpcmVkIGF0dHJzXG5cdCAgICBsaW5rOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXHQgICAgc291cmNlX3R5cGU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG5cdCAgICB0aW1lc3RhbXA6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG5cdCAgICBhdXRob3I6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc2hhcGUoe1xuXHQgICAgICAgIHVzZXJuYW1lOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXHQgICAgICAgIHBpY3R1cmU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG5cdCAgICAgICAgbGluazogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxuXHQgICAgfSksXG5cdFxuXHQgICAgLy8gT3B0aW9uYWwgYXR0cnNcblx0ICAgIG1lc3NhZ2U6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgdmlkZW9fc3JjOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZyxcblx0ICAgIGltYWdlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnNoYXBlKHtcblx0ICAgICAgICB1cmw6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG5cdCAgICAgICAgd2lkdGg6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG5cdCAgICAgICAgaGVpZ2h0OiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkXG5cdCAgICB9KVxuXHRcblx0fTtcblx0XG5cdGV4cG9ydHNbJ2RlZmF1bHQnXSA9IFRpbGU7XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuLyogNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdHZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94LCBfeDIsIF94MykgeyB2YXIgX2FnYWluID0gdHJ1ZTsgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7IHZhciBvYmplY3QgPSBfeCwgcHJvcGVydHkgPSBfeDIsIHJlY2VpdmVyID0gX3gzOyBkZXNjID0gcGFyZW50ID0gZ2V0dGVyID0gdW5kZWZpbmVkOyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94ID0gcGFyZW50OyBfeDIgPSBwcm9wZXJ0eTsgX3gzID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKCd2YWx1ZScgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH0gfTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhvYmosIGtleXMpIHsgdmFyIHRhcmdldCA9IHt9OyBmb3IgKHZhciBpIGluIG9iaikgeyBpZiAoa2V5cy5pbmRleE9mKGkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGkpKSBjb250aW51ZTsgdGFyZ2V0W2ldID0gb2JqW2ldOyB9IHJldHVybiB0YXJnZXQ7IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gJ2Z1bmN0aW9uJyAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ1N1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgJyArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX1RpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9UaWxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1RpbGUpO1xuXHRcblx0dmFyIF9yZWFjdE1vdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgV2FsbCA9IChmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuXHQgICAgX2luaGVyaXRzKFdhbGwsIF9Db21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFdhbGwoKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFdhbGwpO1xuXHRcblx0ICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihXYWxsLnByb3RvdHlwZSksICdjb25zdHJ1Y3RvcicsIHRoaXMpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKFdhbGwsIFt7XG5cdCAgICAgICAga2V5OiAnZ2V0U3R5bGVzJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3R5bGVzKCkge1xuXHQgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgICAgICAgdmFyIGNvbmZpZ3MgPSB7fTtcblx0ICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5wcm9wcy5pdGVtcykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICAgICAgICAgIGNvbmZpZ3Nba2V5XSA9IHtcblx0ICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAoMCwgX3JlYWN0TW90aW9uLnNwcmluZykoMSksXG5cdCAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICgwLCBfcmVhY3RNb3Rpb24uc3ByaW5nKSgzMCksXG5cdCAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAoMCwgX3JlYWN0TW90aW9uLnNwcmluZykoMSksXG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbTogX3RoaXMucHJvcHMuaXRlbXNba2V5XVxuXHQgICAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIHJldHVybiBjb25maWdzO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICd3aWxsRW50ZXInLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB3aWxsRW50ZXIoa2V5KSB7XG5cdCAgICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgICAgICBvcGFjaXR5OiAoMCwgX3JlYWN0TW90aW9uLnNwcmluZykoMCksXG5cdCAgICAgICAgICAgICAgICB3aWR0aDogKDAsIF9yZWFjdE1vdGlvbi5zcHJpbmcpKDApLFxuXHQgICAgICAgICAgICAgICAgbWFyZ2luOiAoMCwgX3JlYWN0TW90aW9uLnNwcmluZykoMCksXG5cdCAgICAgICAgICAgICAgICBpdGVtOiB0aGlzLnByb3BzLml0ZW1zW2tleV1cblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnd2lsbExlYXZlJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gd2lsbExlYXZlKGtleSwgc3R5bGUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgICAgIG9wYWNpdHk6ICgwLCBfcmVhY3RNb3Rpb24uc3ByaW5nKSgwKSxcblx0ICAgICAgICAgICAgICAgIHdpZHRoOiAoMCwgX3JlYWN0TW90aW9uLnNwcmluZykoMCksXG5cdCAgICAgICAgICAgICAgICBtYXJnaW46ICgwLCBfcmVhY3RNb3Rpb24uc3ByaW5nKSgwKSxcblx0ICAgICAgICAgICAgICAgIGl0ZW06IHN0eWxlLml0ZW1cblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAncmVuZGVyVGlsZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclRpbGUoa2V5LCBpdGVtVmFsdWVzKSB7XG5cdCAgICAgICAgICAgIHZhciBpdGVtID0gaXRlbVZhbHVlcy5pdGVtO1xuXHRcblx0ICAgICAgICAgICAgdmFyIHN0eWxlQ29uZmlnID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKGl0ZW1WYWx1ZXMsIFsnaXRlbSddKTtcblx0XG5cdCAgICAgICAgICAgIHZhciBpdGVtUHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoaXRlbSwgW10pO1xuXHRcblx0ICAgICAgICAgICAgdmFyIHN0eWxlID0ge1xuXHQgICAgICAgICAgICAgICAgb3BhY2l0eTogc3R5bGVDb25maWcub3BhY2l0eSxcblx0ICAgICAgICAgICAgICAgIHdpZHRoOiBzdHlsZUNvbmZpZy53aWR0aCArICclJyxcblx0ICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IHN0eWxlQ29uZmlnLm1hcmdpbiArICclJyxcblx0ICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiBzdHlsZUNvbmZpZy5tYXJnaW4gKyAnJSdcblx0ICAgICAgICAgICAgfTtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChfVGlsZTJbJ2RlZmF1bHQnXSwgX2V4dGVuZHMoeyBrZXk6IGtleSxcblx0ICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZVxuXHQgICAgICAgICAgICB9LCBpdGVtUHJvcHMpKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAncmVuZGVyJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblx0XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgIF9yZWFjdE1vdGlvbi5UcmFuc2l0aW9uTW90aW9uLFxuXHQgICAgICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgICAgICAgIHN0eWxlczogdGhpcy5nZXRTdHlsZXMuYmluZCh0aGlzKSgpLFxuXHQgICAgICAgICAgICAgICAgICAgIHdpbGxFbnRlcjogdGhpcy53aWxsRW50ZXIuYmluZCh0aGlzKSxcblx0ICAgICAgICAgICAgICAgICAgICB3aWxsTGVhdmU6IHRoaXMud2lsbExlYXZlLmJpbmQodGhpcykgfSxcblx0ICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh2YWx1ZXMpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NsaW1iX193YWxsJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh2YWx1ZXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbVZhbHVlcyA9IHZhbHVlc1trZXldO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5yZW5kZXJUaWxlKGtleSwgaXRlbVZhbHVlcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pXG5cdCAgICAgICAgICAgICAgICAgICAgKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICB9XSwgW3tcblx0ICAgICAgICBrZXk6ICdwcm9wVHlwZXMnLFxuXHQgICAgICAgIHZhbHVlOiB7XG5cdCAgICAgICAgICAgIGl0ZW1zOiBfcmVhY3QuUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkXG5cdCAgICAgICAgfSxcblx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIFdhbGw7XG5cdH0pKF9yZWFjdC5Db21wb25lbnQpO1xuXHRcblx0ZXhwb3J0c1snZGVmYXVsdCddID0gV2FsbDtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdHZhciBfcnhMaXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7XG5cdFxuXHR2YXIgX2ZldGNoSnNvbnAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0XG5cdHZhciBfZmV0Y2hKc29ucDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mZXRjaEpzb25wKTtcblx0XG5cdHZhciBfdXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7XG5cdFxuXHR2YXIgZ2V0U3RyZWFtID0gZnVuY3Rpb24gZ2V0U3RyZWFtKGNvbGxlY3Rpb25JZCkge1xuXHQgICAgdmFyIGludGVydmFsU2Vjb25kcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IDggOiBhcmd1bWVudHNbMV07XG5cdCAgICB2YXIgZG9tYWluID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gJ2h0dHA6Ly9hcHAuY2xpbWIuc29jaWFsJyA6IGFyZ3VtZW50c1syXTtcblx0XG5cdCAgICBpZiAoIWNvbGxlY3Rpb25JZCkge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignUGxlYXNlIHNwZWNpZnkgYSBjb2xsZWN0aW9uSWQnKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAodHlwZW9mIGludGVydmFsU2Vjb25kcyAhPT0gJ251bWJlcicpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BvbGxpbmcgaW50ZXJ2YWwgc2hvdWxkIGJlIGEgcG9zaXRpdmUgaW50ZWdlci4gQSAnICsgdHlwZW9mIGludGVydmFsU2Vjb25kcyArICcgd2FzIHByb3ZpZGVkLicpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChpbnRlcnZhbFNlY29uZHMgPD0gMCkge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignUG9sbGluZyBpbnRlcnZhbCBzaG91bGQgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLiAnICsgaW50ZXJ2YWxTZWNvbmRzICsgJyB3YXMgc3BlY2lmaWVkLicpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBwb2xsUmF0ZSA9IGludGVydmFsU2Vjb25kcyAqIDEwMDA7XG5cdFxuXHQgICAgdmFyIFVSTCA9ICgwLCBfdXJsLnJlc29sdmUpKGRvbWFpbiwgJy9hcGkvdjEvY29sbGVjdGlvbnMvJyArIGNvbGxlY3Rpb25JZCk7XG5cdFxuXHQgICAgdmFyIHJlcXVlc3RTdHJlYW0gPSBfcnhMaXRlLk9ic2VydmFibGUuanVzdChVUkwpO1xuXHRcblx0ICAgIHZhciB1cGRhdGVTdHJlYW0gPSBfcnhMaXRlLk9ic2VydmFibGUuaW50ZXJ2YWwocG9sbFJhdGUpLnN0YXJ0V2l0aChudWxsKTtcblx0XG5cdCAgICB2YXIgcmVzcG9uc2VTdHJlYW0gPSB1cGRhdGVTdHJlYW0uY29tYmluZUxhdGVzdChyZXF1ZXN0U3RyZWFtLCBmdW5jdGlvbiAodGljaywgdXJsKSB7XG5cdCAgICAgICAgcmV0dXJuIHVybDtcblx0ICAgIH0pLmZsYXRNYXAoZnVuY3Rpb24gKGJhc2VVcmwpIHtcblx0XG5cdCAgICAgICAgdmFyIHJlcXVlc3RVcmwgPSAnJyArIGJhc2VVcmw7XG5cdFxuXHQgICAgICAgIHJldHVybiBfcnhMaXRlLk9ic2VydmFibGUuZnJvbVByb21pc2UoKDAsIF9mZXRjaEpzb25wMlsnZGVmYXVsdCddKShyZXF1ZXN0VXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXNwLmpzb24oKTtcblx0ICAgICAgICB9KSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICByZXR1cm4gcmVzcG9uc2VTdHJlYW07XG5cdH07XG5cdFxuXHRleHBvcnRzWydkZWZhdWx0J10gPSB7XG5cdCAgICBnZXRTdHJlYW06IGdldFN0cmVhbVxuXHR9O1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gW3N0aWZmbmVzcywgZGFtcGluZ11cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IHtcblx0ICBub1dvYmJsZTogWzE3MCwgMjZdLCAvLyB0aGUgZGVmYXVsdFxuXHQgIGdlbnRsZTogWzEyMCwgMTRdLFxuXHQgIHdvYmJseTogWzE4MCwgMTJdLFxuXHQgIHN0aWZmOiBbMjEwLCAyMF1cblx0fTtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTtcblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS43LjFcblx0KGZ1bmN0aW9uKCkge1xuXHQgIHZhciBnZXROYW5vU2Vjb25kcywgaHJ0aW1lLCBsb2FkVGltZTtcblx0XG5cdCAgaWYgKCh0eXBlb2YgcGVyZm9ybWFuY2UgIT09IFwidW5kZWZpbmVkXCIgJiYgcGVyZm9ybWFuY2UgIT09IG51bGwpICYmIHBlcmZvcm1hbmNlLm5vdykge1xuXHQgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHBlcmZvcm1hbmNlLm5vdygpO1xuXHQgICAgfTtcblx0ICB9IGVsc2UgaWYgKCh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzICE9PSBudWxsKSAmJiBwcm9jZXNzLmhydGltZSkge1xuXHQgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIChnZXROYW5vU2Vjb25kcygpIC0gbG9hZFRpbWUpIC8gMWU2O1xuXHQgICAgfTtcblx0ICAgIGhydGltZSA9IHByb2Nlc3MuaHJ0aW1lO1xuXHQgICAgZ2V0TmFub1NlY29uZHMgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGhyO1xuXHQgICAgICBociA9IGhydGltZSgpO1xuXHQgICAgICByZXR1cm4gaHJbMF0gKiAxZTkgKyBoclsxXTtcblx0ICAgIH07XG5cdCAgICBsb2FkVGltZSA9IGdldE5hbm9TZWNvbmRzKCk7XG5cdCAgfSBlbHNlIGlmIChEYXRlLm5vdykge1xuXHQgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIERhdGUubm93KCkgLSBsb2FkVGltZTtcblx0ICAgIH07XG5cdCAgICBsb2FkVGltZSA9IERhdGUubm93KCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxvYWRUaW1lO1xuXHQgICAgfTtcblx0ICAgIGxvYWRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdCAgfVxuXHRcblx0fSkuY2FsbCh0aGlzKTtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKSkpXG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcclxuXHRcdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XHJcblx0XHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xyXG5cdFx0XHRtb2R1bGUucGF0aHMgPSBbXTtcclxuXHRcdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XHJcblx0XHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xyXG5cdFx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBtb2R1bGU7XHJcblx0fVxyXG5cblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblx0XG5cdHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0dmFyIHF1ZXVlID0gW107XG5cdHZhciBkcmFpbmluZyA9IGZhbHNlO1xuXHR2YXIgY3VycmVudFF1ZXVlO1xuXHR2YXIgcXVldWVJbmRleCA9IC0xO1xuXHRcblx0ZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgfVxuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIGRyYWluUXVldWUoKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcblx0ICAgIGlmIChkcmFpbmluZykge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuXHQgICAgZHJhaW5pbmcgPSB0cnVlO1xuXHRcblx0ICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB3aGlsZShsZW4pIHtcblx0ICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcblx0ICAgICAgICBxdWV1ZSA9IFtdO1xuXHQgICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcblx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB9XG5cdCAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0fVxuXHRcblx0cHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcblx0ICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcblx0ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG5cdCAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuXHQgICAgICAgIHNldFRpbWVvdXQoZHJhaW5RdWV1ZSwgMCk7XG5cdCAgICB9XG5cdH07XG5cdFxuXHQvLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5cdGZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuXHQgICAgdGhpcy5mdW4gPSBmdW47XG5cdCAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG5cdH1cblx0SXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG5cdH07XG5cdHByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5cdHByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5cdHByb2Nlc3MuZW52ID0ge307XG5cdHByb2Nlc3MuYXJndiA9IFtdO1xuXHRwcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcblx0cHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdFxuXHRwcm9jZXNzLm9uID0gbm9vcDtcblx0cHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3Mub25jZSA9IG5vb3A7XG5cdHByb2Nlc3Mub2ZmID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcblx0cHJvY2Vzcy5lbWl0ID0gbm9vcDtcblx0XG5cdHByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdFxuXHRwcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xuXHRwcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0cHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG4vKioqLyB9LFxuLyogMTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdHZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94LCBfeDIsIF94MykgeyB2YXIgX2FnYWluID0gdHJ1ZTsgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7IHZhciBvYmplY3QgPSBfeCwgcHJvcGVydHkgPSBfeDIsIHJlY2VpdmVyID0gX3gzOyBkZXNjID0gcGFyZW50ID0gZ2V0dGVyID0gdW5kZWZpbmVkOyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94ID0gcGFyZW50OyBfeDIgPSBwcm9wZXJ0eTsgX3gzID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKCd2YWx1ZScgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH0gfTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gJ2Z1bmN0aW9uJyAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ1N1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgJyArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX2NvbW1vbk1lc3NhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9jb21tb25NZXNzYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbW1vbk1lc3NhZ2UpO1xuXHRcblx0dmFyIF9jb21tb25BdXRob3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9jb21tb25BdXRob3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tbW9uQXV0aG9yKTtcblx0XG5cdHZhciBQYW5lbCA9IChmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuXHQgICAgX2luaGVyaXRzKFBhbmVsLCBfQ29tcG9uZW50KTtcblx0XG5cdCAgICBmdW5jdGlvbiBQYW5lbCgpIHtcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGFuZWwpO1xuXHRcblx0ICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihQYW5lbC5wcm90b3R5cGUpLCAnY29uc3RydWN0b3InLCB0aGlzKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhQYW5lbCwgW3tcblx0ICAgICAgICBrZXk6ICdjcmVhdGVBdXRob3InLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVBdXRob3IoKSB7XG5cdCAgICAgICAgICAgIHZhciBhdXRob3IgPSB0aGlzLnByb3BzLmF1dGhvcjtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChfY29tbW9uQXV0aG9yMlsnZGVmYXVsdCddLCBhdXRob3IpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdjcmVhdGVNZXNzYWdlJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlTWVzc2FnZSgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KF9jb21tb25NZXNzYWdlMlsnZGVmYXVsdCddLCB7IGJvZHk6IHRoaXMucHJvcHMubWVzc2FnZSB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAncmVuZGVyJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHRcblx0ICAgICAgICAgICAgdmFyIGF1dGhvciA9IHRoaXMuY3JlYXRlQXV0aG9yKCk7XG5cdCAgICAgICAgICAgIHZhciBtZXNzYWdlID0gdGhpcy5jcmVhdGVNZXNzYWdlKCk7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgIHsgc3R5bGU6IHRoaXMucHJvcHMuc3R5bGUsXG5cdCAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnY2xpbWItc2xpZGVzaG93X19wYW5lbCcgfSxcblx0ICAgICAgICAgICAgICAgIGF1dGhvcixcblx0ICAgICAgICAgICAgICAgIG1lc3NhZ2Vcblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICB9XSwgW3tcblx0ICAgICAgICBrZXk6ICdwcm9wVHlwZXMnLFxuXHQgICAgICAgIHZhbHVlOiB7XG5cdCAgICAgICAgICAgIG1lc3NhZ2U6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG5cdCAgICAgICAgICAgIGF1dGhvcjogX3JlYWN0LlByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZFxuXHQgICAgICAgIH0sXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBQYW5lbDtcblx0fSkoX3JlYWN0LkNvbXBvbmVudCk7XG5cdFxuXHRleHBvcnRzWydkZWZhdWx0J10gPSBQYW5lbDtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG4vKiAxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IGRlc2MgPSBwYXJlbnQgPSBnZXR0ZXIgPSB1bmRlZmluZWQ7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykgeyB2YXIgdGFyZ2V0ID0ge307IGZvciAodmFyIGkgaW4gb2JqKSB7IGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlOyB0YXJnZXRbaV0gPSBvYmpbaV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfc2xpZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdHZhciBfc2xpZGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2xpZGUpO1xuXHRcblx0dmFyIF9yZWFjdE1vdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgU2xpZGVzaG93ID0gKGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG5cdCAgICBfaW5oZXJpdHMoU2xpZGVzaG93LCBfQ29tcG9uZW50KTtcblx0XG5cdCAgICBmdW5jdGlvbiBTbGlkZXNob3cocHJvcHMpIHtcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2xpZGVzaG93KTtcblx0XG5cdCAgICAgICAgX2dldChPYmplY3QuZ2V0UHJvdG90eXBlT2YoU2xpZGVzaG93LnByb3RvdHlwZSksICdjb25zdHJ1Y3RvcicsIHRoaXMpLmNhbGwodGhpcywgcHJvcHMpO1xuXHQgICAgICAgIHRoaXMuc3RhdGUgPSB7XG5cdCAgICAgICAgICAgIGN1cnJlbnRLZXk6ICcnXG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoU2xpZGVzaG93LCBbe1xuXHQgICAgICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG5cdCAgICAgICAgICAgIHZhciBkZWxheSA9IHRoaXMucHJvcHMuZGVsYXk7XG5cdFxuXHQgICAgICAgICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwodGhpcy5uZXh0U2xpZGUuYmluZCh0aGlzKSwgZGVsYXkgKiAxMDAwKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcblx0ICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnbmV4dFNsaWRlJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbmV4dFNsaWRlKCkge1xuXHQgICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMucHJvcHMuaXRlbXMpO1xuXHQgICAgICAgICAgICB2YXIgcmFuZG9tS2V5ID0ga2V5c1trZXlzLmxlbmd0aCAqIE1hdGgucmFuZG9tKCkgPDwgMF07XG5cdFxuXHQgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRLZXk6IHJhbmRvbUtleVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnZ2V0U3R5bGVzJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3R5bGVzKCkge1xuXHQgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgICAgICAgdmFyIGN1cnJlbnRLZXkgPSB0aGlzLnN0YXRlLmN1cnJlbnRLZXk7XG5cdCAgICAgICAgICAgIHZhciBjb25maWdzID0ge307XG5cdCAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMucHJvcHMuaXRlbXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgICAgICAgICBjb25maWdzW2tleV0gPSB7XG5cdCAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogKDAsIF9yZWFjdE1vdGlvbi5zcHJpbmcpKDApLFxuXHQgICAgICAgICAgICAgICAgICAgIHNjYWxlOiAoMCwgX3JlYWN0TW90aW9uLnNwcmluZykoMCksXG5cdCAgICAgICAgICAgICAgICAgICAgekluZGV4OiAtNSxcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtOiBfdGhpcy5wcm9wcy5pdGVtc1trZXldXG5cdCAgICAgICAgICAgICAgICB9O1xuXHRcblx0ICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IGN1cnJlbnRLZXkpIHtcblx0ICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZ3Nba2V5XSwge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAoMCwgX3JlYWN0TW90aW9uLnNwcmluZykoMSksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiAoMCwgX3JlYWN0TW90aW9uLnNwcmluZykoMSksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHpJbmRleDogMVxuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgcmV0dXJuIGNvbmZpZ3M7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3dpbGxFbnRlcicsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHdpbGxFbnRlcihrZXkpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgICAgIG9wYWNpdHk6ICgwLCBfcmVhY3RNb3Rpb24uc3ByaW5nKSgwKSxcblx0ICAgICAgICAgICAgICAgIHNjYWxlOiAoMCwgX3JlYWN0TW90aW9uLnNwcmluZykoMCksXG5cdCAgICAgICAgICAgICAgICB6SW5kZXg6IC01LFxuXHQgICAgICAgICAgICAgICAgaXRlbTogdGhpcy5wcm9wcy5pdGVtc1trZXldXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3dpbGxMZWF2ZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHdpbGxMZWF2ZShrZXksIHN0eWxlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgICAgICBvcGFjaXR5OiAoMCwgX3JlYWN0TW90aW9uLnNwcmluZykoMCksXG5cdCAgICAgICAgICAgICAgICBzY2FsZTogKDAsIF9yZWFjdE1vdGlvbi5zcHJpbmcpKDApLFxuXHQgICAgICAgICAgICAgICAgekluZGV4OiAtNSxcblx0ICAgICAgICAgICAgICAgIGl0ZW06IHN0eWxlLml0ZW1cblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAncmVuZGVyU2xpZGUnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJTbGlkZShrZXksIGl0ZW1WYWx1ZXMpIHtcblx0ICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtVmFsdWVzLml0ZW07XG5cdFxuXHQgICAgICAgICAgICB2YXIgc3R5bGVDb25maWcgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoaXRlbVZhbHVlcywgWydpdGVtJ10pO1xuXHRcblx0ICAgICAgICAgICAgdmFyIHN0eWxlID0ge1xuXHQgICAgICAgICAgICAgICAgb3BhY2l0eTogc3R5bGVDb25maWcub3BhY2l0eSxcblx0ICAgICAgICAgICAgICAgIHpJbmRleDogTWF0aC5mbG9vcihzdHlsZUNvbmZpZy56SW5kZXgpLFxuXHQgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoJyArIHN0eWxlQ29uZmlnLnNjYWxlICsgJyknXG5cdCAgICAgICAgICAgIH07XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoX3NsaWRlMlsnZGVmYXVsdCddLCB7IGtleToga2V5LFxuXHQgICAgICAgICAgICAgICAgaXNDdXJyZW50OiBrZXkgPT09IHRoaXMuc3RhdGUuY3VycmVudEtleSxcblx0ICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW0sXG5cdCAgICAgICAgICAgICAgICBzdHlsZTogc3R5bGUgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3JlbmRlcicsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICBfcmVhY3RNb3Rpb24uVHJhbnNpdGlvbk1vdGlvbixcblx0ICAgICAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICAgICAgICBzdHlsZXM6IHRoaXMuZ2V0U3R5bGVzLmJpbmQodGhpcykoKSxcblx0ICAgICAgICAgICAgICAgICAgICB3aWxsRW50ZXI6IHRoaXMud2lsbEVudGVyLmJpbmQodGhpcyksXG5cdCAgICAgICAgICAgICAgICAgICAgd2lsbExlYXZlOiB0aGlzLndpbGxMZWF2ZS5iaW5kKHRoaXMpIH0sXG5cdCAgICAgICAgICAgICAgICBmdW5jdGlvbiAodmFsdWVzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjbGltYl9fc2xpZGVzaG93X19jb250YWluZXInIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHZhbHVlcykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtVmFsdWVzID0gdmFsdWVzW2tleV07XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLnJlbmRlclNsaWRlKGtleSwgaXRlbVZhbHVlcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pXG5cdCAgICAgICAgICAgICAgICAgICAgKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICB9XSwgW3tcblx0ICAgICAgICBrZXk6ICdwcm9wVHlwZXMnLFxuXHQgICAgICAgIHZhbHVlOiB7XG5cdCAgICAgICAgICAgIGl0ZW1zOiBfcmVhY3QuUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuXHQgICAgICAgICAgICBkZWxheTogX3JlYWN0LlByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZFxuXHQgICAgICAgIH0sXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBTbGlkZXNob3c7XG5cdH0pKF9yZWFjdC5Db21wb25lbnQpO1xuXHRcblx0ZXhwb3J0c1snZGVmYXVsdCddID0gU2xpZGVzaG93O1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcbi8qIDE1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cdFxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChfeCwgX3gyLCBfeDMpIHsgdmFyIF9hZ2FpbiA9IHRydWU7IF9mdW5jdGlvbjogd2hpbGUgKF9hZ2FpbikgeyB2YXIgb2JqZWN0ID0gX3gsIHByb3BlcnR5ID0gX3gyLCByZWNlaXZlciA9IF94MzsgZGVzYyA9IHBhcmVudCA9IGdldHRlciA9IHVuZGVmaW5lZDsgX2FnYWluID0gZmFsc2U7IGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyBfeCA9IHBhcmVudDsgX3gyID0gcHJvcGVydHk7IF94MyA9IHJlY2VpdmVyOyBfYWdhaW4gPSB0cnVlOyBjb250aW51ZSBfZnVuY3Rpb247IH0gfSBlbHNlIGlmICgndmFsdWUnIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9IH07XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICcgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9jbGltYlNvY2lhbCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHR2YXIgX2NsaW1iU29jaWFsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsaW1iU29jaWFsKTtcblx0XG5cdHZhciBfU2xpZGVzaG93ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHR2YXIgX1NsaWRlc2hvdzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TbGlkZXNob3cpO1xuXHRcblx0dmFyIFNsaWRlc2hvd0NvbnRhaW5lciA9IChmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuXHQgICAgX2luaGVyaXRzKFNsaWRlc2hvd0NvbnRhaW5lciwgX0NvbXBvbmVudCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gU2xpZGVzaG93Q29udGFpbmVyKHByb3BzKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNsaWRlc2hvd0NvbnRhaW5lcik7XG5cdFxuXHQgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKFNsaWRlc2hvd0NvbnRhaW5lci5wcm90b3R5cGUpLCAnY29uc3RydWN0b3InLCB0aGlzKS5jYWxsKHRoaXMsIHByb3BzKTtcblx0ICAgICAgICB0aGlzLnN0YXRlID0ge1xuXHQgICAgICAgICAgICBpdGVtczoge31cblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhTbGlkZXNob3dDb250YWluZXIsIFt7XG5cdCAgICAgICAga2V5OiAnaW5pdCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7XG5cdCAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICAgICAgICBpZiAoIXRoaXMucHJvcHMuY29sbGVjdGlvbklkKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIF9jbGltYlNvY2lhbDJbJ2RlZmF1bHQnXS5nZXRTdHJlYW0odGhpcy5wcm9wcy5jb2xsZWN0aW9uSWQsIHRoaXMucHJvcHMucmVmcmVzaCwgdGhpcy5wcm9wcy5kb21haW4pLnN1YnNjcmliZShmdW5jdGlvbiAoaXRlbXMpIHtcblx0XG5cdCAgICAgICAgICAgICAgICB2YXIgbWFwcGVkSXRlbXMgPSB7fTtcblx0ICAgICAgICAgICAgICAgIGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgIG1hcHBlZEl0ZW1zW2l0ZW0uaWRdID0gaXRlbTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtczogbWFwcGVkSXRlbXNcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcblx0ICAgICAgICAgICAgdGhpcy5pbml0KCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3JlbmRlcicsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KF9TbGlkZXNob3cyWydkZWZhdWx0J10sIHsgaXRlbXM6IHRoaXMuc3RhdGUuaXRlbXMsIGRlbGF5OiB0aGlzLnByb3BzLmRlbGF5IH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH1dLCBbe1xuXHQgICAgICAgIGtleTogJ3Byb3BUeXBlcycsXG5cdCAgICAgICAgdmFsdWU6IHtcblx0ICAgICAgICAgICAgY29sbGVjdGlvbklkOiBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXHQgICAgICAgICAgICBkb21haW46IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgICAgICAgICBkZWxheTogX3JlYWN0LlByb3BUeXBlcy5udW1iZXJcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWVcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdkZWZhdWx0UHJvcHMnLFxuXHQgICAgICAgIHZhbHVlOiB7XG5cdCAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogJzU2MWJhNjM0NDUyODRlMTc0MGUwMTZmNycsXG5cdCAgICAgICAgICAgIGRlbGF5OiA1LFxuXHQgICAgICAgICAgICByZWZyZXNoOiA4LFxuXHQgICAgICAgICAgICBkb21haW46ICdodHRwOi8vYXBwLmNsaW1iLnNvY2lhbCdcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWVcblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gU2xpZGVzaG93Q29udGFpbmVyO1xuXHR9KShfcmVhY3QuQ29tcG9uZW50KTtcblx0XG5cdGV4cG9ydHNbJ2RlZmF1bHQnXSA9IFNsaWRlc2hvd0NvbnRhaW5lcjtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG4vKiAxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IGRlc2MgPSBwYXJlbnQgPSBnZXR0ZXIgPSB1bmRlZmluZWQ7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfUGFuZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdHZhciBfUGFuZWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUGFuZWwpO1xuXHRcblx0dmFyIF9jb21tb25JbWFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX2NvbW1vbkltYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbW1vbkltYWdlKTtcblx0XG5cdHZhciBfcmVhY3RNb3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIFNsaWRlID0gKGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG5cdCAgICBfaW5oZXJpdHMoU2xpZGUsIF9Db21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFNsaWRlKHByb3BzKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNsaWRlKTtcblx0XG5cdCAgICAgICAgX2dldChPYmplY3QuZ2V0UHJvdG90eXBlT2YoU2xpZGUucHJvdG90eXBlKSwgJ2NvbnN0cnVjdG9yJywgdGhpcykuY2FsbCh0aGlzLCBwcm9wcyk7XG5cdCAgICAgICAgdGhpcy5zdGF0ZSA9IHtcblx0ICAgICAgICAgICAgc2hvdWxkRGlzcGxheVBhbmVsOiBmYWxzZVxuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKFNsaWRlLCBbe1xuXHQgICAgICAgIGtleTogJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuXHQgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgICAgICAgaWYgKG5leHRQcm9wcy5pc0N1cnJlbnQpIHtcblx0ICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkRGlzcGxheVBhbmVsOiB0cnVlXG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9LCA4NTApO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICAgICAgICAgICAgICAgICAgc2hvdWxkRGlzcGxheVBhbmVsOiBmYWxzZVxuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnY3JlYXRlSW1hZ2UnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVJbWFnZSgpIHtcblx0ICAgICAgICAgICAgdmFyIGltYWdlID0gdGhpcy5wcm9wcy5pdGVtLmltYWdlO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgc3JjID0gaW1hZ2UudXJsO1xuXHQgICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2Uud2lkdGg7XG5cdCAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xuXHRcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChfY29tbW9uSW1hZ2UyWydkZWZhdWx0J10sIHsgc3JjOiBzcmMsXG5cdCAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuXHQgICAgICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0IH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdjcmVhdGVQYW5lbCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVBhbmVsKCkge1xuXHQgICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblx0XG5cdCAgICAgICAgICAgIGlmICghdGhpcy5wcm9wcy5pdGVtLmltYWdlKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoX1BhbmVsMlsnZGVmYXVsdCddLCB7IGF1dGhvcjogdGhpcy5wcm9wcy5pdGVtLmF1dGhvciwgbWVzc2FnZTogdGhpcy5wcm9wcy5pdGVtLm1lc3NhZ2UgfSk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHZhciBwYW5lbFdpZHRoID0gMzAwO1xuXHRcblx0ICAgICAgICAgICAgdmFyIHZhbHVlcyA9IHtcblx0ICAgICAgICAgICAgICAgIHg6IHRoaXMuc3RhdGUuc2hvdWxkRGlzcGxheVBhbmVsID8gKDAsIF9yZWFjdE1vdGlvbi5zcHJpbmcpKDApIDogKDAsIF9yZWFjdE1vdGlvbi5zcHJpbmcpKHBhbmVsV2lkdGgpXG5cdCAgICAgICAgICAgIH07XG5cdFxuXHQgICAgICAgICAgICB2YXIgZGVmYXVsdFZhbHVlcyA9IHtcblx0ICAgICAgICAgICAgICAgIHg6IDBcblx0ICAgICAgICAgICAgfTtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgIF9yZWFjdE1vdGlvbi5Nb3Rpb24sXG5cdCAgICAgICAgICAgICAgICB7IGRlZmF1bHRTdHlsZTogZGVmYXVsdFZhbHVlcyxcblx0ICAgICAgICAgICAgICAgICAgICBzdHlsZTogdmFsdWVzIH0sXG5cdCAgICAgICAgICAgICAgICBmdW5jdGlvbiAoaW50ZXJwb2xhdGVkVmFsdWVzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KF9QYW5lbDJbJ2RlZmF1bHQnXSwgeyBhdXRob3I6IF90aGlzMi5wcm9wcy5pdGVtLmF1dGhvcixcblx0ICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogX3RoaXMyLnByb3BzLml0ZW0ubWVzc2FnZSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsgbWFyZ2luTGVmdDogJy0nICsgaW50ZXJwb2xhdGVkVmFsdWVzLnggKyAncHgnLCB3aWR0aDogcGFuZWxXaWR0aCB9IH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdjcmVhdGVDbGFzc1N0cmluZycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUNsYXNzU3RyaW5nKCkge1xuXHRcblx0ICAgICAgICAgICAgdmFyIGNsYXNzU3RyaW5nID0gJ2NsaW1iLXNsaWRlc2hvd19fc2xpZGUgY2xpbWJfX3RpbGUtLScgKyB0aGlzLnByb3BzLml0ZW0uc291cmNlX3R5cGU7XG5cdFxuXHQgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5pdGVtLmltYWdlKSB7XG5cdCAgICAgICAgICAgICAgICBjbGFzc1N0cmluZyArPSAnIGNsaW1iLXNsaWRlc2hvd19fc2xpZGUtLWhhcy1tZWRpYSBjbGltYi1zbGlkZXNob3dfX3NsaWRlLS1oYXMtaW1hZ2UnO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgY2xhc3NTdHJpbmcgKz0gJyBjbGltYi1zbGlkZXNob3dfX3NsaWRlLS1oYXMtbm8taW1hZ2UnO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5pdGVtLnZpZGVvX3VybCkge1xuXHQgICAgICAgICAgICAgICAgY2xhc3NTdHJpbmcgKz0gJyBjbGltYi1zbGlkZXNob3dfX3NsaWRlLS1oYXMtbWVkaWEgY2xpbWItc2xpZGVzaG93X19zbGlkZS0taGFzLXZpZGVvJztcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGNsYXNzU3RyaW5nICs9ICcgY2xpbWItc2xpZGVzaG93X19zbGlkZS0taGFzLW5vLXZpZGVvJztcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIGNsYXNzU3RyaW5nO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuY3JlYXRlSW1hZ2UoKTtcblx0ICAgICAgICAgICAgdmFyIHBhbmVsID0gdGhpcy5jcmVhdGVQYW5lbCgpO1xuXHQgICAgICAgICAgICB2YXIgY2xhc3NTdHJpbmcgPSB0aGlzLmNyZWF0ZUNsYXNzU3RyaW5nKCk7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBjbGFzc1N0cmluZyxcblx0ICAgICAgICAgICAgICAgICAgICBzdHlsZTogdGhpcy5wcm9wcy5zdHlsZSB9LFxuXHQgICAgICAgICAgICAgICAgaW1hZ2UsXG5cdCAgICAgICAgICAgICAgICBwYW5lbFxuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgIH1cblx0ICAgIH1dLCBbe1xuXHQgICAgICAgIGtleTogJ3Byb3BUeXBlcycsXG5cdCAgICAgICAgdmFsdWU6IHtcblx0ICAgICAgICAgICAgaXRlbTogX3JlYWN0LlByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcblx0ICAgICAgICAgICAgaXNDdXJyZW50OiBfcmVhY3QuUHJvcFR5cGVzLmJvb2xcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWVcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdkZWZhdWx0UHJvcHMnLFxuXHQgICAgICAgIHZhbHVlOiB7XG5cdCAgICAgICAgICAgIGlzQ3VycmVudDogZmFsc2Vcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWVcblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gU2xpZGU7XG5cdH0pKF9yZWFjdC5Db21wb25lbnQpO1xuXHRcblx0ZXhwb3J0c1snZGVmYXVsdCddID0gU2xpZGU7XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuLyogMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdHZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94LCBfeDIsIF94MykgeyB2YXIgX2FnYWluID0gdHJ1ZTsgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7IHZhciBvYmplY3QgPSBfeCwgcHJvcGVydHkgPSBfeDIsIHJlY2VpdmVyID0gX3gzOyBkZXNjID0gcGFyZW50ID0gZ2V0dGVyID0gdW5kZWZpbmVkOyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94ID0gcGFyZW50OyBfeDIgPSBwcm9wZXJ0eTsgX3gzID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKCd2YWx1ZScgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH0gfTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gJ2Z1bmN0aW9uJyAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ1N1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgJyArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgQ2xpbWJCYWRnZSA9IChmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuXHQgICAgX2luaGVyaXRzKENsaW1iQmFkZ2UsIF9Db21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIENsaW1iQmFkZ2UoKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENsaW1iQmFkZ2UpO1xuXHRcblx0ICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihDbGltYkJhZGdlLnByb3RvdHlwZSksICdjb25zdHJ1Y3RvcicsIHRoaXMpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKENsaW1iQmFkZ2UsIFt7XG5cdCAgICAgICAga2V5OiAncmVuZGVyJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHRcblx0ICAgICAgICAgICAgdmFyIGxvZ28gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudCgnYScsIHsgaHJlZjogJ2h0dHA6Ly9jbGltYi5zb2NpYWwvJyxcblx0ICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2NsaW1iLXNvY2lhbC1iYWRnZScsXG5cdCAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDogeyBfX2h0bWw6IGxvZ28gfSB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIENsaW1iQmFkZ2U7XG5cdH0pKF9yZWFjdC5Db21wb25lbnQpO1xuXHRcblx0ZXhwb3J0c1snZGVmYXVsdCddID0gQ2xpbWJCYWRnZTtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG4vKiAxOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IGRlc2MgPSBwYXJlbnQgPSBnZXR0ZXIgPSB1bmRlZmluZWQ7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfY2xpbWJTb2NpYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0dmFyIF9jbGltYlNvY2lhbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGltYlNvY2lhbCk7XG5cdFxuXHR2YXIgX1dhbGwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF9XYWxsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1dhbGwpO1xuXHRcblx0dmFyIF9DbGltYkJhZGdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdFxuXHR2YXIgX0NsaW1iQmFkZ2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ2xpbWJCYWRnZSk7XG5cdFxuXHR2YXIgV2FsbENvbnRhaW5lciA9IChmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuXHQgICAgX2luaGVyaXRzKFdhbGxDb250YWluZXIsIF9Db21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFdhbGxDb250YWluZXIocHJvcHMpIHtcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgV2FsbENvbnRhaW5lcik7XG5cdFxuXHQgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKFdhbGxDb250YWluZXIucHJvdG90eXBlKSwgJ2NvbnN0cnVjdG9yJywgdGhpcykuY2FsbCh0aGlzLCBwcm9wcyk7XG5cdCAgICAgICAgdGhpcy5zdGF0ZSA9IHtcblx0ICAgICAgICAgICAgaXRlbXM6IHt9XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoV2FsbENvbnRhaW5lciwgW3tcblx0ICAgICAgICBrZXk6ICdpbml0Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgICAgICAgIGlmICghdGhpcy5wcm9wcy5jb2xsZWN0aW9uSWQpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgX2NsaW1iU29jaWFsMlsnZGVmYXVsdCddLmdldFN0cmVhbSh0aGlzLnByb3BzLmNvbGxlY3Rpb25JZCwgdGhpcy5wcm9wcy5yZWZyZXNoLCB0aGlzLnByb3BzLmRvbWFpbikuc3Vic2NyaWJlKGZ1bmN0aW9uIChpdGVtcykge1xuXHRcblx0ICAgICAgICAgICAgICAgIHZhciBtYXhTaXplID0gcGFyc2VJbnQoX3RoaXMucHJvcHMubGltaXQsIDApO1xuXHRcblx0ICAgICAgICAgICAgICAgIHZhciBtYXBwZWRJdGVtcyA9IHt9O1xuXHQgICAgICAgICAgICAgICAgaXRlbXMuc3BsaWNlKDAsIG1heFNpemUpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgIG1hcHBlZEl0ZW1zW2l0ZW0uaWRdID0gaXRlbTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtczogbWFwcGVkSXRlbXNcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcblx0ICAgICAgICAgICAgdGhpcy5pbml0KCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2NvbXBvbmVudERpZFVwZGF0ZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcblx0ICAgICAgICAgICAgdmFyIGNiID0gdW5kZWZpbmVkO1xuXHQgICAgICAgICAgICBpZiAod2luZG93LkNsaW1iICYmIHdpbmRvdy5DbGltYi5vblVwZGF0ZSkge1xuXHQgICAgICAgICAgICAgICAgY2IgPSB3aW5kb3cuQ2xpbWIub25VcGRhdGU7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAvLyBub29wXG5cdCAgICAgICAgICAgICAgICBjYiA9IGZ1bmN0aW9uICgpIHt9O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGNiKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3JlbmRlcicsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoX1dhbGwyWydkZWZhdWx0J10sIHsgaXRlbXM6IHRoaXMuc3RhdGUuaXRlbXMgfSksXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChfQ2xpbWJCYWRnZTJbJ2RlZmF1bHQnXSwgbnVsbClcblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICB9XSwgW3tcblx0ICAgICAgICBrZXk6ICdwcm9wVHlwZXMnLFxuXHQgICAgICAgIHZhbHVlOiB7XG5cdCAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcblx0ICAgICAgICAgICAgZG9tYWluOiBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcblx0ICAgICAgICAgICAgbGltaXQ6IF9yZWFjdC5Qcm9wVHlwZXMub25lT2ZUeXBlKFtfcmVhY3QuUHJvcFR5cGVzLm51bWJlciwgX3JlYWN0LlByb3BUeXBlcy5zdHJpbmddKVxuXHQgICAgICAgIH0sXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2RlZmF1bHRQcm9wcycsXG5cdCAgICAgICAgdmFsdWU6IHtcblx0ICAgICAgICAgICAgY29sbGVjdGlvbklkOiAnNTYxYmE2MzQ0NTI4NGUxNzQwZTAxNmY3Jyxcblx0ICAgICAgICAgICAgbGltaXQ6IDMwLFxuXHQgICAgICAgICAgICByZWZyZXNoOiA4LFxuXHQgICAgICAgICAgICBkb21haW46ICdodHRwOi8vYXBwLmNsaW1iLnNvY2lhbCdcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWVcblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gV2FsbENvbnRhaW5lcjtcblx0fSkoX3JlYWN0LkNvbXBvbmVudCk7XG5cdFxuXHRleHBvcnRzWydkZWZhdWx0J10gPSBXYWxsQ29udGFpbmVyO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcbi8qIDE5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5jbGltYl9fd2FsbHt3aWR0aDoxMDAlO3BhZGRpbmc6MDttYXJnaW46MDstd2Via2l0LWp1c3RpZnktY29udGVudDpjZW50ZXI7LW1zLWZsZXgtcGFjazpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjstd2Via2l0LWZsZXgtZGlyZWN0aW9uOnJvdzstbXMtZmxleC1kaXJlY3Rpb246cm93O2ZsZXgtZGlyZWN0aW9uOnJvdzstd2Via2l0LWZsZXgtd3JhcDp3cmFwOy1tcy1mbGV4LXdyYXA6d3JhcDtmbGV4LXdyYXA6d3JhcDtmb250LXNpemU6MTAwJX0uY2xpbWJfX3RpbGUsLmNsaW1iX193YWxse2Rpc3BsYXk6LXdlYmtpdC1mbGV4O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4fS5jbGltYl9fdGlsZXstd2Via2l0LWZsZXgtc2hyaW5rOjA7LW1zLWZsZXgtbmVnYXRpdmU6MDtmbGV4LXNocmluazowO2hlaWdodDo0MjVweDtib3gtc2l6aW5nOmJvcmRlci1ib3g7LXdlYmtpdC1qdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmQ7LW1zLWZsZXgtcGFjazplbmQ7anVzdGlmeS1jb250ZW50OmZsZXgtZW5kOy13ZWJraXQtZmxleC1kaXJlY3Rpb246Y29sdW1uOy1tcy1mbGV4LWRpcmVjdGlvbjpjb2x1bW47ZmxleC1kaXJlY3Rpb246Y29sdW1uO21hcmdpbi1ib3R0b206MjBweDtvdmVyZmxvdzpoaWRkZW47dGV4dC1hbGlnbjpsZWZ0O2JvcmRlci1yYWRpdXM6N3B4O2JhY2tncm91bmQtY29sb3I6I2Y2ZjZmNjstd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuO2JhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuOy13ZWJraXQtcGVyc3BlY3RpdmU6MTAwMHB4O3BlcnNwZWN0aXZlOjEwMDBweH0uY2xpbWJfX3RpbGVfX2NvbnRlbnR7ei1pbmRleDoxO3BhZGRpbmc6MjZweDtiYWNrZ3JvdW5kLWNvbG9yOiNmNmY2ZjZ9LmNsaW1iX190aWxlLS1oYXMtbm8taW1hZ2UgLmNsaW1iX190aWxlX19jb250ZW50e2hlaWdodDoxMDAlO2Rpc3BsYXk6LXdlYmtpdC1mbGV4O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy13ZWJraXQtZmxleC1kaXJlY3Rpb246Y29sdW1uOy1tcy1mbGV4LWRpcmVjdGlvbjpjb2x1bW47ZmxleC1kaXJlY3Rpb246Y29sdW1uOy13ZWJraXQtanVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47LW1zLWZsZXgtcGFjazpqdXN0aWZ5O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2JveC1zaXppbmc6Ym9yZGVyLWJveH0uY2xpbWJfX2ltYWdle2Rpc3BsYXk6YmxvY2s7bWF4LXdpZHRoOjEwMCU7ei1pbmRleDo1fS5jbGltYl9fdGlsZSAuY2xpbWJfX2ltYWdle3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2JvcmRlci10b3AtbGVmdC1yYWRpdXM6N3B4O2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOjdweH0uY2xpbWItc2xpZGVzaG93IC5jbGltYl9faW1hZ2V7Ym94LXNoYWRvdzowIDAgMTRweCAwIHJnYmEoMCwwLDAsLjc1KTtib3JkZXItcmFkaXVzOjdweH0uY2xpbWJfX21lc3NhZ2V7ei1pbmRleDoxfS5jbGltYl9fbWVzc2FnZT5he3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpczttYXgtd2lkdGg6MjYwcHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7dmVydGljYWwtYWxpZ246Ym90dG9tfS5jbGltYi10aWxlIC5jbGltYl9fbWVzc2FnZXttYXJnaW4tYm90dG9tOjI0cHh9LmNsaW1iX190aWxlLS1oYXMtbm8taW1hZ2UgLmNsaW1iX19tZXNzYWdle2ZvbnQtc2l6ZToxODUlfS5jbGltYi1zbGlkZXNob3dfX3NsaWRlLS1oYXMtbm8taW1hZ2UgLmNsaW1iX19tZXNzYWdle2ZvbnQtc2l6ZToyMjAlfS5jbGltYl9fYXV0aG9ye2Rpc3BsYXk6aW5saW5lLWJsb2NrO21hcmdpbjotMTBweH0uY2xpbWJfX2F1dGhvciBpbWd7Ym9yZGVyLXJhZGl1czoyNXB4fS5jbGltYl9fYXV0aG9yIC5jbGltYl9fdGlsZV9fYXV0aG9yX191c2VybmFtZXtkaXNwbGF5OmlubGluZS1ibG9jazttYXJnaW46MCAwIDAgMTBweDtsaW5lLWhlaWdodDozNHB4O3ZlcnRpY2FsLWFsaWduOnRvcH0uY2xpbWItc29jaWFsLWJhZGdle3Bvc2l0aW9uOmZpeGVkO2JvdHRvbToyMHB4O3JpZ2h0OjIwcHg7ei1pbmRleDo5O2JhY2tncm91bmQtY29sb3I6I2E5Y2FlMjt3aWR0aDoyMDBweDtoZWlnaHQ6NjZweDtib3JkZXItcmFkaXVzOjVweH0uY2xpbWItc29jaWFsLWJhZGdlPnNwYW57cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O3RvcDotOTk5OXB4IWltcG9ydGFudDtsZWZ0Oi05OTk5cHghaW1wb3J0YW50fS5jbGltYi1zbGlkZXNob3d7aGVpZ2h0OjEwMHZoO3dpZHRoOjEwMHZ3O2ZvbnQtc2l6ZToxNjAlfS5jbGltYl9fc2xpZGVzaG93X19jb250YWluZXJ7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtwb3NpdGlvbjpyZWxhdGl2ZX0uY2xpbWItc2xpZGVzaG93X19zbGlkZXtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2Rpc3BsYXk6LXdlYmtpdC1mbGV4O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy13ZWJraXQtYWxpZ24taXRlbXM6Y2VudGVyOy1tcy1mbGV4LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7LXdlYmtpdC1mbGV4LWRpcmVjdGlvbjpyb3c7LW1zLWZsZXgtZGlyZWN0aW9uOnJvdztmbGV4LWRpcmVjdGlvbjpyb3c7LXdlYmtpdC1qdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOy1tcy1mbGV4LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9LmNsaW1iLXNsaWRlc2hvd19fcGFuZWwsLmNsaW1iLXNsaWRlc2hvd19fc2xpZGV7LXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OmhpZGRlbjtiYWNrZmFjZS12aXNpYmlsaXR5OmhpZGRlbjstd2Via2l0LXBlcnNwZWN0aXZlOjEwMDBweDtwZXJzcGVjdGl2ZToxMDAwcHh9LmNsaW1iLXNsaWRlc2hvd19fcGFuZWx7Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6aW5saW5lLWJsb2NrO3Bvc2l0aW9uOnJlbGF0aXZlO3BhZGRpbmc6MzBweCAxNXB4IDVweDt3aWR0aDo1MCU7Ym9yZGVyLXJhZGl1czozcHg7YmFja2dyb3VuZC1jb2xvcjojZjZmNmY2fS5jbGltYi1zbGlkZXNob3dfX3NsaWRlLS1oYXMtbm8taW1hZ2UgLmNsaW1iLXNsaWRlc2hvd19fcGFuZWx7cGFkZGluZzozMHB4O2JvcmRlci1yYWRpdXM6N3B4O2JveC1zaGFkb3c6MCAwIDE0cHggMCByZ2JhKDAsMCwwLC43NSl9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogMjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qXHJcblx0XHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdFx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG5cdCovXHJcblx0Ly8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcclxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGxpc3QgPSBbXTtcclxuXHRcclxuXHRcdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcclxuXHRcdGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcclxuXHRcdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpdGVtID0gdGhpc1tpXTtcclxuXHRcdFx0XHRpZihpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRyZXN1bHQucHVzaChcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGl0ZW1bMV0gKyBcIn1cIik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW1bMV0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcIik7XHJcblx0XHR9O1xyXG5cdFxyXG5cdFx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcclxuXHRcdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXHJcblx0XHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xyXG5cdFx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XHJcblx0XHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxyXG5cdFx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XHJcblx0XHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxyXG5cdFx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXHJcblx0XHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cclxuXHRcdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxyXG5cdFx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XHJcblx0XHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdHJldHVybiBsaXN0O1xyXG5cdH07XHJcblxuXG4vKioqLyB9LFxuLyogMjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOyhmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdCAgaWYgKHRydWUpIHtcblx0ICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFtleHBvcnRzLCBtb2R1bGVdLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPSAoZmFjdG9yeSksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gKHR5cGVvZiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPT09ICdmdW5jdGlvbicgPyAoX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pKSA6IF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgZmFjdG9yeShleHBvcnRzLCBtb2R1bGUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgbW9kID0ge1xuXHQgICAgICBleHBvcnRzOiB7fVxuXHQgICAgfTtcblx0ICAgIGZhY3RvcnkobW9kLmV4cG9ydHMsIG1vZCk7XG5cdCAgICBnbG9iYWwuZmV0Y2hKc29ucCA9IG1vZC5leHBvcnRzO1xuXHQgIH1cblx0fSkodGhpcywgZnVuY3Rpb24gKGV4cG9ydHMsIG1vZHVsZSkge1xuXHQgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuXHQgICAgdGltZW91dDogNTAwMCxcblx0ICAgIGpzb25wQ2FsbGJhY2s6ICdjYWxsYmFjaydcblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBnZW5lcmF0ZUNhbGxiYWNrRnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gJ2pzb25wXycgKyBEYXRlLm5vdygpICsgJ18nICsgTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMDAwMDApO1xuXHQgIH1cblx0XG5cdCAgLy8gS25vd24gaXNzdWU6IFdpbGwgdGhyb3cgJ1VuY2F1Z2h0IFJlZmVyZW5jZUVycm9yOiBjYWxsYmFja18qKiogaXMgbm90IGRlZmluZWQnIGVycm9yIGlmIHJlcXVlc3QgdGltZW91dFxuXHQgIGZ1bmN0aW9uIGNsZWFyRnVuY3Rpb24oZnVuY3Rpb25OYW1lKSB7XG5cdCAgICAvLyBJRTggdGhyb3dzIGFuIGV4Y2VwdGlvbiB3aGVuIHlvdSB0cnkgdG8gZGVsZXRlIGEgcHJvcGVydHkgb24gd2luZG93XG5cdCAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xODI0MjI4Lzc1MTA4OVxuXHQgICAgdHJ5IHtcblx0ICAgICAgZGVsZXRlIHdpbmRvd1tmdW5jdGlvbk5hbWVdO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB3aW5kb3dbZnVuY3Rpb25OYW1lXSA9IHVuZGVmaW5lZDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlbW92ZVNjcmlwdChzY3JpcHRJZCkge1xuXHQgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNjcmlwdElkKTtcblx0ICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHQgIH1cblx0XG5cdCAgdmFyIGZldGNoSnNvbnAgPSBmdW5jdGlvbiBmZXRjaEpzb25wKHVybCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTtcblx0XG5cdCAgICB2YXIgdGltZW91dCA9IG9wdGlvbnMudGltZW91dCAhPSBudWxsID8gb3B0aW9ucy50aW1lb3V0IDogZGVmYXVsdE9wdGlvbnMudGltZW91dDtcblx0ICAgIHZhciBqc29ucENhbGxiYWNrID0gb3B0aW9ucy5qc29ucENhbGxiYWNrICE9IG51bGwgPyBvcHRpb25zLmpzb25wQ2FsbGJhY2sgOiBkZWZhdWx0T3B0aW9ucy5qc29ucENhbGxiYWNrO1xuXHRcblx0ICAgIHZhciB0aW1lb3V0SWQgPSB1bmRlZmluZWQ7XG5cdFxuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgdmFyIGNhbGxiYWNrRnVuY3Rpb24gPSBnZW5lcmF0ZUNhbGxiYWNrRnVuY3Rpb24oKTtcblx0XG5cdCAgICAgIHdpbmRvd1tjYWxsYmFja0Z1bmN0aW9uXSA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHQgICAgICAgIHJlc29sdmUoe1xuXHQgICAgICAgICAgb2s6IHRydWUsXG5cdCAgICAgICAgICAvLyBrZWVwIGNvbnNpc3RlbnQgd2l0aCBmZXRjaCBBUElcblx0ICAgICAgICAgIGpzb246IGZ1bmN0aW9uIGpzb24oKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzcG9uc2UpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBpZiAodGltZW91dElkKSBjbGVhclRpbWVvdXQodGltZW91dElkKTtcblx0XG5cdCAgICAgICAgcmVtb3ZlU2NyaXB0KGpzb25wQ2FsbGJhY2sgKyAnXycgKyBjYWxsYmFja0Z1bmN0aW9uKTtcblx0XG5cdCAgICAgICAgY2xlYXJGdW5jdGlvbihjYWxsYmFja0Z1bmN0aW9uKTtcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIC8vIENoZWNrIGlmIHRoZSB1c2VyIHNldCB0aGVpciBvd24gcGFyYW1zLCBhbmQgaWYgbm90IGFkZCBhID8gdG8gc3RhcnQgYSBsaXN0IG9mIHBhcmFtc1xuXHQgICAgICB1cmwgKz0gdXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJic7XG5cdFxuXHQgICAgICB2YXIganNvbnBTY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblx0ICAgICAganNvbnBTY3JpcHQuc2V0QXR0cmlidXRlKFwic3JjXCIsIHVybCArIGpzb25wQ2FsbGJhY2sgKyAnPScgKyBjYWxsYmFja0Z1bmN0aW9uKTtcblx0ICAgICAganNvbnBTY3JpcHQuaWQgPSBqc29ucENhbGxiYWNrICsgJ18nICsgY2FsbGJhY2tGdW5jdGlvbjtcblx0ICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKGpzb25wU2NyaXB0KTtcblx0XG5cdCAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0pTT05QIHJlcXVlc3QgdG8gJyArIHVybCArICcgdGltZWQgb3V0JykpO1xuXHRcblx0ICAgICAgICBjbGVhckZ1bmN0aW9uKGNhbGxiYWNrRnVuY3Rpb24pO1xuXHQgICAgICAgIHJlbW92ZVNjcmlwdChqc29ucENhbGxiYWNrICsgJ18nICsgY2FsbGJhY2tGdW5jdGlvbik7XG5cdCAgICAgIH0sIHRpbWVvdXQpO1xuXHQgICAgfSk7XG5cdCAgfTtcblx0XG5cdCAgLy8gZXhwb3J0IGFzIGdsb2JhbCBmdW5jdGlvblxuXHQgIC8qXG5cdCAgbGV0IGxvY2FsO1xuXHQgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgbG9jYWwgPSBnbG9iYWw7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIGxvY2FsID0gc2VsZjtcblx0ICB9IGVsc2Uge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBcblx0ICBsb2NhbC5mZXRjaEpzb25wID0gZmV0Y2hKc29ucDtcblx0ICAqL1xuXHRcblx0ICBtb2R1bGUuZXhwb3J0cyA9IGZldGNoSnNvbnA7XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cdGV4cG9ydHNbJ2RlZmF1bHQnXSA9IGNvbmZpZ0FuaW1hdGlvbjtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdHZhciBfcGVyZm9ybWFuY2VOb3cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdHZhciBfcGVyZm9ybWFuY2VOb3cyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGVyZm9ybWFuY2VOb3cpO1xuXHRcblx0dmFyIF9yYWYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblx0XG5cdHZhciBfcmFmMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JhZik7XG5cdFxuXHRmdW5jdGlvbiBjb25maWdBbmltYXRpb24oKSB7XG5cdCAgdmFyIGNvbmZpZyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzBdO1xuXHQgIHZhciBfY29uZmlnJHRpbWVTdGVwID0gY29uZmlnLnRpbWVTdGVwO1xuXHQgIHZhciB0aW1lU3RlcCA9IF9jb25maWckdGltZVN0ZXAgPT09IHVuZGVmaW5lZCA/IDEgLyA2MCAqIDEwMDAgOiBfY29uZmlnJHRpbWVTdGVwO1xuXHQgIHZhciBfY29uZmlnJHRpbWVTY2FsZSA9IGNvbmZpZy50aW1lU2NhbGU7XG5cdCAgdmFyIHRpbWVTY2FsZSA9IF9jb25maWckdGltZVNjYWxlID09PSB1bmRlZmluZWQgPyAxIDogX2NvbmZpZyR0aW1lU2NhbGU7XG5cdCAgdmFyIF9jb25maWckbWF4U3RlcHMgPSBjb25maWcubWF4U3RlcHM7XG5cdCAgdmFyIG1heFN0ZXBzID0gX2NvbmZpZyRtYXhTdGVwcyA9PT0gdW5kZWZpbmVkID8gMTAgOiBfY29uZmlnJG1heFN0ZXBzO1xuXHQgIHZhciBfY29uZmlnJHJhZiA9IGNvbmZpZy5yYWY7XG5cdCAgdmFyIHJhZiA9IF9jb25maWckcmFmID09PSB1bmRlZmluZWQgPyBfcmFmMlsnZGVmYXVsdCddIDogX2NvbmZpZyRyYWY7XG5cdCAgdmFyIF9jb25maWckbm93ID0gY29uZmlnLm5vdztcblx0ICB2YXIgbm93ID0gX2NvbmZpZyRub3cgPT09IHVuZGVmaW5lZCA/IF9wZXJmb3JtYW5jZU5vdzJbJ2RlZmF1bHQnXSA6IF9jb25maWckbm93O1xuXHRcblx0ICB2YXIgYW5pbVJ1bm5pbmcgPSBbXTtcblx0ICB2YXIgcnVubmluZyA9IGZhbHNlO1xuXHQgIHZhciBwcmV2VGltZSA9IDA7XG5cdCAgdmFyIGFjY3VtdWxhdGVkVGltZSA9IDA7XG5cdFxuXHQgIGZ1bmN0aW9uIGxvb3AoKSB7XG5cdCAgICB2YXIgY3VycmVudFRpbWUgPSBub3coKTtcblx0ICAgIHZhciBmcmFtZVRpbWUgPSBjdXJyZW50VGltZSAtIHByZXZUaW1lOyAvLyBkZWx0YVxuXHRcblx0ICAgIHByZXZUaW1lID0gY3VycmVudFRpbWU7XG5cdCAgICBhY2N1bXVsYXRlZFRpbWUgKz0gZnJhbWVUaW1lICogdGltZVNjYWxlO1xuXHRcblx0ICAgIGlmIChhY2N1bXVsYXRlZFRpbWUgPiB0aW1lU3RlcCAqIG1heFN0ZXBzKSB7XG5cdCAgICAgIGFjY3VtdWxhdGVkVGltZSA9IDA7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGZyYW1lTnVtYmVyID0gTWF0aC5jZWlsKGFjY3VtdWxhdGVkVGltZSAvIHRpbWVTdGVwKTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbVJ1bm5pbmcubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIF9hbmltUnVubmluZyRpID0gYW5pbVJ1bm5pbmdbaV07XG5cdCAgICAgIHZhciBhY3RpdmUgPSBfYW5pbVJ1bm5pbmckaS5hY3RpdmU7XG5cdCAgICAgIHZhciBhbmltYXRpb25TdGVwID0gX2FuaW1SdW5uaW5nJGkuYW5pbWF0aW9uU3RlcDtcblx0ICAgICAgdmFyIHByZXZQcmV2U3RhdGUgPSBfYW5pbVJ1bm5pbmckaS5wcmV2U3RhdGU7XG5cdCAgICAgIHZhciBwcmV2TmV4dFN0YXRlID0gYW5pbVJ1bm5pbmdbaV0ubmV4dFN0YXRlO1xuXHRcblx0ICAgICAgaWYgKCFhY3RpdmUpIHtcblx0ICAgICAgICBjb250aW51ZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gU2VlbXMgbGlrZSBiZWNhdXNlIHRoZSBUUyBzZXRzIGRlc3RWYWxzIGFzIGVudGVyVmFscyBmb3IgdGhlIGZpcnN0XG5cdCAgICAgIC8vIHRpY2ssIHdlIG1pZ2h0IHJlbmRlciB0aGF0IHZhbHVlIHR3aWNlLiBXZSByZW5kZXIgaXQgb25jZSwgY3VyclZhbHVlIGlzXG5cdCAgICAgIC8vIGVudGVyVmFsIGFuZCBkZXN0VmFsIGlzIGVudGVyVmFsLiBUaGUgbmV4dCB0aWNrIGlzIGZhc3RlciB0aGFuIDE2bXMsXG5cdCAgICAgIC8vIHNvIGFjY3VtdWxhdGVkVGltZSAod2hpY2ggd291bGQgYmUgYWJvdXQgLTE2bXMgZnJvbSB0aGUgcHJldmlvdXMgdGljaylcblx0ICAgICAgLy8gaXMgbmVnYXRpdmUgKC0xNm1zICsgYW55IG51bWJlciBsZXNzIHRoYW4gMTZtcyA8IDApLiBTbyB3ZSBqdXN0IHJlbmRlclxuXHQgICAgICAvLyBwYXJ0IHdheXMgdG93YXJkcyB0aGUgbmV4dFN0YXRlLCBidXQgdGhhdCdzIGVudGVyVmFsIHN0aWxsLiBXZSByZW5kZXJcblx0ICAgICAgLy8gc2F5IDc1JSBiZXR3ZWVuIGN1cnJWYWx1ZSAoPT09IGVudGVyVmFsKSBhbmQgZGVzdFZhbHVlICg9PT0gZW50ZXJWYWwpLlxuXHQgICAgICAvLyBTbyB3ZSByZW5kZXIgdGhlIHNhbWUgdmFsdWUgYSBzZWNvbmQgdGltZS5cblx0ICAgICAgLy8gVGhlIHNvbHV0aW9uIGJlbG93IGlzIHRvIHJlY2FsY3VsYXRlIHRoZSBkZXN0aW5hdGlvbiBzdGF0ZSBldmVuIHdoZW5cblx0ICAgICAgLy8geW91J3JlIG1vdmluZyBwYXJ0aWFsbHkgdG93YXJkcyBpdC5cblx0ICAgICAgaWYgKGFjY3VtdWxhdGVkVGltZSA8PSAwKSB7XG5cdCAgICAgICAgYW5pbVJ1bm5pbmdbaV0ubmV4dFN0YXRlID0gYW5pbWF0aW9uU3RlcCh0aW1lU3RlcCAvIDEwMDAsIHByZXZQcmV2U3RhdGUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZnJhbWVOdW1iZXI7IGorKykge1xuXHQgICAgICAgICAgYW5pbVJ1bm5pbmdbaV0ubmV4dFN0YXRlID0gYW5pbWF0aW9uU3RlcCh0aW1lU3RlcCAvIDEwMDAsIHByZXZOZXh0U3RhdGUpO1xuXHQgICAgICAgICAgdmFyIF9yZWYgPSBbcHJldk5leHRTdGF0ZSwgYW5pbVJ1bm5pbmdbaV0ubmV4dFN0YXRlXTtcblx0ICAgICAgICAgIGFuaW1SdW5uaW5nW2ldLnByZXZTdGF0ZSA9IF9yZWZbMF07XG5cdCAgICAgICAgICBwcmV2TmV4dFN0YXRlID0gX3JlZlsxXTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBhY2N1bXVsYXRlZFRpbWUgPSBhY2N1bXVsYXRlZFRpbWUgLSBmcmFtZU51bWJlciAqIHRpbWVTdGVwO1xuXHRcblx0ICAgIC8vIFJlbmRlciBhbmQgZmlsdGVyIGluIG9uZSBpdGVyYXRpb24uXG5cdCAgICB2YXIgYWxwaGEgPSAxICsgYWNjdW11bGF0ZWRUaW1lIC8gdGltZVN0ZXA7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFuaW1SdW5uaW5nLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBfYW5pbVJ1bm5pbmckaTIgPSBhbmltUnVubmluZ1tpXTtcblx0ICAgICAgdmFyIGFuaW1hdGlvblJlbmRlciA9IF9hbmltUnVubmluZyRpMi5hbmltYXRpb25SZW5kZXI7XG5cdCAgICAgIHZhciBuZXh0U3RhdGUgPSBfYW5pbVJ1bm5pbmckaTIubmV4dFN0YXRlO1xuXHQgICAgICB2YXIgcHJldlN0YXRlID0gX2FuaW1SdW5uaW5nJGkyLnByZXZTdGF0ZTtcblx0XG5cdCAgICAgIC8vIE1pZ2h0IG11dGF0ZSBhbmltUnVubmluZy4uLi4uLi4uXG5cdCAgICAgIGFuaW1hdGlvblJlbmRlcihhbHBoYSwgbmV4dFN0YXRlLCBwcmV2U3RhdGUpO1xuXHQgICAgfVxuXHRcblx0ICAgIGFuaW1SdW5uaW5nID0gYW5pbVJ1bm5pbmcuZmlsdGVyKGZ1bmN0aW9uIChfcmVmMikge1xuXHQgICAgICB2YXIgYWN0aXZlID0gX3JlZjIuYWN0aXZlO1xuXHQgICAgICByZXR1cm4gYWN0aXZlO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgaWYgKGFuaW1SdW5uaW5nLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICBydW5uaW5nID0gZmFsc2U7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByYWYobG9vcCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBzdGFydCgpIHtcblx0ICAgIGlmICghcnVubmluZykge1xuXHQgICAgICBydW5uaW5nID0gdHJ1ZTtcblx0ICAgICAgcHJldlRpbWUgPSBub3coKTtcblx0ICAgICAgYWNjdW11bGF0ZWRUaW1lID0gMDtcblx0ICAgICAgcmFmKGxvb3ApO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHN0YXJ0QW5pbWF0aW9uKHN0YXRlLCBhbmltYXRpb25TdGVwLCBhbmltYXRpb25SZW5kZXIpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbVJ1bm5pbmcubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIHZhbCA9IGFuaW1SdW5uaW5nW2ldO1xuXHQgICAgICBpZiAodmFsLmFuaW1hdGlvblN0ZXAgPT09IGFuaW1hdGlvblN0ZXApIHtcblx0ICAgICAgICB2YWwuYWN0aXZlID0gdHJ1ZTtcblx0ICAgICAgICB2YWwucHJldlN0YXRlID0gc3RhdGU7XG5cdCAgICAgICAgc3RhcnQoKTtcblx0ICAgICAgICByZXR1cm4gdmFsLnN0b3A7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbmV3QW5pbSA9IHtcblx0ICAgICAgYW5pbWF0aW9uU3RlcDogYW5pbWF0aW9uU3RlcCxcblx0ICAgICAgYW5pbWF0aW9uUmVuZGVyOiBhbmltYXRpb25SZW5kZXIsXG5cdCAgICAgIHByZXZTdGF0ZTogc3RhdGUsXG5cdCAgICAgIG5leHRTdGF0ZTogc3RhdGUsXG5cdCAgICAgIGFjdGl2ZTogdHJ1ZVxuXHQgICAgfTtcblx0XG5cdCAgICBuZXdBbmltLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBuZXdBbmltLmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgfTtcblx0ICAgIGFuaW1SdW5uaW5nLnB1c2gobmV3QW5pbSk7XG5cdFxuXHQgICAgc3RhcnQoKTtcblx0XG5cdCAgICByZXR1cm4gbmV3QW5pbS5zdG9wO1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuLyogMjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXHRcblx0ZXhwb3J0c1snZGVmYXVsdCddID0gY29tcG9uZW50cztcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdHZhciBfbm9WZWxvY2l0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHRcblx0dmFyIF9ub1ZlbG9jaXR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vVmVsb2NpdHkpO1xuXHRcblx0dmFyIF9oYXNSZWFjaGVkU3R5bGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBfaGFzUmVhY2hlZFN0eWxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhc1JlYWNoZWRTdHlsZSk7XG5cdFxuXHR2YXIgX21lcmdlRGlmZiA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRcblx0dmFyIF9tZXJnZURpZmYyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWVyZ2VEaWZmKTtcblx0XG5cdHZhciBfYW5pbWF0aW9uTG9vcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0dmFyIF9hbmltYXRpb25Mb29wMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FuaW1hdGlvbkxvb3ApO1xuXHRcblx0dmFyIF96ZXJvID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdFxuXHR2YXIgX3plcm8yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfemVybyk7XG5cdFxuXHR2YXIgX3VwZGF0ZVRyZWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcblx0XG5cdHZhciBfZGVwcmVjYXRlZFNwcmluZ3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX2RlcHJlY2F0ZWRTcHJpbmdzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlcHJlY2F0ZWRTcHJpbmdzMik7XG5cdFxuXHR2YXIgX3N0cmlwU3R5bGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTtcblx0XG5cdHZhciBfc3RyaXBTdHlsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdHJpcFN0eWxlKTtcblx0XG5cdHZhciBzdGFydEFuaW1hdGlvbiA9IF9hbmltYXRpb25Mb29wMlsnZGVmYXVsdCddKCk7XG5cdFxuXHRmdW5jdGlvbiBtYXBPYmplY3QoZiwgb2JqKSB7XG5cdCAgdmFyIHJldCA9IHt9O1xuXHQgIGZvciAodmFyIGtleSBpbiBvYmopIHtcblx0ICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdCAgICByZXRba2V5XSA9IGYob2JqW2tleV0sIGtleSk7XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV2ZXJ5T2JqKGYsIG9iaikge1xuXHQgIGZvciAodmFyIGtleSBpbiBvYmopIHtcblx0ICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdCAgICBpZiAoIWYob2JqW2tleV0sIGtleSkpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY29tcG9uZW50cyhSZWFjdCkge1xuXHQgIHZhciBQcm9wVHlwZXMgPSBSZWFjdC5Qcm9wVHlwZXM7XG5cdFxuXHQgIHZhciBNb3Rpb24gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cdCAgICBkaXNwbGF5TmFtZTogJ01vdGlvbicsXG5cdFxuXHQgICAgcHJvcFR5cGVzOiB7XG5cdCAgICAgIC8vIFRPT0Q6IHdhcm4gYWdhaW5zdCBwdXR0aW5nIGEgY29uZmlnIGluIGhlcmVcblx0ICAgICAgZGVmYXVsdFZhbHVlOiBmdW5jdGlvbiBkZWZhdWx0VmFsdWUocHJvcCwgcHJvcE5hbWUpIHtcblx0ICAgICAgICBpZiAocHJvcFtwcm9wTmFtZV0pIHtcblx0ICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ1NwcmluZ1xcJ3MgYGRlZmF1bHRWYWx1ZWAgaGFzIGJlZW4gY2hhbmdlZCB0byBgZGVmYXVsdFN0eWxlYC4gJyArICdJdHMgZm9ybWF0IHJlY2VpdmVkIGEgZmV3IChlYXN5IHRvIHVwZGF0ZSEpIGNoYW5nZXMgYXMgd2VsbC4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdCAgICAgIGVuZFZhbHVlOiBmdW5jdGlvbiBlbmRWYWx1ZShwcm9wLCBwcm9wTmFtZSkge1xuXHQgICAgICAgIGlmIChwcm9wW3Byb3BOYW1lXSkge1xuXHQgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignU3ByaW5nXFwncyBgZW5kVmFsdWVgIGhhcyBiZWVuIGNoYW5nZWQgdG8gYHN0eWxlYC4gSXRzIGZvcm1hdCAnICsgJ3JlY2VpdmVkIGEgZmV3IChlYXN5IHRvIHVwZGF0ZSEpIGNoYW5nZXMgYXMgd2VsbC4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdCAgICAgIGRlZmF1bHRTdHlsZTogUHJvcFR5cGVzLm9iamVjdCxcblx0ICAgICAgc3R5bGU6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcblx0ICAgICAgY2hpbGRyZW46IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG5cdCAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzO1xuXHQgICAgICB2YXIgZGVmYXVsdFN0eWxlID0gX3Byb3BzLmRlZmF1bHRTdHlsZTtcblx0ICAgICAgdmFyIHN0eWxlID0gX3Byb3BzLnN0eWxlO1xuXHRcblx0ICAgICAgdmFyIGN1cnJlbnRTdHlsZSA9IGRlZmF1bHRTdHlsZSB8fCBzdHlsZTtcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICBjdXJyZW50U3R5bGU6IGN1cnJlbnRTdHlsZSxcblx0ICAgICAgICBjdXJyZW50VmVsb2NpdHk6IG1hcE9iamVjdChfemVybzJbJ2RlZmF1bHQnXSwgY3VycmVudFN0eWxlKVxuXHQgICAgICB9O1xuXHQgICAgfSxcblx0XG5cdCAgICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG5cdCAgICAgIHRoaXMuc3RhcnRBbmltYXRpbmcoKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcygpIHtcblx0ICAgICAgdGhpcy5zdGFydEFuaW1hdGluZygpO1xuXHQgICAgfSxcblx0XG5cdCAgICBhbmltYXRpb25TdGVwOiBmdW5jdGlvbiBhbmltYXRpb25TdGVwKHRpbWVzdGVwLCBzdGF0ZSkge1xuXHQgICAgICB2YXIgY3VycmVudFN0eWxlID0gc3RhdGUuY3VycmVudFN0eWxlO1xuXHQgICAgICB2YXIgY3VycmVudFZlbG9jaXR5ID0gc3RhdGUuY3VycmVudFZlbG9jaXR5O1xuXHQgICAgICB2YXIgc3R5bGUgPSB0aGlzLnByb3BzLnN0eWxlO1xuXHRcblx0ICAgICAgdmFyIG5ld0N1cnJlbnRTdHlsZSA9IF91cGRhdGVUcmVlLnVwZGF0ZUN1cnJlbnRTdHlsZSh0aW1lc3RlcCwgY3VycmVudFN0eWxlLCBjdXJyZW50VmVsb2NpdHksIHN0eWxlKTtcblx0ICAgICAgdmFyIG5ld0N1cnJlbnRWZWxvY2l0eSA9IF91cGRhdGVUcmVlLnVwZGF0ZUN1cnJlbnRWZWxvY2l0eSh0aW1lc3RlcCwgY3VycmVudFN0eWxlLCBjdXJyZW50VmVsb2NpdHksIHN0eWxlKTtcblx0XG5cdCAgICAgIC8vIFRPT0Q6IHRoaXMgaXNuJ3QgbmVjZXNzYXJ5IGFueW1vcmUuIEl0IHdhcyB1c2VkIG9ubHkgYWdhaW5zdCBlbmRWYWx1ZSBmdW5jXG5cdCAgICAgIGlmIChfbm9WZWxvY2l0eTJbJ2RlZmF1bHQnXShjdXJyZW50VmVsb2NpdHksIG5ld0N1cnJlbnRTdHlsZSkgJiYgX25vVmVsb2NpdHkyWydkZWZhdWx0J10obmV3Q3VycmVudFZlbG9jaXR5LCBuZXdDdXJyZW50U3R5bGUpKSB7XG5cdCAgICAgICAgLy8gY2hlY2sgZXhwbGFuYXRpb24gaW4gYE1vdGlvbi5hbmltYXRpb25SZW5kZXJgXG5cdCAgICAgICAgdGhpcy5zdG9wQW5pbWF0aW9uKCk7IC8vIE5hc3R5IHNpZGUgZWZmZWN0cy4uLi5cblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICBjdXJyZW50U3R5bGU6IG5ld0N1cnJlbnRTdHlsZSxcblx0ICAgICAgICBjdXJyZW50VmVsb2NpdHk6IG5ld0N1cnJlbnRWZWxvY2l0eVxuXHQgICAgICB9O1xuXHQgICAgfSxcblx0XG5cdCAgICBzdG9wQW5pbWF0aW9uOiBudWxsLFxuXHRcblx0ICAgIC8vIHVzZWQgaW4gYW5pbWF0aW9uUmVuZGVyXG5cdCAgICBoYXNVbm1vdW50ZWQ6IGZhbHNlLFxuXHRcblx0ICAgIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcblx0ICAgICAgdGhpcy5zdG9wQW5pbWF0aW9uKCk7XG5cdCAgICAgIHRoaXMuaGFzVW5tb3VudGVkID0gdHJ1ZTtcblx0ICAgIH0sXG5cdFxuXHQgICAgc3RhcnRBbmltYXRpbmc6IGZ1bmN0aW9uIHN0YXJ0QW5pbWF0aW5nKCkge1xuXHQgICAgICAvLyBJcyBzbWFydCBlbm91Z2ggdG8gbm90IHN0YXJ0IGl0IHR3aWNlXG5cdCAgICAgIHRoaXMuc3RvcEFuaW1hdGlvbiA9IHN0YXJ0QW5pbWF0aW9uKHRoaXMuc3RhdGUsIHRoaXMuYW5pbWF0aW9uU3RlcCwgdGhpcy5hbmltYXRpb25SZW5kZXIpO1xuXHQgICAgfSxcblx0XG5cdCAgICBhbmltYXRpb25SZW5kZXI6IGZ1bmN0aW9uIGFuaW1hdGlvblJlbmRlcihhbHBoYSwgbmV4dFN0YXRlLCBwcmV2U3RhdGUpIHtcblx0ICAgICAgLy8gYHRoaXMuaGFzVW5tb3VudGVkYCBtaWdodCBiZSB0cnVlIGluIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uOlxuXHQgICAgICAvLyB1c2VyIGRvZXMgc29tZSBjaGVja3MgaW4gYHN0eWxlYCBhbmQgY2FsbHMgYW4gb3duZXIgaGFuZGxlclxuXHQgICAgICAvLyBvd25lciBzZXRzIHN0YXRlIGluIHRoZSBjYWxsYmFjaywgdHJpZ2dlcmluZyBhIHJlLXJlbmRlclxuXHQgICAgICAvLyB1bm1vdW50cyBNb3Rpb25cblx0ICAgICAgaWYgKCF0aGlzLmhhc1VubW91bnRlZCkge1xuXHQgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuXHQgICAgICAgICAgY3VycmVudFN0eWxlOiBfdXBkYXRlVHJlZS5pbnRlcnBvbGF0ZVZhbHVlKGFscGhhLCBuZXh0U3RhdGUuY3VycmVudFN0eWxlLCBwcmV2U3RhdGUuY3VycmVudFN0eWxlKSxcblx0ICAgICAgICAgIGN1cnJlbnRWZWxvY2l0eTogbmV4dFN0YXRlLmN1cnJlbnRWZWxvY2l0eVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICB2YXIgc3RyaXBwZWRTdHlsZSA9IF9zdHJpcFN0eWxlMlsnZGVmYXVsdCddKHRoaXMuc3RhdGUuY3VycmVudFN0eWxlKTtcblx0ICAgICAgdmFyIHJlbmRlcmVkQ2hpbGRyZW4gPSB0aGlzLnByb3BzLmNoaWxkcmVuKHN0cmlwcGVkU3R5bGUpO1xuXHQgICAgICByZXR1cm4gcmVuZGVyZWRDaGlsZHJlbiAmJiBSZWFjdC5DaGlsZHJlbi5vbmx5KHJlbmRlcmVkQ2hpbGRyZW4pO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICB2YXIgU3RhZ2dlcmVkTW90aW9uID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXHQgICAgZGlzcGxheU5hbWU6ICdTdGFnZ2VyZWRNb3Rpb24nLFxuXHRcblx0ICAgIHByb3BUeXBlczoge1xuXHQgICAgICBkZWZhdWx0U3R5bGU6IGZ1bmN0aW9uIGRlZmF1bHRTdHlsZShwcm9wLCBwcm9wTmFtZSkge1xuXHQgICAgICAgIGlmIChwcm9wW3Byb3BOYW1lXSkge1xuXHQgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignWW91IGZvcmdvdCB0aGUgXCJzXCIgZm9yIGBTdGFnZ2VyZWRNb3Rpb25gXFwncyBgZGVmYXVsdFN0eWxlc2AuJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHQgICAgICBzdHlsZTogZnVuY3Rpb24gc3R5bGUocHJvcCwgcHJvcE5hbWUpIHtcblx0ICAgICAgICBpZiAocHJvcFtwcm9wTmFtZV0pIHtcblx0ICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ1lvdSBmb3Jnb3QgdGhlIFwic1wiIGZvciBgU3RhZ2dlcmVkTW90aW9uYFxcJ3MgYHN0eWxlc2AuJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHQgICAgICAvLyBUT09EOiB3YXJuIGFnYWluc3QgcHV0dGluZyBjb25maWdzIGluIGhlcmVcblx0ICAgICAgZGVmYXVsdFN0eWxlczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm9iamVjdCksXG5cdCAgICAgIHN0eWxlczogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcblx0ICAgICAgY2hpbGRyZW46IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG5cdCAgICAgIHZhciBfcHJvcHMyID0gdGhpcy5wcm9wcztcblx0ICAgICAgdmFyIHN0eWxlcyA9IF9wcm9wczIuc3R5bGVzO1xuXHQgICAgICB2YXIgZGVmYXVsdFN0eWxlcyA9IF9wcm9wczIuZGVmYXVsdFN0eWxlcztcblx0XG5cdCAgICAgIHZhciBjdXJyZW50U3R5bGVzID0gZGVmYXVsdFN0eWxlcyA/IGRlZmF1bHRTdHlsZXMgOiBzdHlsZXMoKTtcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICBjdXJyZW50U3R5bGVzOiBjdXJyZW50U3R5bGVzLFxuXHQgICAgICAgIGN1cnJlbnRWZWxvY2l0aWVzOiBjdXJyZW50U3R5bGVzLm1hcChmdW5jdGlvbiAocykge1xuXHQgICAgICAgICAgcmV0dXJuIG1hcE9iamVjdChfemVybzJbJ2RlZmF1bHQnXSwgcyk7XG5cdCAgICAgICAgfSlcblx0ICAgICAgfTtcblx0ICAgIH0sXG5cdFxuXHQgICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHQgICAgICB0aGlzLnN0YXJ0QW5pbWF0aW5nKCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMoKSB7XG5cdCAgICAgIHRoaXMuc3RhcnRBbmltYXRpbmcoKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgYW5pbWF0aW9uU3RlcDogZnVuY3Rpb24gYW5pbWF0aW9uU3RlcCh0aW1lc3RlcCwgc3RhdGUpIHtcblx0ICAgICAgdmFyIGN1cnJlbnRTdHlsZXMgPSBzdGF0ZS5jdXJyZW50U3R5bGVzO1xuXHQgICAgICB2YXIgY3VycmVudFZlbG9jaXRpZXMgPSBzdGF0ZS5jdXJyZW50VmVsb2NpdGllcztcblx0XG5cdCAgICAgIHZhciBzdHlsZXMgPSB0aGlzLnByb3BzLnN0eWxlcyhjdXJyZW50U3R5bGVzLm1hcChfc3RyaXBTdHlsZTJbJ2RlZmF1bHQnXSkpO1xuXHRcblx0ICAgICAgdmFyIG5ld0N1cnJlbnRTdHlsZXMgPSBjdXJyZW50U3R5bGVzLm1hcChmdW5jdGlvbiAoY3VycmVudFN0eWxlLCBpKSB7XG5cdCAgICAgICAgcmV0dXJuIF91cGRhdGVUcmVlLnVwZGF0ZUN1cnJlbnRTdHlsZSh0aW1lc3RlcCwgY3VycmVudFN0eWxlLCBjdXJyZW50VmVsb2NpdGllc1tpXSwgc3R5bGVzW2ldKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHZhciBuZXdDdXJyZW50VmVsb2NpdGllcyA9IGN1cnJlbnRTdHlsZXMubWFwKGZ1bmN0aW9uIChjdXJyZW50U3R5bGUsIGkpIHtcblx0ICAgICAgICByZXR1cm4gX3VwZGF0ZVRyZWUudXBkYXRlQ3VycmVudFZlbG9jaXR5KHRpbWVzdGVwLCBjdXJyZW50U3R5bGUsIGN1cnJlbnRWZWxvY2l0aWVzW2ldLCBzdHlsZXNbaV0pO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIC8vIFRPRE86IGlzIHRoaXMgcmlnaHQ/XG5cdCAgICAgIGlmIChjdXJyZW50VmVsb2NpdGllcy5ldmVyeShmdW5jdGlvbiAodiwgaykge1xuXHQgICAgICAgIHJldHVybiBfbm9WZWxvY2l0eTJbJ2RlZmF1bHQnXSh2LCBjdXJyZW50U3R5bGVzW2tdKTtcblx0ICAgICAgfSkgJiYgbmV3Q3VycmVudFZlbG9jaXRpZXMuZXZlcnkoZnVuY3Rpb24gKHYsIGspIHtcblx0ICAgICAgICByZXR1cm4gX25vVmVsb2NpdHkyWydkZWZhdWx0J10odiwgbmV3Q3VycmVudFN0eWxlc1trXSk7XG5cdCAgICAgIH0pKSB7XG5cdCAgICAgICAgdGhpcy5zdG9wQW5pbWF0aW9uKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgY3VycmVudFN0eWxlczogbmV3Q3VycmVudFN0eWxlcyxcblx0ICAgICAgICBjdXJyZW50VmVsb2NpdGllczogbmV3Q3VycmVudFZlbG9jaXRpZXNcblx0ICAgICAgfTtcblx0ICAgIH0sXG5cdFxuXHQgICAgc3RvcEFuaW1hdGlvbjogbnVsbCxcblx0XG5cdCAgICAvLyB1c2VkIGluIGFuaW1hdGlvblJlbmRlclxuXHQgICAgaGFzVW5tb3VudGVkOiBmYWxzZSxcblx0XG5cdCAgICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG5cdCAgICAgIHRoaXMuc3RvcEFuaW1hdGlvbigpO1xuXHQgICAgICB0aGlzLmhhc1VubW91bnRlZCA9IHRydWU7XG5cdCAgICB9LFxuXHRcblx0ICAgIHN0YXJ0QW5pbWF0aW5nOiBmdW5jdGlvbiBzdGFydEFuaW1hdGluZygpIHtcblx0ICAgICAgdGhpcy5zdG9wQW5pbWF0aW9uID0gc3RhcnRBbmltYXRpb24odGhpcy5zdGF0ZSwgdGhpcy5hbmltYXRpb25TdGVwLCB0aGlzLmFuaW1hdGlvblJlbmRlcik7XG5cdCAgICB9LFxuXHRcblx0ICAgIGFuaW1hdGlvblJlbmRlcjogZnVuY3Rpb24gYW5pbWF0aW9uUmVuZGVyKGFscGhhLCBuZXh0U3RhdGUsIHByZXZTdGF0ZSkge1xuXHQgICAgICAvLyBTZWUgY29tbWVudCBpbiBNb3Rpb24uXG5cdCAgICAgIGlmICghdGhpcy5oYXNVbm1vdW50ZWQpIHtcblx0ICAgICAgICB2YXIgY3VycmVudFN0eWxlcyA9IG5leHRTdGF0ZS5jdXJyZW50U3R5bGVzLm1hcChmdW5jdGlvbiAoc3R5bGUsIGkpIHtcblx0ICAgICAgICAgIHJldHVybiBfdXBkYXRlVHJlZS5pbnRlcnBvbGF0ZVZhbHVlKGFscGhhLCBzdHlsZSwgcHJldlN0YXRlLmN1cnJlbnRTdHlsZXNbaV0pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuXHQgICAgICAgICAgY3VycmVudFN0eWxlczogY3VycmVudFN0eWxlcyxcblx0ICAgICAgICAgIGN1cnJlbnRWZWxvY2l0aWVzOiBuZXh0U3RhdGUuY3VycmVudFZlbG9jaXRpZXNcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgdmFyIHN0cmlwcGVkU3R5bGUgPSB0aGlzLnN0YXRlLmN1cnJlbnRTdHlsZXMubWFwKF9zdHJpcFN0eWxlMlsnZGVmYXVsdCddKTtcblx0ICAgICAgdmFyIHJlbmRlcmVkQ2hpbGRyZW4gPSB0aGlzLnByb3BzLmNoaWxkcmVuKHN0cmlwcGVkU3R5bGUpO1xuXHQgICAgICByZXR1cm4gcmVuZGVyZWRDaGlsZHJlbiAmJiBSZWFjdC5DaGlsZHJlbi5vbmx5KHJlbmRlcmVkQ2hpbGRyZW4pO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICB2YXIgVHJhbnNpdGlvbk1vdGlvbiA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblx0ICAgIGRpc3BsYXlOYW1lOiAnVHJhbnNpdGlvbk1vdGlvbicsXG5cdFxuXHQgICAgcHJvcFR5cGVzOiB7XG5cdCAgICAgIGRlZmF1bHRWYWx1ZTogZnVuY3Rpb24gZGVmYXVsdFZhbHVlKHByb3AsIHByb3BOYW1lKSB7XG5cdCAgICAgICAgaWYgKHByb3BbcHJvcE5hbWVdKSB7XG5cdCAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdUcmFuc2l0aW9uU3ByaW5nXFwncyBgZGVmYXVsdFZhbHVlYCBoYXMgYmVlbiBjaGFuZ2VkIHRvICcgKyAnYGRlZmF1bHRTdHlsZXNgLiBJdHMgZm9ybWF0IHJlY2VpdmVkIGEgZmV3IChlYXN5IHRvIHVwZGF0ZSEpICcgKyAnY2hhbmdlcyBhcyB3ZWxsLicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgZW5kVmFsdWU6IGZ1bmN0aW9uIGVuZFZhbHVlKHByb3AsIHByb3BOYW1lKSB7XG5cdCAgICAgICAgaWYgKHByb3BbcHJvcE5hbWVdKSB7XG5cdCAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdUcmFuc2l0aW9uU3ByaW5nXFwncyBgZW5kVmFsdWVgIGhhcyBiZWVuIGNoYW5nZWQgdG8gYHN0eWxlc2AuICcgKyAnSXRzIGZvcm1hdCByZWNlaXZlZCBhIGZldyAoZWFzeSB0byB1cGRhdGUhKSBjaGFuZ2VzIGFzIHdlbGwuJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHQgICAgICBkZWZhdWx0U3R5bGU6IGZ1bmN0aW9uIGRlZmF1bHRTdHlsZShwcm9wLCBwcm9wTmFtZSkge1xuXHQgICAgICAgIGlmIChwcm9wW3Byb3BOYW1lXSkge1xuXHQgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignWW91IGZvcmdvdCB0aGUgXCJzXCIgZm9yIGBUcmFuc2l0aW9uTW90aW9uYFxcJ3MgYGRlZmF1bHRTdHlsZXNgLicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgc3R5bGU6IGZ1bmN0aW9uIHN0eWxlKHByb3AsIHByb3BOYW1lKSB7XG5cdCAgICAgICAgaWYgKHByb3BbcHJvcE5hbWVdKSB7XG5cdCAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdZb3UgZm9yZ290IHRoZSBcInNcIiBmb3IgYFRyYW5zaXRpb25Nb3Rpb25gXFwncyBgc3R5bGVzYC4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdCAgICAgIC8vIFRPT0Q6IHdhcm4gYWdhaW5zdCBwdXR0aW5nIGNvbmZpZ3MgaW4gaGVyZVxuXHQgICAgICBkZWZhdWx0U3R5bGVzOiBQcm9wVHlwZXMub2JqZWN0T2YoUHJvcFR5cGVzLmFueSksXG5cdCAgICAgIHN0eWxlczogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmZ1bmMsIFByb3BUeXBlcy5vYmplY3RPZihQcm9wVHlwZXMuYW55LmlzUmVxdWlyZWQpXSkuaXNSZXF1aXJlZCxcblx0ICAgICAgd2lsbExlYXZlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuZnVuY10pLFxuXHQgICAgICAvLyBUT09EOiB3YXJuIGFnYWluc3QgcHV0dGluZyBjb25maWdzIGluIGhlcmVcblx0ICAgICAgd2lsbEVudGVyOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuZnVuY10pLFxuXHQgICAgICBjaGlsZHJlbjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxuXHQgICAgfSxcblx0XG5cdCAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICB3aWxsRW50ZXI6IGZ1bmN0aW9uIHdpbGxFbnRlcihrZXksIHZhbHVlKSB7XG5cdCAgICAgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICB3aWxsTGVhdmU6IGZ1bmN0aW9uIHdpbGxMZWF2ZSgpIHtcblx0ICAgICAgICAgIHJldHVybiBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG5cdCAgICAgIHZhciBfcHJvcHMzID0gdGhpcy5wcm9wcztcblx0ICAgICAgdmFyIHN0eWxlcyA9IF9wcm9wczMuc3R5bGVzO1xuXHQgICAgICB2YXIgZGVmYXVsdFN0eWxlcyA9IF9wcm9wczMuZGVmYXVsdFN0eWxlcztcblx0XG5cdCAgICAgIHZhciBjdXJyZW50U3R5bGVzID0gdW5kZWZpbmVkO1xuXHQgICAgICBpZiAoZGVmYXVsdFN0eWxlcyA9PSBudWxsKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBzdHlsZXMgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgIGN1cnJlbnRTdHlsZXMgPSBzdHlsZXMoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgY3VycmVudFN0eWxlcyA9IHN0eWxlcztcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY3VycmVudFN0eWxlcyA9IGRlZmF1bHRTdHlsZXM7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICBjdXJyZW50U3R5bGVzOiBjdXJyZW50U3R5bGVzLFxuXHQgICAgICAgIGN1cnJlbnRWZWxvY2l0aWVzOiBtYXBPYmplY3QoZnVuY3Rpb24gKHMpIHtcblx0ICAgICAgICAgIHJldHVybiBtYXBPYmplY3QoX3plcm8yWydkZWZhdWx0J10sIHMpO1xuXHQgICAgICAgIH0sIGN1cnJlbnRTdHlsZXMpXG5cdCAgICAgIH07XG5cdCAgICB9LFxuXHRcblx0ICAgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcblx0ICAgICAgdGhpcy5zdGFydEFuaW1hdGluZygpO1xuXHQgICAgfSxcblx0XG5cdCAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKCkge1xuXHQgICAgICB0aGlzLnN0YXJ0QW5pbWF0aW5nKCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGFuaW1hdGlvblN0ZXA6IGZ1bmN0aW9uIGFuaW1hdGlvblN0ZXAodGltZXN0ZXAsIHN0YXRlKSB7XG5cdCAgICAgIHZhciBjdXJyZW50U3R5bGVzID0gc3RhdGUuY3VycmVudFN0eWxlcztcblx0ICAgICAgdmFyIGN1cnJlbnRWZWxvY2l0aWVzID0gc3RhdGUuY3VycmVudFZlbG9jaXRpZXM7XG5cdCAgICAgIHZhciBfcHJvcHM0ID0gdGhpcy5wcm9wcztcblx0ICAgICAgdmFyIHN0eWxlcyA9IF9wcm9wczQuc3R5bGVzO1xuXHQgICAgICB2YXIgd2lsbEVudGVyID0gX3Byb3BzNC53aWxsRW50ZXI7XG5cdCAgICAgIHZhciB3aWxsTGVhdmUgPSBfcHJvcHM0LndpbGxMZWF2ZTtcblx0XG5cdCAgICAgIGlmICh0eXBlb2Ygc3R5bGVzID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgc3R5bGVzID0gc3R5bGVzKGN1cnJlbnRTdHlsZXMpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBUT0RPOiBodWg/XG5cdCAgICAgIHZhciBtZXJnZWRTdHlsZXMgPSBzdHlsZXM7IC8vIHNldCBtZXJnZWRTdHlsZXMgdG8gc3R5bGVzIGFzIHRoZSBkZWZhdWx0XG5cdCAgICAgIHZhciBoYXNOZXdLZXkgPSBmYWxzZTtcblx0XG5cdCAgICAgIG1lcmdlZFN0eWxlcyA9IF9tZXJnZURpZmYyWydkZWZhdWx0J10oY3VycmVudFN0eWxlcywgc3R5bGVzLFxuXHQgICAgICAvLyBUT0RPOiBzdG9wIGFsbG9jYXRpbmcgbGlrZSBjcmF6eSBpbiB0aGlzIHdob2xlIGNvZGUgcGF0aFxuXHQgICAgICBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgdmFyIHJlcyA9IHdpbGxMZWF2ZShrZXksIGN1cnJlbnRTdHlsZXNba2V5XSwgc3R5bGVzLCBjdXJyZW50U3R5bGVzLCBjdXJyZW50VmVsb2NpdGllcyk7XG5cdCAgICAgICAgaWYgKHJlcyA9PSBudWxsKSB7XG5cdCAgICAgICAgICAvLyBGb3IgbGVnYWN5IHJlYXNvbi4gV2Ugd29uJ3QgYWxsb3cgcmV0dXJuaW5nIG51bGwgc29vblxuXHQgICAgICAgICAgLy8gVE9ETzogcmVtb3ZlLCBhZnRlciBuZXh0IHJlbGVhc2Vcblx0ICAgICAgICAgIHJldHVybiBudWxsO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKF9ub1ZlbG9jaXR5MlsnZGVmYXVsdCddKGN1cnJlbnRWZWxvY2l0aWVzW2tleV0sIGN1cnJlbnRTdHlsZXNba2V5XSkgJiYgX2hhc1JlYWNoZWRTdHlsZTJbJ2RlZmF1bHQnXShjdXJyZW50U3R5bGVzW2tleV0sIHJlcykpIHtcblx0ICAgICAgICAgIHJldHVybiBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gcmVzO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIE9iamVjdC5rZXlzKG1lcmdlZFN0eWxlcykuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICByZXR1cm4gIWN1cnJlbnRTdHlsZXMuaGFzT3duUHJvcGVydHkoa2V5KTtcblx0ICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgdmFyIF9leHRlbmRzMiwgX2V4dGVuZHMzO1xuXHRcblx0ICAgICAgICBoYXNOZXdLZXkgPSB0cnVlO1xuXHQgICAgICAgIHZhciBlbnRlclN0eWxlID0gd2lsbEVudGVyKGtleSwgbWVyZ2VkU3R5bGVzW2tleV0sIHN0eWxlcywgY3VycmVudFN0eWxlcywgY3VycmVudFZlbG9jaXRpZXMpO1xuXHRcblx0ICAgICAgICAvLyBXZSBjYW4gbXV0YXRlIHRoaXMgaGVyZSBiZWNhdXNlIG1lcmdlRGlmZiByZXR1cm5zIGEgbmV3IE9ialxuXHQgICAgICAgIG1lcmdlZFN0eWxlc1trZXldID0gZW50ZXJTdHlsZTtcblx0XG5cdCAgICAgICAgY3VycmVudFN0eWxlcyA9IF9leHRlbmRzKHt9LCBjdXJyZW50U3R5bGVzLCAoX2V4dGVuZHMyID0ge30sIF9leHRlbmRzMltrZXldID0gZW50ZXJTdHlsZSwgX2V4dGVuZHMyKSk7XG5cdCAgICAgICAgY3VycmVudFZlbG9jaXRpZXMgPSBfZXh0ZW5kcyh7fSwgY3VycmVudFZlbG9jaXRpZXMsIChfZXh0ZW5kczMgPSB7fSwgX2V4dGVuZHMzW2tleV0gPSBtYXBPYmplY3QoX3plcm8yWydkZWZhdWx0J10sIGVudGVyU3R5bGUpLCBfZXh0ZW5kczMpKTtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICB2YXIgbmV3Q3VycmVudFN0eWxlcyA9IG1hcE9iamVjdChmdW5jdGlvbiAobWVyZ2VkU3R5bGUsIGtleSkge1xuXHQgICAgICAgIHJldHVybiBfdXBkYXRlVHJlZS51cGRhdGVDdXJyZW50U3R5bGUodGltZXN0ZXAsIGN1cnJlbnRTdHlsZXNba2V5XSwgY3VycmVudFZlbG9jaXRpZXNba2V5XSwgbWVyZ2VkU3R5bGUpO1xuXHQgICAgICB9LCBtZXJnZWRTdHlsZXMpO1xuXHQgICAgICB2YXIgbmV3Q3VycmVudFZlbG9jaXRpZXMgPSBtYXBPYmplY3QoZnVuY3Rpb24gKG1lcmdlZFN0eWxlLCBrZXkpIHtcblx0ICAgICAgICByZXR1cm4gX3VwZGF0ZVRyZWUudXBkYXRlQ3VycmVudFZlbG9jaXR5KHRpbWVzdGVwLCBjdXJyZW50U3R5bGVzW2tleV0sIGN1cnJlbnRWZWxvY2l0aWVzW2tleV0sIG1lcmdlZFN0eWxlKTtcblx0ICAgICAgfSwgbWVyZ2VkU3R5bGVzKTtcblx0XG5cdCAgICAgIGlmICghaGFzTmV3S2V5ICYmIGV2ZXJ5T2JqKGZ1bmN0aW9uICh2LCBrKSB7XG5cdCAgICAgICAgcmV0dXJuIF9ub1ZlbG9jaXR5MlsnZGVmYXVsdCddKHYsIGN1cnJlbnRTdHlsZXNba10pO1xuXHQgICAgICB9LCBjdXJyZW50VmVsb2NpdGllcykgJiYgZXZlcnlPYmooZnVuY3Rpb24gKHYsIGspIHtcblx0ICAgICAgICByZXR1cm4gX25vVmVsb2NpdHkyWydkZWZhdWx0J10odiwgbmV3Q3VycmVudFN0eWxlc1trXSk7XG5cdCAgICAgIH0sIG5ld0N1cnJlbnRWZWxvY2l0aWVzKSkge1xuXHQgICAgICAgIC8vIGNoZWNrIGV4cGxhbmF0aW9uIGluIGBNb3Rpb24uYW5pbWF0aW9uUmVuZGVyYFxuXHQgICAgICAgIHRoaXMuc3RvcEFuaW1hdGlvbigpOyAvLyBOYXN0eSBzaWRlIGVmZmVjdHMuLi4uXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgY3VycmVudFN0eWxlczogbmV3Q3VycmVudFN0eWxlcyxcblx0ICAgICAgICBjdXJyZW50VmVsb2NpdGllczogbmV3Q3VycmVudFZlbG9jaXRpZXNcblx0ICAgICAgfTtcblx0ICAgIH0sXG5cdFxuXHQgICAgc3RvcEFuaW1hdGlvbjogbnVsbCxcblx0XG5cdCAgICAvLyB1c2VkIGluIGFuaW1hdGlvblJlbmRlclxuXHQgICAgaGFzVW5tb3VudGVkOiBmYWxzZSxcblx0XG5cdCAgICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG5cdCAgICAgIHRoaXMuc3RvcEFuaW1hdGlvbigpO1xuXHQgICAgICB0aGlzLmhhc1VubW91bnRlZCA9IHRydWU7XG5cdCAgICB9LFxuXHRcblx0ICAgIHN0YXJ0QW5pbWF0aW5nOiBmdW5jdGlvbiBzdGFydEFuaW1hdGluZygpIHtcblx0ICAgICAgdGhpcy5zdG9wQW5pbWF0aW9uID0gc3RhcnRBbmltYXRpb24odGhpcy5zdGF0ZSwgdGhpcy5hbmltYXRpb25TdGVwLCB0aGlzLmFuaW1hdGlvblJlbmRlcik7XG5cdCAgICB9LFxuXHRcblx0ICAgIGFuaW1hdGlvblJlbmRlcjogZnVuY3Rpb24gYW5pbWF0aW9uUmVuZGVyKGFscGhhLCBuZXh0U3RhdGUsIHByZXZTdGF0ZSkge1xuXHQgICAgICAvLyBTZWUgY29tbWVudCBpbiBNb3Rpb24uXG5cdCAgICAgIGlmICghdGhpcy5oYXNVbm1vdW50ZWQpIHtcblx0ICAgICAgICB2YXIgY3VycmVudFN0eWxlcyA9IG1hcE9iamVjdChmdW5jdGlvbiAoc3R5bGUsIGtleSkge1xuXHQgICAgICAgICAgcmV0dXJuIF91cGRhdGVUcmVlLmludGVycG9sYXRlVmFsdWUoYWxwaGEsIHN0eWxlLCBwcmV2U3RhdGUuY3VycmVudFN0eWxlc1trZXldKTtcblx0ICAgICAgICB9LCBuZXh0U3RhdGUuY3VycmVudFN0eWxlcyk7XG5cdCAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICAgICAgICBjdXJyZW50U3R5bGVzOiBjdXJyZW50U3R5bGVzLFxuXHQgICAgICAgICAgY3VycmVudFZlbG9jaXRpZXM6IG5leHRTdGF0ZS5jdXJyZW50VmVsb2NpdGllc1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICB2YXIgc3RyaXBwZWRTdHlsZSA9IG1hcE9iamVjdChfc3RyaXBTdHlsZTJbJ2RlZmF1bHQnXSwgdGhpcy5zdGF0ZS5jdXJyZW50U3R5bGVzKTtcblx0ICAgICAgdmFyIHJlbmRlcmVkQ2hpbGRyZW4gPSB0aGlzLnByb3BzLmNoaWxkcmVuKHN0cmlwcGVkU3R5bGUpO1xuXHQgICAgICByZXR1cm4gcmVuZGVyZWRDaGlsZHJlbiAmJiBSZWFjdC5DaGlsZHJlbi5vbmx5KHJlbmRlcmVkQ2hpbGRyZW4pO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICB2YXIgX2RlcHJlY2F0ZWRTcHJpbmdzID0gX2RlcHJlY2F0ZWRTcHJpbmdzM1snZGVmYXVsdCddKFJlYWN0KTtcblx0XG5cdCAgdmFyIFNwcmluZyA9IF9kZXByZWNhdGVkU3ByaW5ncy5TcHJpbmc7XG5cdCAgdmFyIFRyYW5zaXRpb25TcHJpbmcgPSBfZGVwcmVjYXRlZFNwcmluZ3MuVHJhbnNpdGlvblNwcmluZztcblx0XG5cdCAgcmV0dXJuIHsgU3ByaW5nOiBTcHJpbmcsIFRyYW5zaXRpb25TcHJpbmc6IFRyYW5zaXRpb25TcHJpbmcsIE1vdGlvbjogTW90aW9uLCBTdGFnZ2VyZWRNb3Rpb246IFN0YWdnZXJlZE1vdGlvbiwgVHJhbnNpdGlvbk1vdGlvbjogVHJhbnNpdGlvbk1vdGlvbiB9O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcbi8qIDI0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRleHBvcnRzWydkZWZhdWx0J10gPSBkZXByZWNhdGVkU3ByaW5ncztcblx0dmFyIGhhc1dhcm5lZEZvclNwcmluZyA9IHt9O1xuXHR2YXIgaGFzV2FybmVkRm9yVHJhbnNpdGlvblNwcmluZyA9IHt9O1xuXHRcblx0ZnVuY3Rpb24gZGVwcmVjYXRlZFNwcmluZ3MoUmVhY3QpIHtcblx0ICB2YXIgU3ByaW5nID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXHQgICAgZGlzcGxheU5hbWU6ICdTcHJpbmcnLFxuXHRcblx0ICAgIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuXHQgICAgICBpZiAoZmFsc2UpIHtcblx0ICAgICAgICB2YXIgb3duZXJOYW1lID0gdGhpcy5fcmVhY3RJbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5fb3duZXIgJiYgdGhpcy5fcmVhY3RJbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5fb3duZXIuZ2V0TmFtZSgpO1xuXHQgICAgICAgIGlmICghaGFzV2FybmVkRm9yU3ByaW5nW293bmVyTmFtZV0pIHtcblx0ICAgICAgICAgIGhhc1dhcm5lZEZvclNwcmluZ1tvd25lck5hbWVdID0gdHJ1ZTtcblx0ICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NwcmluZyAodXNlZCBpbiAlc3JlbmRlcikgaGFzIG5vdyBiZWVuIHJlbmFtZWQgdG8gTW90aW9uLiAnICsgJ1BsZWFzZSBzZWUgdGhlIHJlbGVhc2Ugbm90ZSBmb3IgdGhlIHVwZ3JhZGUgcGF0aC4gVGhhbmsgeW91IScsIG93bmVyTmFtZSA/IG93bmVyTmFtZSArICdcXCdzICcgOiAnUmVhY3QuJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICByZXR1cm4gbnVsbDtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgdmFyIFRyYW5zaXRpb25TcHJpbmcgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cdCAgICBkaXNwbGF5TmFtZTogJ1RyYW5zaXRpb25TcHJpbmcnLFxuXHRcblx0ICAgIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuXHQgICAgICBpZiAoZmFsc2UpIHtcblx0ICAgICAgICB2YXIgb3duZXJOYW1lID0gdGhpcy5fcmVhY3RJbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5fb3duZXIgJiYgdGhpcy5fcmVhY3RJbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5fb3duZXIuZ2V0TmFtZSgpO1xuXHQgICAgICAgIGlmICghaGFzV2FybmVkRm9yVHJhbnNpdGlvblNwcmluZ1tvd25lck5hbWVdKSB7XG5cdCAgICAgICAgICBoYXNXYXJuZWRGb3JUcmFuc2l0aW9uU3ByaW5nW293bmVyTmFtZV0gPSB0cnVlO1xuXHQgICAgICAgICAgY29uc29sZS5lcnJvcignVHJhbnNpdGlvblNwcmluZyAodXNlZCBpbiAlc3JlbmRlcikgaGFzIG5vdyBiZWVuIHJlbmFtZWQgdG8gJyArICdUcmFuc2l0aW9uTW90aW9uLiBQbGVhc2Ugc2VlIHRoZSByZWxlYXNlIG5vdGUgZm9yIHRoZSB1cGdyYWRlICcgKyAncGF0aC4gVGhhbmsgeW91IScsIG93bmVyTmFtZSA/IG93bmVyTmFtZSArICdcXCdzICcgOiAnUmVhY3QuJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICByZXR1cm4gbnVsbDtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgcmV0dXJuIHsgU3ByaW5nOiBTcHJpbmcsIFRyYW5zaXRpb25TcHJpbmc6IFRyYW5zaXRpb25TcHJpbmcgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG4vKiAyNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IGhhc1JlYWNoZWRTdHlsZTtcblx0XG5cdGZ1bmN0aW9uIGhhc1JlYWNoZWRTdHlsZShjdXJyZW50U3R5bGUsIHN0eWxlKSB7XG5cdCAgZm9yICh2YXIga2V5IGluIHN0eWxlKSB7XG5cdCAgICBpZiAoIXN0eWxlLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdCAgICB2YXIgY3VycmVudFZhbHVlID0gY3VycmVudFN0eWxlW2tleV07XG5cdCAgICB2YXIgZGVzdFZhbHVlID0gc3R5bGVba2V5XTtcblx0ICAgIGlmICghZGVzdFZhbHVlLmNvbmZpZykge1xuXHQgICAgICAvLyBub3QgYSBzcHJpbmcgY29uZmlnXG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHQgICAgaWYgKGN1cnJlbnRWYWx1ZS5jb25maWcgJiYgY3VycmVudFZhbHVlLnZhbCAhPT0gZGVzdFZhbHVlLnZhbCkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBpZiAoIWN1cnJlbnRWYWx1ZS5jb25maWcgJiYgY3VycmVudFZhbHVlICE9PSBkZXN0VmFsdWUudmFsKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiB0cnVlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG4vKioqLyB9LFxuLyogMjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIHRoaXMgZnVuY3Rpb24gaXMgYWxsb2NhdGlvbi1sZXNzIHRoYW5rcyB0byBiYWJlbCwgd2hpY2ggdHJhbnNmb3JtcyB0aGUgdGFpbFxuXHQvLyBjYWxscyBpbnRvIGxvb3BzXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0ZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblx0ZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtZXJnZURpZmY7XG5cdGZ1bmN0aW9uIG1lcmdlRGlmZkFycihfeCwgX3gyLCBfeDMsIF94NCwgX3g1LCBfeDYsIF94Nykge1xuXHQgIHZhciBfYWdhaW4gPSB0cnVlO1xuXHRcblx0ICBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHtcblx0ICAgIHZhciBhcnJBID0gX3gsXG5cdCAgICAgICAgYXJyQiA9IF94Mixcblx0ICAgICAgICBjb2xsQiA9IF94Myxcblx0ICAgICAgICBpbmRleEEgPSBfeDQsXG5cdCAgICAgICAgaW5kZXhCID0gX3g1LFxuXHQgICAgICAgIG9uUmVtb3ZlID0gX3g2LFxuXHQgICAgICAgIGFjY3VtID0gX3g3O1xuXHQgICAgZW5kQSA9IGVuZEIgPSBrZXlBID0ga2V5QiA9IGZpbGwgPSBmaWxsID0gdW5kZWZpbmVkO1xuXHQgICAgX2FnYWluID0gZmFsc2U7XG5cdFxuXHQgICAgdmFyIGVuZEEgPSBpbmRleEEgPT09IGFyckEubGVuZ3RoO1xuXHQgICAgdmFyIGVuZEIgPSBpbmRleEIgPT09IGFyckIubGVuZ3RoO1xuXHQgICAgdmFyIGtleUEgPSBhcnJBW2luZGV4QV07XG5cdCAgICB2YXIga2V5QiA9IGFyckJbaW5kZXhCXTtcblx0ICAgIGlmIChlbmRBICYmIGVuZEIpIHtcblx0ICAgICAgLy8gcmV0dXJuaW5nIG51bGwgaGVyZSwgb3RoZXJ3aXNlIGxpbnQgY29tcGxhaW5zIHRoYXQgd2UncmUgbm90IGV4cGVjdGluZ1xuXHQgICAgICAvLyBhIHJldHVybiB2YWx1ZSBpbiBzdWJzZXF1ZW50IGNhbGxzLiBXZSBrbm93IHdoYXQgd2UncmUgZG9pbmcuXG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChlbmRBKSB7XG5cdCAgICAgIGFjY3VtW2tleUJdID0gY29sbEJba2V5Ql07XG5cdCAgICAgIF94ID0gYXJyQTtcblx0ICAgICAgX3gyID0gYXJyQjtcblx0ICAgICAgX3gzID0gY29sbEI7XG5cdCAgICAgIF94NCA9IGluZGV4QTtcblx0ICAgICAgX3g1ID0gaW5kZXhCICsgMTtcblx0ICAgICAgX3g2ID0gb25SZW1vdmU7XG5cdCAgICAgIF94NyA9IGFjY3VtO1xuXHQgICAgICBfYWdhaW4gPSB0cnVlO1xuXHQgICAgICBjb250aW51ZSBfZnVuY3Rpb247XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGVuZEIpIHtcblx0ICAgICAgdmFyIGZpbGwgPSBvblJlbW92ZShrZXlBKTtcblx0ICAgICAgaWYgKGZpbGwgIT0gbnVsbCkge1xuXHQgICAgICAgIGFjY3VtW2tleUFdID0gZmlsbDtcblx0ICAgICAgfVxuXHQgICAgICBfeCA9IGFyckE7XG5cdCAgICAgIF94MiA9IGFyckI7XG5cdCAgICAgIF94MyA9IGNvbGxCO1xuXHQgICAgICBfeDQgPSBpbmRleEEgKyAxO1xuXHQgICAgICBfeDUgPSBpbmRleEI7XG5cdCAgICAgIF94NiA9IG9uUmVtb3ZlO1xuXHQgICAgICBfeDcgPSBhY2N1bTtcblx0ICAgICAgX2FnYWluID0gdHJ1ZTtcblx0ICAgICAgY29udGludWUgX2Z1bmN0aW9uO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChrZXlBID09PSBrZXlCKSB7XG5cdCAgICAgIGFjY3VtW2tleUFdID0gY29sbEJba2V5QV07XG5cdCAgICAgIF94ID0gYXJyQTtcblx0ICAgICAgX3gyID0gYXJyQjtcblx0ICAgICAgX3gzID0gY29sbEI7XG5cdCAgICAgIF94NCA9IGluZGV4QSArIDE7XG5cdCAgICAgIF94NSA9IGluZGV4QiArIDE7XG5cdCAgICAgIF94NiA9IG9uUmVtb3ZlO1xuXHQgICAgICBfeDcgPSBhY2N1bTtcblx0ICAgICAgX2FnYWluID0gdHJ1ZTtcblx0ICAgICAgY29udGludWUgX2Z1bmN0aW9uO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICghY29sbEIuaGFzT3duUHJvcGVydHkoa2V5QSkpIHtcblx0ICAgICAgdmFyIGZpbGwgPSBvblJlbW92ZShrZXlBKTtcblx0ICAgICAgaWYgKGZpbGwgIT0gbnVsbCkge1xuXHQgICAgICAgIGFjY3VtW2tleUFdID0gZmlsbDtcblx0ICAgICAgfVxuXHQgICAgICBfeCA9IGFyckE7XG5cdCAgICAgIF94MiA9IGFyckI7XG5cdCAgICAgIF94MyA9IGNvbGxCO1xuXHQgICAgICBfeDQgPSBpbmRleEEgKyAxO1xuXHQgICAgICBfeDUgPSBpbmRleEI7XG5cdCAgICAgIF94NiA9IG9uUmVtb3ZlO1xuXHQgICAgICBfeDcgPSBhY2N1bTtcblx0ICAgICAgX2FnYWluID0gdHJ1ZTtcblx0ICAgICAgY29udGludWUgX2Z1bmN0aW9uO1xuXHQgICAgfVxuXHRcblx0ICAgIF94ID0gYXJyQTtcblx0ICAgIF94MiA9IGFyckI7XG5cdCAgICBfeDMgPSBjb2xsQjtcblx0ICAgIF94NCA9IGluZGV4QSArIDE7XG5cdCAgICBfeDUgPSBpbmRleEI7XG5cdCAgICBfeDYgPSBvblJlbW92ZTtcblx0ICAgIF94NyA9IGFjY3VtO1xuXHQgICAgX2FnYWluID0gdHJ1ZTtcblx0ICAgIGNvbnRpbnVlIF9mdW5jdGlvbjtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1lcmdlRGlmZihhLCBiLCBvblJlbW92ZSkge1xuXHQgIHZhciByZXQgPSB7fTtcblx0ICAvLyBpZiBhbnlvbmUgY2FuIG1ha2UgdGhpcyB3b3JrIHdpdGhvdXQgYWxsb2NhdGluZyB0aGUgYXJyYXlzIGhlcmUsIHdlJ2xsXG5cdCAgLy8gZ2l2ZSB5b3UgYSBtZWRhbFxuXHQgIG1lcmdlRGlmZkFycihPYmplY3Qua2V5cyhhKSwgT2JqZWN0LmtleXMoYiksIGIsIDAsIDAsIG9uUmVtb3ZlLCByZXQpO1xuXHQgIHJldHVybiByZXQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07XG5cbi8qKiovIH0sXG4vKiAyNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gY3VycmVudFN0eWxlIGtlZXBzIHRoZSBpbmZvIGFib3V0IHdoZXRoZXIgYSBwcm9wIGlzIGNvbmZpZ3VyZWQgYXMgYSBzcHJpbmdcblx0Ly8gb3IgaWYgaXQncyBqdXN0IGEgcmFuZG9tIHByb3AgdGhhdCBoYXBwZW5zIHRvIGJlIHByZXNlbnQgb24gdGhlIHN0eWxlXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0ZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblx0ZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBub1ZlbG9jaXR5O1xuXHRcblx0ZnVuY3Rpb24gbm9WZWxvY2l0eShjdXJyZW50VmVsb2NpdHksIGN1cnJlbnRTdHlsZSkge1xuXHQgIGZvciAodmFyIGtleSBpbiBjdXJyZW50VmVsb2NpdHkpIHtcblx0ICAgIGlmICghY3VycmVudFZlbG9jaXR5Lmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdCAgICBpZiAoY3VycmVudFN0eWxlW2tleV0uY29uZmlnICYmIGN1cnJlbnRWZWxvY2l0eVtrZXldICE9PSAwKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07XG5cbi8qKiovIH0sXG4vKiAyOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IHJlb3JkZXJLZXlzO1xuXHRcblx0ZnVuY3Rpb24gcmVvcmRlcktleXMob2JqLCBmKSB7XG5cdCAgdmFyIG5ld0tleXMgPSBmKE9iamVjdC5rZXlzKG9iaikpO1xuXHQgIHZhciByZXQgPSB7fTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld0tleXMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBrZXkgPSBuZXdLZXlzW2ldO1xuXHQgICAgcmV0W2tleV0gPSBvYmpba2V5XTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiByZXQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07XG5cbi8qKiovIH0sXG4vKiAyOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblx0ZXhwb3J0c1snZGVmYXVsdCddID0gc3ByaW5nO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXHRcblx0dmFyIF9wcmVzZXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdHZhciBfcHJlc2V0czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcmVzZXRzKTtcblx0XG5cdC8vIGluc3RlYWQgb2YgZXhwb3Npbmcge3ZhbDogYmxhLCBjb25maWc6IGJsYX0sIHVzZSBhIGhlbHBlclxuXHRcblx0ZnVuY3Rpb24gc3ByaW5nKHZhbCkge1xuXHQgIHZhciBjb25maWcgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBfcHJlc2V0czJbJ2RlZmF1bHQnXS5ub1dvYmJsZSA6IGFyZ3VtZW50c1sxXTtcblx0XG5cdCAgcmV0dXJuIHsgdmFsOiB2YWwsIGNvbmZpZzogY29uZmlnIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuLyogMzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0ZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblx0ZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBzdGVwcGVyO1xuXHR2YXIgZXJyb3JNYXJnaW4gPSAwLjAwMDE7XG5cdFxuXHRmdW5jdGlvbiBzdGVwcGVyKGZyYW1lUmF0ZSwgeCwgdiwgZGVzdFgsIGssIGIpIHtcblx0ICAvLyBTcHJpbmcgc3RpZmZuZXNzLCBpbiBrZyAvIHNeMlxuXHRcblx0ICAvLyBmb3IgYW5pbWF0aW9ucywgZGVzdFggaXMgcmVhbGx5IHNwcmluZyBsZW5ndGggKHNwcmluZyBhdCByZXN0KS4gaW5pdGlhbFxuXHQgIC8vIHBvc2l0aW9uIGlzIGNvbnNpZGVyZWQgYXMgdGhlIHN0cmV0Y2hlZC9jb21wcmVzc2VkIHBvc2l0aW9uIG9mIGEgc3ByaW5nXG5cdCAgdmFyIEZzcHJpbmcgPSAtayAqICh4IC0gZGVzdFgpO1xuXHRcblx0ICAvLyBEYW1waW5nLCBpbiBrZyAvIHNcblx0ICB2YXIgRmRhbXBlciA9IC1iICogdjtcblx0XG5cdCAgLy8gdXN1YWxseSB3ZSBwdXQgbWFzcyBoZXJlLCBidXQgZm9yIGFuaW1hdGlvbiBwdXJwb3Nlcywgc3BlY2lmeWluZyBtYXNzIGlzIGFcblx0ICAvLyBiaXQgcmVkdW5kYW50LiB5b3UgY291bGQgc2ltcGx5IGFkanVzdCBrIGFuZCBiIGFjY29yZGluZ2x5XG5cdCAgLy8gbGV0IGEgPSAoRnNwcmluZyArIEZkYW1wZXIpIC8gbWFzcztcblx0ICB2YXIgYSA9IEZzcHJpbmcgKyBGZGFtcGVyO1xuXHRcblx0ICB2YXIgbmV3ViA9IHYgKyBhICogZnJhbWVSYXRlO1xuXHQgIHZhciBuZXdYID0geCArIG5ld1YgKiBmcmFtZVJhdGU7XG5cdFxuXHQgIGlmIChNYXRoLmFicyhuZXdWIC0gdikgPCBlcnJvck1hcmdpbiAmJiBNYXRoLmFicyhuZXdYIC0geCkgPCBlcnJvck1hcmdpbikge1xuXHQgICAgcmV0dXJuIFtkZXN0WCwgMF07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gW25ld1gsIG5ld1ZdO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG4vKioqLyB9LFxuLyogMzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIHR1cm4ge3g6IHt2YWw6IDEsIGNvbmZpZzogWzEsIDJdfSwgeTogMn0gaW50byB7eDogMSwgeTogMn1cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IHN0cmlwU3R5bGU7XG5cdFxuXHRmdW5jdGlvbiBzdHJpcFN0eWxlKHN0eWxlKSB7XG5cdCAgdmFyIHJldCA9IHt9O1xuXHQgIGZvciAodmFyIGtleSBpbiBzdHlsZSkge1xuXHQgICAgaWYgKCFzdHlsZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHQgICAgcmV0W2tleV0gPSBzdHlsZVtrZXldLnZhbCA9PSBudWxsID8gc3R5bGVba2V5XSA6IHN0eWxlW2tleV0udmFsO1xuXHQgIH1cblx0ICByZXR1cm4gcmV0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG4vKioqLyB9LFxuLyogMzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cdGV4cG9ydHMuaW50ZXJwb2xhdGVWYWx1ZSA9IGludGVycG9sYXRlVmFsdWU7XG5cdGV4cG9ydHMudXBkYXRlQ3VycmVudFN0eWxlID0gdXBkYXRlQ3VycmVudFN0eWxlO1xuXHRleHBvcnRzLnVwZGF0ZUN1cnJlbnRWZWxvY2l0eSA9IHVwZGF0ZUN1cnJlbnRWZWxvY2l0eTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdHZhciBfc3RlcHBlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHRcblx0dmFyIF9zdGVwcGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0ZXBwZXIpO1xuXHRcblx0Ly8gVE9ETzogcmVmYWN0b3IgY29tbW9uIGxvZ2ljIHdpdGggdXBkYXRlQ3VyclZhbHVlIGFuZCB1cGRhdGVDdXJyVmVsb2NpdHlcblx0XG5cdGZ1bmN0aW9uIGludGVycG9sYXRlVmFsdWUoYWxwaGEsIG5leHRTdHlsZSwgcHJldlN0eWxlKSB7XG5cdCAgLy8gbWlnaHQgYmUgdXNlZCBieSBhIFRyYW5zaXRpb25Nb3Rpb24sIHdoZXJlIHByZXZTdHlsZSBtaWdodCBub3QgZXhpc3QgYW55bW9yZVxuXHQgIGlmICghcHJldlN0eWxlKSB7XG5cdCAgICByZXR1cm4gbmV4dFN0eWxlO1xuXHQgIH1cblx0XG5cdCAgdmFyIHJldCA9IHt9O1xuXHQgIGZvciAodmFyIGtleSBpbiBuZXh0U3R5bGUpIHtcblx0ICAgIGlmICghbmV4dFN0eWxlLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFuZXh0U3R5bGVba2V5XS5jb25maWcpIHtcblx0ICAgICAgcmV0W2tleV0gPSBuZXh0U3R5bGVba2V5XTtcblx0ICAgICAgLy8gbm90IGEgc3ByaW5nIGNvbmZpZywgbm90IHNvbWV0aGluZyB3ZSB3YW50IHRvIGludGVycG9sYXRlXG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHQgICAgdmFyIHByZXZWYWx1ZSA9IHByZXZTdHlsZVtrZXldLmNvbmZpZyA/IHByZXZTdHlsZVtrZXldLnZhbCA6IHByZXZTdHlsZVtrZXldO1xuXHQgICAgcmV0W2tleV0gPSB7XG5cdCAgICAgIHZhbDogbmV4dFN0eWxlW2tleV0udmFsICogYWxwaGEgKyBwcmV2VmFsdWUgKiAoMSAtIGFscGhhKSxcblx0ICAgICAgY29uZmlnOiBuZXh0U3R5bGVba2V5XS5jb25maWdcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gcmV0O1xuXHR9XG5cdFxuXHQvLyBUT0RPOiByZWZhY3RvciBjb21tb24gbG9naWMgd2l0aCB1cGRhdGVDdXJyZW50VmVsb2NpdHlcblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZUN1cnJlbnRTdHlsZShmcmFtZVJhdGUsIGN1cnJlbnRTdHlsZSwgY3VycmVudFZlbG9jaXR5LCBzdHlsZSkge1xuXHQgIHZhciByZXQgPSB7fTtcblx0ICBmb3IgKHZhciBrZXkgaW4gc3R5bGUpIHtcblx0ICAgIGlmICghc3R5bGUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0ICAgIGlmICghc3R5bGVba2V5XS5jb25maWcpIHtcblx0ICAgICAgcmV0W2tleV0gPSBzdHlsZVtrZXldO1xuXHQgICAgICAvLyBub3QgYSBzcHJpbmcgY29uZmlnLCBub3Qgc29tZXRoaW5nIHdlIHdhbnQgdG8gaW50ZXJwb2xhdGVcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdCAgICB2YXIgX3N0eWxlJGtleSRjb25maWcgPSBzdHlsZVtrZXldLmNvbmZpZztcblx0ICAgIHZhciBrID0gX3N0eWxlJGtleSRjb25maWdbMF07XG5cdCAgICB2YXIgYiA9IF9zdHlsZSRrZXkkY29uZmlnWzFdO1xuXHRcblx0ICAgIHZhciB2YWwgPSBfc3RlcHBlcjJbJ2RlZmF1bHQnXShmcmFtZVJhdGUsXG5cdCAgICAvLyBtaWdodCBoYXZlIGJlZW4gYSBub24tc3ByaW5nZWQgcHJvcCB0aGF0IGp1c3QgYmVjYW1lIG9uZVxuXHQgICAgY3VycmVudFN0eWxlW2tleV0udmFsID09IG51bGwgPyBjdXJyZW50U3R5bGVba2V5XSA6IGN1cnJlbnRTdHlsZVtrZXldLnZhbCwgY3VycmVudFZlbG9jaXR5W2tleV0sIHN0eWxlW2tleV0udmFsLCBrLCBiKVswXTtcblx0ICAgIHJldFtrZXldID0ge1xuXHQgICAgICB2YWw6IHZhbCxcblx0ICAgICAgY29uZmlnOiBzdHlsZVtrZXldLmNvbmZpZ1xuXHQgICAgfTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlQ3VycmVudFZlbG9jaXR5KGZyYW1lUmF0ZSwgY3VycmVudFN0eWxlLCBjdXJyZW50VmVsb2NpdHksIHN0eWxlKSB7XG5cdCAgdmFyIHJldCA9IHt9O1xuXHQgIGZvciAodmFyIGtleSBpbiBzdHlsZSkge1xuXHQgICAgaWYgKCFzdHlsZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHQgICAgaWYgKCFzdHlsZVtrZXldLmNvbmZpZykge1xuXHQgICAgICAvLyBub3QgYSBzcHJpbmcgY29uZmlnLCBub3Qgc29tZXRoaW5nIHdlIHdhbnQgdG8gaW50ZXJwb2xhdGVcblx0ICAgICAgcmV0W2tleV0gPSAwO1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0ICAgIHZhciBfc3R5bGUka2V5JGNvbmZpZzIgPSBzdHlsZVtrZXldLmNvbmZpZztcblx0ICAgIHZhciBrID0gX3N0eWxlJGtleSRjb25maWcyWzBdO1xuXHQgICAgdmFyIGIgPSBfc3R5bGUka2V5JGNvbmZpZzJbMV07XG5cdFxuXHQgICAgdmFyIHZhbCA9IF9zdGVwcGVyMlsnZGVmYXVsdCddKGZyYW1lUmF0ZSxcblx0ICAgIC8vIG1pZ2h0IGhhdmUgYmVlbiBhIG5vbi1zcHJpbmdlZCBwcm9wIHRoYXQganVzdCBiZWNhbWUgb25lXG5cdCAgICBjdXJyZW50U3R5bGVba2V5XS52YWwgPT0gbnVsbCA/IGN1cnJlbnRTdHlsZVtrZXldIDogY3VycmVudFN0eWxlW2tleV0udmFsLCBjdXJyZW50VmVsb2NpdHlba2V5XSwgc3R5bGVba2V5XS52YWwsIGssIGIpWzFdO1xuXHQgICAgcmV0W2tleV0gPSB2YWw7XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDMzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyB1c2VkIGJ5IHRoZSB0cmVlLXdhbGtpbmcgdXBkYXRlcyBhbmQgc3ByaW5ncy4gQXZvaWRzIHNvbWUgYWxsb2NhdGlvbnNcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IHplcm87XG5cdFxuXHRmdW5jdGlvbiB6ZXJvKCkge1xuXHQgIHJldHVybiAwO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG4vKioqLyB9LFxuLyogMzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBub3cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKVxuXHQgICwgZ2xvYmFsID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgPyB7fSA6IHdpbmRvd1xuXHQgICwgdmVuZG9ycyA9IFsnbW96JywgJ3dlYmtpdCddXG5cdCAgLCBzdWZmaXggPSAnQW5pbWF0aW9uRnJhbWUnXG5cdCAgLCByYWYgPSBnbG9iYWxbJ3JlcXVlc3QnICsgc3VmZml4XVxuXHQgICwgY2FmID0gZ2xvYmFsWydjYW5jZWwnICsgc3VmZml4XSB8fCBnbG9iYWxbJ2NhbmNlbFJlcXVlc3QnICsgc3VmZml4XVxuXHRcblx0Zm9yKHZhciBpID0gMDsgaSA8IHZlbmRvcnMubGVuZ3RoICYmICFyYWY7IGkrKykge1xuXHQgIHJhZiA9IGdsb2JhbFt2ZW5kb3JzW2ldICsgJ1JlcXVlc3QnICsgc3VmZml4XVxuXHQgIGNhZiA9IGdsb2JhbFt2ZW5kb3JzW2ldICsgJ0NhbmNlbCcgKyBzdWZmaXhdXG5cdCAgICAgIHx8IGdsb2JhbFt2ZW5kb3JzW2ldICsgJ0NhbmNlbFJlcXVlc3QnICsgc3VmZml4XVxuXHR9XG5cdFxuXHQvLyBTb21lIHZlcnNpb25zIG9mIEZGIGhhdmUgckFGIGJ1dCBub3QgY0FGXG5cdGlmKCFyYWYgfHwgIWNhZikge1xuXHQgIHZhciBsYXN0ID0gMFxuXHQgICAgLCBpZCA9IDBcblx0ICAgICwgcXVldWUgPSBbXVxuXHQgICAgLCBmcmFtZUR1cmF0aW9uID0gMTAwMCAvIDYwXG5cdFxuXHQgIHJhZiA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cdCAgICBpZihxdWV1ZS5sZW5ndGggPT09IDApIHtcblx0ICAgICAgdmFyIF9ub3cgPSBub3coKVxuXHQgICAgICAgICwgbmV4dCA9IE1hdGgubWF4KDAsIGZyYW1lRHVyYXRpb24gLSAoX25vdyAtIGxhc3QpKVxuXHQgICAgICBsYXN0ID0gbmV4dCArIF9ub3dcblx0ICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgY3AgPSBxdWV1ZS5zbGljZSgwKVxuXHQgICAgICAgIC8vIENsZWFyIHF1ZXVlIGhlcmUgdG8gcHJldmVudFxuXHQgICAgICAgIC8vIGNhbGxiYWNrcyBmcm9tIGFwcGVuZGluZyBsaXN0ZW5lcnNcblx0ICAgICAgICAvLyB0byB0aGUgY3VycmVudCBmcmFtZSdzIHF1ZXVlXG5cdCAgICAgICAgcXVldWUubGVuZ3RoID0gMFxuXHQgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjcC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgaWYoIWNwW2ldLmNhbmNlbGxlZCkge1xuXHQgICAgICAgICAgICB0cnl7XG5cdCAgICAgICAgICAgICAgY3BbaV0uY2FsbGJhY2sobGFzdClcblx0ICAgICAgICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgdGhyb3cgZSB9LCAwKVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCBNYXRoLnJvdW5kKG5leHQpKVxuXHQgICAgfVxuXHQgICAgcXVldWUucHVzaCh7XG5cdCAgICAgIGhhbmRsZTogKytpZCxcblx0ICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuXHQgICAgICBjYW5jZWxsZWQ6IGZhbHNlXG5cdCAgICB9KVxuXHQgICAgcmV0dXJuIGlkXG5cdCAgfVxuXHRcblx0ICBjYWYgPSBmdW5jdGlvbihoYW5kbGUpIHtcblx0ICAgIGZvcih2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuXHQgICAgICBpZihxdWV1ZVtpXS5oYW5kbGUgPT09IGhhbmRsZSkge1xuXHQgICAgICAgIHF1ZXVlW2ldLmNhbmNlbGxlZCA9IHRydWVcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbikge1xuXHQgIC8vIFdyYXAgaW4gYSBuZXcgZnVuY3Rpb24gdG8gcHJldmVudFxuXHQgIC8vIGBjYW5jZWxgIHBvdGVudGlhbGx5IGJlaW5nIGFzc2lnbmVkXG5cdCAgLy8gdG8gdGhlIG5hdGl2ZSByQUYgZnVuY3Rpb25cblx0ICByZXR1cm4gcmFmLmNhbGwoZ2xvYmFsLCBmbilcblx0fVxuXHRtb2R1bGUuZXhwb3J0cy5jYW5jZWwgPSBmdW5jdGlvbigpIHtcblx0ICBjYWYuYXBwbHkoZ2xvYmFsLCBhcmd1bWVudHMpXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24obW9kdWxlLCBnbG9iYWwsIHByb2Nlc3MpIHsvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCwgQWxsIHJpZ2h0cyByZXNlcnZlZC4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cdFxuXHQ7KGZ1bmN0aW9uICh1bmRlZmluZWQpIHtcblx0XG5cdCAgdmFyIG9iamVjdFR5cGVzID0ge1xuXHQgICAgJ2Z1bmN0aW9uJzogdHJ1ZSxcblx0ICAgICdvYmplY3QnOiB0cnVlXG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gY2hlY2tHbG9iYWwodmFsdWUpIHtcblx0ICAgIHJldHVybiAodmFsdWUgJiYgdmFsdWUuT2JqZWN0ID09PSBPYmplY3QpID8gdmFsdWUgOiBudWxsO1xuXHQgIH1cblx0XG5cdCAgdmFyIGZyZWVFeHBvcnRzID0gKG9iamVjdFR5cGVzW3R5cGVvZiBleHBvcnRzXSAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlKSA/IGV4cG9ydHMgOiBudWxsO1xuXHQgIHZhciBmcmVlTW9kdWxlID0gKG9iamVjdFR5cGVzW3R5cGVvZiBtb2R1bGVdICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlKSA/IG1vZHVsZSA6IG51bGw7XG5cdCAgdmFyIGZyZWVHbG9iYWwgPSBjaGVja0dsb2JhbChmcmVlRXhwb3J0cyAmJiBmcmVlTW9kdWxlICYmIHR5cGVvZiBnbG9iYWwgPT09ICdvYmplY3QnICYmIGdsb2JhbCk7XG5cdCAgdmFyIGZyZWVTZWxmID0gY2hlY2tHbG9iYWwob2JqZWN0VHlwZXNbdHlwZW9mIHNlbGZdICYmIHNlbGYpO1xuXHQgIHZhciBmcmVlV2luZG93ID0gY2hlY2tHbG9iYWwob2JqZWN0VHlwZXNbdHlwZW9mIHdpbmRvd10gJiYgd2luZG93KTtcblx0ICB2YXIgbW9kdWxlRXhwb3J0cyA9IChmcmVlTW9kdWxlICYmIGZyZWVNb2R1bGUuZXhwb3J0cyA9PT0gZnJlZUV4cG9ydHMpID8gZnJlZUV4cG9ydHMgOiBudWxsO1xuXHQgIHZhciB0aGlzR2xvYmFsID0gY2hlY2tHbG9iYWwob2JqZWN0VHlwZXNbdHlwZW9mIHRoaXNdICYmIHRoaXMpO1xuXHQgIHZhciByb290ID0gZnJlZUdsb2JhbCB8fCAoKGZyZWVXaW5kb3cgIT09ICh0aGlzR2xvYmFsICYmIHRoaXNHbG9iYWwud2luZG93KSkgJiYgZnJlZVdpbmRvdykgfHwgZnJlZVNlbGYgfHwgdGhpc0dsb2JhbCB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHRcblx0ICB2YXIgUnggPSB7XG5cdCAgICBpbnRlcm5hbHM6IHt9LFxuXHQgICAgY29uZmlnOiB7XG5cdCAgICAgIFByb21pc2U6IHJvb3QuUHJvbWlzZVxuXHQgICAgfSxcblx0ICAgIGhlbHBlcnM6IHsgfVxuXHQgIH07XG5cdFxuXHQgIC8vIERlZmF1bHRzXG5cdCAgdmFyIG5vb3AgPSBSeC5oZWxwZXJzLm5vb3AgPSBmdW5jdGlvbiAoKSB7IH0sXG5cdCAgICBpZGVudGl0eSA9IFJ4LmhlbHBlcnMuaWRlbnRpdHkgPSBmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSxcblx0ICAgIGRlZmF1bHROb3cgPSBSeC5oZWxwZXJzLmRlZmF1bHROb3cgPSBEYXRlLm5vdyxcblx0ICAgIGRlZmF1bHRDb21wYXJlciA9IFJ4LmhlbHBlcnMuZGVmYXVsdENvbXBhcmVyID0gZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGlzRXF1YWwoeCwgeSk7IH0sXG5cdCAgICBkZWZhdWx0U3ViQ29tcGFyZXIgPSBSeC5oZWxwZXJzLmRlZmF1bHRTdWJDb21wYXJlciA9IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ID4geSA/IDEgOiAoeCA8IHkgPyAtMSA6IDApOyB9LFxuXHQgICAgZGVmYXVsdEtleVNlcmlhbGl6ZXIgPSBSeC5oZWxwZXJzLmRlZmF1bHRLZXlTZXJpYWxpemVyID0gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudG9TdHJpbmcoKTsgfSxcblx0ICAgIGRlZmF1bHRFcnJvciA9IFJ4LmhlbHBlcnMuZGVmYXVsdEVycm9yID0gZnVuY3Rpb24gKGVycikgeyB0aHJvdyBlcnI7IH0sXG5cdCAgICBpc1Byb21pc2UgPSBSeC5oZWxwZXJzLmlzUHJvbWlzZSA9IGZ1bmN0aW9uIChwKSB7IHJldHVybiAhIXAgJiYgdHlwZW9mIHAuc3Vic2NyaWJlICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBwLnRoZW4gPT09ICdmdW5jdGlvbic7IH0sXG5cdCAgICBpc0Z1bmN0aW9uID0gUnguaGVscGVycy5pc0Z1bmN0aW9uID0gKGZ1bmN0aW9uICgpIHtcblx0XG5cdCAgICAgIHZhciBpc0ZuID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nIHx8IGZhbHNlO1xuXHQgICAgICB9O1xuXHRcblx0ICAgICAgLy8gZmFsbGJhY2sgZm9yIG9sZGVyIHZlcnNpb25zIG9mIENocm9tZSBhbmQgU2FmYXJpXG5cdCAgICAgIGlmIChpc0ZuKC94LykpIHtcblx0ICAgICAgICBpc0ZuID0gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJyAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSAnW29iamVjdCBGdW5jdGlvbl0nO1xuXHQgICAgICAgIH07XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBpc0ZuO1xuXHQgICAgfSgpKTtcblx0XG5cdCAgICBmdW5jdGlvbiBjbG9uZUFycmF5KGFycikge1xuXHQgICAgICB2YXIgbGVuID0gYXJyLmxlbmd0aCwgYSA9IG5ldyBBcnJheShsZW4pO1xuXHQgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYVtpXSA9IGFycltpXTsgfVxuXHQgICAgICByZXR1cm4gYTtcblx0ICAgIH1cblx0XG5cdCAgdmFyIGVycm9yT2JqID0ge2U6IHt9fTtcblx0ICBcblx0ICBmdW5jdGlvbiB0cnlDYXRjaGVyR2VuKHRyeUNhdGNoVGFyZ2V0KSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gdHJ5Q2F0Y2hlcigpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXR1cm4gdHJ5Q2F0Y2hUYXJnZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGVycm9yT2JqLmUgPSBlO1xuXHQgICAgICAgIHJldHVybiBlcnJvck9iajtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHZhciB0cnlDYXRjaCA9IFJ4LmludGVybmFscy50cnlDYXRjaCA9IGZ1bmN0aW9uIHRyeUNhdGNoKGZuKSB7XG5cdCAgICBpZiAoIWlzRnVuY3Rpb24oZm4pKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ2ZuIG11c3QgYmUgYSBmdW5jdGlvbicpOyB9XG5cdCAgICByZXR1cm4gdHJ5Q2F0Y2hlckdlbihmbik7XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gdGhyb3dlcihlKSB7XG5cdCAgICB0aHJvdyBlO1xuXHQgIH1cblx0XG5cdCAgUnguY29uZmlnLmxvbmdTdGFja1N1cHBvcnQgPSBmYWxzZTtcblx0ICB2YXIgaGFzU3RhY2tzID0gZmFsc2UsIHN0YWNrcyA9IHRyeUNhdGNoKGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKCk7IH0pKCk7XG5cdCAgaGFzU3RhY2tzID0gISFzdGFja3MuZSAmJiAhIXN0YWNrcy5lLnN0YWNrO1xuXHRcblx0ICAvLyBBbGwgY29kZSBhZnRlciB0aGlzIHBvaW50IHdpbGwgYmUgZmlsdGVyZWQgZnJvbSBzdGFjayB0cmFjZXMgcmVwb3J0ZWQgYnkgUnhKU1xuXHQgIHZhciByU3RhcnRpbmdMaW5lID0gY2FwdHVyZUxpbmUoKSwgckZpbGVOYW1lO1xuXHRcblx0ICB2YXIgU1RBQ0tfSlVNUF9TRVBBUkFUT1IgPSAnRnJvbSBwcmV2aW91cyBldmVudDonO1xuXHRcblx0ICBmdW5jdGlvbiBtYWtlU3RhY2tUcmFjZUxvbmcoZXJyb3IsIG9ic2VydmFibGUpIHtcblx0ICAgIC8vIElmIHBvc3NpYmxlLCB0cmFuc2Zvcm0gdGhlIGVycm9yIHN0YWNrIHRyYWNlIGJ5IHJlbW92aW5nIE5vZGUgYW5kIFJ4SlNcblx0ICAgIC8vIGNydWZ0LCB0aGVuIGNvbmNhdGVuYXRpbmcgd2l0aCB0aGUgc3RhY2sgdHJhY2Ugb2YgYG9ic2VydmFibGVgLlxuXHQgICAgaWYgKGhhc1N0YWNrcyAmJlxuXHQgICAgICAgIG9ic2VydmFibGUuc3RhY2sgJiZcblx0ICAgICAgICB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmXG5cdCAgICAgICAgZXJyb3IgIT09IG51bGwgJiZcblx0ICAgICAgICBlcnJvci5zdGFjayAmJlxuXHQgICAgICAgIGVycm9yLnN0YWNrLmluZGV4T2YoU1RBQ0tfSlVNUF9TRVBBUkFUT1IpID09PSAtMVxuXHQgICAgKSB7XG5cdCAgICAgIHZhciBzdGFja3MgPSBbXTtcblx0ICAgICAgZm9yICh2YXIgbyA9IG9ic2VydmFibGU7ICEhbzsgbyA9IG8uc291cmNlKSB7XG5cdCAgICAgICAgaWYgKG8uc3RhY2spIHtcblx0ICAgICAgICAgIHN0YWNrcy51bnNoaWZ0KG8uc3RhY2spO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBzdGFja3MudW5zaGlmdChlcnJvci5zdGFjayk7XG5cdFxuXHQgICAgICB2YXIgY29uY2F0ZWRTdGFja3MgPSBzdGFja3Muam9pbignXFxuJyArIFNUQUNLX0pVTVBfU0VQQVJBVE9SICsgJ1xcbicpO1xuXHQgICAgICBlcnJvci5zdGFjayA9IGZpbHRlclN0YWNrU3RyaW5nKGNvbmNhdGVkU3RhY2tzKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGZpbHRlclN0YWNrU3RyaW5nKHN0YWNrU3RyaW5nKSB7XG5cdCAgICB2YXIgbGluZXMgPSBzdGFja1N0cmluZy5zcGxpdCgnXFxuJyksIGRlc2lyZWRMaW5lcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGxpbmVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgIHZhciBsaW5lID0gbGluZXNbaV07XG5cdFxuXHQgICAgICBpZiAoIWlzSW50ZXJuYWxGcmFtZShsaW5lKSAmJiAhaXNOb2RlRnJhbWUobGluZSkgJiYgbGluZSkge1xuXHQgICAgICAgIGRlc2lyZWRMaW5lcy5wdXNoKGxpbmUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZGVzaXJlZExpbmVzLmpvaW4oJ1xcbicpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaXNJbnRlcm5hbEZyYW1lKHN0YWNrTGluZSkge1xuXHQgICAgdmFyIGZpbGVOYW1lQW5kTGluZU51bWJlciA9IGdldEZpbGVOYW1lQW5kTGluZU51bWJlcihzdGFja0xpbmUpO1xuXHQgICAgaWYgKCFmaWxlTmFtZUFuZExpbmVOdW1iZXIpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgICAgdmFyIGZpbGVOYW1lID0gZmlsZU5hbWVBbmRMaW5lTnVtYmVyWzBdLCBsaW5lTnVtYmVyID0gZmlsZU5hbWVBbmRMaW5lTnVtYmVyWzFdO1xuXHRcblx0ICAgIHJldHVybiBmaWxlTmFtZSA9PT0gckZpbGVOYW1lICYmXG5cdCAgICAgIGxpbmVOdW1iZXIgPj0gclN0YXJ0aW5nTGluZSAmJlxuXHQgICAgICBsaW5lTnVtYmVyIDw9IHJFbmRpbmdMaW5lO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaXNOb2RlRnJhbWUoc3RhY2tMaW5lKSB7XG5cdCAgICByZXR1cm4gc3RhY2tMaW5lLmluZGV4T2YoJyhtb2R1bGUuanM6JykgIT09IC0xIHx8XG5cdCAgICAgIHN0YWNrTGluZS5pbmRleE9mKCcobm9kZS5qczonKSAhPT0gLTE7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjYXB0dXJlTGluZSgpIHtcblx0ICAgIGlmICghaGFzU3RhY2tzKSB7IHJldHVybjsgfVxuXHRcblx0ICAgIHRyeSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB2YXIgbGluZXMgPSBlLnN0YWNrLnNwbGl0KCdcXG4nKTtcblx0ICAgICAgdmFyIGZpcnN0TGluZSA9IGxpbmVzWzBdLmluZGV4T2YoJ0AnKSA+IDAgPyBsaW5lc1sxXSA6IGxpbmVzWzJdO1xuXHQgICAgICB2YXIgZmlsZU5hbWVBbmRMaW5lTnVtYmVyID0gZ2V0RmlsZU5hbWVBbmRMaW5lTnVtYmVyKGZpcnN0TGluZSk7XG5cdCAgICAgIGlmICghZmlsZU5hbWVBbmRMaW5lTnVtYmVyKSB7IHJldHVybjsgfVxuXHRcblx0ICAgICAgckZpbGVOYW1lID0gZmlsZU5hbWVBbmRMaW5lTnVtYmVyWzBdO1xuXHQgICAgICByZXR1cm4gZmlsZU5hbWVBbmRMaW5lTnVtYmVyWzFdO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZ2V0RmlsZU5hbWVBbmRMaW5lTnVtYmVyKHN0YWNrTGluZSkge1xuXHQgICAgLy8gTmFtZWQgZnVuY3Rpb25zOiAnYXQgZnVuY3Rpb25OYW1lIChmaWxlbmFtZTpsaW5lTnVtYmVyOmNvbHVtbk51bWJlciknXG5cdCAgICB2YXIgYXR0ZW1wdDEgPSAvYXQgLisgXFwoKC4rKTooXFxkKyk6KD86XFxkKylcXCkkLy5leGVjKHN0YWNrTGluZSk7XG5cdCAgICBpZiAoYXR0ZW1wdDEpIHsgcmV0dXJuIFthdHRlbXB0MVsxXSwgTnVtYmVyKGF0dGVtcHQxWzJdKV07IH1cblx0XG5cdCAgICAvLyBBbm9ueW1vdXMgZnVuY3Rpb25zOiAnYXQgZmlsZW5hbWU6bGluZU51bWJlcjpjb2x1bW5OdW1iZXInXG5cdCAgICB2YXIgYXR0ZW1wdDIgPSAvYXQgKFteIF0rKTooXFxkKyk6KD86XFxkKykkLy5leGVjKHN0YWNrTGluZSk7XG5cdCAgICBpZiAoYXR0ZW1wdDIpIHsgcmV0dXJuIFthdHRlbXB0MlsxXSwgTnVtYmVyKGF0dGVtcHQyWzJdKV07IH1cblx0XG5cdCAgICAvLyBGaXJlZm94IHN0eWxlOiAnZnVuY3Rpb25AZmlsZW5hbWU6bGluZU51bWJlciBvciBAZmlsZW5hbWU6bGluZU51bWJlcidcblx0ICAgIHZhciBhdHRlbXB0MyA9IC8uKkAoLispOihcXGQrKSQvLmV4ZWMoc3RhY2tMaW5lKTtcblx0ICAgIGlmIChhdHRlbXB0MykgeyByZXR1cm4gW2F0dGVtcHQzWzFdLCBOdW1iZXIoYXR0ZW1wdDNbMl0pXTsgfVxuXHQgIH1cblx0XG5cdCAgdmFyIEVtcHR5RXJyb3IgPSBSeC5FbXB0eUVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICB0aGlzLm1lc3NhZ2UgPSAnU2VxdWVuY2UgY29udGFpbnMgbm8gZWxlbWVudHMuJztcblx0ICAgIEVycm9yLmNhbGwodGhpcyk7XG5cdCAgfTtcblx0ICBFbXB0eUVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcblx0ICBFbXB0eUVycm9yLnByb3RvdHlwZS5uYW1lID0gJ0VtcHR5RXJyb3InO1xuXHRcblx0ICB2YXIgT2JqZWN0RGlzcG9zZWRFcnJvciA9IFJ4Lk9iamVjdERpc3Bvc2VkRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIHRoaXMubWVzc2FnZSA9ICdPYmplY3QgaGFzIGJlZW4gZGlzcG9zZWQnO1xuXHQgICAgRXJyb3IuY2FsbCh0aGlzKTtcblx0ICB9O1xuXHQgIE9iamVjdERpc3Bvc2VkRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuXHQgIE9iamVjdERpc3Bvc2VkRXJyb3IucHJvdG90eXBlLm5hbWUgPSAnT2JqZWN0RGlzcG9zZWRFcnJvcic7XG5cdFxuXHQgIHZhciBBcmd1bWVudE91dE9mUmFuZ2VFcnJvciA9IFJ4LkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5tZXNzYWdlID0gJ0FyZ3VtZW50IG91dCBvZiByYW5nZSc7XG5cdCAgICBFcnJvci5jYWxsKHRoaXMpO1xuXHQgIH07XG5cdCAgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuXHQgIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLnByb3RvdHlwZS5uYW1lID0gJ0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yJztcblx0XG5cdCAgdmFyIE5vdFN1cHBvcnRlZEVycm9yID0gUnguTm90U3VwcG9ydGVkRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuXHQgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZSB8fCAnVGhpcyBvcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZCc7XG5cdCAgICBFcnJvci5jYWxsKHRoaXMpO1xuXHQgIH07XG5cdCAgTm90U3VwcG9ydGVkRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuXHQgIE5vdFN1cHBvcnRlZEVycm9yLnByb3RvdHlwZS5uYW1lID0gJ05vdFN1cHBvcnRlZEVycm9yJztcblx0XG5cdCAgdmFyIE5vdEltcGxlbWVudGVkRXJyb3IgPSBSeC5Ob3RJbXBsZW1lbnRlZEVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcblx0ICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2UgfHwgJ1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBpbXBsZW1lbnRlZCc7XG5cdCAgICBFcnJvci5jYWxsKHRoaXMpO1xuXHQgIH07XG5cdCAgTm90SW1wbGVtZW50ZWRFcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5cdCAgTm90SW1wbGVtZW50ZWRFcnJvci5wcm90b3R5cGUubmFtZSA9ICdOb3RJbXBsZW1lbnRlZEVycm9yJztcblx0XG5cdCAgdmFyIG5vdEltcGxlbWVudGVkID0gUnguaGVscGVycy5ub3RJbXBsZW1lbnRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKCk7XG5cdCAgfTtcblx0XG5cdCAgdmFyIG5vdFN1cHBvcnRlZCA9IFJ4LmhlbHBlcnMubm90U3VwcG9ydGVkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhyb3cgbmV3IE5vdFN1cHBvcnRlZEVycm9yKCk7XG5cdCAgfTtcblx0XG5cdCAgLy8gU2hpbSBpbiBpdGVyYXRvciBzdXBwb3J0XG5cdCAgdmFyICRpdGVyYXRvciQgPSAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2wuaXRlcmF0b3IpIHx8XG5cdCAgICAnX2VzNnNoaW1faXRlcmF0b3JfJztcblx0ICAvLyBCdWcgZm9yIG1vemlsbGEgdmVyc2lvblxuXHQgIGlmIChyb290LlNldCAmJiB0eXBlb2YgbmV3IHJvb3QuU2V0KClbJ0BAaXRlcmF0b3InXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgJGl0ZXJhdG9yJCA9ICdAQGl0ZXJhdG9yJztcblx0ICB9XG5cdFxuXHQgIHZhciBkb25lRW51bWVyYXRvciA9IFJ4LmRvbmVFbnVtZXJhdG9yID0geyBkb25lOiB0cnVlLCB2YWx1ZTogdW5kZWZpbmVkIH07XG5cdFxuXHQgIHZhciBpc0l0ZXJhYmxlID0gUnguaGVscGVycy5pc0l0ZXJhYmxlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgIHJldHVybiBvICYmIG9bJGl0ZXJhdG9yJF0gIT09IHVuZGVmaW5lZDtcblx0ICB9O1xuXHRcblx0ICB2YXIgaXNBcnJheUxpa2UgPSBSeC5oZWxwZXJzLmlzQXJyYXlMaWtlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgIHJldHVybiBvICYmIG8ubGVuZ3RoICE9PSB1bmRlZmluZWQ7XG5cdCAgfTtcblx0XG5cdCAgUnguaGVscGVycy5pdGVyYXRvciA9ICRpdGVyYXRvciQ7XG5cdFxuXHQgIHZhciBiaW5kQ2FsbGJhY2sgPSBSeC5pbnRlcm5hbHMuYmluZENhbGxiYWNrID0gZnVuY3Rpb24gKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KSB7XG5cdCAgICBpZiAodHlwZW9mIHRoaXNBcmcgPT09ICd1bmRlZmluZWQnKSB7IHJldHVybiBmdW5jOyB9XG5cdCAgICBzd2l0Y2goYXJnQ291bnQpIHtcblx0ICAgICAgY2FzZSAwOlxuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZylcblx0ICAgICAgICB9O1xuXHQgICAgICBjYXNlIDE6XG5cdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuXHQgICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmcpO1xuXHQgICAgICAgIH07XG5cdCAgICAgIGNhc2UgMjpcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgY2FzZSAzOlxuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcblx0ICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0FyZywgYXJndW1lbnRzKTtcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgLyoqIFVzZWQgdG8gZGV0ZXJtaW5lIGlmIHZhbHVlcyBhcmUgb2YgdGhlIGxhbmd1YWdlIHR5cGUgT2JqZWN0ICovXG5cdCAgdmFyIGRvbnRFbnVtcyA9IFsndG9TdHJpbmcnLFxuXHQgICAgJ3RvTG9jYWxlU3RyaW5nJyxcblx0ICAgICd2YWx1ZU9mJyxcblx0ICAgICdoYXNPd25Qcm9wZXJ0eScsXG5cdCAgICAnaXNQcm90b3R5cGVPZicsXG5cdCAgICAncHJvcGVydHlJc0VudW1lcmFibGUnLFxuXHQgICAgJ2NvbnN0cnVjdG9yJ10sXG5cdCAgZG9udEVudW1zTGVuZ3RoID0gZG9udEVudW1zLmxlbmd0aDtcblx0XG5cdHZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG5cdCAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG5cdCAgICBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuXHQgICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcblx0ICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcblx0ICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuXHQgICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG5cdCAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcblx0ICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuXHQgICAgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXScsXG5cdCAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcblx0ICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nLFxuXHQgICAgd2Vha01hcFRhZyA9ICdbb2JqZWN0IFdlYWtNYXBdJztcblx0XG5cdHZhciBhcnJheUJ1ZmZlclRhZyA9ICdbb2JqZWN0IEFycmF5QnVmZmVyXScsXG5cdCAgICBmbG9hdDMyVGFnID0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG5cdCAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsXG5cdCAgICBpbnQ4VGFnID0gJ1tvYmplY3QgSW50OEFycmF5XScsXG5cdCAgICBpbnQxNlRhZyA9ICdbb2JqZWN0IEludDE2QXJyYXldJyxcblx0ICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuXHQgICAgdWludDhUYWcgPSAnW29iamVjdCBVaW50OEFycmF5XScsXG5cdCAgICB1aW50OENsYW1wZWRUYWcgPSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuXHQgICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJyxcblx0ICAgIHVpbnQzMlRhZyA9ICdbb2JqZWN0IFVpbnQzMkFycmF5XSc7XG5cdFxuXHR2YXIgdHlwZWRBcnJheVRhZ3MgPSB7fTtcblx0dHlwZWRBcnJheVRhZ3NbZmxvYXQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1tmbG9hdDY0VGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW2ludDhUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50MTZUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbdWludDhDbGFtcGVkVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQxNlRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1t1aW50MzJUYWddID0gdHJ1ZTtcblx0dHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1thcnJheUJ1ZmZlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tib29sVGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW2RhdGVUYWddID0gdHlwZWRBcnJheVRhZ3NbZXJyb3JUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPSB0eXBlZEFycmF5VGFnc1ttYXBUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbbnVtYmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW29iamVjdFRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID0gdHlwZWRBcnJheVRhZ3Nbc2V0VGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPSB0eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXHRcblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZSxcblx0ICAgIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHksXG5cdCAgICBvYmpUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nLFxuXHQgICAgTUFYX1NBRkVfSU5URUdFUiA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG5cdFxuXHR2YXIga2V5cyA9IE9iamVjdC5rZXlzIHx8IChmdW5jdGlvbigpIHtcblx0ICAgIHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksXG5cdCAgICAgICAgaGFzRG9udEVudW1CdWcgPSAhKHsgdG9TdHJpbmc6IG51bGwgfSkucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyksXG5cdCAgICAgICAgZG9udEVudW1zID0gW1xuXHQgICAgICAgICAgJ3RvU3RyaW5nJyxcblx0ICAgICAgICAgICd0b0xvY2FsZVN0cmluZycsXG5cdCAgICAgICAgICAndmFsdWVPZicsXG5cdCAgICAgICAgICAnaGFzT3duUHJvcGVydHknLFxuXHQgICAgICAgICAgJ2lzUHJvdG90eXBlT2YnLFxuXHQgICAgICAgICAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJyxcblx0ICAgICAgICAgICdjb25zdHJ1Y3Rvcidcblx0ICAgICAgICBdLFxuXHQgICAgICAgIGRvbnRFbnVtc0xlbmd0aCA9IGRvbnRFbnVtcy5sZW5ndGg7XG5cdFxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuXHQgICAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgJiYgKHR5cGVvZiBvYmogIT09ICdmdW5jdGlvbicgfHwgb2JqID09PSBudWxsKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5rZXlzIGNhbGxlZCBvbiBub24tb2JqZWN0Jyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciByZXN1bHQgPSBbXSwgcHJvcCwgaTtcblx0XG5cdCAgICAgIGZvciAocHJvcCBpbiBvYmopIHtcblx0ICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSB7XG5cdCAgICAgICAgICByZXN1bHQucHVzaChwcm9wKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChoYXNEb250RW51bUJ1Zykge1xuXHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkb250RW51bXNMZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqLCBkb250RW51bXNbaV0pKSB7XG5cdCAgICAgICAgICAgIHJlc3VsdC5wdXNoKGRvbnRFbnVtc1tpXSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiByZXN1bHQ7XG5cdCAgICB9O1xuXHQgIH0oKSk7XG5cdFxuXHRmdW5jdGlvbiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuXHQgIHZhciBvYmpQcm9wcyA9IGtleXMob2JqZWN0KSxcblx0ICAgICAgb2JqTGVuZ3RoID0gb2JqUHJvcHMubGVuZ3RoLFxuXHQgICAgICBvdGhQcm9wcyA9IGtleXMob3RoZXIpLFxuXHQgICAgICBvdGhMZW5ndGggPSBvdGhQcm9wcy5sZW5ndGg7XG5cdFxuXHQgIGlmIChvYmpMZW5ndGggIT09IG90aExlbmd0aCAmJiAhaXNMb29zZSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICB2YXIgaW5kZXggPSBvYmpMZW5ndGgsIGtleTtcblx0ICB3aGlsZSAoaW5kZXgtLSkge1xuXHQgICAga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuXHQgICAgaWYgKCEoaXNMb29zZSA/IGtleSBpbiBvdGhlciA6IGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsIGtleSkpKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIHNraXBDdG9yID0gaXNMb29zZTtcblx0ICB3aGlsZSAoKytpbmRleCA8IG9iakxlbmd0aCkge1xuXHQgICAga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuXHQgICAgdmFyIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG5cdCAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltrZXldLFxuXHQgICAgICAgIHJlc3VsdDtcblx0XG5cdCAgICBpZiAoIShyZXN1bHQgPT09IHVuZGVmaW5lZCA/IGVxdWFsRnVuYyhvYmpWYWx1ZSwgb3RoVmFsdWUsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSA6IHJlc3VsdCkpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgICAgc2tpcEN0b3IgfHwgKHNraXBDdG9yID0ga2V5ID09PSAnY29uc3RydWN0b3InKTtcblx0ICB9XG5cdCAgaWYgKCFza2lwQ3Rvcikge1xuXHQgICAgdmFyIG9iakN0b3IgPSBvYmplY3QuY29uc3RydWN0b3IsXG5cdCAgICAgICAgb3RoQ3RvciA9IG90aGVyLmNvbnN0cnVjdG9yO1xuXHRcblx0ICAgIGlmIChvYmpDdG9yICE9PSBvdGhDdG9yICYmXG5cdCAgICAgICAgKCdjb25zdHJ1Y3RvcicgaW4gb2JqZWN0ICYmICdjb25zdHJ1Y3RvcicgaW4gb3RoZXIpICYmXG5cdCAgICAgICAgISh0eXBlb2Ygb2JqQ3RvciA9PT0gJ2Z1bmN0aW9uJyAmJiBvYmpDdG9yIGluc3RhbmNlb2Ygb2JqQ3RvciAmJlxuXHQgICAgICAgICAgdHlwZW9mIG90aEN0b3IgPT09ICdmdW5jdGlvbicgJiYgb3RoQ3RvciBpbnN0YW5jZW9mIG90aEN0b3IpKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgdGFnKSB7XG5cdCAgc3dpdGNoICh0YWcpIHtcblx0ICAgIGNhc2UgYm9vbFRhZzpcblx0ICAgIGNhc2UgZGF0ZVRhZzpcblx0ICAgICAgcmV0dXJuICtvYmplY3QgPT09ICtvdGhlcjtcblx0XG5cdCAgICBjYXNlIGVycm9yVGFnOlxuXHQgICAgICByZXR1cm4gb2JqZWN0Lm5hbWUgPT09IG90aGVyLm5hbWUgJiYgb2JqZWN0Lm1lc3NhZ2UgPT09IG90aGVyLm1lc3NhZ2U7XG5cdFxuXHQgICAgY2FzZSBudW1iZXJUYWc6XG5cdCAgICAgIHJldHVybiAob2JqZWN0ICE9PSArb2JqZWN0KSA/XG5cdCAgICAgICAgb3RoZXIgIT09ICtvdGhlciA6XG5cdCAgICAgICAgb2JqZWN0ID09PSArb3RoZXI7XG5cdFxuXHQgICAgY2FzZSByZWdleHBUYWc6XG5cdCAgICBjYXNlIHN0cmluZ1RhZzpcblx0ICAgICAgcmV0dXJuIG9iamVjdCA9PT0gKG90aGVyICsgJycpO1xuXHQgIH1cblx0ICByZXR1cm4gZmFsc2U7XG5cdH1cblx0XG5cdHZhciBpc09iamVjdCA9IFJ4LmludGVybmFscy5pc09iamVjdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT09ICdvYmplY3QnIHx8IHR5cGUgPT09ICdmdW5jdGlvbicpO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xuXHR9XG5cdFxuXHR2YXIgaXNIb3N0T2JqZWN0ID0gKGZ1bmN0aW9uKCkge1xuXHQgIHRyeSB7XG5cdCAgICBPYmplY3QoeyAndG9TdHJpbmcnOiAwIH0gKyAnJyk7XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfTtcblx0ICB9XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIHZhbHVlLnRvU3RyaW5nICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiAodmFsdWUgKyAnJykgPT09ICdzdHJpbmcnO1xuXHQgIH07XG5cdH0oKSk7XG5cdFxuXHRmdW5jdGlvbiBpc1R5cGVkQXJyYXkodmFsdWUpIHtcblx0ICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICEhdHlwZWRBcnJheVRhZ3Nbb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSldO1xuXHR9XG5cdFxuXHR2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24odmFsdWUpIHtcblx0ICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09PSBhcnJheVRhZztcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGFycmF5U29tZSAoYXJyYXksIHByZWRpY2F0ZSkge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cdFxuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBlcXVhbEFycmF5cyhhcnJheSwgb3RoZXIsIGVxdWFsRnVuYywgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgYXJyTGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuXHQgICAgICBvdGhMZW5ndGggPSBvdGhlci5sZW5ndGg7XG5cdFxuXHQgIGlmIChhcnJMZW5ndGggIT09IG90aExlbmd0aCAmJiAhKGlzTG9vc2UgJiYgb3RoTGVuZ3RoID4gYXJyTGVuZ3RoKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICAvLyBJZ25vcmUgbm9uLWluZGV4IHByb3BlcnRpZXMuXG5cdCAgd2hpbGUgKCsraW5kZXggPCBhcnJMZW5ndGgpIHtcblx0ICAgIHZhciBhcnJWYWx1ZSA9IGFycmF5W2luZGV4XSxcblx0ICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2luZGV4XSxcblx0ICAgICAgICByZXN1bHQ7XG5cdFxuXHQgICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGlmIChyZXN1bHQpIHtcblx0ICAgICAgICBjb250aW51ZTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuXHQgICAgaWYgKGlzTG9vc2UpIHtcblx0ICAgICAgaWYgKCFhcnJheVNvbWUob3RoZXIsIGZ1bmN0aW9uKG90aFZhbHVlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuXHQgICAgICAgICAgfSkpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoIShhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpKSkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBiYXNlSXNFcXVhbERlZXAob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuXHQgIHZhciBvYmpJc0FyciA9IGlzQXJyYXkob2JqZWN0KSxcblx0ICAgICAgb3RoSXNBcnIgPSBpc0FycmF5KG90aGVyKSxcblx0ICAgICAgb2JqVGFnID0gYXJyYXlUYWcsXG5cdCAgICAgIG90aFRhZyA9IGFycmF5VGFnO1xuXHRcblx0ICBpZiAoIW9iaklzQXJyKSB7XG5cdCAgICBvYmpUYWcgPSBvYmpUb1N0cmluZy5jYWxsKG9iamVjdCk7XG5cdCAgICBpZiAob2JqVGFnID09PSBhcmdzVGFnKSB7XG5cdCAgICAgIG9ialRhZyA9IG9iamVjdFRhZztcblx0ICAgIH0gZWxzZSBpZiAob2JqVGFnICE9PSBvYmplY3RUYWcpIHtcblx0ICAgICAgb2JqSXNBcnIgPSBpc1R5cGVkQXJyYXkob2JqZWN0KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKCFvdGhJc0Fycikge1xuXHQgICAgb3RoVGFnID0gb2JqVG9TdHJpbmcuY2FsbChvdGhlcik7XG5cdCAgICBpZiAob3RoVGFnID09PSBhcmdzVGFnKSB7XG5cdCAgICAgIG90aFRhZyA9IG9iamVjdFRhZztcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIG9iaklzT2JqID0gb2JqVGFnID09PSBvYmplY3RUYWcgJiYgIWlzSG9zdE9iamVjdChvYmplY3QpLFxuXHQgICAgICBvdGhJc09iaiA9IG90aFRhZyA9PT0gb2JqZWN0VGFnICYmICFpc0hvc3RPYmplY3Qob3RoZXIpLFxuXHQgICAgICBpc1NhbWVUYWcgPSBvYmpUYWcgPT09IG90aFRhZztcblx0XG5cdCAgaWYgKGlzU2FtZVRhZyAmJiAhKG9iaklzQXJyIHx8IG9iaklzT2JqKSkge1xuXHQgICAgcmV0dXJuIGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgb2JqVGFnKTtcblx0ICB9XG5cdCAgaWYgKCFpc0xvb3NlKSB7XG5cdCAgICB2YXIgb2JqSXNXcmFwcGVkID0gb2JqSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsICdfX3dyYXBwZWRfXycpLFxuXHQgICAgICAgIG90aElzV3JhcHBlZCA9IG90aElzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsICdfX3dyYXBwZWRfXycpO1xuXHRcblx0ICAgIGlmIChvYmpJc1dyYXBwZWQgfHwgb3RoSXNXcmFwcGVkKSB7XG5cdCAgICAgIHJldHVybiBlcXVhbEZ1bmMob2JqSXNXcmFwcGVkID8gb2JqZWN0LnZhbHVlKCkgOiBvYmplY3QsIG90aElzV3JhcHBlZCA/IG90aGVyLnZhbHVlKCkgOiBvdGhlciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIWlzU2FtZVRhZykge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG5cdCAgLy8gRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gZGV0ZWN0aW5nIGNpcmN1bGFyIHJlZmVyZW5jZXMgc2VlIGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jSk8uXG5cdCAgc3RhY2tBIHx8IChzdGFja0EgPSBbXSk7XG5cdCAgc3RhY2tCIHx8IChzdGFja0IgPSBbXSk7XG5cdFxuXHQgIHZhciBsZW5ndGggPSBzdGFja0EubGVuZ3RoO1xuXHQgIHdoaWxlIChsZW5ndGgtLSkge1xuXHQgICAgaWYgKHN0YWNrQVtsZW5ndGhdID09PSBvYmplY3QpIHtcblx0ICAgICAgcmV0dXJuIHN0YWNrQltsZW5ndGhdID09PSBvdGhlcjtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gQWRkIGBvYmplY3RgIGFuZCBgb3RoZXJgIHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cblx0ICBzdGFja0EucHVzaChvYmplY3QpO1xuXHQgIHN0YWNrQi5wdXNoKG90aGVyKTtcblx0XG5cdCAgdmFyIHJlc3VsdCA9IChvYmpJc0FyciA/IGVxdWFsQXJyYXlzIDogZXF1YWxPYmplY3RzKShvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcblx0XG5cdCAgc3RhY2tBLnBvcCgpO1xuXHQgIHN0YWNrQi5wb3AoKTtcblx0XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYmFzZUlzRXF1YWwodmFsdWUsIG90aGVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuXHQgIGlmICh2YWx1ZSA9PT0gb3RoZXIpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0ICBpZiAodmFsdWUgPT0gbnVsbCB8fCBvdGhlciA9PSBudWxsIHx8ICghaXNPYmplY3QodmFsdWUpICYmICFpc09iamVjdExpa2Uob3RoZXIpKSkge1xuXHQgICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXI7XG5cdCAgfVxuXHQgIHJldHVybiBiYXNlSXNFcXVhbERlZXAodmFsdWUsIG90aGVyLCBiYXNlSXNFcXVhbCwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuXHR9XG5cdFxuXHR2YXIgaXNFcXVhbCA9IFJ4LmludGVybmFscy5pc0VxdWFsID0gZnVuY3Rpb24gKHZhbHVlLCBvdGhlcikge1xuXHQgIHJldHVybiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIpO1xuXHR9O1xuXHRcblx0ICB2YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuXHQgICAgICBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblx0XG5cdCAgdmFyIGluaGVyaXRzID0gUnguaW50ZXJuYWxzLmluaGVyaXRzID0gZnVuY3Rpb24gKGNoaWxkLCBwYXJlbnQpIHtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH1cblx0ICAgIF9fLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7XG5cdCAgICBjaGlsZC5wcm90b3R5cGUgPSBuZXcgX18oKTtcblx0ICB9O1xuXHRcblx0ICB2YXIgYWRkUHJvcGVydGllcyA9IFJ4LmludGVybmFscy5hZGRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKG9iaikge1xuXHQgICAgZm9yKHZhciBzb3VyY2VzID0gW10sIGkgPSAxLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgc291cmNlcy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cblx0ICAgIGZvciAodmFyIGlkeCA9IDAsIGxuID0gc291cmNlcy5sZW5ndGg7IGlkeCA8IGxuOyBpZHgrKykge1xuXHQgICAgICB2YXIgc291cmNlID0gc291cmNlc1tpZHhdO1xuXHQgICAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkge1xuXHQgICAgICAgIG9ialtwcm9wXSA9IHNvdXJjZVtwcm9wXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8vIFJ4IFV0aWxzXG5cdCAgdmFyIGFkZFJlZiA9IFJ4LmludGVybmFscy5hZGRSZWYgPSBmdW5jdGlvbiAoeHMsIHIpIHtcblx0ICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHIuZ2V0RGlzcG9zYWJsZSgpLCB4cy5zdWJzY3JpYmUob2JzZXJ2ZXIpKTtcblx0ICAgIH0pO1xuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIGFycmF5SW5pdGlhbGl6ZShjb3VudCwgZmFjdG9yeSkge1xuXHQgICAgdmFyIGEgPSBuZXcgQXJyYXkoY291bnQpO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG5cdCAgICAgIGFbaV0gPSBmYWN0b3J5KCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gYTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlcHJlc2VudHMgYSBncm91cCBvZiBkaXNwb3NhYmxlIHJlc291cmNlcyB0aGF0IGFyZSBkaXNwb3NlZCB0b2dldGhlci5cblx0ICAgKiBAY29uc3RydWN0b3Jcblx0ICAgKi9cblx0ICB2YXIgQ29tcG9zaXRlRGlzcG9zYWJsZSA9IFJ4LkNvbXBvc2l0ZURpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgYXJncyA9IFtdLCBpLCBsZW47XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG5cdCAgICAgIGFyZ3MgPSBhcmd1bWVudHNbMF07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuXHQgICAgICBhcmdzID0gbmV3IEFycmF5KGxlbik7XG5cdCAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cblx0ICAgIH1cblx0ICAgIHRoaXMuZGlzcG9zYWJsZXMgPSBhcmdzO1xuXHQgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG5cdCAgICB0aGlzLmxlbmd0aCA9IGFyZ3MubGVuZ3RoO1xuXHQgIH07XG5cdFxuXHQgIHZhciBDb21wb3NpdGVEaXNwb3NhYmxlUHJvdG90eXBlID0gQ29tcG9zaXRlRGlzcG9zYWJsZS5wcm90b3R5cGU7XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFkZHMgYSBkaXNwb3NhYmxlIHRvIHRoZSBDb21wb3NpdGVEaXNwb3NhYmxlIG9yIGRpc3Bvc2VzIHRoZSBkaXNwb3NhYmxlIGlmIHRoZSBDb21wb3NpdGVEaXNwb3NhYmxlIGlzIGRpc3Bvc2VkLlxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IGl0ZW0gRGlzcG9zYWJsZSB0byBhZGQuXG5cdCAgICovXG5cdCAgQ29tcG9zaXRlRGlzcG9zYWJsZVByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgaWYgKHRoaXMuaXNEaXNwb3NlZCkge1xuXHQgICAgICBpdGVtLmRpc3Bvc2UoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuZGlzcG9zYWJsZXMucHVzaChpdGVtKTtcblx0ICAgICAgdGhpcy5sZW5ndGgrKztcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmVzIGFuZCBkaXNwb3NlcyB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhIGRpc3Bvc2FibGUgZnJvbSB0aGUgQ29tcG9zaXRlRGlzcG9zYWJsZS5cblx0ICAgKiBAcGFyYW0ge01peGVkfSBpdGVtIERpc3Bvc2FibGUgdG8gcmVtb3ZlLlxuXHQgICAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGZvdW5kOyBmYWxzZSBvdGhlcndpc2UuXG5cdCAgICovXG5cdCAgQ29tcG9zaXRlRGlzcG9zYWJsZVByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgdmFyIHNob3VsZERpc3Bvc2UgPSBmYWxzZTtcblx0ICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG5cdCAgICAgIHZhciBpZHggPSB0aGlzLmRpc3Bvc2FibGVzLmluZGV4T2YoaXRlbSk7XG5cdCAgICAgIGlmIChpZHggIT09IC0xKSB7XG5cdCAgICAgICAgc2hvdWxkRGlzcG9zZSA9IHRydWU7XG5cdCAgICAgICAgdGhpcy5kaXNwb3NhYmxlcy5zcGxpY2UoaWR4LCAxKTtcblx0ICAgICAgICB0aGlzLmxlbmd0aC0tO1xuXHQgICAgICAgIGl0ZW0uZGlzcG9zZSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gc2hvdWxkRGlzcG9zZTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAgRGlzcG9zZXMgYWxsIGRpc3Bvc2FibGVzIGluIHRoZSBncm91cCBhbmQgcmVtb3ZlcyB0aGVtIGZyb20gdGhlIGdyb3VwLlxuXHQgICAqL1xuXHQgIENvbXBvc2l0ZURpc3Bvc2FibGVQcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG5cdCAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG5cdCAgICAgIHZhciBsZW4gPSB0aGlzLmRpc3Bvc2FibGVzLmxlbmd0aCwgY3VycmVudERpc3Bvc2FibGVzID0gbmV3IEFycmF5KGxlbik7XG5cdCAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBjdXJyZW50RGlzcG9zYWJsZXNbaV0gPSB0aGlzLmRpc3Bvc2FibGVzW2ldOyB9XG5cdCAgICAgIHRoaXMuZGlzcG9zYWJsZXMgPSBbXTtcblx0ICAgICAgdGhpcy5sZW5ndGggPSAwO1xuXHRcblx0ICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgY3VycmVudERpc3Bvc2FibGVzW2ldLmRpc3Bvc2UoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFByb3ZpZGVzIGEgc2V0IG9mIHN0YXRpYyBtZXRob2RzIGZvciBjcmVhdGluZyBEaXNwb3NhYmxlcy5cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkaXNwb3NlIEFjdGlvbiB0byBydW4gZHVyaW5nIHRoZSBmaXJzdCBjYWxsIHRvIGRpc3Bvc2UuIFRoZSBhY3Rpb24gaXMgZ3VhcmFudGVlZCB0byBiZSBydW4gYXQgbW9zdCBvbmNlLlxuXHQgICAqL1xuXHQgIHZhciBEaXNwb3NhYmxlID0gUnguRGlzcG9zYWJsZSA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcblx0ICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuXHQgICAgdGhpcy5hY3Rpb24gPSBhY3Rpb24gfHwgbm9vcDtcblx0ICB9O1xuXHRcblx0ICAvKiogUGVyZm9ybXMgdGhlIHRhc2sgb2YgY2xlYW5pbmcgdXAgcmVzb3VyY2VzLiAqL1xuXHQgIERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuXHQgICAgICB0aGlzLmFjdGlvbigpO1xuXHQgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZXMgYSBkaXNwb3NhYmxlIG9iamVjdCB0aGF0IGludm9rZXMgdGhlIHNwZWNpZmllZCBhY3Rpb24gd2hlbiBkaXNwb3NlZC5cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkaXNwb3NlIEFjdGlvbiB0byBydW4gZHVyaW5nIHRoZSBmaXJzdCBjYWxsIHRvIGRpc3Bvc2UuIFRoZSBhY3Rpb24gaXMgZ3VhcmFudGVlZCB0byBiZSBydW4gYXQgbW9zdCBvbmNlLlxuXHQgICAqIEByZXR1cm4ge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB0aGF0IHJ1bnMgdGhlIGdpdmVuIGFjdGlvbiB1cG9uIGRpc3Bvc2FsLlxuXHQgICAqL1xuXHQgIHZhciBkaXNwb3NhYmxlQ3JlYXRlID0gRGlzcG9zYWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoYWN0aW9uKSB7IHJldHVybiBuZXcgRGlzcG9zYWJsZShhY3Rpb24pOyB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBHZXRzIHRoZSBkaXNwb3NhYmxlIHRoYXQgZG9lcyBub3RoaW5nIHdoZW4gZGlzcG9zZWQuXG5cdCAgICovXG5cdCAgdmFyIGRpc3Bvc2FibGVFbXB0eSA9IERpc3Bvc2FibGUuZW1wdHkgPSB7IGRpc3Bvc2U6IG5vb3AgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogVmFsaWRhdGVzIHdoZXRoZXIgdGhlIGdpdmVuIG9iamVjdCBpcyBhIGRpc3Bvc2FibGVcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gT2JqZWN0IHRvIHRlc3Qgd2hldGhlciBpdCBoYXMgYSBkaXNwb3NlIG1ldGhvZFxuXHQgICAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGEgZGlzcG9zYWJsZSBvYmplY3QsIGVsc2UgZmFsc2UuXG5cdCAgICovXG5cdCAgdmFyIGlzRGlzcG9zYWJsZSA9IERpc3Bvc2FibGUuaXNEaXNwb3NhYmxlID0gZnVuY3Rpb24gKGQpIHtcblx0ICAgIHJldHVybiBkICYmIGlzRnVuY3Rpb24oZC5kaXNwb3NlKTtcblx0ICB9O1xuXHRcblx0ICB2YXIgY2hlY2tEaXNwb3NlZCA9IERpc3Bvc2FibGUuY2hlY2tEaXNwb3NlZCA9IGZ1bmN0aW9uIChkaXNwb3NhYmxlKSB7XG5cdCAgICBpZiAoZGlzcG9zYWJsZS5pc0Rpc3Bvc2VkKSB7IHRocm93IG5ldyBPYmplY3REaXNwb3NlZEVycm9yKCk7IH1cblx0ICB9O1xuXHRcblx0ICB2YXIgZGlzcG9zYWJsZUZpeHVwID0gRGlzcG9zYWJsZS5fZml4dXAgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG5cdCAgICByZXR1cm4gaXNEaXNwb3NhYmxlKHJlc3VsdCkgPyByZXN1bHQgOiBkaXNwb3NhYmxlRW1wdHk7XG5cdCAgfTtcblx0XG5cdCAgLy8gU2luZ2xlIGFzc2lnbm1lbnRcblx0ICB2YXIgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUgPSBSeC5TaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuXHQgICAgdGhpcy5jdXJyZW50ID0gbnVsbDtcblx0ICB9O1xuXHQgIFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlLnByb3RvdHlwZS5nZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIHRoaXMuY3VycmVudDtcblx0ICB9O1xuXHQgIFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlLnByb3RvdHlwZS5zZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICBpZiAodGhpcy5jdXJyZW50KSB7IHRocm93IG5ldyBFcnJvcignRGlzcG9zYWJsZSBoYXMgYWxyZWFkeSBiZWVuIGFzc2lnbmVkJyk7IH1cblx0ICAgIHZhciBzaG91bGREaXNwb3NlID0gdGhpcy5pc0Rpc3Bvc2VkO1xuXHQgICAgIXNob3VsZERpc3Bvc2UgJiYgKHRoaXMuY3VycmVudCA9IHZhbHVlKTtcblx0ICAgIHNob3VsZERpc3Bvc2UgJiYgdmFsdWUgJiYgdmFsdWUuZGlzcG9zZSgpO1xuXHQgIH07XG5cdCAgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuXHQgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuXHQgICAgICB2YXIgb2xkID0gdGhpcy5jdXJyZW50O1xuXHQgICAgICB0aGlzLmN1cnJlbnQgPSBudWxsO1xuXHQgICAgICBvbGQgJiYgb2xkLmRpc3Bvc2UoKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvLyBNdWx0aXBsZSBhc3NpZ25tZW50IGRpc3Bvc2FibGVcblx0ICB2YXIgU2VyaWFsRGlzcG9zYWJsZSA9IFJ4LlNlcmlhbERpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcblx0ICAgIHRoaXMuY3VycmVudCA9IG51bGw7XG5cdCAgfTtcblx0ICBTZXJpYWxEaXNwb3NhYmxlLnByb3RvdHlwZS5nZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIHRoaXMuY3VycmVudDtcblx0ICB9O1xuXHQgIFNlcmlhbERpc3Bvc2FibGUucHJvdG90eXBlLnNldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgIHZhciBzaG91bGREaXNwb3NlID0gdGhpcy5pc0Rpc3Bvc2VkO1xuXHQgICAgaWYgKCFzaG91bGREaXNwb3NlKSB7XG5cdCAgICAgIHZhciBvbGQgPSB0aGlzLmN1cnJlbnQ7XG5cdCAgICAgIHRoaXMuY3VycmVudCA9IHZhbHVlO1xuXHQgICAgfVxuXHQgICAgb2xkICYmIG9sZC5kaXNwb3NlKCk7XG5cdCAgICBzaG91bGREaXNwb3NlICYmIHZhbHVlICYmIHZhbHVlLmRpc3Bvc2UoKTtcblx0ICB9O1xuXHQgIFNlcmlhbERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuXHQgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuXHQgICAgICB2YXIgb2xkID0gdGhpcy5jdXJyZW50O1xuXHQgICAgICB0aGlzLmN1cnJlbnQgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgb2xkICYmIG9sZC5kaXNwb3NlKCk7XG5cdCAgfTtcblx0XG5cdCAgdmFyIEJpbmFyeURpc3Bvc2FibGUgPSBSeC5CaW5hcnlEaXNwb3NhYmxlID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcblx0ICAgIHRoaXMuX2ZpcnN0ID0gZmlyc3Q7XG5cdCAgICB0aGlzLl9zZWNvbmQgPSBzZWNvbmQ7XG5cdCAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcblx0ICB9O1xuXHRcblx0ICBCaW5hcnlEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcblx0ICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcblx0ICAgICAgdmFyIG9sZDEgPSB0aGlzLl9maXJzdDtcblx0ICAgICAgdGhpcy5fZmlyc3QgPSBudWxsO1xuXHQgICAgICBvbGQxICYmIG9sZDEuZGlzcG9zZSgpO1xuXHQgICAgICB2YXIgb2xkMiA9IHRoaXMuX3NlY29uZDtcblx0ICAgICAgdGhpcy5fc2Vjb25kID0gbnVsbDtcblx0ICAgICAgb2xkMiAmJiBvbGQyLmRpc3Bvc2UoKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICB2YXIgTkFyeURpc3Bvc2FibGUgPSBSeC5OQXJ5RGlzcG9zYWJsZSA9IGZ1bmN0aW9uIChkaXNwb3NhYmxlcykge1xuXHQgICAgdGhpcy5fZGlzcG9zYWJsZXMgPSBkaXNwb3NhYmxlcztcblx0ICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuXHQgIH07XG5cdFxuXHQgIE5BcnlEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcblx0ICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuX2Rpc3Bvc2FibGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgdGhpcy5fZGlzcG9zYWJsZXNbaV0uZGlzcG9zZSgpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuX2Rpc3Bvc2FibGVzLmxlbmd0aCA9IDA7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVwcmVzZW50cyBhIGRpc3Bvc2FibGUgcmVzb3VyY2UgdGhhdCBvbmx5IGRpc3Bvc2VzIGl0cyB1bmRlcmx5aW5nIGRpc3Bvc2FibGUgcmVzb3VyY2Ugd2hlbiBhbGwgZGVwZW5kZW50IGRpc3Bvc2FibGUgb2JqZWN0cyBoYXZlIGJlZW4gZGlzcG9zZWQuXG5cdCAgICovXG5cdCAgdmFyIFJlZkNvdW50RGlzcG9zYWJsZSA9IFJ4LlJlZkNvdW50RGlzcG9zYWJsZSA9IChmdW5jdGlvbiAoKSB7XG5cdFxuXHQgICAgZnVuY3Rpb24gSW5uZXJEaXNwb3NhYmxlKGRpc3Bvc2FibGUpIHtcblx0ICAgICAgdGhpcy5kaXNwb3NhYmxlID0gZGlzcG9zYWJsZTtcblx0ICAgICAgdGhpcy5kaXNwb3NhYmxlLmNvdW50Kys7XG5cdCAgICAgIHRoaXMuaXNJbm5lckRpc3Bvc2VkID0gZmFsc2U7XG5cdCAgICB9XG5cdFxuXHQgICAgSW5uZXJEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoIXRoaXMuZGlzcG9zYWJsZS5pc0Rpc3Bvc2VkICYmICF0aGlzLmlzSW5uZXJEaXNwb3NlZCkge1xuXHQgICAgICAgIHRoaXMuaXNJbm5lckRpc3Bvc2VkID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLmRpc3Bvc2FibGUuY291bnQtLTtcblx0ICAgICAgICBpZiAodGhpcy5kaXNwb3NhYmxlLmNvdW50ID09PSAwICYmIHRoaXMuZGlzcG9zYWJsZS5pc1ByaW1hcnlEaXNwb3NlZCkge1xuXHQgICAgICAgICAgdGhpcy5kaXNwb3NhYmxlLmlzRGlzcG9zZWQgPSB0cnVlO1xuXHQgICAgICAgICAgdGhpcy5kaXNwb3NhYmxlLnVuZGVybHlpbmdEaXNwb3NhYmxlLmRpc3Bvc2UoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgUmVmQ291bnREaXNwb3NhYmxlIHdpdGggdGhlIHNwZWNpZmllZCBkaXNwb3NhYmxlLlxuXHQgICAgICogQGNvbnN0cnVjdG9yXG5cdCAgICAgKiBAcGFyYW0ge0Rpc3Bvc2FibGV9IGRpc3Bvc2FibGUgVW5kZXJseWluZyBkaXNwb3NhYmxlLlxuXHQgICAgICAqL1xuXHQgICAgZnVuY3Rpb24gUmVmQ291bnREaXNwb3NhYmxlKGRpc3Bvc2FibGUpIHtcblx0ICAgICAgdGhpcy51bmRlcmx5aW5nRGlzcG9zYWJsZSA9IGRpc3Bvc2FibGU7XG5cdCAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLmlzUHJpbWFyeURpc3Bvc2VkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuY291bnQgPSAwO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogRGlzcG9zZXMgdGhlIHVuZGVybHlpbmcgZGlzcG9zYWJsZSBvbmx5IHdoZW4gYWxsIGRlcGVuZGVudCBkaXNwb3NhYmxlcyBoYXZlIGJlZW4gZGlzcG9zZWRcblx0ICAgICAqL1xuXHQgICAgUmVmQ291bnREaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCAmJiAhdGhpcy5pc1ByaW1hcnlEaXNwb3NlZCkge1xuXHQgICAgICAgIHRoaXMuaXNQcmltYXJ5RGlzcG9zZWQgPSB0cnVlO1xuXHQgICAgICAgIGlmICh0aGlzLmNvdW50ID09PSAwKSB7XG5cdCAgICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuXHQgICAgICAgICAgdGhpcy51bmRlcmx5aW5nRGlzcG9zYWJsZS5kaXNwb3NlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmV0dXJucyBhIGRlcGVuZGVudCBkaXNwb3NhYmxlIHRoYXQgd2hlbiBkaXNwb3NlZCBkZWNyZWFzZXMgdGhlIHJlZmNvdW50IG9uIHRoZSB1bmRlcmx5aW5nIGRpc3Bvc2FibGUuXG5cdCAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gQSBkZXBlbmRlbnQgZGlzcG9zYWJsZSBjb250cmlidXRpbmcgdG8gdGhlIHJlZmVyZW5jZSBjb3VudCB0aGF0IG1hbmFnZXMgdGhlIHVuZGVybHlpbmcgZGlzcG9zYWJsZSdzIGxpZmV0aW1lLlxuXHQgICAgICovXG5cdCAgICBSZWZDb3VudERpc3Bvc2FibGUucHJvdG90eXBlLmdldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmlzRGlzcG9zZWQgPyBkaXNwb3NhYmxlRW1wdHkgOiBuZXcgSW5uZXJEaXNwb3NhYmxlKHRoaXMpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gUmVmQ291bnREaXNwb3NhYmxlO1xuXHQgIH0pKCk7XG5cdFxuXHQgIHZhciBTY2hlZHVsZWRJdGVtID0gUnguaW50ZXJuYWxzLlNjaGVkdWxlZEl0ZW0gPSBmdW5jdGlvbiAoc2NoZWR1bGVyLCBzdGF0ZSwgYWN0aW9uLCBkdWVUaW1lLCBjb21wYXJlcikge1xuXHQgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG5cdCAgICB0aGlzLmFjdGlvbiA9IGFjdGlvbjtcblx0ICAgIHRoaXMuZHVlVGltZSA9IGR1ZVRpbWU7XG5cdCAgICB0aGlzLmNvbXBhcmVyID0gY29tcGFyZXIgfHwgZGVmYXVsdFN1YkNvbXBhcmVyO1xuXHQgICAgdGhpcy5kaXNwb3NhYmxlID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cdCAgfTtcblx0XG5cdCAgU2NoZWR1bGVkSXRlbS5wcm90b3R5cGUuaW52b2tlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5kaXNwb3NhYmxlLnNldERpc3Bvc2FibGUodGhpcy5pbnZva2VDb3JlKCkpO1xuXHQgIH07XG5cdFxuXHQgIFNjaGVkdWxlZEl0ZW0ucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xuXHQgICAgcmV0dXJuIHRoaXMuY29tcGFyZXIodGhpcy5kdWVUaW1lLCBvdGhlci5kdWVUaW1lKTtcblx0ICB9O1xuXHRcblx0ICBTY2hlZHVsZWRJdGVtLnByb3RvdHlwZS5pc0NhbmNlbGxlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiB0aGlzLmRpc3Bvc2FibGUuaXNEaXNwb3NlZDtcblx0ICB9O1xuXHRcblx0ICBTY2hlZHVsZWRJdGVtLnByb3RvdHlwZS5pbnZva2VDb3JlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIGRpc3Bvc2FibGVGaXh1cCh0aGlzLmFjdGlvbih0aGlzLnNjaGVkdWxlciwgdGhpcy5zdGF0ZSkpO1xuXHQgIH07XG5cdFxuXHQgIC8qKiBQcm92aWRlcyBhIHNldCBvZiBzdGF0aWMgcHJvcGVydGllcyB0byBhY2Nlc3MgY29tbW9ubHkgdXNlZCBzY2hlZHVsZXJzLiAqL1xuXHQgIHZhciBTY2hlZHVsZXIgPSBSeC5TY2hlZHVsZXIgPSAoZnVuY3Rpb24gKCkge1xuXHRcblx0ICAgIGZ1bmN0aW9uIFNjaGVkdWxlcigpIHsgfVxuXHRcblx0ICAgIC8qKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGdpdmVuIG9iamVjdCBpcyBhIHNjaGVkdWxlciAqL1xuXHQgICAgU2NoZWR1bGVyLmlzU2NoZWR1bGVyID0gZnVuY3Rpb24gKHMpIHtcblx0ICAgICAgcmV0dXJuIHMgaW5zdGFuY2VvZiBTY2hlZHVsZXI7XG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciBzY2hlZHVsZXJQcm90byA9IFNjaGVkdWxlci5wcm90b3R5cGU7XG5cdFxuXHQgICAgLyoqXG5cdCAgICogU2NoZWR1bGVzIGFuIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cblx0ICAgKiBAcGFyYW0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZC5cblx0ICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG5cdCAgICovXG5cdCAgICBzY2hlZHVsZXJQcm90by5zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG5cdCAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKCk7XG5cdCAgICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBTY2hlZHVsZXMgYW4gYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIGFmdGVyIGR1ZVRpbWUuXG5cdCAgICogQHBhcmFtIHN0YXRlIFN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjdGlvbiBBY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGR1ZVRpbWUgUmVsYXRpdmUgdGltZSBhZnRlciB3aGljaCB0byBleGVjdXRlIHRoZSBhY3Rpb24uXG5cdCAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIGFjdGlvbiAoYmVzdCBlZmZvcnQpLlxuXHQgICAqL1xuXHQgICAgc2NoZWR1bGVyUHJvdG8uc2NoZWR1bGVGdXR1cmUgPSBmdW5jdGlvbiAoc3RhdGUsIGR1ZVRpbWUsIGFjdGlvbikge1xuXHQgICAgICB2YXIgZHQgPSBkdWVUaW1lO1xuXHQgICAgICBkdCBpbnN0YW5jZW9mIERhdGUgJiYgKGR0ID0gZHQgLSB0aGlzLm5vdygpKTtcblx0ICAgICAgZHQgPSBTY2hlZHVsZXIubm9ybWFsaXplKGR0KTtcblx0XG5cdCAgICAgIGlmIChkdCA9PT0gMCkgeyByZXR1cm4gdGhpcy5zY2hlZHVsZShzdGF0ZSwgYWN0aW9uKTsgfVxuXHRcblx0ICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlRnV0dXJlKHN0YXRlLCBkdCwgYWN0aW9uKTtcblx0ICAgIH07XG5cdFxuXHQgICAgc2NoZWR1bGVyUHJvdG8uX3NjaGVkdWxlRnV0dXJlID0gZnVuY3Rpb24gKHN0YXRlLCBkdWVUaW1lLCBhY3Rpb24pIHtcblx0ICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqIEdldHMgdGhlIGN1cnJlbnQgdGltZSBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsIG1hY2hpbmUncyBzeXN0ZW0gY2xvY2suICovXG5cdCAgICBTY2hlZHVsZXIubm93ID0gZGVmYXVsdE5vdztcblx0XG5cdCAgICAvKiogR2V0cyB0aGUgY3VycmVudCB0aW1lIGFjY29yZGluZyB0byB0aGUgbG9jYWwgbWFjaGluZSdzIHN5c3RlbSBjbG9jay4gKi9cblx0ICAgIFNjaGVkdWxlci5wcm90b3R5cGUubm93ID0gZGVmYXVsdE5vdztcblx0XG5cdCAgICAvKipcblx0ICAgICAqIE5vcm1hbGl6ZXMgdGhlIHNwZWNpZmllZCBUaW1lU3BhbiB2YWx1ZSB0byBhIHBvc2l0aXZlIHZhbHVlLlxuXHQgICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVTcGFuIFRoZSB0aW1lIHNwYW4gdmFsdWUgdG8gbm9ybWFsaXplLlxuXHQgICAgICogQHJldHVybnMge051bWJlcn0gVGhlIHNwZWNpZmllZCBUaW1lU3BhbiB2YWx1ZSBpZiBpdCBpcyB6ZXJvIG9yIHBvc2l0aXZlOyBvdGhlcndpc2UsIDBcblx0ICAgICAqL1xuXHQgICAgU2NoZWR1bGVyLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uICh0aW1lU3Bhbikge1xuXHQgICAgICB0aW1lU3BhbiA8IDAgJiYgKHRpbWVTcGFuID0gMCk7XG5cdCAgICAgIHJldHVybiB0aW1lU3Bhbjtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFNjaGVkdWxlcjtcblx0ICB9KCkpO1xuXHRcblx0ICB2YXIgbm9ybWFsaXplVGltZSA9IFNjaGVkdWxlci5ub3JtYWxpemUsIGlzU2NoZWR1bGVyID0gU2NoZWR1bGVyLmlzU2NoZWR1bGVyO1xuXHRcblx0ICAoZnVuY3Rpb24gKHNjaGVkdWxlclByb3RvKSB7XG5cdFxuXHQgICAgZnVuY3Rpb24gaW52b2tlUmVjSW1tZWRpYXRlKHNjaGVkdWxlciwgcGFpcikge1xuXHQgICAgICB2YXIgc3RhdGUgPSBwYWlyWzBdLCBhY3Rpb24gPSBwYWlyWzFdLCBncm91cCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG5cdCAgICAgIGFjdGlvbihzdGF0ZSwgaW5uZXJBY3Rpb24pO1xuXHQgICAgICByZXR1cm4gZ3JvdXA7XG5cdFxuXHQgICAgICBmdW5jdGlvbiBpbm5lckFjdGlvbihzdGF0ZTIpIHtcblx0ICAgICAgICB2YXIgaXNBZGRlZCA9IGZhbHNlLCBpc0RvbmUgPSBmYWxzZTtcblx0XG5cdCAgICAgICAgdmFyIGQgPSBzY2hlZHVsZXIuc2NoZWR1bGUoc3RhdGUyLCBzY2hlZHVsZVdvcmspO1xuXHQgICAgICAgIGlmICghaXNEb25lKSB7XG5cdCAgICAgICAgICBncm91cC5hZGQoZCk7XG5cdCAgICAgICAgICBpc0FkZGVkID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIHNjaGVkdWxlV29yayhfLCBzdGF0ZTMpIHtcblx0ICAgICAgICAgIGlmIChpc0FkZGVkKSB7XG5cdCAgICAgICAgICAgIGdyb3VwLnJlbW92ZShkKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGlzRG9uZSA9IHRydWU7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBhY3Rpb24oc3RhdGUzLCBpbm5lckFjdGlvbik7XG5cdCAgICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGludm9rZVJlY0RhdGUoc2NoZWR1bGVyLCBwYWlyKSB7XG5cdCAgICAgIHZhciBzdGF0ZSA9IHBhaXJbMF0sIGFjdGlvbiA9IHBhaXJbMV0sIGdyb3VwID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcblx0ICAgICAgYWN0aW9uKHN0YXRlLCBpbm5lckFjdGlvbik7XG5cdCAgICAgIHJldHVybiBncm91cDtcblx0XG5cdCAgICAgIGZ1bmN0aW9uIGlubmVyQWN0aW9uKHN0YXRlMiwgZHVlVGltZTEpIHtcblx0ICAgICAgICB2YXIgaXNBZGRlZCA9IGZhbHNlLCBpc0RvbmUgPSBmYWxzZTtcblx0XG5cdCAgICAgICAgdmFyIGQgPSBzY2hlZHVsZXIuc2NoZWR1bGVGdXR1cmUoc3RhdGUyLCBkdWVUaW1lMSwgc2NoZWR1bGVXb3JrKTtcblx0ICAgICAgICBpZiAoIWlzRG9uZSkge1xuXHQgICAgICAgICAgZ3JvdXAuYWRkKGQpO1xuXHQgICAgICAgICAgaXNBZGRlZCA9IHRydWU7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBmdW5jdGlvbiBzY2hlZHVsZVdvcmsoXywgc3RhdGUzKSB7XG5cdCAgICAgICAgICBpZiAoaXNBZGRlZCkge1xuXHQgICAgICAgICAgICBncm91cC5yZW1vdmUoZCk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBpc0RvbmUgPSB0cnVlO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgYWN0aW9uKHN0YXRlMywgaW5uZXJBY3Rpb24pO1xuXHQgICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIFNjaGVkdWxlcyBhbiBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgcmVjdXJzaXZlbHkuXG5cdCAgICAgKiBAcGFyYW0ge01peGVkfSBzdGF0ZSBTdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjdGlvbiBBY3Rpb24gdG8gZXhlY3V0ZSByZWN1cnNpdmVseS4gVGhlIGxhc3QgcGFyYW1ldGVyIHBhc3NlZCB0byB0aGUgYWN0aW9uIGlzIHVzZWQgdG8gdHJpZ2dlciByZWN1cnNpdmUgc2NoZWR1bGluZyBvZiB0aGUgYWN0aW9uLCBwYXNzaW5nIGluIHJlY3Vyc2l2ZSBpbnZvY2F0aW9uIHN0YXRlLlxuXHQgICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIGFjdGlvbiAoYmVzdCBlZmZvcnQpLlxuXHQgICAgICovXG5cdCAgICBzY2hlZHVsZXJQcm90by5zY2hlZHVsZVJlY3Vyc2l2ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlKFtzdGF0ZSwgYWN0aW9uXSwgaW52b2tlUmVjSW1tZWRpYXRlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTY2hlZHVsZXMgYW4gYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIHJlY3Vyc2l2ZWx5IGFmdGVyIGEgc3BlY2lmaWVkIHJlbGF0aXZlIG9yIGFic29sdXRlIGR1ZSB0aW1lLlxuXHQgICAgICogQHBhcmFtIHtNaXhlZH0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb24gQWN0aW9uIHRvIGV4ZWN1dGUgcmVjdXJzaXZlbHkuIFRoZSBsYXN0IHBhcmFtZXRlciBwYXNzZWQgdG8gdGhlIGFjdGlvbiBpcyB1c2VkIHRvIHRyaWdnZXIgcmVjdXJzaXZlIHNjaGVkdWxpbmcgb2YgdGhlIGFjdGlvbiwgcGFzc2luZyBpbiB0aGUgcmVjdXJzaXZlIGR1ZSB0aW1lIGFuZCBpbnZvY2F0aW9uIHN0YXRlLlxuXHQgICAgICogQHBhcmFtIHtOdW1iZXIgfCBEYXRlfSBkdWVUaW1lIFJlbGF0aXZlIG9yIGFic29sdXRlIHRpbWUgYWZ0ZXIgd2hpY2ggdG8gZXhlY3V0ZSB0aGUgYWN0aW9uIGZvciB0aGUgZmlyc3QgdGltZS5cblx0ICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBUaGUgZGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCBhY3Rpb24gKGJlc3QgZWZmb3J0KS5cblx0ICAgICAqL1xuXHQgICAgc2NoZWR1bGVyUHJvdG8uc2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUgPSBmdW5jdGlvbiAoc3RhdGUsIGR1ZVRpbWUsIGFjdGlvbikge1xuXHQgICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZUZ1dHVyZShbc3RhdGUsIGFjdGlvbl0sIGR1ZVRpbWUsIGludm9rZVJlY0RhdGUpO1xuXHQgICAgfTtcblx0XG5cdCAgfShTY2hlZHVsZXIucHJvdG90eXBlKSk7XG5cdFxuXHQgIChmdW5jdGlvbiAoc2NoZWR1bGVyUHJvdG8pIHtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFNjaGVkdWxlcyBhIHBlcmlvZGljIHBpZWNlIG9mIHdvcmsgYnkgZHluYW1pY2FsbHkgZGlzY292ZXJpbmcgdGhlIHNjaGVkdWxlcidzIGNhcGFiaWxpdGllcy4gVGhlIHBlcmlvZGljIHRhc2sgd2lsbCBiZSBzY2hlZHVsZWQgdXNpbmcgd2luZG93LnNldEludGVydmFsIGZvciB0aGUgYmFzZSBpbXBsZW1lbnRhdGlvbi5cblx0ICAgICAqIEBwYXJhbSB7TWl4ZWR9IHN0YXRlIEluaXRpYWwgc3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdXBvbiB0aGUgZmlyc3QgaXRlcmF0aW9uLlxuXHQgICAgICogQHBhcmFtIHtOdW1iZXJ9IHBlcmlvZCBQZXJpb2QgZm9yIHJ1bm5pbmcgdGhlIHdvcmsgcGVyaW9kaWNhbGx5LlxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZCwgcG90ZW50aWFsbHkgdXBkYXRpbmcgdGhlIHN0YXRlLlxuXHQgICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIHJlY3VycmluZyBhY3Rpb24gKGJlc3QgZWZmb3J0KS5cblx0ICAgICAqL1xuXHQgICAgc2NoZWR1bGVyUHJvdG8uc2NoZWR1bGVQZXJpb2RpYyA9IGZ1bmN0aW9uKHN0YXRlLCBwZXJpb2QsIGFjdGlvbikge1xuXHQgICAgICBpZiAodHlwZW9mIHJvb3Quc2V0SW50ZXJ2YWwgPT09ICd1bmRlZmluZWQnKSB7IHRocm93IG5ldyBOb3RTdXBwb3J0ZWRFcnJvcigpOyB9XG5cdCAgICAgIHBlcmlvZCA9IG5vcm1hbGl6ZVRpbWUocGVyaW9kKTtcblx0ICAgICAgdmFyIHMgPSBzdGF0ZSwgaWQgPSByb290LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgcyA9IGFjdGlvbihzKTsgfSwgcGVyaW9kKTtcblx0ICAgICAgcmV0dXJuIGRpc3Bvc2FibGVDcmVhdGUoZnVuY3Rpb24gKCkgeyByb290LmNsZWFySW50ZXJ2YWwoaWQpOyB9KTtcblx0ICAgIH07XG5cdFxuXHQgIH0oU2NoZWR1bGVyLnByb3RvdHlwZSkpO1xuXHRcblx0ICAvKiogR2V0cyBhIHNjaGVkdWxlciB0aGF0IHNjaGVkdWxlcyB3b3JrIGltbWVkaWF0ZWx5IG9uIHRoZSBjdXJyZW50IHRocmVhZC4gKi9cblx0ICAgdmFyIEltbWVkaWF0ZVNjaGVkdWxlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhJbW1lZGlhdGVTY2hlZHVsZXIsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBJbW1lZGlhdGVTY2hlZHVsZXIoKSB7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIEltbWVkaWF0ZVNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuXHQgICAgICByZXR1cm4gZGlzcG9zYWJsZUZpeHVwKGFjdGlvbih0aGlzLCBzdGF0ZSkpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gSW1tZWRpYXRlU2NoZWR1bGVyO1xuXHQgIH0oU2NoZWR1bGVyKSk7XG5cdFxuXHQgIHZhciBpbW1lZGlhdGVTY2hlZHVsZXIgPSBTY2hlZHVsZXIuaW1tZWRpYXRlID0gbmV3IEltbWVkaWF0ZVNjaGVkdWxlcigpO1xuXHRcblx0ICAvKipcblx0ICAgKiBHZXRzIGEgc2NoZWR1bGVyIHRoYXQgc2NoZWR1bGVzIHdvcmsgYXMgc29vbiBhcyBwb3NzaWJsZSBvbiB0aGUgY3VycmVudCB0aHJlYWQuXG5cdCAgICovXG5cdCAgdmFyIEN1cnJlbnRUaHJlYWRTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgdmFyIHF1ZXVlO1xuXHRcblx0ICAgIGZ1bmN0aW9uIHJ1blRyYW1wb2xpbmUgKCkge1xuXHQgICAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIHZhciBpdGVtID0gcXVldWUuZGVxdWV1ZSgpO1xuXHQgICAgICAgICFpdGVtLmlzQ2FuY2VsbGVkKCkgJiYgaXRlbS5pbnZva2UoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGluaGVyaXRzKEN1cnJlbnRUaHJlYWRTY2hlZHVsZXIsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBDdXJyZW50VGhyZWFkU2NoZWR1bGVyKCkge1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBDdXJyZW50VGhyZWFkU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG5cdCAgICAgIHZhciBzaSA9IG5ldyBTY2hlZHVsZWRJdGVtKHRoaXMsIHN0YXRlLCBhY3Rpb24sIHRoaXMubm93KCkpO1xuXHRcblx0ICAgICAgaWYgKCFxdWV1ZSkge1xuXHQgICAgICAgIHF1ZXVlID0gbmV3IFByaW9yaXR5UXVldWUoNCk7XG5cdCAgICAgICAgcXVldWUuZW5xdWV1ZShzaSk7XG5cdFxuXHQgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaChydW5UcmFtcG9saW5lKSgpO1xuXHQgICAgICAgIHF1ZXVlID0gbnVsbDtcblx0ICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyB0aHJvd2VyKHJlc3VsdC5lKTsgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlLmVucXVldWUoc2kpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBzaS5kaXNwb3NhYmxlO1xuXHQgICAgfTtcblx0XG5cdCAgICBDdXJyZW50VGhyZWFkU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZVJlcXVpcmVkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gIXF1ZXVlOyB9O1xuXHRcblx0ICAgIHJldHVybiBDdXJyZW50VGhyZWFkU2NoZWR1bGVyO1xuXHQgIH0oU2NoZWR1bGVyKSk7XG5cdFxuXHQgIHZhciBjdXJyZW50VGhyZWFkU2NoZWR1bGVyID0gU2NoZWR1bGVyLmN1cnJlbnRUaHJlYWQgPSBuZXcgQ3VycmVudFRocmVhZFNjaGVkdWxlcigpO1xuXHRcblx0ICB2YXIgU2NoZWR1bGVQZXJpb2RpY1JlY3Vyc2l2ZSA9IFJ4LmludGVybmFscy5TY2hlZHVsZVBlcmlvZGljUmVjdXJzaXZlID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIGNyZWF0ZVRpY2soc2VsZikge1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24gdGljayhjb21tYW5kLCByZWN1cnNlKSB7XG5cdCAgICAgICAgcmVjdXJzZSgwLCBzZWxmLl9wZXJpb2QpO1xuXHQgICAgICAgIHZhciBzdGF0ZSA9IHRyeUNhdGNoKHNlbGYuX2FjdGlvbikoc2VsZi5fc3RhdGUpO1xuXHQgICAgICAgIGlmIChzdGF0ZSA9PT0gZXJyb3JPYmopIHtcblx0ICAgICAgICAgIHNlbGYuX2NhbmNlbC5kaXNwb3NlKCk7XG5cdCAgICAgICAgICB0aHJvd2VyKHN0YXRlLmUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzZWxmLl9zdGF0ZSA9IHN0YXRlO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIFNjaGVkdWxlUGVyaW9kaWNSZWN1cnNpdmUoc2NoZWR1bGVyLCBzdGF0ZSwgcGVyaW9kLCBhY3Rpb24pIHtcblx0ICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuXHQgICAgICB0aGlzLl9wZXJpb2QgPSBwZXJpb2Q7XG5cdCAgICAgIHRoaXMuX2FjdGlvbiA9IGFjdGlvbjtcblx0ICAgIH1cblx0XG5cdCAgICBTY2hlZHVsZVBlcmlvZGljUmVjdXJzaXZlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblx0ICAgICAgdGhpcy5fY2FuY2VsID0gZDtcblx0ICAgICAgZC5zZXREaXNwb3NhYmxlKHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZUZ1dHVyZSgwLCB0aGlzLl9wZXJpb2QsIGNyZWF0ZVRpY2sodGhpcykpKTtcblx0XG5cdCAgICAgIHJldHVybiBkO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gU2NoZWR1bGVQZXJpb2RpY1JlY3Vyc2l2ZTtcblx0ICB9KCkpO1xuXHRcblx0ICB2YXIgc2NoZWR1bGVNZXRob2QsIGNsZWFyTWV0aG9kO1xuXHRcblx0ICB2YXIgbG9jYWxUaW1lciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgbG9jYWxTZXRUaW1lb3V0LCBsb2NhbENsZWFyVGltZW91dCA9IG5vb3A7XG5cdCAgICBpZiAoISFyb290LnNldFRpbWVvdXQpIHtcblx0ICAgICAgbG9jYWxTZXRUaW1lb3V0ID0gcm9vdC5zZXRUaW1lb3V0O1xuXHQgICAgICBsb2NhbENsZWFyVGltZW91dCA9IHJvb3QuY2xlYXJUaW1lb3V0O1xuXHQgICAgfSBlbHNlIGlmICghIXJvb3QuV1NjcmlwdCkge1xuXHQgICAgICBsb2NhbFNldFRpbWVvdXQgPSBmdW5jdGlvbiAoZm4sIHRpbWUpIHtcblx0ICAgICAgICByb290LldTY3JpcHQuU2xlZXAodGltZSk7XG5cdCAgICAgICAgZm4oKTtcblx0ICAgICAgfTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRocm93IG5ldyBOb3RTdXBwb3J0ZWRFcnJvcigpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHNldFRpbWVvdXQ6IGxvY2FsU2V0VGltZW91dCxcblx0ICAgICAgY2xlYXJUaW1lb3V0OiBsb2NhbENsZWFyVGltZW91dFxuXHQgICAgfTtcblx0ICB9KCkpO1xuXHQgIHZhciBsb2NhbFNldFRpbWVvdXQgPSBsb2NhbFRpbWVyLnNldFRpbWVvdXQsXG5cdCAgICBsb2NhbENsZWFyVGltZW91dCA9IGxvY2FsVGltZXIuY2xlYXJUaW1lb3V0O1xuXHRcblx0ICAoZnVuY3Rpb24gKCkge1xuXHRcblx0ICAgIHZhciBuZXh0SGFuZGxlID0gMSwgdGFza3NCeUhhbmRsZSA9IHt9LCBjdXJyZW50bHlSdW5uaW5nID0gZmFsc2U7XG5cdFxuXHQgICAgY2xlYXJNZXRob2QgPSBmdW5jdGlvbiAoaGFuZGxlKSB7XG5cdCAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cdCAgICB9O1xuXHRcblx0ICAgIGZ1bmN0aW9uIHJ1blRhc2soaGFuZGxlKSB7XG5cdCAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nKSB7XG5cdCAgICAgICAgbG9jYWxTZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcnVuVGFzayhoYW5kbGUpOyB9LCAwKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcblx0ICAgICAgICBpZiAodGFzaykge1xuXHQgICAgICAgICAgY3VycmVudGx5UnVubmluZyA9IHRydWU7XG5cdCAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGFzaykoKTtcblx0ICAgICAgICAgIGNsZWFyTWV0aG9kKGhhbmRsZSk7XG5cdCAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nID0gZmFsc2U7XG5cdCAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyB0aHJvd2VyKHJlc3VsdC5lKTsgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciByZU5hdGl2ZSA9IG5ldyBSZWdFeHAoJ14nICtcblx0ICAgICAgU3RyaW5nKHRvU3RyaW5nKVxuXHQgICAgICAgIC5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpXG5cdCAgICAgICAgLnJlcGxhY2UoL3RvU3RyaW5nfCBmb3IgW15cXF1dKy9nLCAnLio/JykgKyAnJCdcblx0ICAgICk7XG5cdFxuXHQgICAgdmFyIHNldEltbWVkaWF0ZSA9IHR5cGVvZiAoc2V0SW1tZWRpYXRlID0gZnJlZUdsb2JhbCAmJiBtb2R1bGVFeHBvcnRzICYmIGZyZWVHbG9iYWwuc2V0SW1tZWRpYXRlKSA9PSAnZnVuY3Rpb24nICYmXG5cdCAgICAgICFyZU5hdGl2ZS50ZXN0KHNldEltbWVkaWF0ZSkgJiYgc2V0SW1tZWRpYXRlO1xuXHRcblx0ICAgIGZ1bmN0aW9uIHBvc3RNZXNzYWdlU3VwcG9ydGVkICgpIHtcblx0ICAgICAgLy8gRW5zdXJlIG5vdCBpbiBhIHdvcmtlclxuXHQgICAgICBpZiAoIXJvb3QucG9zdE1lc3NhZ2UgfHwgcm9vdC5pbXBvcnRTY3JpcHRzKSB7IHJldHVybiBmYWxzZTsgfVxuXHQgICAgICB2YXIgaXNBc3luYyA9IGZhbHNlLCBvbGRIYW5kbGVyID0gcm9vdC5vbm1lc3NhZ2U7XG5cdCAgICAgIC8vIFRlc3QgZm9yIGFzeW5jXG5cdCAgICAgIHJvb3Qub25tZXNzYWdlID0gZnVuY3Rpb24gKCkgeyBpc0FzeW5jID0gdHJ1ZTsgfTtcblx0ICAgICAgcm9vdC5wb3N0TWVzc2FnZSgnJywgJyonKTtcblx0ICAgICAgcm9vdC5vbm1lc3NhZ2UgPSBvbGRIYW5kbGVyO1xuXHRcblx0ICAgICAgcmV0dXJuIGlzQXN5bmM7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gVXNlIGluIG9yZGVyLCBzZXRJbW1lZGlhdGUsIG5leHRUaWNrLCBwb3N0TWVzc2FnZSwgTWVzc2FnZUNoYW5uZWwsIHNjcmlwdCByZWFkeXN0YXRlY2hhbmdlZCwgc2V0VGltZW91dFxuXHQgICAgaWYgKGlzRnVuY3Rpb24oc2V0SW1tZWRpYXRlKSkge1xuXHQgICAgICBzY2hlZHVsZU1ldGhvZCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcblx0ICAgICAgICB2YXIgaWQgPSBuZXh0SGFuZGxlKys7XG5cdCAgICAgICAgdGFza3NCeUhhbmRsZVtpZF0gPSBhY3Rpb247XG5cdCAgICAgICAgc2V0SW1tZWRpYXRlKGZ1bmN0aW9uICgpIHsgcnVuVGFzayhpZCk7IH0pO1xuXHRcblx0ICAgICAgICByZXR1cm4gaWQ7XG5cdCAgICAgIH07XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpIHtcblx0ICAgICAgc2NoZWR1bGVNZXRob2QgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG5cdCAgICAgICAgdmFyIGlkID0gbmV4dEhhbmRsZSsrO1xuXHQgICAgICAgIHRhc2tzQnlIYW5kbGVbaWRdID0gYWN0aW9uO1xuXHQgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5UYXNrKGlkKTsgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiBpZDtcblx0ICAgICAgfTtcblx0ICAgIH0gZWxzZSBpZiAocG9zdE1lc3NhZ2VTdXBwb3J0ZWQoKSkge1xuXHQgICAgICB2YXIgTVNHX1BSRUZJWCA9ICdtcy5yeC5zY2hlZHVsZScgKyBNYXRoLnJhbmRvbSgpO1xuXHRcblx0ICAgICAgdmFyIG9uR2xvYmFsUG9zdE1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAvLyBPbmx5IGlmIHdlJ3JlIGEgbWF0Y2ggdG8gYXZvaWQgYW55IG90aGVyIGdsb2JhbCBldmVudHNcblx0ICAgICAgICBpZiAodHlwZW9mIGV2ZW50LmRhdGEgPT09ICdzdHJpbmcnICYmIGV2ZW50LmRhdGEuc3Vic3RyaW5nKDAsIE1TR19QUkVGSVgubGVuZ3RoKSA9PT0gTVNHX1BSRUZJWCkge1xuXHQgICAgICAgICAgcnVuVGFzayhldmVudC5kYXRhLnN1YnN0cmluZyhNU0dfUFJFRklYLmxlbmd0aCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0XG5cdCAgICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG9uR2xvYmFsUG9zdE1lc3NhZ2UsIGZhbHNlKTtcblx0XG5cdCAgICAgIHNjaGVkdWxlTWV0aG9kID0gZnVuY3Rpb24gKGFjdGlvbikge1xuXHQgICAgICAgIHZhciBpZCA9IG5leHRIYW5kbGUrKztcblx0ICAgICAgICB0YXNrc0J5SGFuZGxlW2lkXSA9IGFjdGlvbjtcblx0ICAgICAgICByb290LnBvc3RNZXNzYWdlKE1TR19QUkVGSVggKyBjdXJyZW50SWQsICcqJyk7XG5cdCAgICAgICAgcmV0dXJuIGlkO1xuXHQgICAgICB9O1xuXHQgICAgfSBlbHNlIGlmICghIXJvb3QuTWVzc2FnZUNoYW5uZWwpIHtcblx0ICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgcm9vdC5NZXNzYWdlQ2hhbm5lbCgpO1xuXHRcblx0ICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkgeyBydW5UYXNrKGUuZGF0YSk7IH07XG5cdFxuXHQgICAgICBzY2hlZHVsZU1ldGhvZCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcblx0ICAgICAgICB2YXIgaWQgPSBuZXh0SGFuZGxlKys7XG5cdCAgICAgICAgdGFza3NCeUhhbmRsZVtpZF0gPSBhY3Rpb247XG5cdCAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShpZCk7XG5cdCAgICAgICAgcmV0dXJuIGlkO1xuXHQgICAgICB9O1xuXHQgICAgfSBlbHNlIGlmICgnZG9jdW1lbnQnIGluIHJvb3QgJiYgJ29ucmVhZHlzdGF0ZWNoYW5nZScgaW4gcm9vdC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSkge1xuXHRcblx0ICAgICAgc2NoZWR1bGVNZXRob2QgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG5cdCAgICAgICAgdmFyIHNjcmlwdEVsZW1lbnQgPSByb290LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXHQgICAgICAgIHZhciBpZCA9IG5leHRIYW5kbGUrKztcblx0ICAgICAgICB0YXNrc0J5SGFuZGxlW2lkXSA9IGFjdGlvbjtcblx0XG5cdCAgICAgICAgc2NyaXB0RWxlbWVudC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBydW5UYXNrKGlkKTtcblx0ICAgICAgICAgIHNjcmlwdEVsZW1lbnQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcblx0ICAgICAgICAgIHNjcmlwdEVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHRFbGVtZW50KTtcblx0ICAgICAgICAgIHNjcmlwdEVsZW1lbnQgPSBudWxsO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgcm9vdC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoc2NyaXB0RWxlbWVudCk7XG5cdCAgICAgICAgcmV0dXJuIGlkO1xuXHQgICAgICB9O1xuXHRcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHNjaGVkdWxlTWV0aG9kID0gZnVuY3Rpb24gKGFjdGlvbikge1xuXHQgICAgICAgIHZhciBpZCA9IG5leHRIYW5kbGUrKztcblx0ICAgICAgICB0YXNrc0J5SGFuZGxlW2lkXSA9IGFjdGlvbjtcblx0ICAgICAgICBsb2NhbFNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgcnVuVGFzayhpZCk7XG5cdCAgICAgICAgfSwgMCk7XG5cdFxuXHQgICAgICAgIHJldHVybiBpZDtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICB9KCkpO1xuXHRcblx0ICAvKipcblx0ICAgKiBHZXRzIGEgc2NoZWR1bGVyIHRoYXQgc2NoZWR1bGVzIHdvcmsgdmlhIGEgdGltZWQgY2FsbGJhY2sgYmFzZWQgdXBvbiBwbGF0Zm9ybS5cblx0ICAgKi9cblx0ICAgdmFyIERlZmF1bHRTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgIGluaGVyaXRzKERlZmF1bHRTY2hlZHVsZXIsIF9fc3VwZXJfXyk7XG5cdCAgICAgZnVuY3Rpb24gRGVmYXVsdFNjaGVkdWxlcigpIHtcblx0ICAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgIH1cblx0XG5cdCAgICAgZnVuY3Rpb24gc2NoZWR1bGVBY3Rpb24oZGlzcG9zYWJsZSwgYWN0aW9uLCBzY2hlZHVsZXIsIHN0YXRlKSB7XG5cdCAgICAgICByZXR1cm4gZnVuY3Rpb24gc2NoZWR1bGUoKSB7XG5cdCAgICAgICAgIGRpc3Bvc2FibGUuc2V0RGlzcG9zYWJsZShEaXNwb3NhYmxlLl9maXh1cChhY3Rpb24oc2NoZWR1bGVyLCBzdGF0ZSkpKTtcblx0ICAgICAgIH07XG5cdCAgICAgfVxuXHRcblx0ICAgICBmdW5jdGlvbiBDbGVhckRpc3Bvc2FibGUoaWQpIHtcblx0ICAgICAgIHRoaXMuX2lkID0gaWQ7XG5cdCAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcblx0ICAgICB9XG5cdFxuXHQgICAgIENsZWFyRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG5cdCAgICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG5cdCAgICAgICAgIGNsZWFyTWV0aG9kKHRoaXMuX2lkKTtcblx0ICAgICAgIH1cblx0ICAgICB9O1xuXHRcblx0ICAgICBmdW5jdGlvbiBMb2NhbENsZWFyRGlzcG9zYWJsZShpZCkge1xuXHQgICAgICAgdGhpcy5faWQgPSBpZDtcblx0ICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuXHQgICAgIH1cblx0XG5cdCAgICAgTG9jYWxDbGVhckRpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuXHQgICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuXHQgICAgICAgICBsb2NhbENsZWFyVGltZW91dCh0aGlzLl9pZCk7XG5cdCAgICAgICB9XG5cdCAgICAgfTtcblx0XG5cdCAgICBEZWZhdWx0U2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG5cdCAgICAgIHZhciBkaXNwb3NhYmxlID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksXG5cdCAgICAgICAgICBpZCA9IHNjaGVkdWxlTWV0aG9kKHNjaGVkdWxlQWN0aW9uKGRpc3Bvc2FibGUsIGFjdGlvbiwgdGhpcywgc3RhdGUpKTtcblx0ICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKGRpc3Bvc2FibGUsIG5ldyBDbGVhckRpc3Bvc2FibGUoaWQpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgRGVmYXVsdFNjaGVkdWxlci5wcm90b3R5cGUuX3NjaGVkdWxlRnV0dXJlID0gZnVuY3Rpb24gKHN0YXRlLCBkdWVUaW1lLCBhY3Rpb24pIHtcblx0ICAgICAgaWYgKGR1ZVRpbWUgPT09IDApIHsgcmV0dXJuIHRoaXMuc2NoZWR1bGUoc3RhdGUsIGFjdGlvbik7IH1cblx0ICAgICAgdmFyIGRpc3Bvc2FibGUgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSxcblx0ICAgICAgICAgIGlkID0gbG9jYWxTZXRUaW1lb3V0KHNjaGVkdWxlQWN0aW9uKGRpc3Bvc2FibGUsIGFjdGlvbiwgdGhpcywgc3RhdGUpLCBkdWVUaW1lKTtcblx0ICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKGRpc3Bvc2FibGUsIG5ldyBMb2NhbENsZWFyRGlzcG9zYWJsZShpZCkpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gRGVmYXVsdFNjaGVkdWxlcjtcblx0ICB9KFNjaGVkdWxlcikpO1xuXHRcblx0ICB2YXIgZGVmYXVsdFNjaGVkdWxlciA9IFNjaGVkdWxlclsnZGVmYXVsdCddID0gU2NoZWR1bGVyLmFzeW5jID0gbmV3IERlZmF1bHRTY2hlZHVsZXIoKTtcblx0XG5cdCAgZnVuY3Rpb24gSW5kZXhlZEl0ZW0oaWQsIHZhbHVlKSB7XG5cdCAgICB0aGlzLmlkID0gaWQ7XG5cdCAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cdCAgfVxuXHRcblx0ICBJbmRleGVkSXRlbS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XG5cdCAgICB2YXIgYyA9IHRoaXMudmFsdWUuY29tcGFyZVRvKG90aGVyLnZhbHVlKTtcblx0ICAgIGMgPT09IDAgJiYgKGMgPSB0aGlzLmlkIC0gb3RoZXIuaWQpO1xuXHQgICAgcmV0dXJuIGM7XG5cdCAgfTtcblx0XG5cdCAgdmFyIFByaW9yaXR5UXVldWUgPSBSeC5pbnRlcm5hbHMuUHJpb3JpdHlRdWV1ZSA9IGZ1bmN0aW9uIChjYXBhY2l0eSkge1xuXHQgICAgdGhpcy5pdGVtcyA9IG5ldyBBcnJheShjYXBhY2l0eSk7XG5cdCAgICB0aGlzLmxlbmd0aCA9IDA7XG5cdCAgfTtcblx0XG5cdCAgdmFyIHByaW9yaXR5UHJvdG8gPSBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZTtcblx0ICBwcmlvcml0eVByb3RvLmlzSGlnaGVyUHJpb3JpdHkgPSBmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcblx0ICAgIHJldHVybiB0aGlzLml0ZW1zW2xlZnRdLmNvbXBhcmVUbyh0aGlzLml0ZW1zW3JpZ2h0XSkgPCAwO1xuXHQgIH07XG5cdFxuXHQgIHByaW9yaXR5UHJvdG8ucGVyY29sYXRlID0gZnVuY3Rpb24gKGluZGV4KSB7XG5cdCAgICBpZiAoaW5kZXggPj0gdGhpcy5sZW5ndGggfHwgaW5kZXggPCAwKSB7IHJldHVybjsgfVxuXHQgICAgdmFyIHBhcmVudCA9IGluZGV4IC0gMSA+PiAxO1xuXHQgICAgaWYgKHBhcmVudCA8IDAgfHwgcGFyZW50ID09PSBpbmRleCkgeyByZXR1cm47IH1cblx0ICAgIGlmICh0aGlzLmlzSGlnaGVyUHJpb3JpdHkoaW5kZXgsIHBhcmVudCkpIHtcblx0ICAgICAgdmFyIHRlbXAgPSB0aGlzLml0ZW1zW2luZGV4XTtcblx0ICAgICAgdGhpcy5pdGVtc1tpbmRleF0gPSB0aGlzLml0ZW1zW3BhcmVudF07XG5cdCAgICAgIHRoaXMuaXRlbXNbcGFyZW50XSA9IHRlbXA7XG5cdCAgICAgIHRoaXMucGVyY29sYXRlKHBhcmVudCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgcHJpb3JpdHlQcm90by5oZWFwaWZ5ID0gZnVuY3Rpb24gKGluZGV4KSB7XG5cdCAgICAraW5kZXggfHwgKGluZGV4ID0gMCk7XG5cdCAgICBpZiAoaW5kZXggPj0gdGhpcy5sZW5ndGggfHwgaW5kZXggPCAwKSB7IHJldHVybjsgfVxuXHQgICAgdmFyIGxlZnQgPSAyICogaW5kZXggKyAxLFxuXHQgICAgICAgIHJpZ2h0ID0gMiAqIGluZGV4ICsgMixcblx0ICAgICAgICBmaXJzdCA9IGluZGV4O1xuXHQgICAgaWYgKGxlZnQgPCB0aGlzLmxlbmd0aCAmJiB0aGlzLmlzSGlnaGVyUHJpb3JpdHkobGVmdCwgZmlyc3QpKSB7XG5cdCAgICAgIGZpcnN0ID0gbGVmdDtcblx0ICAgIH1cblx0ICAgIGlmIChyaWdodCA8IHRoaXMubGVuZ3RoICYmIHRoaXMuaXNIaWdoZXJQcmlvcml0eShyaWdodCwgZmlyc3QpKSB7XG5cdCAgICAgIGZpcnN0ID0gcmlnaHQ7XG5cdCAgICB9XG5cdCAgICBpZiAoZmlyc3QgIT09IGluZGV4KSB7XG5cdCAgICAgIHZhciB0ZW1wID0gdGhpcy5pdGVtc1tpbmRleF07XG5cdCAgICAgIHRoaXMuaXRlbXNbaW5kZXhdID0gdGhpcy5pdGVtc1tmaXJzdF07XG5cdCAgICAgIHRoaXMuaXRlbXNbZmlyc3RdID0gdGVtcDtcblx0ICAgICAgdGhpcy5oZWFwaWZ5KGZpcnN0KTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBwcmlvcml0eVByb3RvLnBlZWsgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLml0ZW1zWzBdLnZhbHVlOyB9O1xuXHRcblx0ICBwcmlvcml0eVByb3RvLnJlbW92ZUF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG5cdCAgICB0aGlzLml0ZW1zW2luZGV4XSA9IHRoaXMuaXRlbXNbLS10aGlzLmxlbmd0aF07XG5cdCAgICB0aGlzLml0ZW1zW3RoaXMubGVuZ3RoXSA9IHVuZGVmaW5lZDtcblx0ICAgIHRoaXMuaGVhcGlmeSgpO1xuXHQgIH07XG5cdFxuXHQgIHByaW9yaXR5UHJvdG8uZGVxdWV1ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciByZXN1bHQgPSB0aGlzLnBlZWsoKTtcblx0ICAgIHRoaXMucmVtb3ZlQXQoMCk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdFxuXHQgIHByaW9yaXR5UHJvdG8uZW5xdWV1ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICB2YXIgaW5kZXggPSB0aGlzLmxlbmd0aCsrO1xuXHQgICAgdGhpcy5pdGVtc1tpbmRleF0gPSBuZXcgSW5kZXhlZEl0ZW0oUHJpb3JpdHlRdWV1ZS5jb3VudCsrLCBpdGVtKTtcblx0ICAgIHRoaXMucGVyY29sYXRlKGluZGV4KTtcblx0ICB9O1xuXHRcblx0ICBwcmlvcml0eVByb3RvLnJlbW92ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgaWYgKHRoaXMuaXRlbXNbaV0udmFsdWUgPT09IGl0ZW0pIHtcblx0ICAgICAgICB0aGlzLnJlbW92ZUF0KGkpO1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfTtcblx0ICBQcmlvcml0eVF1ZXVlLmNvdW50ID0gMDtcblx0XG5cdCAgLyoqXG5cdCAgICogIFJlcHJlc2VudHMgYSBub3RpZmljYXRpb24gdG8gYW4gb2JzZXJ2ZXIuXG5cdCAgICovXG5cdCAgdmFyIE5vdGlmaWNhdGlvbiA9IFJ4Lk5vdGlmaWNhdGlvbiA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBOb3RpZmljYXRpb24oKSB7XG5cdFxuXHQgICAgfVxuXHRcblx0ICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdCA9IGZ1bmN0aW9uIChvbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSB7XG5cdCAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdE9ic2VydmVyID0gZnVuY3Rpb24gKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcblx0ICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBJbnZva2VzIHRoZSBkZWxlZ2F0ZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBub3RpZmljYXRpb24gb3IgdGhlIG9ic2VydmVyJ3MgbWV0aG9kIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG5vdGlmaWNhdGlvbiBhbmQgcmV0dXJucyB0aGUgcHJvZHVjZWQgcmVzdWx0LlxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbiB8IE9ic2VydmVyfSBvYnNlcnZlck9yT25OZXh0IEZ1bmN0aW9uIHRvIGludm9rZSBmb3IgYW4gT25OZXh0IG5vdGlmaWNhdGlvbiBvciBPYnNlcnZlciB0byBpbnZva2UgdGhlIG5vdGlmaWNhdGlvbiBvbi4uXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkVycm9yIEZ1bmN0aW9uIHRvIGludm9rZSBmb3IgYW4gT25FcnJvciBub3RpZmljYXRpb24uXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkNvbXBsZXRlZCBGdW5jdGlvbiB0byBpbnZva2UgZm9yIGFuIE9uQ29tcGxldGVkIG5vdGlmaWNhdGlvbi5cblx0ICAgICAqIEByZXR1cm5zIHtBbnl9IFJlc3VsdCBwcm9kdWNlZCBieSB0aGUgb2JzZXJ2YXRpb24uXG5cdCAgICAgKi9cblx0ICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24gKG9ic2VydmVyT3JPbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSB7XG5cdCAgICAgIHJldHVybiBvYnNlcnZlck9yT25OZXh0ICYmIHR5cGVvZiBvYnNlcnZlck9yT25OZXh0ID09PSAnb2JqZWN0JyA/XG5cdCAgICAgICAgdGhpcy5fYWNjZXB0T2JzZXJ2ZXIob2JzZXJ2ZXJPck9uTmV4dCkgOlxuXHQgICAgICAgIHRoaXMuX2FjY2VwdChvYnNlcnZlck9yT25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggYSBzaW5nbGUgbm90aWZpY2F0aW9uLlxuXHQgICAgICpcblx0ICAgICAqIEBtZW1iZXJPZiBOb3RpZmljYXRpb25zXG5cdCAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHNlbmQgb3V0IHRoZSBub3RpZmljYXRpb24gY2FsbHMgb24uXG5cdCAgICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzdXJmYWNlcyB0aGUgYmVoYXZpb3Igb2YgdGhlIG5vdGlmaWNhdGlvbiB1cG9uIHN1YnNjcmlwdGlvbi5cblx0ICAgICAqL1xuXHQgICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS50b09ic2VydmFibGUgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gaW1tZWRpYXRlU2NoZWR1bGVyKTtcblx0ICAgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShzZWxmLCBmdW5jdGlvbiAoXywgbm90aWZpY2F0aW9uKSB7XG5cdCAgICAgICAgICBub3RpZmljYXRpb24uX2FjY2VwdE9ic2VydmVyKG8pO1xuXHQgICAgICAgICAgbm90aWZpY2F0aW9uLmtpbmQgPT09ICdOJyAmJiBvLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gTm90aWZpY2F0aW9uO1xuXHQgIH0pKCk7XG5cdFxuXHQgIHZhciBPbk5leHROb3RpZmljYXRpb24gPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoT25OZXh0Tm90aWZpY2F0aW9uLCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gT25OZXh0Tm90aWZpY2F0aW9uKHZhbHVlKSB7XG5cdCAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgdGhpcy5raW5kID0gJ04nO1xuXHQgICAgfVxuXHRcblx0ICAgIE9uTmV4dE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdCA9IGZ1bmN0aW9uIChvbk5leHQpIHtcblx0ICAgICAgcmV0dXJuIG9uTmV4dCh0aGlzLnZhbHVlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgT25OZXh0Tm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0T2JzZXJ2ZXIgPSBmdW5jdGlvbiAobykge1xuXHQgICAgICByZXR1cm4gby5vbk5leHQodGhpcy52YWx1ZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE9uTmV4dE5vdGlmaWNhdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiAnT25OZXh0KCcgKyB0aGlzLnZhbHVlICsgJyknO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gT25OZXh0Tm90aWZpY2F0aW9uO1xuXHQgIH0oTm90aWZpY2F0aW9uKSk7XG5cdFxuXHQgIHZhciBPbkVycm9yTm90aWZpY2F0aW9uID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKE9uRXJyb3JOb3RpZmljYXRpb24sIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBPbkVycm9yTm90aWZpY2F0aW9uKGVycm9yKSB7XG5cdCAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcblx0ICAgICAgdGhpcy5raW5kID0gJ0UnO1xuXHQgICAgfVxuXHRcblx0ICAgIE9uRXJyb3JOb3RpZmljYXRpb24ucHJvdG90eXBlLl9hY2NlcHQgPSBmdW5jdGlvbiAob25OZXh0LCBvbkVycm9yKSB7XG5cdCAgICAgIHJldHVybiBvbkVycm9yKHRoaXMuZXJyb3IpO1xuXHQgICAgfTtcblx0XG5cdCAgICBPbkVycm9yTm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0T2JzZXJ2ZXIgPSBmdW5jdGlvbiAobykge1xuXHQgICAgICByZXR1cm4gby5vbkVycm9yKHRoaXMuZXJyb3IpO1xuXHQgICAgfTtcblx0XG5cdCAgICBPbkVycm9yTm90aWZpY2F0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgcmV0dXJuICdPbkVycm9yKCcgKyB0aGlzLmVycm9yICsgJyknO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gT25FcnJvck5vdGlmaWNhdGlvbjtcblx0ICB9KE5vdGlmaWNhdGlvbikpO1xuXHRcblx0ICB2YXIgT25Db21wbGV0ZWROb3RpZmljYXRpb24gPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoT25Db21wbGV0ZWROb3RpZmljYXRpb24sIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbigpIHtcblx0ICAgICAgdGhpcy5raW5kID0gJ0MnO1xuXHQgICAgfVxuXHRcblx0ICAgIE9uQ29tcGxldGVkTm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0ID0gZnVuY3Rpb24gKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcblx0ICAgICAgcmV0dXJuIG9uQ29tcGxldGVkKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE9uQ29tcGxldGVkTm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0T2JzZXJ2ZXIgPSBmdW5jdGlvbiAobykge1xuXHQgICAgICByZXR1cm4gby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgfTtcblx0XG5cdCAgICBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiAnT25Db21wbGV0ZWQoKSc7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbjtcblx0ICB9KE5vdGlmaWNhdGlvbikpO1xuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGVzIGFuIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgYW4gT25OZXh0IG5vdGlmaWNhdGlvbiB0byBhbiBvYnNlcnZlci5cblx0ICAgKiBAcGFyYW0ge0FueX0gdmFsdWUgVGhlIHZhbHVlIGNvbnRhaW5lZCBpbiB0aGUgbm90aWZpY2F0aW9uLlxuXHQgICAqIEByZXR1cm5zIHtOb3RpZmljYXRpb259IFRoZSBPbk5leHQgbm90aWZpY2F0aW9uIGNvbnRhaW5pbmcgdGhlIHZhbHVlLlxuXHQgICAqL1xuXHQgIHZhciBub3RpZmljYXRpb25DcmVhdGVPbk5leHQgPSBOb3RpZmljYXRpb24uY3JlYXRlT25OZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gbmV3IE9uTmV4dE5vdGlmaWNhdGlvbih2YWx1ZSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlcyBhbiBvYmplY3QgdGhhdCByZXByZXNlbnRzIGFuIE9uRXJyb3Igbm90aWZpY2F0aW9uIHRvIGFuIG9ic2VydmVyLlxuXHQgICAqIEBwYXJhbSB7QW55fSBlcnJvciBUaGUgZXhjZXB0aW9uIGNvbnRhaW5lZCBpbiB0aGUgbm90aWZpY2F0aW9uLlxuXHQgICAqIEByZXR1cm5zIHtOb3RpZmljYXRpb259IFRoZSBPbkVycm9yIG5vdGlmaWNhdGlvbiBjb250YWluaW5nIHRoZSBleGNlcHRpb24uXG5cdCAgICovXG5cdCAgdmFyIG5vdGlmaWNhdGlvbkNyZWF0ZU9uRXJyb3IgPSBOb3RpZmljYXRpb24uY3JlYXRlT25FcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuXHQgICAgcmV0dXJuIG5ldyBPbkVycm9yTm90aWZpY2F0aW9uKGVycm9yKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGVzIGFuIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgYW4gT25Db21wbGV0ZWQgbm90aWZpY2F0aW9uIHRvIGFuIG9ic2VydmVyLlxuXHQgICAqIEByZXR1cm5zIHtOb3RpZmljYXRpb259IFRoZSBPbkNvbXBsZXRlZCBub3RpZmljYXRpb24uXG5cdCAgICovXG5cdCAgdmFyIG5vdGlmaWNhdGlvbkNyZWF0ZU9uQ29tcGxldGVkID0gTm90aWZpY2F0aW9uLmNyZWF0ZU9uQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIG5ldyBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbigpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFN1cHBvcnRzIHB1c2gtc3R5bGUgaXRlcmF0aW9uIG92ZXIgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cblx0ICAgKi9cblx0ICB2YXIgT2JzZXJ2ZXIgPSBSeC5PYnNlcnZlciA9IGZ1bmN0aW9uICgpIHsgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIENyZWF0ZXMgYW4gb2JzZXJ2ZXIgZnJvbSB0aGUgc3BlY2lmaWVkIE9uTmV4dCwgYWxvbmcgd2l0aCBvcHRpb25hbCBPbkVycm9yLCBhbmQgT25Db21wbGV0ZWQgYWN0aW9ucy5cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25OZXh0XSBPYnNlcnZlcidzIE9uTmV4dCBhY3Rpb24gaW1wbGVtZW50YXRpb24uXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uRXJyb3JdIE9ic2VydmVyJ3MgT25FcnJvciBhY3Rpb24gaW1wbGVtZW50YXRpb24uXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uQ29tcGxldGVkXSBPYnNlcnZlcidzIE9uQ29tcGxldGVkIGFjdGlvbiBpbXBsZW1lbnRhdGlvbi5cblx0ICAgKiBAcmV0dXJucyB7T2JzZXJ2ZXJ9IFRoZSBvYnNlcnZlciBvYmplY3QgaW1wbGVtZW50ZWQgdXNpbmcgdGhlIGdpdmVuIGFjdGlvbnMuXG5cdCAgICovXG5cdCAgdmFyIG9ic2VydmVyQ3JlYXRlID0gT2JzZXJ2ZXIuY3JlYXRlID0gZnVuY3Rpb24gKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcblx0ICAgIG9uTmV4dCB8fCAob25OZXh0ID0gbm9vcCk7XG5cdCAgICBvbkVycm9yIHx8IChvbkVycm9yID0gZGVmYXVsdEVycm9yKTtcblx0ICAgIG9uQ29tcGxldGVkIHx8IChvbkNvbXBsZXRlZCA9IG5vb3ApO1xuXHQgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZlcihvbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIE9ic2VydmVyIGNsYXNzLlxuXHQgICAqIFRoaXMgYmFzZSBjbGFzcyBlbmZvcmNlcyB0aGUgZ3JhbW1hciBvZiBvYnNlcnZlcnMgd2hlcmUgT25FcnJvciBhbmQgT25Db21wbGV0ZWQgYXJlIHRlcm1pbmFsIG1lc3NhZ2VzLlxuXHQgICAqL1xuXHQgIHZhciBBYnN0cmFjdE9ic2VydmVyID0gUnguaW50ZXJuYWxzLkFic3RyYWN0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoQWJzdHJhY3RPYnNlcnZlciwgX19zdXBlcl9fKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENyZWF0ZXMgYSBuZXcgb2JzZXJ2ZXIgaW4gYSBub24tc3RvcHBlZCBzdGF0ZS5cblx0ICAgICAqL1xuXHQgICAgZnVuY3Rpb24gQWJzdHJhY3RPYnNlcnZlcigpIHtcblx0ICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBNdXN0IGJlIGltcGxlbWVudGVkIGJ5IG90aGVyIG9ic2VydmVyc1xuXHQgICAgQWJzdHJhY3RPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IG5vdEltcGxlbWVudGVkO1xuXHQgICAgQWJzdHJhY3RPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBub3RJbXBsZW1lbnRlZDtcblx0ICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IG5vdEltcGxlbWVudGVkO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogTm90aWZpZXMgdGhlIG9ic2VydmVyIG9mIGEgbmV3IGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuXHQgICAgICogQHBhcmFtIHtBbnl9IHZhbHVlIE5leHQgZWxlbWVudCBpbiB0aGUgc2VxdWVuY2UuXG5cdCAgICAgKi9cblx0ICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLm9uTmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAhdGhpcy5pc1N0b3BwZWQgJiYgdGhpcy5uZXh0KHZhbHVlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBOb3RpZmllcyB0aGUgb2JzZXJ2ZXIgdGhhdCBhbiBleGNlcHRpb24gaGFzIG9jY3VycmVkLlxuXHQgICAgICogQHBhcmFtIHtBbnl9IGVycm9yIFRoZSBlcnJvciB0aGF0IGhhcyBvY2N1cnJlZC5cblx0ICAgICAqL1xuXHQgICAgQWJzdHJhY3RPYnNlcnZlci5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuXHQgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG5cdCAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuZXJyb3IoZXJyb3IpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogTm90aWZpZXMgdGhlIG9ic2VydmVyIG9mIHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLlxuXHQgICAgICovXG5cdCAgICBBYnN0cmFjdE9ic2VydmVyLnByb3RvdHlwZS5vbkNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuXHQgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLmNvbXBsZXRlZCgpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogRGlzcG9zZXMgdGhlIG9ic2VydmVyLCBjYXVzaW5nIGl0IHRvIHRyYW5zaXRpb24gdG8gdGhlIHN0b3BwZWQgc3RhdGUuXG5cdCAgICAgKi9cblx0ICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7IHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTsgfTtcblx0XG5cdCAgICBBYnN0cmFjdE9ic2VydmVyLnByb3RvdHlwZS5mYWlsID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuXHQgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLmVycm9yKGUpO1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBBYnN0cmFjdE9ic2VydmVyO1xuXHQgIH0oT2JzZXJ2ZXIpKTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ2xhc3MgdG8gY3JlYXRlIGFuIE9ic2VydmVyIGluc3RhbmNlIGZyb20gZGVsZWdhdGUtYmFzZWQgaW1wbGVtZW50YXRpb25zIG9mIHRoZSBvbiogbWV0aG9kcy5cblx0ICAgKi9cblx0ICB2YXIgQW5vbnltb3VzT2JzZXJ2ZXIgPSBSeC5Bbm9ueW1vdXNPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhBbm9ueW1vdXNPYnNlcnZlciwgX19zdXBlcl9fKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENyZWF0ZXMgYW4gb2JzZXJ2ZXIgZnJvbSB0aGUgc3BlY2lmaWVkIE9uTmV4dCwgT25FcnJvciwgYW5kIE9uQ29tcGxldGVkIGFjdGlvbnMuXG5cdCAgICAgKiBAcGFyYW0ge0FueX0gb25OZXh0IE9ic2VydmVyJ3MgT25OZXh0IGFjdGlvbiBpbXBsZW1lbnRhdGlvbi5cblx0ICAgICAqIEBwYXJhbSB7QW55fSBvbkVycm9yIE9ic2VydmVyJ3MgT25FcnJvciBhY3Rpb24gaW1wbGVtZW50YXRpb24uXG5cdCAgICAgKiBAcGFyYW0ge0FueX0gb25Db21wbGV0ZWQgT2JzZXJ2ZXIncyBPbkNvbXBsZXRlZCBhY3Rpb24gaW1wbGVtZW50YXRpb24uXG5cdCAgICAgKi9cblx0ICAgIGZ1bmN0aW9uIEFub255bW91c09ic2VydmVyKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICAgIHRoaXMuX29uTmV4dCA9IG9uTmV4dDtcblx0ICAgICAgdGhpcy5fb25FcnJvciA9IG9uRXJyb3I7XG5cdCAgICAgIHRoaXMuX29uQ29tcGxldGVkID0gb25Db21wbGV0ZWQ7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBDYWxscyB0aGUgb25OZXh0IGFjdGlvbi5cblx0ICAgICAqIEBwYXJhbSB7QW55fSB2YWx1ZSBOZXh0IGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuXHQgICAgICovXG5cdCAgICBBbm9ueW1vdXNPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICB0aGlzLl9vbk5leHQodmFsdWUpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENhbGxzIHRoZSBvbkVycm9yIGFjdGlvbi5cblx0ICAgICAqIEBwYXJhbSB7QW55fSBlcnJvciBUaGUgZXJyb3IgdGhhdCBoYXMgb2NjdXJyZWQuXG5cdCAgICAgKi9cblx0ICAgIEFub255bW91c09ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuXHQgICAgICB0aGlzLl9vbkVycm9yKGVycm9yKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiAgQ2FsbHMgdGhlIG9uQ29tcGxldGVkIGFjdGlvbi5cblx0ICAgICAqL1xuXHQgICAgQW5vbnltb3VzT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5fb25Db21wbGV0ZWQoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIEFub255bW91c09ic2VydmVyO1xuXHQgIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXHRcblx0ICB2YXIgb2JzZXJ2YWJsZVByb3RvO1xuXHRcblx0ICAvKipcblx0ICAgKiBSZXByZXNlbnRzIGEgcHVzaC1zdHlsZSBjb2xsZWN0aW9uLlxuXHQgICAqL1xuXHQgIHZhciBPYnNlcnZhYmxlID0gUnguT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoKSB7XG5cdFxuXHQgICAgZnVuY3Rpb24gbWFrZVN1YnNjcmliZShzZWxmLCBzdWJzY3JpYmUpIHtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgICAgdmFyIG9sZE9uRXJyb3IgPSBvLm9uRXJyb3I7XG5cdCAgICAgICAgby5vbkVycm9yID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgIG1ha2VTdGFja1RyYWNlTG9uZyhlLCBzZWxmKTtcblx0ICAgICAgICAgIG9sZE9uRXJyb3IuY2FsbChvLCBlKTtcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICByZXR1cm4gc3Vic2NyaWJlLmNhbGwoc2VsZiwgbyk7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gT2JzZXJ2YWJsZSgpIHtcblx0ICAgICAgaWYgKFJ4LmNvbmZpZy5sb25nU3RhY2tTdXBwb3J0ICYmIGhhc1N0YWNrcykge1xuXHQgICAgICAgIHZhciBvbGRTdWJzY3JpYmUgPSB0aGlzLl9zdWJzY3JpYmU7XG5cdCAgICAgICAgdmFyIGUgPSB0cnlDYXRjaCh0aHJvd2VyKShuZXcgRXJyb3IoKSkuZTtcblx0ICAgICAgICB0aGlzLnN0YWNrID0gZS5zdGFjay5zdWJzdHJpbmcoZS5zdGFjay5pbmRleE9mKCdcXG4nKSArIDEpO1xuXHQgICAgICAgIHRoaXMuX3N1YnNjcmliZSA9IG1ha2VTdWJzY3JpYmUodGhpcywgb2xkU3Vic2NyaWJlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIG9ic2VydmFibGVQcm90byA9IE9ic2VydmFibGUucHJvdG90eXBlO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGdpdmVuIG9iamVjdCBpcyBhbiBPYnNlcnZhYmxlXG5cdCAgICAqIEBwYXJhbSB7QW55fSBBbiBvYmplY3QgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgaXQgaXMgYW4gT2JzZXJ2YWJsZVxuXHQgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiBhbiBPYnNlcnZhYmxlLCBlbHNlIGZhbHNlLlxuXHQgICAgKi9cblx0ICAgIE9ic2VydmFibGUuaXNPYnNlcnZhYmxlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgcmV0dXJuIG8gJiYgaXNGdW5jdGlvbihvLnN1YnNjcmliZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogIFN1YnNjcmliZXMgYW4gbyB0byB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cblx0ICAgICAqICBAcGFyYW0ge01peGVkfSBbb09yT25OZXh0XSBUaGUgb2JqZWN0IHRoYXQgaXMgdG8gcmVjZWl2ZSBub3RpZmljYXRpb25zIG9yIGFuIGFjdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cblx0ICAgICAqICBAcGFyYW0ge0Z1bmN0aW9ufSBbb25FcnJvcl0gQWN0aW9uIHRvIGludm9rZSB1cG9uIGV4Y2VwdGlvbmFsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuXHQgICAgICogIEBwYXJhbSB7RnVuY3Rpb259IFtvbkNvbXBsZXRlZF0gQWN0aW9uIHRvIGludm9rZSB1cG9uIGdyYWNlZnVsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuXHQgICAgICogIEByZXR1cm5zIHtEaXBvc2FibGV9IEEgZGlzcG9zYWJsZSBoYW5kbGluZyB0aGUgc3Vic2NyaXB0aW9ucyBhbmQgdW5zdWJzY3JpcHRpb25zLlxuXHQgICAgICovXG5cdCAgICBvYnNlcnZhYmxlUHJvdG8uc3Vic2NyaWJlID0gb2JzZXJ2YWJsZVByb3RvLmZvckVhY2ggPSBmdW5jdGlvbiAob09yT25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaWJlKHR5cGVvZiBvT3JPbk5leHQgPT09ICdvYmplY3QnID9cblx0ICAgICAgICBvT3JPbk5leHQgOlxuXHQgICAgICAgIG9ic2VydmVyQ3JlYXRlKG9Pck9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTdWJzY3JpYmVzIHRvIHRoZSBuZXh0IHZhbHVlIGluIHRoZSBzZXF1ZW5jZSB3aXRoIGFuIG9wdGlvbmFsIFwidGhpc1wiIGFyZ3VtZW50LlxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25OZXh0IFRoZSBmdW5jdGlvbiB0byBpbnZva2Ugb24gZWFjaCBlbGVtZW50IGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuXHQgICAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG5cdCAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gQSBkaXNwb3NhYmxlIGhhbmRsaW5nIHRoZSBzdWJzY3JpcHRpb25zIGFuZCB1bnN1YnNjcmlwdGlvbnMuXG5cdCAgICAgKi9cblx0ICAgIG9ic2VydmFibGVQcm90by5zdWJzY3JpYmVPbk5leHQgPSBmdW5jdGlvbiAob25OZXh0LCB0aGlzQXJnKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUob2JzZXJ2ZXJDcmVhdGUodHlwZW9mIHRoaXNBcmcgIT09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24oeCkgeyBvbk5leHQuY2FsbCh0aGlzQXJnLCB4KTsgfSA6IG9uTmV4dCkpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFN1YnNjcmliZXMgdG8gYW4gZXhjZXB0aW9uYWwgY29uZGl0aW9uIGluIHRoZSBzZXF1ZW5jZSB3aXRoIGFuIG9wdGlvbmFsIFwidGhpc1wiIGFyZ3VtZW50LlxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25FcnJvciBUaGUgZnVuY3Rpb24gdG8gaW52b2tlIHVwb24gZXhjZXB0aW9uYWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG5cdCAgICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cblx0ICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBBIGRpc3Bvc2FibGUgaGFuZGxpbmcgdGhlIHN1YnNjcmlwdGlvbnMgYW5kIHVuc3Vic2NyaXB0aW9ucy5cblx0ICAgICAqL1xuXHQgICAgb2JzZXJ2YWJsZVByb3RvLnN1YnNjcmliZU9uRXJyb3IgPSBmdW5jdGlvbiAob25FcnJvciwgdGhpc0FyZykge1xuXHQgICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaWJlKG9ic2VydmVyQ3JlYXRlKG51bGwsIHR5cGVvZiB0aGlzQXJnICE9PSAndW5kZWZpbmVkJyA/IGZ1bmN0aW9uKGUpIHsgb25FcnJvci5jYWxsKHRoaXNBcmcsIGUpOyB9IDogb25FcnJvcikpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFN1YnNjcmliZXMgdG8gdGhlIG5leHQgdmFsdWUgaW4gdGhlIHNlcXVlbmNlIHdpdGggYW4gb3B0aW9uYWwgXCJ0aGlzXCIgYXJndW1lbnQuXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkNvbXBsZXRlZCBUaGUgZnVuY3Rpb24gdG8gaW52b2tlIHVwb24gZ3JhY2VmdWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG5cdCAgICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cblx0ICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBBIGRpc3Bvc2FibGUgaGFuZGxpbmcgdGhlIHN1YnNjcmlwdGlvbnMgYW5kIHVuc3Vic2NyaXB0aW9ucy5cblx0ICAgICAqL1xuXHQgICAgb2JzZXJ2YWJsZVByb3RvLnN1YnNjcmliZU9uQ29tcGxldGVkID0gZnVuY3Rpb24gKG9uQ29tcGxldGVkLCB0aGlzQXJnKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUob2JzZXJ2ZXJDcmVhdGUobnVsbCwgbnVsbCwgdHlwZW9mIHRoaXNBcmcgIT09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24oKSB7IG9uQ29tcGxldGVkLmNhbGwodGhpc0FyZyk7IH0gOiBvbkNvbXBsZXRlZCkpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gT2JzZXJ2YWJsZTtcblx0ICB9KSgpO1xuXHRcblx0ICB2YXIgU2NoZWR1bGVkT2JzZXJ2ZXIgPSBSeC5pbnRlcm5hbHMuU2NoZWR1bGVkT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoU2NoZWR1bGVkT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cdFxuXHQgICAgZnVuY3Rpb24gU2NoZWR1bGVkT2JzZXJ2ZXIoc2NoZWR1bGVyLCBvYnNlcnZlcikge1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcblx0ICAgICAgdGhpcy5pc0FjcXVpcmVkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuaGFzRmF1bHRlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLnF1ZXVlID0gW107XG5cdCAgICAgIHRoaXMuZGlzcG9zYWJsZSA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gZW5xdWV1ZU5leHQob2JzZXJ2ZXIsIHgpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgb2JzZXJ2ZXIub25OZXh0KHgpOyB9OyB9XG5cdCAgICBmdW5jdGlvbiBlbnF1ZXVlRXJyb3Iob2JzZXJ2ZXIsIGUpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgb2JzZXJ2ZXIub25FcnJvcihlKTsgfTsgfVxuXHQgICAgZnVuY3Rpb24gZW5xdWV1ZUNvbXBsZXRlZChvYnNlcnZlcikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyBvYnNlcnZlci5vbkNvbXBsZXRlZCgpOyB9OyB9XG5cdFxuXHQgICAgU2NoZWR1bGVkT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuXHQgICAgICB0aGlzLnF1ZXVlLnB1c2goZW5xdWV1ZU5leHQodGhpcy5vYnNlcnZlciwgeCkpO1xuXHQgICAgfTtcblx0XG5cdCAgICBTY2hlZHVsZWRPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgICB0aGlzLnF1ZXVlLnB1c2goZW5xdWV1ZUVycm9yKHRoaXMub2JzZXJ2ZXIsIGUpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgU2NoZWR1bGVkT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5xdWV1ZS5wdXNoKGVucXVldWVDb21wbGV0ZWQodGhpcy5vYnNlcnZlcikpO1xuXHQgICAgfTtcblx0XG5cdFxuXHQgICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qoc3RhdGUsIHJlY3Vyc2UpIHtcblx0ICAgICAgdmFyIHdvcms7XG5cdCAgICAgIGlmIChzdGF0ZS5xdWV1ZS5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgd29yayA9IHN0YXRlLnF1ZXVlLnNoaWZ0KCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc3RhdGUuaXNBY3F1aXJlZCA9IGZhbHNlO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2god29yaykoKTtcblx0ICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHtcblx0ICAgICAgICBzdGF0ZS5xdWV1ZSA9IFtdO1xuXHQgICAgICAgIHN0YXRlLmhhc0ZhdWx0ZWQgPSB0cnVlO1xuXHQgICAgICAgIHJldHVybiB0aHJvd2VyKHJlcy5lKTtcblx0ICAgICAgfVxuXHQgICAgICByZWN1cnNlKHN0YXRlKTtcblx0ICAgIH1cblx0XG5cdCAgICBTY2hlZHVsZWRPYnNlcnZlci5wcm90b3R5cGUuZW5zdXJlQWN0aXZlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgaXNPd25lciA9IGZhbHNlO1xuXHQgICAgICBpZiAoIXRoaXMuaGFzRmF1bHRlZCAmJiB0aGlzLnF1ZXVlLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICBpc093bmVyID0gIXRoaXMuaXNBY3F1aXJlZDtcblx0ICAgICAgICB0aGlzLmlzQWNxdWlyZWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICAgIGlzT3duZXIgJiZcblx0ICAgICAgICB0aGlzLmRpc3Bvc2FibGUuc2V0RGlzcG9zYWJsZSh0aGlzLnNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZSh0aGlzLCBzY2hlZHVsZU1ldGhvZCkpO1xuXHQgICAgfTtcblx0XG5cdCAgICBTY2hlZHVsZWRPYnNlcnZlci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX19zdXBlcl9fLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG5cdCAgICAgIHRoaXMuZGlzcG9zYWJsZS5kaXNwb3NlKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBTY2hlZHVsZWRPYnNlcnZlcjtcblx0ICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblx0XG5cdCAgdmFyIE9ic2VydmFibGVCYXNlID0gUnguT2JzZXJ2YWJsZUJhc2UgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoT2JzZXJ2YWJsZUJhc2UsIF9fc3VwZXJfXyk7XG5cdFxuXHQgICAgZnVuY3Rpb24gZml4U3Vic2NyaWJlcihzdWJzY3JpYmVyKSB7XG5cdCAgICAgIHJldHVybiBzdWJzY3JpYmVyICYmIGlzRnVuY3Rpb24oc3Vic2NyaWJlci5kaXNwb3NlKSA/IHN1YnNjcmliZXIgOlxuXHQgICAgICAgIGlzRnVuY3Rpb24oc3Vic2NyaWJlcikgPyBkaXNwb3NhYmxlQ3JlYXRlKHN1YnNjcmliZXIpIDogZGlzcG9zYWJsZUVtcHR5O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHNldERpc3Bvc2FibGUocywgc3RhdGUpIHtcblx0ICAgICAgdmFyIGFkbyA9IHN0YXRlWzBdLCBzZWxmID0gc3RhdGVbMV07XG5cdCAgICAgIHZhciBzdWIgPSB0cnlDYXRjaChzZWxmLnN1YnNjcmliZUNvcmUpLmNhbGwoc2VsZiwgYWRvKTtcblx0ICAgICAgaWYgKHN1YiA9PT0gZXJyb3JPYmogJiYgIWFkby5mYWlsKGVycm9yT2JqLmUpKSB7IHRocm93ZXIoZXJyb3JPYmouZSk7IH1cblx0ICAgICAgYWRvLnNldERpc3Bvc2FibGUoZml4U3Vic2NyaWJlcihzdWIpKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBPYnNlcnZhYmxlQmFzZSgpIHtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgT2JzZXJ2YWJsZUJhc2UucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuXHQgICAgICB2YXIgYWRvID0gbmV3IEF1dG9EZXRhY2hPYnNlcnZlcihvKSwgc3RhdGUgPSBbYWRvLCB0aGlzXTtcblx0XG5cdCAgICAgIGlmIChjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlUmVxdWlyZWQoKSkge1xuXHQgICAgICAgIGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGUoc3RhdGUsIHNldERpc3Bvc2FibGUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHNldERpc3Bvc2FibGUobnVsbCwgc3RhdGUpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBhZG87XG5cdCAgICB9O1xuXHRcblx0ICAgIE9ic2VydmFibGVCYXNlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gbm90SW1wbGVtZW50ZWQ7XG5cdFxuXHQgICAgcmV0dXJuIE9ic2VydmFibGVCYXNlO1xuXHQgIH0oT2JzZXJ2YWJsZSkpO1xuXHRcblx0dmFyIEZsYXRNYXBPYnNlcnZhYmxlID0gUnguRmxhdE1hcE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdFxuXHQgICAgaW5oZXJpdHMoRmxhdE1hcE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdFxuXHQgICAgZnVuY3Rpb24gRmxhdE1hcE9ic2VydmFibGUoc291cmNlLCBzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpIHtcblx0ICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IGlzRnVuY3Rpb24ocmVzdWx0U2VsZWN0b3IpID8gcmVzdWx0U2VsZWN0b3IgOiBudWxsO1xuXHQgICAgICB0aGlzLnNlbGVjdG9yID0gYmluZENhbGxiYWNrKGlzRnVuY3Rpb24oc2VsZWN0b3IpID8gc2VsZWN0b3IgOiBmdW5jdGlvbigpIHsgcmV0dXJuIHNlbGVjdG9yOyB9LCB0aGlzQXJnLCAzKTtcblx0ICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIEZsYXRNYXBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuXHQgICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKG8sIHRoaXMuc2VsZWN0b3IsIHRoaXMucmVzdWx0U2VsZWN0b3IsIHRoaXMpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgaW5oZXJpdHMoSW5uZXJPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG5cdCAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKG9ic2VydmVyLCBzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHNvdXJjZSkge1xuXHQgICAgICB0aGlzLmkgPSAwO1xuXHQgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdCAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3Rvcjtcblx0ICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgIHRoaXMubyA9IG9ic2VydmVyO1xuXHQgICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuX3dyYXBSZXN1bHQgPSBmdW5jdGlvbihyZXN1bHQsIHgsIGkpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMucmVzdWx0U2VsZWN0b3IgP1xuXHQgICAgICAgIHJlc3VsdC5tYXAoZnVuY3Rpb24oeSwgaTIpIHsgcmV0dXJuIHRoaXMucmVzdWx0U2VsZWN0b3IoeCwgeSwgaSwgaTIpOyB9LCB0aGlzKSA6XG5cdCAgICAgICAgcmVzdWx0O1xuXHQgICAgfTtcblx0XG5cdCAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oeCkge1xuXHQgICAgICB2YXIgaSA9IHRoaXMuaSsrO1xuXHQgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5zZWxlY3RvcikoeCwgaSwgdGhpcy5zb3VyY2UpO1xuXHQgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5vLm9uRXJyb3IocmVzdWx0LmUpOyB9XG5cdFxuXHQgICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuXHQgICAgICAoaXNBcnJheUxpa2UocmVzdWx0KSB8fCBpc0l0ZXJhYmxlKHJlc3VsdCkpICYmIChyZXN1bHQgPSBPYnNlcnZhYmxlLmZyb20ocmVzdWx0KSk7XG5cdCAgICAgIHRoaXMuby5vbk5leHQodGhpcy5fd3JhcFJlc3VsdChyZXN1bHQsIHgsIGkpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihlKSB7IHRoaXMuby5vbkVycm9yKGUpOyB9O1xuXHRcblx0ICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uKCkgeyB0aGlzLm8ub25Db21wbGV0ZWQoKTsgfTtcblx0XG5cdCAgICByZXR1cm4gRmxhdE1hcE9ic2VydmFibGU7XG5cdFxuXHR9KE9ic2VydmFibGVCYXNlKSk7XG5cdFxuXHQgIHZhciBFbnVtZXJhYmxlID0gUnguaW50ZXJuYWxzLkVudW1lcmFibGUgPSBmdW5jdGlvbiAoKSB7IH07XG5cdFxuXHQgIGZ1bmN0aW9uIElzRGlzcG9zZWREaXNwb3NhYmxlKHN0YXRlKSB7XG5cdCAgICB0aGlzLl9zID0gc3RhdGU7XG5cdCAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIElzRGlzcG9zZWREaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcblx0ICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcblx0ICAgICAgdGhpcy5fcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICB2YXIgQ29uY2F0RW51bWVyYWJsZU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhDb25jYXRFbnVtZXJhYmxlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIENvbmNhdEVudW1lcmFibGVPYnNlcnZhYmxlKHNvdXJjZXMpIHtcblx0ICAgICAgdGhpcy5zb3VyY2VzID0gc291cmNlcztcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qoc3RhdGUsIHJlY3Vyc2UpIHtcblx0ICAgICAgaWYgKHN0YXRlLmlzRGlzcG9zZWQpIHsgcmV0dXJuOyB9XG5cdCAgICAgIHZhciBjdXJyZW50SXRlbSA9IHRyeUNhdGNoKHN0YXRlLmUubmV4dCkuY2FsbChzdGF0ZS5lKTtcblx0ICAgICAgaWYgKGN1cnJlbnRJdGVtID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKGN1cnJlbnRJdGVtLmUpOyB9XG5cdCAgICAgIGlmIChjdXJyZW50SXRlbS5kb25lKSB7IHJldHVybiBzdGF0ZS5vLm9uQ29tcGxldGVkKCk7IH1cblx0XG5cdCAgICAgIC8vIENoZWNrIGlmIHByb21pc2Vcblx0ICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRJdGVtLnZhbHVlO1xuXHQgICAgICBpc1Byb21pc2UoY3VycmVudFZhbHVlKSAmJiAoY3VycmVudFZhbHVlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGN1cnJlbnRWYWx1ZSkpO1xuXHRcblx0ICAgICAgdmFyIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblx0ICAgICAgc3RhdGUuc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUoZCk7XG5cdCAgICAgIGQuc2V0RGlzcG9zYWJsZShjdXJyZW50VmFsdWUuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKHN0YXRlLCByZWN1cnNlKSkpO1xuXHQgICAgfVxuXHRcblx0ICAgIENvbmNhdEVudW1lcmFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG5cdCAgICAgIHZhciBzdGF0ZSA9IHtcblx0ICAgICAgICBpc0Rpc3Bvc2VkOiBmYWxzZSxcblx0ICAgICAgICBvOiBvLFxuXHQgICAgICAgIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uLFxuXHQgICAgICAgIGU6IHRoaXMuc291cmNlc1skaXRlcmF0b3IkXSgpXG5cdCAgICAgIH07XG5cdFxuXHQgICAgICB2YXIgY2FuY2VsYWJsZSA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUoc3RhdGUsIHNjaGVkdWxlTWV0aG9kKTtcblx0ICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShbc3Vic2NyaXB0aW9uLCBjYW5jZWxhYmxlLCBuZXcgSXNEaXNwb3NlZERpc3Bvc2FibGUoc3RhdGUpXSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIoc3RhdGUsIHJlY3Vyc2UpIHtcblx0ICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcblx0ICAgICAgdGhpcy5fcmVjdXJzZSA9IHJlY3Vyc2U7XG5cdCAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcblx0XG5cdCAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5fc3RhdGUuby5vbk5leHQoeCk7IH07XG5cdCAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX3N0YXRlLm8ub25FcnJvcihlKTsgfTtcblx0ICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fcmVjdXJzZSh0aGlzLl9zdGF0ZSk7IH07XG5cdFxuXHQgICAgcmV0dXJuIENvbmNhdEVudW1lcmFibGVPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgRW51bWVyYWJsZS5wcm90b3R5cGUuY29uY2F0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIG5ldyBDb25jYXRFbnVtZXJhYmxlT2JzZXJ2YWJsZSh0aGlzKTtcblx0ICB9O1xuXHRcblx0ICB2YXIgQ2F0Y2hFcnJvck9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBmdW5jdGlvbiBDYXRjaEVycm9yT2JzZXJ2YWJsZShzb3VyY2VzKSB7XG5cdCAgICAgIHRoaXMuc291cmNlcyA9IHNvdXJjZXM7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIGluaGVyaXRzKENhdGNoRXJyb3JPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXHRcblx0ICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHN0YXRlLCByZWN1cnNlKSB7XG5cdCAgICAgIGlmIChzdGF0ZS5pc0Rpc3Bvc2VkKSB7IHJldHVybjsgfVxuXHQgICAgICB2YXIgY3VycmVudEl0ZW0gPSB0cnlDYXRjaChzdGF0ZS5lLm5leHQpLmNhbGwoc3RhdGUuZSk7XG5cdCAgICAgIGlmIChjdXJyZW50SXRlbSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHN0YXRlLm8ub25FcnJvcihjdXJyZW50SXRlbS5lKTsgfVxuXHQgICAgICBpZiAoY3VycmVudEl0ZW0uZG9uZSkgeyByZXR1cm4gc3RhdGUubGFzdEVycm9yICE9PSBudWxsID8gc3RhdGUuby5vbkVycm9yKHN0YXRlLmxhc3RFcnJvcikgOiBzdGF0ZS5vLm9uQ29tcGxldGVkKCk7IH1cblx0XG5cdCAgICAgIHZhciBjdXJyZW50VmFsdWUgPSBjdXJyZW50SXRlbS52YWx1ZTtcblx0ICAgICAgaXNQcm9taXNlKGN1cnJlbnRWYWx1ZSkgJiYgKGN1cnJlbnRWYWx1ZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShjdXJyZW50VmFsdWUpKTtcblx0XG5cdCAgICAgIHZhciBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cdCAgICAgIHN0YXRlLnN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKGQpO1xuXHQgICAgICBkLnNldERpc3Bvc2FibGUoY3VycmVudFZhbHVlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihzdGF0ZSwgcmVjdXJzZSkpKTtcblx0ICAgIH1cblx0XG5cdCAgICBDYXRjaEVycm9yT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuXHQgICAgICB2YXIgc3RhdGUgPSB7XG5cdCAgICAgICAgaXNEaXNwb3NlZDogZmFsc2UsXG5cdCAgICAgICAgZTogdGhpcy5zb3VyY2VzWyRpdGVyYXRvciRdKCksXG5cdCAgICAgICAgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24sXG5cdCAgICAgICAgbGFzdEVycm9yOiBudWxsLFxuXHQgICAgICAgIG86IG9cblx0ICAgICAgfTtcblx0XG5cdCAgICAgIHZhciBjYW5jZWxhYmxlID0gY3VycmVudFRocmVhZFNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShzdGF0ZSwgc2NoZWR1bGVNZXRob2QpO1xuXHQgICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKFtzdWJzY3JpcHRpb24sIGNhbmNlbGFibGUsIG5ldyBJc0Rpc3Bvc2VkRGlzcG9zYWJsZShzdGF0ZSldKTtcblx0ICAgIH07XG5cdFxuXHQgICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihzdGF0ZSwgcmVjdXJzZSkge1xuXHQgICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuXHQgICAgICB0aGlzLl9yZWN1cnNlID0gcmVjdXJzZTtcblx0ICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuXHRcblx0ICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9zdGF0ZS5vLm9uTmV4dCh4KTsgfTtcblx0ICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fc3RhdGUubGFzdEVycm9yID0gZTsgdGhpcy5fcmVjdXJzZSh0aGlzLl9zdGF0ZSk7IH07XG5cdCAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX3N0YXRlLm8ub25Db21wbGV0ZWQoKTsgfTtcblx0XG5cdCAgICByZXR1cm4gQ2F0Y2hFcnJvck9ic2VydmFibGU7XG5cdCAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXHRcblx0ICBFbnVtZXJhYmxlLnByb3RvdHlwZS5jYXRjaEVycm9yID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIG5ldyBDYXRjaEVycm9yT2JzZXJ2YWJsZSh0aGlzKTtcblx0ICB9O1xuXHRcblx0ICBFbnVtZXJhYmxlLnByb3RvdHlwZS5jYXRjaEVycm9yV2hlbiA9IGZ1bmN0aW9uIChub3RpZmljYXRpb25IYW5kbGVyKSB7XG5cdCAgICB2YXIgc291cmNlcyA9IHRoaXM7XG5cdCAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgdmFyIGV4Y2VwdGlvbnMgPSBuZXcgU3ViamVjdCgpLFxuXHQgICAgICAgIG5vdGlmaWVyID0gbmV3IFN1YmplY3QoKSxcblx0ICAgICAgICBoYW5kbGVkID0gbm90aWZpY2F0aW9uSGFuZGxlcihleGNlcHRpb25zKSxcblx0ICAgICAgICBub3RpZmljYXRpb25EaXNwb3NhYmxlID0gaGFuZGxlZC5zdWJzY3JpYmUobm90aWZpZXIpO1xuXHRcblx0ICAgICAgdmFyIGUgPSBzb3VyY2VzWyRpdGVyYXRvciRdKCk7XG5cdFxuXHQgICAgICB2YXIgc3RhdGUgPSB7IGlzRGlzcG9zZWQ6IGZhbHNlIH0sXG5cdCAgICAgICAgbGFzdEVycm9yLFxuXHQgICAgICAgIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG5cdCAgICAgIHZhciBjYW5jZWxhYmxlID0gY3VycmVudFRocmVhZFNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShudWxsLCBmdW5jdGlvbiAoXywgc2VsZikge1xuXHQgICAgICAgIGlmIChzdGF0ZS5pc0Rpc3Bvc2VkKSB7IHJldHVybjsgfVxuXHQgICAgICAgIHZhciBjdXJyZW50SXRlbSA9IHRyeUNhdGNoKGUubmV4dCkuY2FsbChlKTtcblx0ICAgICAgICBpZiAoY3VycmVudEl0ZW0gPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IoY3VycmVudEl0ZW0uZSk7IH1cblx0XG5cdCAgICAgICAgaWYgKGN1cnJlbnRJdGVtLmRvbmUpIHtcblx0ICAgICAgICAgIGlmIChsYXN0RXJyb3IpIHtcblx0ICAgICAgICAgICAgby5vbkVycm9yKGxhc3RFcnJvcik7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBDaGVjayBpZiBwcm9taXNlXG5cdCAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRJdGVtLnZhbHVlO1xuXHQgICAgICAgIGlzUHJvbWlzZShjdXJyZW50VmFsdWUpICYmIChjdXJyZW50VmFsdWUgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoY3VycmVudFZhbHVlKSk7XG5cdFxuXHQgICAgICAgIHZhciBvdXRlciA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXHQgICAgICAgIHZhciBpbm5lciA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXHQgICAgICAgIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKG5ldyBCaW5hcnlEaXNwb3NhYmxlKGlubmVyLCBvdXRlcikpO1xuXHQgICAgICAgIG91dGVyLnNldERpc3Bvc2FibGUoY3VycmVudFZhbHVlLnN1YnNjcmliZShcblx0ICAgICAgICAgIGZ1bmN0aW9uKHgpIHsgby5vbk5leHQoeCk7IH0sXG5cdCAgICAgICAgICBmdW5jdGlvbiAoZXhuKSB7XG5cdCAgICAgICAgICAgIGlubmVyLnNldERpc3Bvc2FibGUobm90aWZpZXIuc3Vic2NyaWJlKHNlbGYsIGZ1bmN0aW9uKGV4KSB7XG5cdCAgICAgICAgICAgICAgby5vbkVycm9yKGV4KTtcblx0ICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgICAgICAgICB9KSk7XG5cdFxuXHQgICAgICAgICAgICBleGNlcHRpb25zLm9uTmV4dChleG4pO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIGZ1bmN0aW9uKCkgeyBvLm9uQ29tcGxldGVkKCk7IH0pKTtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKFtub3RpZmljYXRpb25EaXNwb3NhYmxlLCBzdWJzY3JpcHRpb24sIGNhbmNlbGFibGUsIG5ldyBJc0Rpc3Bvc2VkRGlzcG9zYWJsZShzdGF0ZSldKTtcblx0ICAgIH0pO1xuXHQgIH07XG5cdFxuXHQgIHZhciBSZXBlYXRFbnVtZXJhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKFJlcGVhdEVudW1lcmFibGUsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBSZXBlYXRFbnVtZXJhYmxlKHYsIGMpIHtcblx0ICAgICAgdGhpcy52ID0gdjtcblx0ICAgICAgdGhpcy5jID0gYyA9PSBudWxsID8gLTEgOiBjO1xuXHQgICAgfVxuXHRcblx0ICAgIFJlcGVhdEVudW1lcmFibGUucHJvdG90eXBlWyRpdGVyYXRvciRdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gbmV3IFJlcGVhdEVudW1lcmF0b3IodGhpcyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIGZ1bmN0aW9uIFJlcGVhdEVudW1lcmF0b3IocCkge1xuXHQgICAgICB0aGlzLnYgPSBwLnY7XG5cdCAgICAgIHRoaXMubCA9IHAuYztcblx0ICAgIH1cblx0XG5cdCAgICBSZXBlYXRFbnVtZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAodGhpcy5sID09PSAwKSB7IHJldHVybiBkb25lRW51bWVyYXRvcjsgfVxuXHQgICAgICBpZiAodGhpcy5sID4gMCkgeyB0aGlzLmwtLTsgfVxuXHQgICAgICByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IHRoaXMudiB9O1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gUmVwZWF0RW51bWVyYWJsZTtcblx0ICB9KEVudW1lcmFibGUpKTtcblx0XG5cdCAgdmFyIGVudW1lcmFibGVSZXBlYXQgPSBFbnVtZXJhYmxlLnJlcGVhdCA9IGZ1bmN0aW9uICh2YWx1ZSwgcmVwZWF0Q291bnQpIHtcblx0ICAgIHJldHVybiBuZXcgUmVwZWF0RW51bWVyYWJsZSh2YWx1ZSwgcmVwZWF0Q291bnQpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBPZkVudW1lcmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhPZkVudW1lcmFibGUsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBPZkVudW1lcmFibGUocywgZm4sIHRoaXNBcmcpIHtcblx0ICAgICAgdGhpcy5zID0gcztcblx0ICAgICAgdGhpcy5mbiA9IGZuID8gYmluZENhbGxiYWNrKGZuLCB0aGlzQXJnLCAzKSA6IG51bGw7XG5cdCAgICB9XG5cdCAgICBPZkVudW1lcmFibGUucHJvdG90eXBlWyRpdGVyYXRvciRdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gbmV3IE9mRW51bWVyYXRvcih0aGlzKTtcblx0ICAgIH07XG5cdFxuXHQgICAgZnVuY3Rpb24gT2ZFbnVtZXJhdG9yKHApIHtcblx0ICAgICAgdGhpcy5pID0gLTE7XG5cdCAgICAgIHRoaXMucyA9IHAucztcblx0ICAgICAgdGhpcy5sID0gdGhpcy5zLmxlbmd0aDtcblx0ICAgICAgdGhpcy5mbiA9IHAuZm47XG5cdCAgICB9XG5cdFxuXHQgICAgT2ZFbnVtZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgIHJldHVybiArK3RoaXMuaSA8IHRoaXMubCA/XG5cdCAgICAgICB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogIXRoaXMuZm4gPyB0aGlzLnNbdGhpcy5pXSA6IHRoaXMuZm4odGhpcy5zW3RoaXMuaV0sIHRoaXMuaSwgdGhpcy5zKSB9IDpcblx0ICAgICAgIGRvbmVFbnVtZXJhdG9yO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gT2ZFbnVtZXJhYmxlO1xuXHQgIH0oRW51bWVyYWJsZSkpO1xuXHRcblx0ICB2YXIgZW51bWVyYWJsZU9mID0gRW51bWVyYWJsZS5vZiA9IGZ1bmN0aW9uIChzb3VyY2UsIHNlbGVjdG9yLCB0aGlzQXJnKSB7XG5cdCAgICByZXR1cm4gbmV3IE9mRW51bWVyYWJsZShzb3VyY2UsIHNlbGVjdG9yLCB0aGlzQXJnKTtcblx0ICB9O1xuXHRcblx0ICB2YXIgVG9BcnJheU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhUb0FycmF5T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIFRvQXJyYXlPYnNlcnZhYmxlKHNvdXJjZSkge1xuXHQgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgVG9BcnJheU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIobykpO1xuXHQgICAgfTtcblx0XG5cdCAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcblx0ICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIobykge1xuXHQgICAgICB0aGlzLm8gPSBvO1xuXHQgICAgICB0aGlzLmEgPSBbXTtcblx0ICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgXG5cdCAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5hLnB1c2goeCk7IH07XG5cdCAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuby5vbkVycm9yKGUpOyAgfTtcblx0ICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5vLm9uTmV4dCh0aGlzLmEpOyB0aGlzLm8ub25Db21wbGV0ZWQoKTsgfTtcblx0XG5cdCAgICByZXR1cm4gVG9BcnJheU9ic2VydmFibGU7XG5cdCAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXHRcblx0ICAvKipcblx0ICAqIENyZWF0ZXMgYW4gYXJyYXkgZnJvbSBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuXHQgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IHdpdGggYSBsaXN0IGNvbnRhaW5pbmcgYWxsIHRoZSBlbGVtZW50cyBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuXHQgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLnRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gbmV3IFRvQXJyYXlPYnNlcnZhYmxlKHRoaXMpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICBDcmVhdGVzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgZnJvbSBhIHNwZWNpZmllZCBzdWJzY3JpYmUgbWV0aG9kIGltcGxlbWVudGF0aW9uLlxuXHQgICAqIEBleGFtcGxlXG5cdCAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgfSApO1xuXHQgICAqICB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5jcmVhdGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7IHJldHVybiBSeC5EaXNwb3NhYmxlLmVtcHR5OyB9ICk7XG5cdCAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgfSApO1xuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IHN1YnNjcmliZSBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgcmVzdWx0aW5nIG9ic2VydmFibGUgc2VxdWVuY2UncyBzdWJzY3JpYmUgbWV0aG9kLCByZXR1cm5pbmcgYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgd3JhcHBlZCBpbiBhIERpc3Bvc2FibGUuXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGhlIHNwZWNpZmllZCBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlIFN1YnNjcmliZSBtZXRob2QuXG5cdCAgICovXG5cdCAgT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlLCBwYXJlbnQpIHtcblx0ICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShzdWJzY3JpYmUsIHBhcmVudCk7XG5cdCAgfTtcblx0XG5cdCAgdmFyIERlZmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoRGVmZXIsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBEZWZlcihmYWN0b3J5KSB7XG5cdCAgICAgIHRoaXMuX2YgPSBmYWN0b3J5O1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBEZWZlci5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9mKSgpO1xuXHQgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gb2JzZXJ2YWJsZVRocm93KHJlc3VsdC5lKS5zdWJzY3JpYmUobyk7fVxuXHQgICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuXHQgICAgICByZXR1cm4gcmVzdWx0LnN1YnNjcmliZShvKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIERlZmVyO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGludm9rZXMgdGhlIHNwZWNpZmllZCBmYWN0b3J5IGZ1bmN0aW9uIHdoZW5ldmVyIGEgbmV3IG9ic2VydmVyIHN1YnNjcmliZXMuXG5cdCAgICpcblx0ICAgKiBAZXhhbXBsZVxuXHQgICAqICB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5kZWZlcihmdW5jdGlvbiAoKSB7IHJldHVybiBSeC5PYnNlcnZhYmxlLmZyb21BcnJheShbMSwyLDNdKTsgfSk7XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gb2JzZXJ2YWJsZUZhY3RvcnkgT2JzZXJ2YWJsZSBmYWN0b3J5IGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBvYnNlcnZlciB0aGF0IHN1YnNjcmliZXMgdG8gdGhlIHJlc3VsdGluZyBzZXF1ZW5jZSBvciBQcm9taXNlLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIG9ic2VydmVycyB0cmlnZ2VyIGFuIGludm9jYXRpb24gb2YgdGhlIGdpdmVuIG9ic2VydmFibGUgZmFjdG9yeSBmdW5jdGlvbi5cblx0ICAgKi9cblx0ICB2YXIgb2JzZXJ2YWJsZURlZmVyID0gT2JzZXJ2YWJsZS5kZWZlciA9IGZ1bmN0aW9uIChvYnNlcnZhYmxlRmFjdG9yeSkge1xuXHQgICAgcmV0dXJuIG5ldyBEZWZlcihvYnNlcnZhYmxlRmFjdG9yeSk7XG5cdCAgfTtcblx0XG5cdCAgdmFyIEVtcHR5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKEVtcHR5T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIEVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpIHtcblx0ICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIEVtcHR5T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuXHQgICAgICB2YXIgc2luayA9IG5ldyBFbXB0eVNpbmsob2JzZXJ2ZXIsIHRoaXMuc2NoZWR1bGVyKTtcblx0ICAgICAgcmV0dXJuIHNpbmsucnVuKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIGZ1bmN0aW9uIEVtcHR5U2luayhvYnNlcnZlciwgc2NoZWR1bGVyKSB7XG5cdCAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcblx0ICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gc2NoZWR1bGVJdGVtKHMsIHN0YXRlKSB7XG5cdCAgICAgIHN0YXRlLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG5cdCAgICB9XG5cdFxuXHQgICAgRW1wdHlTaW5rLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBzdGF0ZSA9IHRoaXMub2JzZXJ2ZXI7XG5cdCAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlciA9PT0gaW1tZWRpYXRlU2NoZWR1bGVyID9cblx0ICAgICAgICBzY2hlZHVsZUl0ZW0obnVsbCwgc3RhdGUpIDpcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShzdGF0ZSwgc2NoZWR1bGVJdGVtKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIEVtcHR5T2JzZXJ2YWJsZTtcblx0ICB9KE9ic2VydmFibGVCYXNlKSk7XG5cdFxuXHQgIHZhciBFTVBUWV9PQlNFUlZBQkxFID0gbmV3IEVtcHR5T2JzZXJ2YWJsZShpbW1lZGlhdGVTY2hlZHVsZXIpO1xuXHRcblx0ICAvKipcblx0ICAgKiAgUmV0dXJucyBhbiBlbXB0eSBvYnNlcnZhYmxlIHNlcXVlbmNlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBzZW5kIG91dCB0aGUgc2luZ2xlIE9uQ29tcGxldGVkIG1lc3NhZ2UuXG5cdCAgICpcblx0ICAgKiBAZXhhbXBsZVxuXHQgICAqICB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5lbXB0eSgpO1xuXHQgICAqICB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5lbXB0eShSeC5TY2hlZHVsZXIudGltZW91dCk7XG5cdCAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB0byBzZW5kIHRoZSB0ZXJtaW5hdGlvbiBjYWxsIG9uLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggbm8gZWxlbWVudHMuXG5cdCAgICovXG5cdCAgdmFyIG9ic2VydmFibGVFbXB0eSA9IE9ic2VydmFibGUuZW1wdHkgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG5cdCAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBpbW1lZGlhdGVTY2hlZHVsZXIpO1xuXHQgICAgcmV0dXJuIHNjaGVkdWxlciA9PT0gaW1tZWRpYXRlU2NoZWR1bGVyID8gRU1QVFlfT0JTRVJWQUJMRSA6IG5ldyBFbXB0eU9ic2VydmFibGUoc2NoZWR1bGVyKTtcblx0ICB9O1xuXHRcblx0ICB2YXIgRnJvbU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhGcm9tT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIEZyb21PYnNlcnZhYmxlKGl0ZXJhYmxlLCBmbiwgc2NoZWR1bGVyKSB7XG5cdCAgICAgIHRoaXMuX2l0ZXJhYmxlID0gaXRlcmFibGU7XG5cdCAgICAgIHRoaXMuX2ZuID0gZm47XG5cdCAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gY3JlYXRlU2NoZWR1bGVNZXRob2QobywgaXQsIGZuKSB7XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbiBsb29wUmVjdXJzaXZlKGksIHJlY3Vyc2UpIHtcblx0ICAgICAgICB2YXIgbmV4dCA9IHRyeUNhdGNoKGl0Lm5leHQpLmNhbGwoaXQpO1xuXHQgICAgICAgIGlmIChuZXh0ID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKG5leHQuZSk7IH1cblx0ICAgICAgICBpZiAobmV4dC5kb25lKSB7IHJldHVybiBvLm9uQ29tcGxldGVkKCk7IH1cblx0XG5cdCAgICAgICAgdmFyIHJlc3VsdCA9IG5leHQudmFsdWU7XG5cdFxuXHQgICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuXHQgICAgICAgICAgcmVzdWx0ID0gdHJ5Q2F0Y2goZm4pKHJlc3VsdCwgaSk7XG5cdCAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgby5vbk5leHQocmVzdWx0KTtcblx0ICAgICAgICByZWN1cnNlKGkgKyAxKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBGcm9tT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHZhciBsaXN0ID0gT2JqZWN0KHRoaXMuX2l0ZXJhYmxlKSxcblx0ICAgICAgICAgIGl0ID0gZ2V0SXRlcmFibGUobGlzdCk7XG5cdFxuXHQgICAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKDAsIGNyZWF0ZVNjaGVkdWxlTWV0aG9kKG8sIGl0LCB0aGlzLl9mbikpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gRnJvbU9ic2VydmFibGU7XG5cdCAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXHRcblx0ICB2YXIgbWF4U2FmZUludGVnZXIgPSBNYXRoLnBvdygyLCA1MykgLSAxO1xuXHRcblx0ICBmdW5jdGlvbiBTdHJpbmdJdGVyYWJsZShzKSB7XG5cdCAgICB0aGlzLl9zID0gcztcblx0ICB9XG5cdFxuXHQgIFN0cmluZ0l0ZXJhYmxlLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBuZXcgU3RyaW5nSXRlcmF0b3IodGhpcy5fcyk7XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gU3RyaW5nSXRlcmF0b3Iocykge1xuXHQgICAgdGhpcy5fcyA9IHM7XG5cdCAgICB0aGlzLl9sID0gcy5sZW5ndGg7XG5cdCAgICB0aGlzLl9pID0gMDtcblx0ICB9XG5cdFxuXHQgIFN0cmluZ0l0ZXJhdG9yLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIFN0cmluZ0l0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIHRoaXMuX2kgPCB0aGlzLl9sID8geyBkb25lOiBmYWxzZSwgdmFsdWU6IHRoaXMuX3MuY2hhckF0KHRoaXMuX2krKykgfSA6IGRvbmVFbnVtZXJhdG9yO1xuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIEFycmF5SXRlcmFibGUoYSkge1xuXHQgICAgdGhpcy5fYSA9IGE7XG5cdCAgfVxuXHRcblx0ICBBcnJheUl0ZXJhYmxlLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBuZXcgQXJyYXlJdGVyYXRvcih0aGlzLl9hKTtcblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBBcnJheUl0ZXJhdG9yKGEpIHtcblx0ICAgIHRoaXMuX2EgPSBhO1xuXHQgICAgdGhpcy5fbCA9IHRvTGVuZ3RoKGEpO1xuXHQgICAgdGhpcy5faSA9IDA7XG5cdCAgfVxuXHRcblx0ICBBcnJheUl0ZXJhdG9yLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIEFycmF5SXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5faSA8IHRoaXMuX2wgPyB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogdGhpcy5fYVt0aGlzLl9pKytdIH0gOiBkb25lRW51bWVyYXRvcjtcblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBudW1iZXJJc0Zpbml0ZSh2YWx1ZSkge1xuXHQgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgcm9vdC5pc0Zpbml0ZSh2YWx1ZSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpc05hbihuKSB7XG5cdCAgICByZXR1cm4gbiAhPT0gbjtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGdldEl0ZXJhYmxlKG8pIHtcblx0ICAgIHZhciBpID0gb1skaXRlcmF0b3IkXSwgaXQ7XG5cdCAgICBpZiAoIWkgJiYgdHlwZW9mIG8gPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIGl0ID0gbmV3IFN0cmluZ0l0ZXJhYmxlKG8pO1xuXHQgICAgICByZXR1cm4gaXRbJGl0ZXJhdG9yJF0oKTtcblx0ICAgIH1cblx0ICAgIGlmICghaSAmJiBvLmxlbmd0aCAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGl0ID0gbmV3IEFycmF5SXRlcmFibGUobyk7XG5cdCAgICAgIHJldHVybiBpdFskaXRlcmF0b3IkXSgpO1xuXHQgICAgfVxuXHQgICAgaWYgKCFpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdCBpcyBub3QgaXRlcmFibGUnKTsgfVxuXHQgICAgcmV0dXJuIG9bJGl0ZXJhdG9yJF0oKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHNpZ24odmFsdWUpIHtcblx0ICAgIHZhciBudW1iZXIgPSArdmFsdWU7XG5cdCAgICBpZiAobnVtYmVyID09PSAwKSB7IHJldHVybiBudW1iZXI7IH1cblx0ICAgIGlmIChpc05hTihudW1iZXIpKSB7IHJldHVybiBudW1iZXI7IH1cblx0ICAgIHJldHVybiBudW1iZXIgPCAwID8gLTEgOiAxO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdG9MZW5ndGgobykge1xuXHQgICAgdmFyIGxlbiA9ICtvLmxlbmd0aDtcblx0ICAgIGlmIChpc05hTihsZW4pKSB7IHJldHVybiAwOyB9XG5cdCAgICBpZiAobGVuID09PSAwIHx8ICFudW1iZXJJc0Zpbml0ZShsZW4pKSB7IHJldHVybiBsZW47IH1cblx0ICAgIGxlbiA9IHNpZ24obGVuKSAqIE1hdGguZmxvb3IoTWF0aC5hYnMobGVuKSk7XG5cdCAgICBpZiAobGVuIDw9IDApIHsgcmV0dXJuIDA7IH1cblx0ICAgIGlmIChsZW4gPiBtYXhTYWZlSW50ZWdlcikgeyByZXR1cm4gbWF4U2FmZUludGVnZXI7IH1cblx0ICAgIHJldHVybiBsZW47XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAqIFRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBuZXcgT2JzZXJ2YWJsZSBzZXF1ZW5jZSBmcm9tIGFuIGFycmF5LWxpa2Ugb3IgaXRlcmFibGUgb2JqZWN0LlxuXHQgICogQHBhcmFtIHtBbnl9IGFycmF5TGlrZSBBbiBhcnJheS1saWtlIG9yIGl0ZXJhYmxlIG9iamVjdCB0byBjb252ZXJ0IHRvIGFuIE9ic2VydmFibGUgc2VxdWVuY2UuXG5cdCAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbbWFwRm5dIE1hcCBmdW5jdGlvbiB0byBjYWxsIG9uIGV2ZXJ5IGVsZW1lbnQgb2YgdGhlIGFycmF5LlxuXHQgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBUaGUgY29udGV4dCB0byB1c2UgY2FsbGluZyB0aGUgbWFwRm4gaWYgcHJvdmlkZWQuXG5cdCAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gT3B0aW9uYWwgc2NoZWR1bGVyIHRvIHVzZSBmb3Igc2NoZWR1bGluZy4gIElmIG5vdCBwcm92aWRlZCwgZGVmYXVsdHMgdG8gU2NoZWR1bGVyLmN1cnJlbnRUaHJlYWQuXG5cdCAgKi9cblx0ICB2YXIgb2JzZXJ2YWJsZUZyb20gPSBPYnNlcnZhYmxlLmZyb20gPSBmdW5jdGlvbiAoaXRlcmFibGUsIG1hcEZuLCB0aGlzQXJnLCBzY2hlZHVsZXIpIHtcblx0ICAgIGlmIChpdGVyYWJsZSA9PSBudWxsKSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignaXRlcmFibGUgY2Fubm90IGJlIG51bGwuJylcblx0ICAgIH1cblx0ICAgIGlmIChtYXBGbiAmJiAhaXNGdW5jdGlvbihtYXBGbikpIHtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKCdtYXBGbiB3aGVuIHByb3ZpZGVkIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXHQgICAgfVxuXHQgICAgaWYgKG1hcEZuKSB7XG5cdCAgICAgIHZhciBtYXBwZXIgPSBiaW5kQ2FsbGJhY2sobWFwRm4sIHRoaXNBcmcsIDIpO1xuXHQgICAgfVxuXHQgICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gY3VycmVudFRocmVhZFNjaGVkdWxlcik7XG5cdCAgICByZXR1cm4gbmV3IEZyb21PYnNlcnZhYmxlKGl0ZXJhYmxlLCBtYXBwZXIsIHNjaGVkdWxlcik7XG5cdCAgfVxuXHRcblx0ICB2YXIgRnJvbUFycmF5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKEZyb21BcnJheU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBGcm9tQXJyYXlPYnNlcnZhYmxlKGFyZ3MsIHNjaGVkdWxlcikge1xuXHQgICAgICB0aGlzLl9hcmdzID0gYXJncztcblx0ICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChvLCBhcmdzKSB7XG5cdCAgICAgIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxvb3BSZWN1cnNpdmUgKGksIHJlY3Vyc2UpIHtcblx0ICAgICAgICBpZiAoaSA8IGxlbikge1xuXHQgICAgICAgICAgby5vbk5leHQoYXJnc1tpXSk7XG5cdCAgICAgICAgICByZWN1cnNlKGkgKyAxKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBGcm9tQXJyYXlPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZSgwLCBzY2hlZHVsZU1ldGhvZChvLCB0aGlzLl9hcmdzKSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBGcm9tQXJyYXlPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgLyoqXG5cdCAgKiAgQ29udmVydHMgYW4gYXJyYXkgdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgdXNpbmcgYW4gb3B0aW9uYWwgc2NoZWR1bGVyIHRvIGVudW1lcmF0ZSB0aGUgYXJyYXkuXG5cdCAgKiBAZGVwcmVjYXRlZCB1c2UgT2JzZXJ2YWJsZS5mcm9tIG9yIE9ic2VydmFibGUub2Zcblx0ICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSBlbnVtZXJhdGlvbiBvZiB0aGUgaW5wdXQgc2VxdWVuY2Ugb24uXG5cdCAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hvc2UgZWxlbWVudHMgYXJlIHB1bGxlZCBmcm9tIHRoZSBnaXZlbiBlbnVtZXJhYmxlIHNlcXVlbmNlLlxuXHQgICovXG5cdCAgdmFyIG9ic2VydmFibGVGcm9tQXJyYXkgPSBPYnNlcnZhYmxlLmZyb21BcnJheSA9IGZ1bmN0aW9uIChhcnJheSwgc2NoZWR1bGVyKSB7XG5cdCAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcblx0ICAgIHJldHVybiBuZXcgRnJvbUFycmF5T2JzZXJ2YWJsZShhcnJheSwgc2NoZWR1bGVyKVxuXHQgIH07XG5cdFxuXHQgIHZhciBOZXZlck9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhOZXZlck9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBOZXZlck9ic2VydmFibGUoKSB7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIE5ldmVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuXHQgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gTmV2ZXJPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgdmFyIE5FVkVSX09CU0VSVkFCTEUgPSBuZXcgTmV2ZXJPYnNlcnZhYmxlKCk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJldHVybnMgYSBub24tdGVybWluYXRpbmcgb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgd2hpY2ggY2FuIGJlIHVzZWQgdG8gZGVub3RlIGFuIGluZmluaXRlIGR1cmF0aW9uIChlLmcuIHdoZW4gdXNpbmcgcmVhY3RpdmUgam9pbnMpLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIG9ic2VydmVycyB3aWxsIG5ldmVyIGdldCBjYWxsZWQuXG5cdCAgICovXG5cdCAgdmFyIG9ic2VydmFibGVOZXZlciA9IE9ic2VydmFibGUubmV2ZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gTkVWRVJfT0JTRVJWQUJMRTtcblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBvYnNlcnZhYmxlT2YgKHNjaGVkdWxlciwgYXJyYXkpIHtcblx0ICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuXHQgICAgcmV0dXJuIG5ldyBGcm9tQXJyYXlPYnNlcnZhYmxlKGFycmF5LCBzY2hlZHVsZXIpO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgKiAgVGhpcyBtZXRob2QgY3JlYXRlcyBhIG5ldyBPYnNlcnZhYmxlIGluc3RhbmNlIHdpdGggYSB2YXJpYWJsZSBudW1iZXIgb2YgYXJndW1lbnRzLCByZWdhcmRsZXNzIG9mIG51bWJlciBvciB0eXBlIG9mIHRoZSBhcmd1bWVudHMuXG5cdCAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hvc2UgZWxlbWVudHMgYXJlIHB1bGxlZCBmcm9tIHRoZSBnaXZlbiBhcmd1bWVudHMuXG5cdCAgKi9cblx0ICBPYnNlcnZhYmxlLm9mID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcblx0ICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG5cdCAgICByZXR1cm4gbmV3IEZyb21BcnJheU9ic2VydmFibGUoYXJncywgY3VycmVudFRocmVhZFNjaGVkdWxlcik7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgKiAgVGhpcyBtZXRob2QgY3JlYXRlcyBhIG5ldyBPYnNlcnZhYmxlIGluc3RhbmNlIHdpdGggYSB2YXJpYWJsZSBudW1iZXIgb2YgYXJndW1lbnRzLCByZWdhcmRsZXNzIG9mIG51bWJlciBvciB0eXBlIG9mIHRoZSBhcmd1bWVudHMuXG5cdCAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIEEgc2NoZWR1bGVyIHRvIHVzZSBmb3Igc2NoZWR1bGluZyB0aGUgYXJndW1lbnRzLlxuXHQgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGFyZSBwdWxsZWQgZnJvbSB0aGUgZ2l2ZW4gYXJndW1lbnRzLlxuXHQgICovXG5cdCAgT2JzZXJ2YWJsZS5vZldpdGhTY2hlZHVsZXIgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG5cdCAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4gLSAxKTtcblx0ICAgIGZvcih2YXIgaSA9IDE7IGkgPCBsZW47IGkrKykgeyBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTsgfVxuXHQgICAgcmV0dXJuIG5ldyBGcm9tQXJyYXlPYnNlcnZhYmxlKGFyZ3MsIHNjaGVkdWxlcik7XG5cdCAgfTtcblx0XG5cdCAgdmFyIFBhaXJzT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKFBhaXJzT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIFBhaXJzT2JzZXJ2YWJsZShvLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgdGhpcy5fbyA9IG87XG5cdCAgICAgIHRoaXMuX2tleXMgPSBPYmplY3Qua2V5cyhvKTtcblx0ICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChvLCBvYmosIGtleXMpIHtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxvb3BSZWN1cnNpdmUoaSwgcmVjdXJzZSkge1xuXHQgICAgICAgIGlmIChpIDwga2V5cy5sZW5ndGgpIHtcblx0ICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICAgICAgby5vbk5leHQoW2tleSwgb2JqW2tleV1dKTtcblx0ICAgICAgICAgIHJlY3Vyc2UoaSArIDEpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIFBhaXJzT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUoMCwgc2NoZWR1bGVNZXRob2QobywgdGhpcy5fbywgdGhpcy5fa2V5cykpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gUGFpcnNPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ29udmVydCBhbiBvYmplY3QgaW50byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIFtrZXksIHZhbHVlXSBwYWlycy5cblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cblx0ICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHJ1biB0aGUgZW51bWVyYXRpb24gb2YgdGhlIGlucHV0IHNlcXVlbmNlIG9uLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIFtrZXksIHZhbHVlXSBwYWlycyBmcm9tIHRoZSBvYmplY3QuXG5cdCAgICovXG5cdCAgT2JzZXJ2YWJsZS5wYWlycyA9IGZ1bmN0aW9uIChvYmosIHNjaGVkdWxlcikge1xuXHQgICAgc2NoZWR1bGVyIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcblx0ICAgIHJldHVybiBuZXcgUGFpcnNPYnNlcnZhYmxlKG9iaiwgc2NoZWR1bGVyKTtcblx0ICB9O1xuXHRcblx0ICAgIHZhciBSYW5nZU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhSYW5nZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBSYW5nZU9ic2VydmFibGUoc3RhcnQsIGNvdW50LCBzY2hlZHVsZXIpIHtcblx0ICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuXHQgICAgICB0aGlzLnJhbmdlQ291bnQgPSBjb3VudDtcblx0ICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxvb3BSZWN1cnNpdmUoc3RhcnQsIGNvdW50LCBvKSB7XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbiBsb29wIChpLCByZWN1cnNlKSB7XG5cdCAgICAgICAgaWYgKGkgPCBjb3VudCkge1xuXHQgICAgICAgICAgby5vbk5leHQoc3RhcnQgKyBpKTtcblx0ICAgICAgICAgIHJlY3Vyc2UoaSArIDEpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIFJhbmdlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShcblx0ICAgICAgICAwLFxuXHQgICAgICAgIGxvb3BSZWN1cnNpdmUodGhpcy5zdGFydCwgdGhpcy5yYW5nZUNvdW50LCBvKVxuXHQgICAgICApO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gUmFuZ2VPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgLyoqXG5cdCAgKiAgR2VuZXJhdGVzIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2YgaW50ZWdyYWwgbnVtYmVycyB3aXRoaW4gYSBzcGVjaWZpZWQgcmFuZ2UsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHNlbmQgb3V0IG9ic2VydmVyIG1lc3NhZ2VzLlxuXHQgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0IFRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgaW50ZWdlciBpbiB0aGUgc2VxdWVuY2UuXG5cdCAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgVGhlIG51bWJlciBvZiBzZXF1ZW50aWFsIGludGVnZXJzIHRvIGdlbmVyYXRlLlxuXHQgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB0byBydW4gdGhlIGdlbmVyYXRvciBsb29wIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBTY2hlZHVsZXIuY3VycmVudFRocmVhZC5cblx0ICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgYSByYW5nZSBvZiBzZXF1ZW50aWFsIGludGVncmFsIG51bWJlcnMuXG5cdCAgKi9cblx0ICBPYnNlcnZhYmxlLnJhbmdlID0gZnVuY3Rpb24gKHN0YXJ0LCBjb3VudCwgc2NoZWR1bGVyKSB7XG5cdCAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcblx0ICAgIHJldHVybiBuZXcgUmFuZ2VPYnNlcnZhYmxlKHN0YXJ0LCBjb3VudCwgc2NoZWR1bGVyKTtcblx0ICB9O1xuXHRcblx0ICB2YXIgUmVwZWF0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKFJlcGVhdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBSZXBlYXRPYnNlcnZhYmxlKHZhbHVlLCByZXBlYXRDb3VudCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgdGhpcy5yZXBlYXRDb3VudCA9IHJlcGVhdENvdW50ID09IG51bGwgPyAtMSA6IHJlcGVhdENvdW50O1xuXHQgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgUmVwZWF0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuXHQgICAgICB2YXIgc2luayA9IG5ldyBSZXBlYXRTaW5rKG9ic2VydmVyLCB0aGlzKTtcblx0ICAgICAgcmV0dXJuIHNpbmsucnVuKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBSZXBlYXRPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgZnVuY3Rpb24gUmVwZWF0U2luayhvYnNlcnZlciwgcGFyZW50KSB7XG5cdCAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG5cdCAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcblx0ICB9XG5cdFxuXHQgIFJlcGVhdFNpbmsucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBvYnNlcnZlciA9IHRoaXMub2JzZXJ2ZXIsIHZhbHVlID0gdGhpcy5wYXJlbnQudmFsdWU7XG5cdCAgICBmdW5jdGlvbiBsb29wUmVjdXJzaXZlKGksIHJlY3Vyc2UpIHtcblx0ICAgICAgaWYgKGkgPT09IC0xIHx8IGkgPiAwKSB7XG5cdCAgICAgICAgb2JzZXJ2ZXIub25OZXh0KHZhbHVlKTtcblx0ICAgICAgICBpID4gMCAmJiBpLS07XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGkgPT09IDApIHsgcmV0dXJuIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7IH1cblx0ICAgICAgcmVjdXJzZShpKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpcy5wYXJlbnQuc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKHRoaXMucGFyZW50LnJlcGVhdENvdW50LCBsb29wUmVjdXJzaXZlKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAgR2VuZXJhdGVzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCByZXBlYXRzIHRoZSBnaXZlbiBlbGVtZW50IHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIHRpbWVzLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBzZW5kIG91dCBvYnNlcnZlciBtZXNzYWdlcy5cblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSBFbGVtZW50IHRvIHJlcGVhdC5cblx0ICAgKiBAcGFyYW0ge051bWJlcn0gcmVwZWF0Q291bnQgW09wdGlvbmFdIE51bWJlciBvZiB0aW1lcyB0byByZXBlYXQgdGhlIGVsZW1lbnQuIElmIG5vdCBzcGVjaWZpZWQsIHJlcGVhdHMgaW5kZWZpbml0ZWx5LlxuXHQgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBzY2hlZHVsZXIgU2NoZWR1bGVyIHRvIHJ1biB0aGUgcHJvZHVjZXIgbG9vcCBvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gU2NoZWR1bGVyLmltbWVkaWF0ZS5cblx0ICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHJlcGVhdHMgdGhlIGdpdmVuIGVsZW1lbnQgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgdGltZXMuXG5cdCAgICovXG5cdCAgT2JzZXJ2YWJsZS5yZXBlYXQgPSBmdW5jdGlvbiAodmFsdWUsIHJlcGVhdENvdW50LCBzY2hlZHVsZXIpIHtcblx0ICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuXHQgICAgcmV0dXJuIG5ldyBSZXBlYXRPYnNlcnZhYmxlKHZhbHVlLCByZXBlYXRDb3VudCwgc2NoZWR1bGVyKTtcblx0ICB9O1xuXHRcblx0ICB2YXIgSnVzdE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhKdXN0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIEp1c3RPYnNlcnZhYmxlKHZhbHVlLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBKdXN0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHZhciBzdGF0ZSA9IFt0aGlzLl92YWx1ZSwgb107XG5cdCAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZXIgPT09IGltbWVkaWF0ZVNjaGVkdWxlciA/XG5cdCAgICAgICAgc2NoZWR1bGVJdGVtKG51bGwsIHN0YXRlKSA6XG5cdCAgICAgICAgdGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlLCBzY2hlZHVsZUl0ZW0pO1xuXHQgICAgfTtcblx0XG5cdCAgICBmdW5jdGlvbiBzY2hlZHVsZUl0ZW0ocywgc3RhdGUpIHtcblx0ICAgICAgdmFyIHZhbHVlID0gc3RhdGVbMF0sIG9ic2VydmVyID0gc3RhdGVbMV07XG5cdCAgICAgIG9ic2VydmVyLm9uTmV4dCh2YWx1ZSk7XG5cdCAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIEp1c3RPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIGEgc2luZ2xlIGVsZW1lbnQsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHNlbmQgb3V0IG9ic2VydmVyIG1lc3NhZ2VzLlxuXHQgICAqICBUaGVyZSBpcyBhbiBhbGlhcyBjYWxsZWQgJ2p1c3QnIG9yIGJyb3dzZXJzIDxJRTkuXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgU2luZ2xlIGVsZW1lbnQgaW4gdGhlIHJlc3VsdGluZyBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuXHQgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBzY2hlZHVsZXIgU2NoZWR1bGVyIHRvIHNlbmQgdGhlIHNpbmdsZSBlbGVtZW50IG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBTY2hlZHVsZXIuaW1tZWRpYXRlLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHNpbmdsZSBzcGVjaWZpZWQgZWxlbWVudC5cblx0ICAgKi9cblx0ICB2YXIgb2JzZXJ2YWJsZVJldHVybiA9IE9ic2VydmFibGVbJ3JldHVybiddID0gT2JzZXJ2YWJsZS5qdXN0ID0gZnVuY3Rpb24gKHZhbHVlLCBzY2hlZHVsZXIpIHtcblx0ICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGltbWVkaWF0ZVNjaGVkdWxlcik7XG5cdCAgICByZXR1cm4gbmV3IEp1c3RPYnNlcnZhYmxlKHZhbHVlLCBzY2hlZHVsZXIpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBUaHJvd09ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhUaHJvd09ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBUaHJvd09ic2VydmFibGUoZXJyb3IsIHNjaGVkdWxlcikge1xuXHQgICAgICB0aGlzLl9lcnJvciA9IGVycm9yO1xuXHQgICAgICB0aGlzLl9zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIFRocm93T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHZhciBzdGF0ZSA9IFt0aGlzLl9lcnJvciwgb107XG5cdCAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZXIgPT09IGltbWVkaWF0ZVNjaGVkdWxlciA/XG5cdCAgICAgICAgc2NoZWR1bGVJdGVtKG51bGwsIHN0YXRlKSA6XG5cdCAgICAgICAgdGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlLCBzY2hlZHVsZUl0ZW0pO1xuXHQgICAgfTtcblx0XG5cdCAgICBmdW5jdGlvbiBzY2hlZHVsZUl0ZW0ocywgc3RhdGUpIHtcblx0ICAgICAgdmFyIGUgPSBzdGF0ZVswXSwgbyA9IHN0YXRlWzFdO1xuXHQgICAgICBvLm9uRXJyb3IoZSk7XG5cdCAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIFRocm93T2JzZXJ2YWJsZTtcblx0ICB9KE9ic2VydmFibGVCYXNlKSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCB0ZXJtaW5hdGVzIHdpdGggYW4gZXhjZXB0aW9uLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBzZW5kIG91dCB0aGUgc2luZ2xlIG9uRXJyb3IgbWVzc2FnZS5cblx0ICAgKiAgVGhlcmUgaXMgYW4gYWxpYXMgdG8gdGhpcyBtZXRob2QgY2FsbGVkICd0aHJvd0Vycm9yJyBmb3IgYnJvd3NlcnMgPElFOS5cblx0ICAgKiBAcGFyYW0ge01peGVkfSBlcnJvciBBbiBvYmplY3QgdXNlZCBmb3IgdGhlIHNlcXVlbmNlJ3MgdGVybWluYXRpb24uXG5cdCAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IHNjaGVkdWxlciBTY2hlZHVsZXIgdG8gc2VuZCB0aGUgZXhjZXB0aW9uYWwgdGVybWluYXRpb24gY2FsbCBvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gU2NoZWR1bGVyLmltbWVkaWF0ZS5cblx0ICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCB0ZXJtaW5hdGVzIGV4Y2VwdGlvbmFsbHkgd2l0aCB0aGUgc3BlY2lmaWVkIGV4Y2VwdGlvbiBvYmplY3QuXG5cdCAgICovXG5cdCAgdmFyIG9ic2VydmFibGVUaHJvdyA9IE9ic2VydmFibGVbJ3Rocm93J10gPSBmdW5jdGlvbiAoZXJyb3IsIHNjaGVkdWxlcikge1xuXHQgICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gaW1tZWRpYXRlU2NoZWR1bGVyKTtcblx0ICAgIHJldHVybiBuZXcgVGhyb3dPYnNlcnZhYmxlKGVycm9yLCBzY2hlZHVsZXIpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBDYXRjaE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoQ2F0Y2hPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gQ2F0Y2hPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcblx0ICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgIHRoaXMuX2ZuID0gZm47XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIENhdGNoT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHZhciBkMSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLCBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuXHQgICAgICBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShkMSk7XG5cdCAgICAgIGQxLnNldERpc3Bvc2FibGUodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBDYXRjaE9ic2VydmVyKG8sIHN1YnNjcmlwdGlvbiwgdGhpcy5fZm4pKSk7XG5cdCAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBDYXRjaE9ic2VydmFibGU7XG5cdCAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXHRcblx0ICB2YXIgQ2F0Y2hPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKENhdGNoT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBDYXRjaE9ic2VydmVyKG8sIHMsIGZuKSB7XG5cdCAgICAgIHRoaXMuX28gPSBvO1xuXHQgICAgICB0aGlzLl9zID0gcztcblx0ICAgICAgdGhpcy5fZm4gPSBmbjtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgQ2F0Y2hPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX28ub25OZXh0KHgpOyB9O1xuXHQgICAgQ2F0Y2hPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXHQgICAgQ2F0Y2hPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZm4pKGUpO1xuXHQgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuXHQgICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuXHRcblx0ICAgICAgdmFyIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblx0ICAgICAgdGhpcy5fcy5zZXREaXNwb3NhYmxlKGQpO1xuXHQgICAgICBkLnNldERpc3Bvc2FibGUocmVzdWx0LnN1YnNjcmliZSh0aGlzLl9vKSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBDYXRjaE9ic2VydmVyO1xuXHQgIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXHRcblx0ICAvKipcblx0ICAgKiBDb250aW51ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGlzIHRlcm1pbmF0ZWQgYnkgYW4gZXhjZXB0aW9uIHdpdGggdGhlIG5leHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cblx0ICAgKiBAcGFyYW0ge01peGVkfSBoYW5kbGVyT3JTZWNvbmQgRXhjZXB0aW9uIGhhbmRsZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgZ2l2ZW4gdGhlIGVycm9yIHRoYXQgb2NjdXJyZWQgaW4gdGhlIGZpcnN0IHNlcXVlbmNlLCBvciBhIHNlY29uZCBvYnNlcnZhYmxlIHNlcXVlbmNlIHVzZWQgdG8gcHJvZHVjZSByZXN1bHRzIHdoZW4gYW4gZXJyb3Igb2NjdXJyZWQgaW4gdGhlIGZpcnN0IHNlcXVlbmNlLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIGZpcnN0IHNlcXVlbmNlJ3MgZWxlbWVudHMsIGZvbGxvd2VkIGJ5IHRoZSBlbGVtZW50cyBvZiB0aGUgaGFuZGxlciBzZXF1ZW5jZSBpbiBjYXNlIGFuIGV4Y2VwdGlvbiBvY2N1cnJlZC5cblx0ICAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG9bJ2NhdGNoJ10gPSBmdW5jdGlvbiAoaGFuZGxlck9yU2Vjb25kKSB7XG5cdCAgICByZXR1cm4gaXNGdW5jdGlvbihoYW5kbGVyT3JTZWNvbmQpID8gbmV3IENhdGNoT2JzZXJ2YWJsZSh0aGlzLCBoYW5kbGVyT3JTZWNvbmQpIDogb2JzZXJ2YWJsZUNhdGNoKFt0aGlzLCBoYW5kbGVyT3JTZWNvbmRdKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBDb250aW51ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGlzIHRlcm1pbmF0ZWQgYnkgYW4gZXhjZXB0aW9uIHdpdGggdGhlIG5leHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cblx0ICAgKiBAcGFyYW0ge0FycmF5IHwgQXJndW1lbnRzfSBhcmdzIEFyZ3VtZW50cyBvciBhbiBhcnJheSB0byB1c2UgYXMgdGhlIG5leHQgc2VxdWVuY2UgaWYgYW4gZXJyb3Igb2NjdXJzLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgZWxlbWVudHMgZnJvbSBjb25zZWN1dGl2ZSBzb3VyY2Ugc2VxdWVuY2VzIHVudGlsIGEgc291cmNlIHNlcXVlbmNlIHRlcm1pbmF0ZXMgc3VjY2Vzc2Z1bGx5LlxuXHQgICAqL1xuXHQgIHZhciBvYnNlcnZhYmxlQ2F0Y2ggPSBPYnNlcnZhYmxlWydjYXRjaCddID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGl0ZW1zO1xuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuXHQgICAgICBpdGVtcyA9IGFyZ3VtZW50c1swXTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuXHQgICAgICBpdGVtcyA9IG5ldyBBcnJheShsZW4pO1xuXHQgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgaXRlbXNbaV0gPSBhcmd1bWVudHNbaV07IH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBlbnVtZXJhYmxlT2YoaXRlbXMpLmNhdGNoRXJyb3IoKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBNZXJnZXMgdGhlIHNwZWNpZmllZCBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IHVzaW5nIHRoZSBzZWxlY3RvciBmdW5jdGlvbiB3aGVuZXZlciBhbnkgb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2VzIG9yIFByb21pc2VzIHByb2R1Y2VzIGFuIGVsZW1lbnQuXG5cdCAgICogVGhpcyBjYW4gYmUgaW4gdGhlIGZvcm0gb2YgYW4gYXJndW1lbnQgbGlzdCBvZiBvYnNlcnZhYmxlcyBvciBhbiBhcnJheS5cblx0ICAgKlxuXHQgICAqIEBleGFtcGxlXG5cdCAgICogMSAtIG9icyA9IG9ic2VydmFibGUuY29tYmluZUxhdGVzdChvYnMxLCBvYnMyLCBvYnMzLCBmdW5jdGlvbiAobzEsIG8yLCBvMykgeyByZXR1cm4gbzEgKyBvMiArIG8zOyB9KTtcblx0ICAgKiAyIC0gb2JzID0gb2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0KFtvYnMxLCBvYnMyLCBvYnMzXSwgZnVuY3Rpb24gKG8xLCBvMiwgbzMpIHsgcmV0dXJuIG8xICsgbzIgKyBvMzsgfSk7XG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgcmVzdWx0IG9mIGNvbWJpbmluZyBlbGVtZW50cyBvZiB0aGUgc291cmNlcyB1c2luZyB0aGUgc3BlY2lmaWVkIHJlc3VsdCBzZWxlY3RvciBmdW5jdGlvbi5cblx0ICAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG8uY29tYmluZUxhdGVzdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG5cdCAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcblx0ICAgICAgYXJnc1swXS51bnNoaWZ0KHRoaXMpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGNvbWJpbmVMYXRlc3QuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gZmFsc2VGYWN0b3J5KCkgeyByZXR1cm4gZmFsc2U7IH1cblx0ICBmdW5jdGlvbiBhcmd1bWVudHNUb0FycmF5KCkge1xuXHQgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcblx0ICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG5cdCAgICByZXR1cm4gYXJncztcblx0ICB9XG5cdFxuXHQgIHZhciBDb21iaW5lTGF0ZXN0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKENvbWJpbmVMYXRlc3RPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gQ29tYmluZUxhdGVzdE9ic2VydmFibGUocGFyYW1zLCBjYikge1xuXHQgICAgICB0aGlzLl9wYXJhbXMgPSBwYXJhbXM7XG5cdCAgICAgIHRoaXMuX2NiID0gY2I7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIENvbWJpbmVMYXRlc3RPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24ob2JzZXJ2ZXIpIHtcblx0ICAgICAgdmFyIGxlbiA9IHRoaXMuX3BhcmFtcy5sZW5ndGgsXG5cdCAgICAgICAgICBzdWJzY3JpcHRpb25zID0gbmV3IEFycmF5KGxlbik7XG5cdFxuXHQgICAgICB2YXIgc3RhdGUgPSB7XG5cdCAgICAgICAgaGFzVmFsdWU6IGFycmF5SW5pdGlhbGl6ZShsZW4sIGZhbHNlRmFjdG9yeSksXG5cdCAgICAgICAgaGFzVmFsdWVBbGw6IGZhbHNlLFxuXHQgICAgICAgIGlzRG9uZTogYXJyYXlJbml0aWFsaXplKGxlbiwgZmFsc2VGYWN0b3J5KSxcblx0ICAgICAgICB2YWx1ZXM6IG5ldyBBcnJheShsZW4pXG5cdCAgICAgIH07XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuX3BhcmFtc1tpXSwgc2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cdCAgICAgICAgc3Vic2NyaXB0aW9uc1tpXSA9IHNhZDtcblx0ICAgICAgICBpc1Byb21pc2Uoc291cmNlKSAmJiAoc291cmNlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHNvdXJjZSkpO1xuXHQgICAgICAgIHNhZC5zZXREaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUobmV3IENvbWJpbmVMYXRlc3RPYnNlcnZlcihvYnNlcnZlciwgaSwgdGhpcy5fY2IsIHN0YXRlKSkpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbnMpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gQ29tYmluZUxhdGVzdE9ic2VydmFibGU7XG5cdCAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXHRcblx0ICB2YXIgQ29tYmluZUxhdGVzdE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKENvbWJpbmVMYXRlc3RPYnNlcnZlciwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIENvbWJpbmVMYXRlc3RPYnNlcnZlcihvLCBpLCBjYiwgc3RhdGUpIHtcblx0ICAgICAgdGhpcy5fbyA9IG87XG5cdCAgICAgIHRoaXMuX2kgPSBpO1xuXHQgICAgICB0aGlzLl9jYiA9IGNiO1xuXHQgICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBub3RUaGVTYW1lKGkpIHtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uICh4LCBqKSB7XG5cdCAgICAgICAgcmV0dXJuIGogIT09IGk7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgQ29tYmluZUxhdGVzdE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcblx0ICAgICAgdGhpcy5fc3RhdGUudmFsdWVzW3RoaXMuX2ldID0geDtcblx0ICAgICAgdGhpcy5fc3RhdGUuaGFzVmFsdWVbdGhpcy5faV0gPSB0cnVlO1xuXHQgICAgICBpZiAodGhpcy5fc3RhdGUuaGFzVmFsdWVBbGwgfHwgKHRoaXMuX3N0YXRlLmhhc1ZhbHVlQWxsID0gdGhpcy5fc3RhdGUuaGFzVmFsdWUuZXZlcnkoaWRlbnRpdHkpKSkge1xuXHQgICAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9jYikuYXBwbHkobnVsbCwgdGhpcy5fc3RhdGUudmFsdWVzKTtcblx0ICAgICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlcy5lKTsgfVxuXHQgICAgICAgIHRoaXMuX28ub25OZXh0KHJlcyk7XG5cdCAgICAgIH0gZWxzZSBpZiAodGhpcy5fc3RhdGUuaXNEb25lLmZpbHRlcihub3RUaGVTYW1lKHRoaXMuX2kpKS5ldmVyeShpZGVudGl0eSkpIHtcblx0ICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgQ29tYmluZUxhdGVzdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgQ29tYmluZUxhdGVzdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMuX3N0YXRlLmlzRG9uZVt0aGlzLl9pXSA9IHRydWU7XG5cdCAgICAgIHRoaXMuX3N0YXRlLmlzRG9uZS5ldmVyeShpZGVudGl0eSkgJiYgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gQ29tYmluZUxhdGVzdE9ic2VydmVyO1xuXHQgIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXHRcblx0ICAvKipcblx0ICAqIE1lcmdlcyB0aGUgc3BlY2lmaWVkIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgdXNpbmcgdGhlIHNlbGVjdG9yIGZ1bmN0aW9uIHdoZW5ldmVyIGFueSBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgb3IgUHJvbWlzZXMgcHJvZHVjZXMgYW4gZWxlbWVudC5cblx0ICAqXG5cdCAgKiBAZXhhbXBsZVxuXHQgICogMSAtIG9icyA9IFJ4Lk9ic2VydmFibGUuY29tYmluZUxhdGVzdChvYnMxLCBvYnMyLCBvYnMzLCBmdW5jdGlvbiAobzEsIG8yLCBvMykgeyByZXR1cm4gbzEgKyBvMiArIG8zOyB9KTtcblx0ICAqIDIgLSBvYnMgPSBSeC5PYnNlcnZhYmxlLmNvbWJpbmVMYXRlc3QoW29iczEsIG9iczIsIG9iczNdLCBmdW5jdGlvbiAobzEsIG8yLCBvMykgeyByZXR1cm4gbzEgKyBvMiArIG8zOyB9KTtcblx0ICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBjb21iaW5pbmcgZWxlbWVudHMgb2YgdGhlIHNvdXJjZXMgdXNpbmcgdGhlIHNwZWNpZmllZCByZXN1bHQgc2VsZWN0b3IgZnVuY3Rpb24uXG5cdCAgKi9cblx0ICB2YXIgY29tYmluZUxhdGVzdCA9IE9ic2VydmFibGUuY29tYmluZUxhdGVzdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG5cdCAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuXHQgICAgdmFyIHJlc3VsdFNlbGVjdG9yID0gaXNGdW5jdGlvbihhcmdzW2xlbiAtIDFdKSA/IGFyZ3MucG9wKCkgOiBhcmd1bWVudHNUb0FycmF5O1xuXHQgICAgQXJyYXkuaXNBcnJheShhcmdzWzBdKSAmJiAoYXJncyA9IGFyZ3NbMF0pO1xuXHQgICAgcmV0dXJuIG5ldyBDb21iaW5lTGF0ZXN0T2JzZXJ2YWJsZShhcmdzLCByZXN1bHRTZWxlY3Rvcik7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ29uY2F0ZW5hdGVzIGFsbCB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMuICBUaGlzIHRha2VzIGluIGVpdGhlciBhbiBhcnJheSBvciB2YXJpYWJsZSBhcmd1bWVudHMgdG8gY29uY2F0ZW5hdGUuXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgZWFjaCBnaXZlbiBzZXF1ZW5jZSwgaW4gc2VxdWVudGlhbCBvcmRlci5cblx0ICAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG8uY29uY2F0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZm9yKHZhciBhcmdzID0gW10sIGkgPSAwLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cblx0ICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcblx0ICAgIHJldHVybiBvYnNlcnZhYmxlQ29uY2F0LmFwcGx5KG51bGwsIGFyZ3MpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBDb25jYXRPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKENvbmNhdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gQ29uY2F0T2JzZXJ2ZXIocywgZm4pIHtcblx0ICAgICAgdGhpcy5fcyA9IHM7XG5cdCAgICAgIHRoaXMuX2ZuID0gZm47XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIENvbmNhdE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5fcy5vLm9uTmV4dCh4KTsgfTtcblx0ICAgIENvbmNhdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX3Muby5vbkVycm9yKGUpOyB9O1xuXHQgICAgQ29uY2F0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fcy5pKys7IHRoaXMuX2ZuKHRoaXMuX3MpOyB9O1xuXHRcblx0ICAgIHJldHVybiBDb25jYXRPYnNlcnZlcjtcblx0ICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblx0XG5cdCAgdmFyIENvbmNhdE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhDb25jYXRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gQ29uY2F0T2JzZXJ2YWJsZShzb3VyY2VzKSB7XG5cdCAgICAgIHRoaXMuX3NvdXJjZXMgPSBzb3VyY2VzO1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBzY2hlZHVsZVJlY3Vyc2l2ZSAoc3RhdGUsIHJlY3Vyc2UpIHtcblx0ICAgICAgaWYgKHN0YXRlLmRpc3Bvc2FibGUuaXNEaXNwb3NlZCkgeyByZXR1cm47IH1cblx0ICAgICAgaWYgKHN0YXRlLmkgPT09IHN0YXRlLnNvdXJjZXMubGVuZ3RoKSB7IHJldHVybiBzdGF0ZS5vLm9uQ29tcGxldGVkKCk7IH1cblx0XG5cdCAgICAgIC8vIENoZWNrIGlmIHByb21pc2Vcblx0ICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IHN0YXRlLnNvdXJjZXNbc3RhdGUuaV07XG5cdCAgICAgIGlzUHJvbWlzZShjdXJyZW50VmFsdWUpICYmIChjdXJyZW50VmFsdWUgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoY3VycmVudFZhbHVlKSk7XG5cdFxuXHQgICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXHQgICAgICBzdGF0ZS5zdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShkKTtcblx0ICAgICAgZC5zZXREaXNwb3NhYmxlKGN1cnJlbnRWYWx1ZS5zdWJzY3JpYmUobmV3IENvbmNhdE9ic2VydmVyKHN0YXRlLCByZWN1cnNlKSkpO1xuXHQgICAgfVxuXHRcblx0ICAgIENvbmNhdE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvKSB7XG5cdCAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuXHQgICAgICB2YXIgZGlzcG9zYWJsZSA9IGRpc3Bvc2FibGVDcmVhdGUobm9vcCk7XG5cdCAgICAgIHZhciBzdGF0ZSA9IHtcblx0ICAgICAgICBvOiBvLFxuXHQgICAgICAgIGk6IDAsXG5cdCAgICAgICAgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24sXG5cdCAgICAgICAgZGlzcG9zYWJsZTogZGlzcG9zYWJsZSxcblx0ICAgICAgICBzb3VyY2VzOiB0aGlzLl9zb3VyY2VzXG5cdCAgICAgIH07XG5cdFxuXHQgICAgICB2YXIgY2FuY2VsYWJsZSA9IGltbWVkaWF0ZVNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShzdGF0ZSwgc2NoZWR1bGVSZWN1cnNpdmUpO1xuXHQgICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKFtzdWJzY3JpcHRpb24sIGRpc3Bvc2FibGUsIGNhbmNlbGFibGVdKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIENvbmNhdE9ic2VydmFibGU7XG5cdCAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXHRcblx0ICAvKipcblx0ICAgKiBDb25jYXRlbmF0ZXMgYWxsIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcy5cblx0ICAgKiBAcGFyYW0ge0FycmF5IHwgQXJndW1lbnRzfSBhcmdzIEFyZ3VtZW50cyBvciBhbiBhcnJheSB0byBjb25jYXQgdG8gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgZWFjaCBnaXZlbiBzZXF1ZW5jZSwgaW4gc2VxdWVudGlhbCBvcmRlci5cblx0ICAgKi9cblx0ICB2YXIgb2JzZXJ2YWJsZUNvbmNhdCA9IE9ic2VydmFibGUuY29uY2F0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGFyZ3M7XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG5cdCAgICAgIGFyZ3MgPSBhcmd1bWVudHNbMF07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuXHQgICAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5ldyBDb25jYXRPYnNlcnZhYmxlKGFyZ3MpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENvbmNhdGVuYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIG9ic2VydmFibGUgc2VxdWVuY2VzLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGVhY2ggb2JzZXJ2ZWQgaW5uZXIgc2VxdWVuY2UsIGluIHNlcXVlbnRpYWwgb3JkZXIuXG5cdCAgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLmNvbmNhdEFsbCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiB0aGlzLm1lcmdlKDEpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBNZXJnZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoTWVyZ2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXHRcblx0ICAgIGZ1bmN0aW9uIE1lcmdlT2JzZXJ2YWJsZShzb3VyY2UsIG1heENvbmN1cnJlbnQpIHtcblx0ICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgIHRoaXMubWF4Q29uY3VycmVudCA9IG1heENvbmN1cnJlbnQ7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIE1lcmdlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG9ic2VydmVyKSB7XG5cdCAgICAgIHZhciBnID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcblx0ICAgICAgZy5hZGQodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBNZXJnZU9ic2VydmVyKG9ic2VydmVyLCB0aGlzLm1heENvbmN1cnJlbnQsIGcpKSk7XG5cdCAgICAgIHJldHVybiBnO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gTWVyZ2VPYnNlcnZhYmxlO1xuXHRcblx0ICB9KE9ic2VydmFibGVCYXNlKSk7XG5cdFxuXHQgIHZhciBNZXJnZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblx0ICAgIGZ1bmN0aW9uIE1lcmdlT2JzZXJ2ZXIobywgbWF4LCBnKSB7XG5cdCAgICAgIHRoaXMubyA9IG87XG5cdCAgICAgIHRoaXMubWF4ID0gbWF4O1xuXHQgICAgICB0aGlzLmcgPSBnO1xuXHQgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcblx0ICAgICAgdGhpcy5xID0gW107XG5cdCAgICAgIHRoaXMuYWN0aXZlQ291bnQgPSAwO1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBpbmhlcml0cyhNZXJnZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXHRcblx0ICAgIE1lcmdlT2JzZXJ2ZXIucHJvdG90eXBlLmhhbmRsZVN1YnNjcmliZSA9IGZ1bmN0aW9uICh4cykge1xuXHQgICAgICB2YXIgc2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cdCAgICAgIHRoaXMuZy5hZGQoc2FkKTtcblx0ICAgICAgaXNQcm9taXNlKHhzKSAmJiAoeHMgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoeHMpKTtcblx0ICAgICAgc2FkLnNldERpc3Bvc2FibGUoeHMuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKHRoaXMsIHNhZCkpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgTWVyZ2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uIChpbm5lclNvdXJjZSkge1xuXHQgICAgICBpZih0aGlzLmFjdGl2ZUNvdW50IDwgdGhpcy5tYXgpIHtcblx0ICAgICAgICB0aGlzLmFjdGl2ZUNvdW50Kys7XG5cdCAgICAgICAgdGhpcy5oYW5kbGVTdWJzY3JpYmUoaW5uZXJTb3VyY2UpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMucS5wdXNoKGlubmVyU291cmNlKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIE1lcmdlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5vLm9uRXJyb3IoZSk7IH07XG5cdCAgICBNZXJnZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuZG9uZSA9IHRydWU7IHRoaXMuYWN0aXZlQ291bnQgPT09IDAgJiYgdGhpcy5vLm9uQ29tcGxldGVkKCk7IH07XG5cdFxuXHQgICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihwYXJlbnQsIHNhZCkge1xuXHQgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcblx0ICAgICAgdGhpcy5zYWQgPSBzYWQ7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cdFxuXHQgICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMucGFyZW50Lm8ub25OZXh0KHgpOyB9O1xuXHQgICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLnBhcmVudC5vLm9uRXJyb3IoZSk7IH07XG5cdCAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMucGFyZW50LmcucmVtb3ZlKHRoaXMuc2FkKTtcblx0ICAgICAgaWYgKHRoaXMucGFyZW50LnEubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIHRoaXMucGFyZW50LmhhbmRsZVN1YnNjcmliZSh0aGlzLnBhcmVudC5xLnNoaWZ0KCkpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMucGFyZW50LmFjdGl2ZUNvdW50LS07XG5cdCAgICAgICAgdGhpcy5wYXJlbnQuZG9uZSAmJiB0aGlzLnBhcmVudC5hY3RpdmVDb3VudCA9PT0gMCAmJiB0aGlzLnBhcmVudC5vLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIE1lcmdlT2JzZXJ2ZXI7XG5cdCAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cdFxuXHQgIC8qKlxuXHQgICogTWVyZ2VzIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2Ygb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLCBsaW1pdGluZyB0aGUgbnVtYmVyIG9mIGNvbmN1cnJlbnQgc3Vic2NyaXB0aW9ucyB0byBpbm5lciBzZXF1ZW5jZXMuXG5cdCAgKiBPciBtZXJnZXMgdHdvIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gYSBzaW5nbGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cblx0ICAqIEBwYXJhbSB7TWl4ZWR9IFttYXhDb25jdXJyZW50T3JPdGhlcl0gTWF4aW11bSBudW1iZXIgb2YgaW5uZXIgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgYmVpbmcgc3Vic2NyaWJlZCB0byBjb25jdXJyZW50bHkgb3IgdGhlIHNlY29uZCBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuXHQgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgbWVyZ2VzIHRoZSBlbGVtZW50cyBvZiB0aGUgaW5uZXIgc2VxdWVuY2VzLlxuXHQgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLm1lcmdlID0gZnVuY3Rpb24gKG1heENvbmN1cnJlbnRPck90aGVyKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIG1heENvbmN1cnJlbnRPck90aGVyICE9PSAnbnVtYmVyJyA/XG5cdCAgICAgIG9ic2VydmFibGVNZXJnZSh0aGlzLCBtYXhDb25jdXJyZW50T3JPdGhlcikgOlxuXHQgICAgICBuZXcgTWVyZ2VPYnNlcnZhYmxlKHRoaXMsIG1heENvbmN1cnJlbnRPck90aGVyKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBNZXJnZXMgYWxsIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIGEgc2luZ2xlIG9ic2VydmFibGUgc2VxdWVuY2UuXG5cdCAgICogVGhlIHNjaGVkdWxlciBpcyBvcHRpb25hbCBhbmQgaWYgbm90IHNwZWNpZmllZCwgdGhlIGltbWVkaWF0ZSBzY2hlZHVsZXIgaXMgdXNlZC5cblx0ICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBtZXJnZXMgdGhlIGVsZW1lbnRzIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcy5cblx0ICAgKi9cblx0ICB2YXIgb2JzZXJ2YWJsZU1lcmdlID0gT2JzZXJ2YWJsZS5tZXJnZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBzY2hlZHVsZXIsIHNvdXJjZXMgPSBbXSwgaSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICAgIGlmICghYXJndW1lbnRzWzBdKSB7XG5cdCAgICAgIHNjaGVkdWxlciA9IGltbWVkaWF0ZVNjaGVkdWxlcjtcblx0ICAgICAgZm9yKGkgPSAxOyBpIDwgbGVuOyBpKyspIHsgc291cmNlcy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cblx0ICAgIH0gZWxzZSBpZiAoaXNTY2hlZHVsZXIoYXJndW1lbnRzWzBdKSkge1xuXHQgICAgICBzY2hlZHVsZXIgPSBhcmd1bWVudHNbMF07XG5cdCAgICAgIGZvcihpID0gMTsgaSA8IGxlbjsgaSsrKSB7IHNvdXJjZXMucHVzaChhcmd1bWVudHNbaV0pOyB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzY2hlZHVsZXIgPSBpbW1lZGlhdGVTY2hlZHVsZXI7XG5cdCAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7IHNvdXJjZXMucHVzaChhcmd1bWVudHNbaV0pOyB9XG5cdCAgICB9XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShzb3VyY2VzWzBdKSkge1xuXHQgICAgICBzb3VyY2VzID0gc291cmNlc1swXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBvYnNlcnZhYmxlT2Yoc2NoZWR1bGVyLCBzb3VyY2VzKS5tZXJnZUFsbCgpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBDb21wb3NpdGVFcnJvciA9IFJ4LkNvbXBvc2l0ZUVycm9yID0gZnVuY3Rpb24oZXJyb3JzKSB7XG5cdCAgICB0aGlzLmlubmVyRXJyb3JzID0gZXJyb3JzO1xuXHQgICAgdGhpcy5tZXNzYWdlID0gJ1RoaXMgY29udGFpbnMgbXVsdGlwbGUgZXJyb3JzLiBDaGVjayB0aGUgaW5uZXJFcnJvcnMnO1xuXHQgICAgRXJyb3IuY2FsbCh0aGlzKTtcblx0ICB9O1xuXHQgIENvbXBvc2l0ZUVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcblx0ICBDb21wb3NpdGVFcnJvci5wcm90b3R5cGUubmFtZSA9ICdDb21wb3NpdGVFcnJvcic7XG5cdFxuXHQgIHZhciBNZXJnZURlbGF5RXJyb3JPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoTWVyZ2VEZWxheUVycm9yT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIE1lcmdlRGVsYXlFcnJvck9ic2VydmFibGUoc291cmNlKSB7XG5cdCAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBNZXJnZURlbGF5RXJyb3JPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgdmFyIGdyb3VwID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKSxcblx0ICAgICAgICBtID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksXG5cdCAgICAgICAgc3RhdGUgPSB7IGlzU3RvcHBlZDogZmFsc2UsIGVycm9yczogW10sIG86IG8gfTtcblx0XG5cdCAgICAgIGdyb3VwLmFkZChtKTtcblx0ICAgICAgbS5zZXREaXNwb3NhYmxlKHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIoZ3JvdXAsIHN0YXRlKSkpO1xuXHRcblx0ICAgICAgcmV0dXJuIGdyb3VwO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gTWVyZ2VEZWxheUVycm9yT2JzZXJ2YWJsZTtcblx0ICB9KE9ic2VydmFibGVCYXNlKSk7XG5cdFxuXHQgIHZhciBNZXJnZURlbGF5RXJyb3JPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKE1lcmdlRGVsYXlFcnJvck9ic2VydmVyLCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIoZ3JvdXAsIHN0YXRlKSB7XG5cdCAgICAgIHRoaXMuX2dyb3VwID0gZ3JvdXA7XG5cdCAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHNldENvbXBsZXRpb24obywgZXJyb3JzKSB7XG5cdCAgICAgIGlmIChlcnJvcnMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgICB9IGVsc2UgaWYgKGVycm9ycy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICBvLm9uRXJyb3IoZXJyb3JzWzBdKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBvLm9uRXJyb3IobmV3IENvbXBvc2l0ZUVycm9yKGVycm9ycykpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuXHQgICAgICB2YXIgaW5uZXIgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblx0ICAgICAgdGhpcy5fZ3JvdXAuYWRkKGlubmVyKTtcblx0XG5cdCAgICAgIC8vIENoZWNrIGZvciBwcm9taXNlcyBzdXBwb3J0XG5cdCAgICAgIGlzUHJvbWlzZSh4KSAmJiAoeCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZSh4KSk7XG5cdCAgICAgIGlubmVyLnNldERpc3Bvc2FibGUoeC5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIoaW5uZXIsIHRoaXMuX2dyb3VwLCB0aGlzLl9zdGF0ZSkpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgdGhpcy5fc3RhdGUuZXJyb3JzLnB1c2goZSk7XG5cdCAgICAgIHRoaXMuX3N0YXRlLmlzU3RvcHBlZCA9IHRydWU7XG5cdCAgICAgIHRoaXMuX2dyb3VwLmxlbmd0aCA9PT0gMSAmJiBzZXRDb21wbGV0aW9uKHRoaXMuX3N0YXRlLm8sIHRoaXMuX3N0YXRlLmVycm9ycyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE1lcmdlRGVsYXlFcnJvck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMuX3N0YXRlLmlzU3RvcHBlZCA9IHRydWU7XG5cdCAgICAgIHRoaXMuX2dyb3VwLmxlbmd0aCA9PT0gMSAmJiBzZXRDb21wbGV0aW9uKHRoaXMuX3N0YXRlLm8sIHRoaXMuX3N0YXRlLmVycm9ycyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKGlubmVyLCBncm91cCwgc3RhdGUpIHtcblx0ICAgICAgdGhpcy5faW5uZXIgPSBpbm5lcjtcblx0ICAgICAgdGhpcy5fZ3JvdXAgPSBncm91cDtcblx0ICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX3N0YXRlLm8ub25OZXh0KHgpOyB9O1xuXHQgICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgICB0aGlzLl9zdGF0ZS5lcnJvcnMucHVzaChlKTtcblx0ICAgICAgdGhpcy5fZ3JvdXAucmVtb3ZlKHRoaXMuX2lubmVyKTtcblx0ICAgICAgdGhpcy5fc3RhdGUuaXNTdG9wcGVkICYmIHRoaXMuX2dyb3VwLmxlbmd0aCA9PT0gMSAmJiBzZXRDb21wbGV0aW9uKHRoaXMuX3N0YXRlLm8sIHRoaXMuX3N0YXRlLmVycm9ycyk7XG5cdCAgICB9O1xuXHQgICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aGlzLl9ncm91cC5yZW1vdmUodGhpcy5faW5uZXIpO1xuXHQgICAgICB0aGlzLl9zdGF0ZS5pc1N0b3BwZWQgJiYgdGhpcy5fZ3JvdXAubGVuZ3RoID09PSAxICYmIHNldENvbXBsZXRpb24odGhpcy5fc3RhdGUubywgdGhpcy5fc3RhdGUuZXJyb3JzKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIE1lcmdlRGVsYXlFcnJvck9ic2VydmVyO1xuXHQgIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXHRcblx0ICAvKipcblx0ICAqIEZsYXR0ZW5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBPYnNlcnZhYmxlcyBpbnRvIG9uZSBPYnNlcnZhYmxlLCBpbiBhIHdheSB0aGF0IGFsbG93cyBhbiBPYnNlcnZlciB0b1xuXHQgICogcmVjZWl2ZSBhbGwgc3VjY2Vzc2Z1bGx5IGVtaXR0ZWQgaXRlbXMgZnJvbSBhbGwgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlcyB3aXRob3V0IGJlaW5nIGludGVycnVwdGVkIGJ5XG5cdCAgKiBhbiBlcnJvciBub3RpZmljYXRpb24gZnJvbSBvbmUgb2YgdGhlbS5cblx0ICAqXG5cdCAgKiBUaGlzIGJlaGF2ZXMgbGlrZSBPYnNlcnZhYmxlLnByb3RvdHlwZS5tZXJnZUFsbCBleGNlcHQgdGhhdCBpZiBhbnkgb2YgdGhlIG1lcmdlZCBPYnNlcnZhYmxlcyBub3RpZnkgb2YgYW5cblx0ICAqIGVycm9yIHZpYSB0aGUgT2JzZXJ2ZXIncyBvbkVycm9yLCBtZXJnZURlbGF5RXJyb3Igd2lsbCByZWZyYWluIGZyb20gcHJvcGFnYXRpbmcgdGhhdFxuXHQgICogZXJyb3Igbm90aWZpY2F0aW9uIHVudGlsIGFsbCBvZiB0aGUgbWVyZ2VkIE9ic2VydmFibGVzIGhhdmUgZmluaXNoZWQgZW1pdHRpbmcgaXRlbXMuXG5cdCAgKiBAcGFyYW0ge0FycmF5IHwgQXJndW1lbnRzfSBhcmdzIEFyZ3VtZW50cyBvciBhbiBhcnJheSB0byBtZXJnZS5cblx0ICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYWxsIG9mIHRoZSBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBPYnNlcnZhYmxlcyBlbWl0dGVkIGJ5IHRoZSBPYnNlcnZhYmxlXG5cdCAgKi9cblx0ICBPYnNlcnZhYmxlLm1lcmdlRGVsYXlFcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGFyZ3M7XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG5cdCAgICAgIGFyZ3MgPSBhcmd1bWVudHNbMF07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICAgICAgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuXHQgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuXHQgICAgfVxuXHQgICAgdmFyIHNvdXJjZSA9IG9ic2VydmFibGVPZihudWxsLCBhcmdzKTtcblx0ICAgIHJldHVybiBuZXcgTWVyZ2VEZWxheUVycm9yT2JzZXJ2YWJsZShzb3VyY2UpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBNZXJnZUFsbE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoTWVyZ2VBbGxPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXHRcblx0ICAgIGZ1bmN0aW9uIE1lcmdlQWxsT2JzZXJ2YWJsZShzb3VyY2UpIHtcblx0ICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIE1lcmdlQWxsT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHZhciBnID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKSwgbSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXHQgICAgICBnLmFkZChtKTtcblx0ICAgICAgbS5zZXREaXNwb3NhYmxlKHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgTWVyZ2VBbGxPYnNlcnZlcihvLCBnKSkpO1xuXHQgICAgICByZXR1cm4gZztcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIE1lcmdlQWxsT2JzZXJ2YWJsZTtcblx0ICB9KE9ic2VydmFibGVCYXNlKSk7XG5cdFxuXHQgIHZhciBNZXJnZUFsbE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblx0ICAgIGZ1bmN0aW9uIE1lcmdlQWxsT2JzZXJ2ZXIobywgZykge1xuXHQgICAgICB0aGlzLm8gPSBvO1xuXHQgICAgICB0aGlzLmcgPSBnO1xuXHQgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgaW5oZXJpdHMoTWVyZ2VBbGxPYnNlcnZlciwgX19zdXBlcl9fKTtcblx0XG5cdCAgICBNZXJnZUFsbE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oaW5uZXJTb3VyY2UpIHtcblx0ICAgICAgdmFyIHNhZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXHQgICAgICB0aGlzLmcuYWRkKHNhZCk7XG5cdCAgICAgIGlzUHJvbWlzZShpbm5lclNvdXJjZSkgJiYgKGlubmVyU291cmNlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGlubmVyU291cmNlKSk7XG5cdCAgICAgIHNhZC5zZXREaXNwb3NhYmxlKGlubmVyU291cmNlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcih0aGlzLCBzYWQpKSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE1lcmdlQWxsT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgdGhpcy5vLm9uRXJyb3IoZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE1lcmdlQWxsT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcblx0ICAgICAgdGhpcy5nLmxlbmd0aCA9PT0gMSAmJiB0aGlzLm8ub25Db21wbGV0ZWQoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihwYXJlbnQsIHNhZCkge1xuXHQgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcblx0ICAgICAgdGhpcy5zYWQgPSBzYWQ7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cdFxuXHQgICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgIHRoaXMucGFyZW50Lm8ub25OZXh0KHgpO1xuXHQgICAgfTtcblx0ICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgdGhpcy5wYXJlbnQuby5vbkVycm9yKGUpO1xuXHQgICAgfTtcblx0ICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5wYXJlbnQuZy5yZW1vdmUodGhpcy5zYWQpO1xuXHQgICAgICB0aGlzLnBhcmVudC5kb25lICYmIHRoaXMucGFyZW50LmcubGVuZ3RoID09PSAxICYmIHRoaXMucGFyZW50Lm8ub25Db21wbGV0ZWQoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIE1lcmdlQWxsT2JzZXJ2ZXI7XG5cdCAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cdFxuXHQgIC8qKlxuXHQgICogTWVyZ2VzIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2Ygb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuXHQgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgbWVyZ2VzIHRoZSBlbGVtZW50cyBvZiB0aGUgaW5uZXIgc2VxdWVuY2VzLlxuXHQgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLm1lcmdlQWxsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIG5ldyBNZXJnZUFsbE9ic2VydmFibGUodGhpcyk7XG5cdCAgfTtcblx0XG5cdCAgdmFyIFNraXBVbnRpbE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhTa2lwVW50aWxPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFNraXBVbnRpbE9ic2VydmFibGUoc291cmNlLCBvdGhlcikge1xuXHQgICAgICB0aGlzLl9zID0gc291cmNlO1xuXHQgICAgICB0aGlzLl9vID0gaXNQcm9taXNlKG90aGVyKSA/IG9ic2VydmFibGVGcm9tUHJvbWlzZShvdGhlcikgOiBvdGhlcjtcblx0ICAgICAgdGhpcy5fb3BlbiA9IGZhbHNlO1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBTa2lwVW50aWxPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuXHQgICAgICB2YXIgbGVmdFN1YnNjcmlwdGlvbiA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXHQgICAgICBsZWZ0U3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUodGhpcy5fcy5zdWJzY3JpYmUobmV3IFNraXBVbnRpbFNvdXJjZU9ic2VydmVyKG8sIHRoaXMpKSk7XG5cdFxuXHQgICAgICBpc1Byb21pc2UodGhpcy5fbykgJiYgKHRoaXMuX28gPSBvYnNlcnZhYmxlRnJvbVByb21pc2UodGhpcy5fbykpO1xuXHRcblx0ICAgICAgdmFyIHJpZ2h0U3Vic2NyaXB0aW9uID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cdCAgICAgIHJpZ2h0U3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUodGhpcy5fby5zdWJzY3JpYmUobmV3IFNraXBVbnRpbE90aGVyT2JzZXJ2ZXIobywgdGhpcywgcmlnaHRTdWJzY3JpcHRpb24pKSk7XG5cdFxuXHQgICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUobGVmdFN1YnNjcmlwdGlvbiwgcmlnaHRTdWJzY3JpcHRpb24pO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gU2tpcFVudGlsT2JzZXJ2YWJsZTtcblx0ICB9KE9ic2VydmFibGVCYXNlKSk7XG5cdFxuXHQgIHZhciBTa2lwVW50aWxTb3VyY2VPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKFNraXBVbnRpbFNvdXJjZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIobywgcCkge1xuXHQgICAgICB0aGlzLl9vID0gbztcblx0ICAgICAgdGhpcy5fcCA9IHA7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIFNraXBVbnRpbFNvdXJjZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcblx0ICAgICAgdGhpcy5fcC5fb3BlbiAmJiB0aGlzLl9vLm9uTmV4dCh4KTtcblx0ICAgIH07XG5cdFxuXHQgICAgU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICB0aGlzLl9vLm9uRXJyb3IoZXJyKTtcblx0ICAgIH07XG5cdFxuXHQgICAgU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLm9uQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aGlzLl9wLl9vcGVuICYmIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFNraXBVbnRpbFNvdXJjZU9ic2VydmVyO1xuXHQgIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXHRcblx0ICB2YXIgU2tpcFVudGlsT3RoZXJPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKFNraXBVbnRpbE90aGVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBTa2lwVW50aWxPdGhlck9ic2VydmVyKG8sIHAsIHIpIHtcblx0ICAgICAgdGhpcy5fbyA9IG87XG5cdCAgICAgIHRoaXMuX3AgPSBwO1xuXHQgICAgICB0aGlzLl9yID0gcjtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgU2tpcFVudGlsT3RoZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5fcC5fb3BlbiA9IHRydWU7XG5cdCAgICAgIHRoaXMuX3IuZGlzcG9zZSgpO1xuXHQgICAgfTtcblx0XG5cdCAgICBTa2lwVW50aWxPdGhlck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgdGhpcy5fby5vbkVycm9yKGVycik7XG5cdCAgICB9O1xuXHRcblx0ICAgIFNraXBVbnRpbE90aGVyT2JzZXJ2ZXIucHJvdG90eXBlLm9uQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aGlzLl9yLmRpc3Bvc2UoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFNraXBVbnRpbE90aGVyT2JzZXJ2ZXI7XG5cdCAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJldHVybnMgdGhlIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2Ugb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvbmx5IGFmdGVyIHRoZSBvdGhlciBvYnNlcnZhYmxlIHNlcXVlbmNlIHByb2R1Y2VzIGEgdmFsdWUuXG5cdCAgICogQHBhcmFtIHtPYnNlcnZhYmxlIHwgUHJvbWlzZX0gb3RoZXIgVGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugb3IgUHJvbWlzZSB0aGF0IHRyaWdnZXJzIHByb3BhZ2F0aW9uIG9mIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZSBzdGFydGluZyBmcm9tIHRoZSBwb2ludCB0aGUgb3RoZXIgc2VxdWVuY2UgdHJpZ2dlcmVkIHByb3BhZ2F0aW9uLlxuXHQgICAqL1xuXHQgIG9ic2VydmFibGVQcm90by5za2lwVW50aWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcblx0ICAgIHJldHVybiBuZXcgU2tpcFVudGlsT2JzZXJ2YWJsZSh0aGlzLCBvdGhlcik7XG5cdCAgfTtcblx0XG5cdCAgdmFyIFN3aXRjaE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhTd2l0Y2hPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gU3dpdGNoT2JzZXJ2YWJsZShzb3VyY2UpIHtcblx0ICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIFN3aXRjaE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuXHQgICAgICB2YXIgaW5uZXIgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLCBzID0gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTd2l0Y2hPYnNlcnZlcihvLCBpbm5lcikpO1xuXHQgICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUocywgaW5uZXIpO1xuXHQgICAgfTtcblx0XG5cdCAgICBpbmhlcml0cyhTd2l0Y2hPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG5cdCAgICBmdW5jdGlvbiBTd2l0Y2hPYnNlcnZlcihvLCBpbm5lcikge1xuXHQgICAgICB0aGlzLm8gPSBvO1xuXHQgICAgICB0aGlzLmlubmVyID0gaW5uZXI7XG5cdCAgICAgIHRoaXMuc3RvcHBlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLmxhdGVzdCA9IDA7XG5cdCAgICAgIHRoaXMuaGFzTGF0ZXN0ID0gZmFsc2U7XG5cdCAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBTd2l0Y2hPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uIChpbm5lclNvdXJjZSkge1xuXHQgICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLCBpZCA9ICsrdGhpcy5sYXRlc3Q7XG5cdCAgICAgIHRoaXMuaGFzTGF0ZXN0ID0gdHJ1ZTtcblx0ICAgICAgdGhpcy5pbm5lci5zZXREaXNwb3NhYmxlKGQpO1xuXHQgICAgICBpc1Byb21pc2UoaW5uZXJTb3VyY2UpICYmIChpbm5lclNvdXJjZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShpbm5lclNvdXJjZSkpO1xuXHQgICAgICBkLnNldERpc3Bvc2FibGUoaW5uZXJTb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKHRoaXMsIGlkKSkpO1xuXHQgICAgfTtcblx0XG5cdCAgICBTd2l0Y2hPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgICB0aGlzLm8ub25FcnJvcihlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgU3dpdGNoT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5zdG9wcGVkID0gdHJ1ZTtcblx0ICAgICAgIXRoaXMuaGFzTGF0ZXN0ICYmIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgfTtcblx0XG5cdCAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcblx0ICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIocGFyZW50LCBpZCkge1xuXHQgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcblx0ICAgICAgdGhpcy5pZCA9IGlkO1xuXHQgICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdCAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcblx0ICAgICAgdGhpcy5wYXJlbnQubGF0ZXN0ID09PSB0aGlzLmlkICYmIHRoaXMucGFyZW50Lm8ub25OZXh0KHgpO1xuXHQgICAgfTtcblx0XG5cdCAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIHRoaXMucGFyZW50LmxhdGVzdCA9PT0gdGhpcy5pZCAmJiB0aGlzLnBhcmVudC5vLm9uRXJyb3IoZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHRoaXMucGFyZW50LmxhdGVzdCA9PT0gdGhpcy5pZCkge1xuXHQgICAgICAgIHRoaXMucGFyZW50Lmhhc0xhdGVzdCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMucGFyZW50LnN0b3BwZWQgJiYgdGhpcy5wYXJlbnQuby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBTd2l0Y2hPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgLyoqXG5cdCAgKiBUcmFuc2Zvcm1zIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2Ygb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHByb2R1Y2luZyB2YWx1ZXMgb25seSBmcm9tIHRoZSBtb3N0IHJlY2VudCBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuXHQgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgYXQgYW55IHBvaW50IGluIHRpbWUgcHJvZHVjZXMgdGhlIGVsZW1lbnRzIG9mIHRoZSBtb3N0IHJlY2VudCBpbm5lciBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaGFzIGJlZW4gcmVjZWl2ZWQuXG5cdCAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG9bJ3N3aXRjaCddID0gb2JzZXJ2YWJsZVByb3RvLnN3aXRjaExhdGVzdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBuZXcgU3dpdGNoT2JzZXJ2YWJsZSh0aGlzKTtcblx0ICB9O1xuXHRcblx0ICB2YXIgVGFrZVVudGlsT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKFRha2VVbnRpbE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdFxuXHQgICAgZnVuY3Rpb24gVGFrZVVudGlsT2JzZXJ2YWJsZShzb3VyY2UsIG90aGVyKSB7XG5cdCAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICB0aGlzLm90aGVyID0gaXNQcm9taXNlKG90aGVyKSA/IG9ic2VydmFibGVGcm9tUHJvbWlzZShvdGhlcikgOiBvdGhlcjtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgVGFrZVVudGlsT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG8pIHtcblx0ICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKFxuXHQgICAgICAgIHRoaXMuc291cmNlLnN1YnNjcmliZShvKSxcblx0ICAgICAgICB0aGlzLm90aGVyLnN1YnNjcmliZShuZXcgVGFrZVVudGlsT2JzZXJ2ZXIobykpXG5cdCAgICAgICk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBUYWtlVW50aWxPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgdmFyIFRha2VVbnRpbE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoVGFrZVVudGlsT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBUYWtlVW50aWxPYnNlcnZlcihvKSB7XG5cdCAgICAgIHRoaXMuX28gPSBvO1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBUYWtlVW50aWxPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgfTtcblx0XG5cdCAgICBUYWtlVW50aWxPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgIHRoaXMuX28ub25FcnJvcihlcnIpO1xuXHQgICAgfTtcblx0XG5cdCAgICBUYWtlVW50aWxPYnNlcnZlci5wcm90b3R5cGUub25Db21wbGV0ZWQgPSBub29wO1xuXHRcblx0ICAgIHJldHVybiBUYWtlVW50aWxPYnNlcnZlcjtcblx0ICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmV0dXJucyB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHVudGlsIHRoZSBvdGhlciBvYnNlcnZhYmxlIHNlcXVlbmNlIHByb2R1Y2VzIGEgdmFsdWUuXG5cdCAgICogQHBhcmFtIHtPYnNlcnZhYmxlIHwgUHJvbWlzZX0gb3RoZXIgT2JzZXJ2YWJsZSBzZXF1ZW5jZSBvciBQcm9taXNlIHRoYXQgdGVybWluYXRlcyBwcm9wYWdhdGlvbiBvZiBlbGVtZW50cyBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UgdXAgdG8gdGhlIHBvaW50IHRoZSBvdGhlciBzZXF1ZW5jZSBpbnRlcnJ1cHRlZCBmdXJ0aGVyIHByb3BhZ2F0aW9uLlxuXHQgICAqL1xuXHQgIG9ic2VydmFibGVQcm90by50YWtlVW50aWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcblx0ICAgIHJldHVybiBuZXcgVGFrZVVudGlsT2JzZXJ2YWJsZSh0aGlzLCBvdGhlcik7XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gZmFsc2VGYWN0b3J5KCkgeyByZXR1cm4gZmFsc2U7IH1cblx0ICBmdW5jdGlvbiBhcmd1bWVudHNUb0FycmF5KCkge1xuXHQgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcblx0ICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG5cdCAgICByZXR1cm4gYXJncztcblx0ICB9XG5cdFxuXHQgIHZhciBXaXRoTGF0ZXN0RnJvbU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhXaXRoTGF0ZXN0RnJvbU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBXaXRoTGF0ZXN0RnJvbU9ic2VydmFibGUoc291cmNlLCBzb3VyY2VzLCByZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgICB0aGlzLl9zID0gc291cmNlO1xuXHQgICAgICB0aGlzLl9zcyA9IHNvdXJjZXM7XG5cdCAgICAgIHRoaXMuX2NiID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIFdpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHZhciBsZW4gPSB0aGlzLl9zcy5sZW5ndGg7XG5cdCAgICAgIHZhciBzdGF0ZSA9IHtcblx0ICAgICAgICBoYXNWYWx1ZTogYXJyYXlJbml0aWFsaXplKGxlbiwgZmFsc2VGYWN0b3J5KSxcblx0ICAgICAgICBoYXNWYWx1ZUFsbDogZmFsc2UsXG5cdCAgICAgICAgdmFsdWVzOiBuZXcgQXJyYXkobGVuKVxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgdmFyIG4gPSB0aGlzLl9zcy5sZW5ndGgsIHN1YnNjcmlwdGlvbnMgPSBuZXcgQXJyYXkobiArIDEpO1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuXHQgICAgICAgIHZhciBvdGhlciA9IHRoaXMuX3NzW2ldLCBzYWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblx0ICAgICAgICBpc1Byb21pc2Uob3RoZXIpICYmIChvdGhlciA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShvdGhlcikpO1xuXHQgICAgICAgIHNhZC5zZXREaXNwb3NhYmxlKG90aGVyLnN1YnNjcmliZShuZXcgV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyKG8sIGksIHN0YXRlKSkpO1xuXHQgICAgICAgIHN1YnNjcmlwdGlvbnNbaV0gPSBzYWQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBvdXRlclNhZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXHQgICAgICBvdXRlclNhZC5zZXREaXNwb3NhYmxlKHRoaXMuX3Muc3Vic2NyaWJlKG5ldyBXaXRoTGF0ZXN0RnJvbVNvdXJjZU9ic2VydmVyKG8sIHRoaXMuX2NiLCBzdGF0ZSkpKTtcblx0ICAgICAgc3Vic2NyaXB0aW9uc1tuXSA9IG91dGVyU2FkO1xuXHRcblx0ICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb25zKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFdpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZTtcblx0ICB9KE9ic2VydmFibGVCYXNlKSk7XG5cdFxuXHQgIHZhciBXaXRoTGF0ZXN0RnJvbU90aGVyT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyLCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyKG8sIGksIHN0YXRlKSB7XG5cdCAgICAgIHRoaXMuX28gPSBvO1xuXHQgICAgICB0aGlzLl9pID0gaTtcblx0ICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcblx0ICAgICAgdGhpcy5fc3RhdGUudmFsdWVzW3RoaXMuX2ldID0geDtcblx0ICAgICAgdGhpcy5fc3RhdGUuaGFzVmFsdWVbdGhpcy5faV0gPSB0cnVlO1xuXHQgICAgICB0aGlzLl9zdGF0ZS5oYXNWYWx1ZUFsbCA9IHRoaXMuX3N0YXRlLmhhc1ZhbHVlLmV2ZXJ5KGlkZW50aXR5KTtcblx0ICAgIH07XG5cdFxuXHQgICAgV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBub29wO1xuXHRcblx0ICAgIHJldHVybiBXaXRoTGF0ZXN0RnJvbU90aGVyT2JzZXJ2ZXI7XG5cdCAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cdFxuXHQgIHZhciBXaXRoTGF0ZXN0RnJvbVNvdXJjZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBXaXRoTGF0ZXN0RnJvbVNvdXJjZU9ic2VydmVyKG8sIGNiLCBzdGF0ZSkge1xuXHQgICAgICB0aGlzLl9vID0gbztcblx0ICAgICAgdGhpcy5fY2IgPSBjYjtcblx0ICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgV2l0aExhdGVzdEZyb21Tb3VyY2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgIHZhciBhbGxWYWx1ZXMgPSBbeF0uY29uY2F0KHRoaXMuX3N0YXRlLnZhbHVlcyk7XG5cdCAgICAgIGlmICghdGhpcy5fc3RhdGUuaGFzVmFsdWVBbGwpIHsgcmV0dXJuOyB9XG5cdCAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9jYikuYXBwbHkobnVsbCwgYWxsVmFsdWVzKTtcblx0ICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihyZXMuZSk7IH1cblx0ICAgICAgdGhpcy5fby5vbk5leHQocmVzKTtcblx0ICAgIH07XG5cdFxuXHQgICAgV2l0aExhdGVzdEZyb21Tb3VyY2VPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gV2l0aExhdGVzdEZyb21Tb3VyY2VPYnNlcnZlcjtcblx0ICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblx0XG5cdCAgLyoqXG5cdCAgICogTWVyZ2VzIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSB1c2luZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gb25seSB3aGVuIHRoZSAoZmlyc3QpIHNvdXJjZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHByb2R1Y2VzIGFuIGVsZW1lbnQuXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgcmVzdWx0IG9mIGNvbWJpbmluZyBlbGVtZW50cyBvZiB0aGUgc291cmNlcyB1c2luZyB0aGUgc3BlY2lmaWVkIHJlc3VsdCBzZWxlY3RvciBmdW5jdGlvbi5cblx0ICAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG8ud2l0aExhdGVzdEZyb20gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgeyB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgYXJndW1lbnRzJyk7IH1cblx0XG5cdCAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuXHQgICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cblx0ICAgIHZhciByZXN1bHRTZWxlY3RvciA9IGlzRnVuY3Rpb24oYXJnc1tsZW4gLSAxXSkgPyBhcmdzLnBvcCgpIDogYXJndW1lbnRzVG9BcnJheTtcblx0ICAgIEFycmF5LmlzQXJyYXkoYXJnc1swXSkgJiYgKGFyZ3MgPSBhcmdzWzBdKTtcblx0XG5cdCAgICByZXR1cm4gbmV3IFdpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZSh0aGlzLCBhcmdzLCByZXN1bHRTZWxlY3Rvcik7XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gZmFsc2VGYWN0b3J5KCkgeyByZXR1cm4gZmFsc2U7IH1cblx0ICBmdW5jdGlvbiBlbXB0eUFycmF5RmFjdG9yeSgpIHsgcmV0dXJuIFtdOyB9XG5cdFxuXHQgIHZhciBaaXBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoWmlwT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIFppcE9ic2VydmFibGUoc291cmNlcywgcmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgICAgdGhpcy5fcyA9IHNvdXJjZXM7XG5cdCAgICAgIHRoaXMuX2NiID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIFppcE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvYnNlcnZlcikge1xuXHQgICAgICB2YXIgbiA9IHRoaXMuX3MubGVuZ3RoLFxuXHQgICAgICAgICAgc3Vic2NyaXB0aW9ucyA9IG5ldyBBcnJheShuKSxcblx0ICAgICAgICAgIGRvbmUgPSBhcnJheUluaXRpYWxpemUobiwgZmFsc2VGYWN0b3J5KSxcblx0ICAgICAgICAgIHEgPSBhcnJheUluaXRpYWxpemUobiwgZW1wdHlBcnJheUZhY3RvcnkpO1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcblx0ICAgICAgICB2YXIgc291cmNlID0gdGhpcy5fc1tpXSwgc2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cdCAgICAgICAgc3Vic2NyaXB0aW9uc1tpXSA9IHNhZDtcblx0ICAgICAgICBpc1Byb21pc2Uoc291cmNlKSAmJiAoc291cmNlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHNvdXJjZSkpO1xuXHQgICAgICAgIHNhZC5zZXREaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUobmV3IFppcE9ic2VydmVyKG9ic2VydmVyLCBpLCB0aGlzLCBxLCBkb25lKSkpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbnMpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gWmlwT2JzZXJ2YWJsZTtcblx0ICB9KE9ic2VydmFibGVCYXNlKSk7XG5cdFxuXHQgIHZhciBaaXBPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhaaXBPYnNlcnZlciwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIFppcE9ic2VydmVyKG8sIGksIHAsIHEsIGQpIHtcblx0ICAgICAgdGhpcy5fbyA9IG87XG5cdCAgICAgIHRoaXMuX2kgPSBpO1xuXHQgICAgICB0aGlzLl9wID0gcDtcblx0ICAgICAgdGhpcy5fcSA9IHE7XG5cdCAgICAgIHRoaXMuX2QgPSBkO1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBub3RFbXB0eSh4KSB7IHJldHVybiB4Lmxlbmd0aCA+IDA7IH1cblx0ICAgIGZ1bmN0aW9uIHNoaWZ0RWFjaCh4KSB7IHJldHVybiB4LnNoaWZ0KCk7IH1cblx0ICAgIGZ1bmN0aW9uIG5vdFRoZVNhbWUoaSkge1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24gKHgsIGopIHtcblx0ICAgICAgICByZXR1cm4gaiAhPT0gaTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBaaXBPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgIHRoaXMuX3FbdGhpcy5faV0ucHVzaCh4KTtcblx0ICAgICAgaWYgKHRoaXMuX3EuZXZlcnkobm90RW1wdHkpKSB7XG5cdCAgICAgICAgdmFyIHF1ZXVlZFZhbHVlcyA9IHRoaXMuX3EubWFwKHNoaWZ0RWFjaCk7XG5cdCAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX3AuX2NiKS5hcHBseShudWxsLCBxdWV1ZWRWYWx1ZXMpO1xuXHQgICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG5cdCAgICAgICAgdGhpcy5fby5vbk5leHQocmVzKTtcblx0ICAgICAgfSBlbHNlIGlmICh0aGlzLl9kLmZpbHRlcihub3RUaGVTYW1lKHRoaXMuX2kpKS5ldmVyeShpZGVudGl0eSkpIHtcblx0ICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgWmlwT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuXHQgICAgfTtcblx0XG5cdCAgICBaaXBPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aGlzLl9kW3RoaXMuX2ldID0gdHJ1ZTtcblx0ICAgICAgdGhpcy5fZC5ldmVyeShpZGVudGl0eSkgJiYgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gWmlwT2JzZXJ2ZXI7XG5cdCAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIE1lcmdlcyB0aGUgc3BlY2lmaWVkIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgdXNpbmcgdGhlIHNlbGVjdG9yIGZ1bmN0aW9uIHdoZW5ldmVyIGFsbCBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgb3IgYW4gYXJyYXkgaGF2ZSBwcm9kdWNlZCBhbiBlbGVtZW50IGF0IGEgY29ycmVzcG9uZGluZyBpbmRleC5cblx0ICAgKiBUaGUgbGFzdCBlbGVtZW50IGluIHRoZSBhcmd1bWVudHMgbXVzdCBiZSBhIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBzZXJpZXMgb2YgZWxlbWVudHMgYXQgY29ycmVzcG9uZGluZyBpbmRleGVzIGluIHRoZSBhcmdzLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBjb21iaW5pbmcgZWxlbWVudHMgb2YgdGhlIGFyZ3MgdXNpbmcgdGhlIHNwZWNpZmllZCByZXN1bHQgc2VsZWN0b3IgZnVuY3Rpb24uXG5cdCAgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLnppcCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7IHRocm93IG5ldyBFcnJvcignaW52YWxpZCBhcmd1bWVudHMnKTsgfVxuXHRcblx0ICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG5cdCAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuXHQgICAgdmFyIHJlc3VsdFNlbGVjdG9yID0gaXNGdW5jdGlvbihhcmdzW2xlbiAtIDFdKSA/IGFyZ3MucG9wKCkgOiBhcmd1bWVudHNUb0FycmF5O1xuXHQgICAgQXJyYXkuaXNBcnJheShhcmdzWzBdKSAmJiAoYXJncyA9IGFyZ3NbMF0pO1xuXHRcblx0ICAgIHZhciBwYXJlbnQgPSB0aGlzO1xuXHQgICAgYXJncy51bnNoaWZ0KHBhcmVudCk7XG5cdFxuXHQgICAgcmV0dXJuIG5ldyBaaXBPYnNlcnZhYmxlKGFyZ3MsIHJlc3VsdFNlbGVjdG9yKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBNZXJnZXMgdGhlIHNwZWNpZmllZCBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IHVzaW5nIHRoZSBzZWxlY3RvciBmdW5jdGlvbiB3aGVuZXZlciBhbGwgb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2VzIGhhdmUgcHJvZHVjZWQgYW4gZWxlbWVudCBhdCBhIGNvcnJlc3BvbmRpbmcgaW5kZXguXG5cdCAgICogQHBhcmFtIGFyZ3VtZW50cyBPYnNlcnZhYmxlIHNvdXJjZXMuXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzdWx0U2VsZWN0b3IgRnVuY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIHNlcmllcyBvZiBlbGVtZW50cyBhdCBjb3JyZXNwb25kaW5nIGluZGV4ZXMgaW4gdGhlIHNvdXJjZXMuXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgcmVzdWx0IG9mIGNvbWJpbmluZyBlbGVtZW50cyBvZiB0aGUgc291cmNlcyB1c2luZyB0aGUgc3BlY2lmaWVkIHJlc3VsdCBzZWxlY3RvciBmdW5jdGlvbi5cblx0ICAgKi9cblx0ICBPYnNlcnZhYmxlLnppcCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG5cdCAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcblx0ICAgICAgYXJncyA9IGlzRnVuY3Rpb24oYXJnc1sxXSkgPyBhcmdzWzBdLmNvbmNhdChhcmdzWzFdKSA6IGFyZ3NbMF07XG5cdCAgICB9XG5cdCAgICB2YXIgZmlyc3QgPSBhcmdzLnNoaWZ0KCk7XG5cdCAgICByZXR1cm4gZmlyc3QuemlwLmFwcGx5KGZpcnN0LCBhcmdzKTtcblx0ICB9O1xuXHRcblx0ZnVuY3Rpb24gZmFsc2VGYWN0b3J5KCkgeyByZXR1cm4gZmFsc2U7IH1cblx0ZnVuY3Rpb24gZW1wdHlBcnJheUZhY3RvcnkoKSB7IHJldHVybiBbXTsgfVxuXHRmdW5jdGlvbiBhcmd1bWVudHNUb0FycmF5KCkge1xuXHQgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG5cdCAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cblx0ICByZXR1cm4gYXJncztcblx0fVxuXHRcblx0dmFyIFppcEl0ZXJhYmxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICBpbmhlcml0cyhaaXBJdGVyYWJsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdCAgZnVuY3Rpb24gWmlwSXRlcmFibGVPYnNlcnZhYmxlKHNvdXJjZXMsIGNiKSB7XG5cdCAgICB0aGlzLnNvdXJjZXMgPSBzb3VyY2VzO1xuXHQgICAgdGhpcy5fY2IgPSBjYjtcblx0ICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgIH1cblx0XG5cdCAgWmlwSXRlcmFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgIHZhciBzb3VyY2VzID0gdGhpcy5zb3VyY2VzLCBsZW4gPSBzb3VyY2VzLmxlbmd0aCwgc3Vic2NyaXB0aW9ucyA9IG5ldyBBcnJheShsZW4pO1xuXHRcblx0ICAgIHZhciBzdGF0ZSA9IHtcblx0ICAgICAgcTogYXJyYXlJbml0aWFsaXplKGxlbiwgZW1wdHlBcnJheUZhY3RvcnkpLFxuXHQgICAgICBkb25lOiBhcnJheUluaXRpYWxpemUobGVuLCBmYWxzZUZhY3RvcnkpLFxuXHQgICAgICBjYjogdGhpcy5fY2IsXG5cdCAgICAgIG86IG9cblx0ICAgIH07XG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAoZnVuY3Rpb24gKGkpIHtcblx0ICAgICAgICB2YXIgc291cmNlID0gc291cmNlc1tpXSwgc2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cdCAgICAgICAgKGlzQXJyYXlMaWtlKHNvdXJjZSkgfHwgaXNJdGVyYWJsZShzb3VyY2UpKSAmJiAoc291cmNlID0gb2JzZXJ2YWJsZUZyb20oc291cmNlKSk7XG5cdFxuXHQgICAgICAgIHN1YnNjcmlwdGlvbnNbaV0gPSBzYWQ7XG5cdCAgICAgICAgc2FkLnNldERpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShuZXcgWmlwSXRlcmFibGVPYnNlcnZlcihzdGF0ZSwgaSkpKTtcblx0ICAgICAgfShpKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb25zKTtcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gWmlwSXRlcmFibGVPYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVCYXNlKSk7XG5cdFxuXHR2YXIgWmlwSXRlcmFibGVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgaW5oZXJpdHMoWmlwSXRlcmFibGVPYnNlcnZlciwgX19zdXBlcl9fKTtcblx0ICBmdW5jdGlvbiBaaXBJdGVyYWJsZU9ic2VydmVyKHMsIGkpIHtcblx0ICAgIHRoaXMuX3MgPSBzO1xuXHQgICAgdGhpcy5faSA9IGk7XG5cdCAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIG5vdEVtcHR5KHgpIHsgcmV0dXJuIHgubGVuZ3RoID4gMDsgfVxuXHQgIGZ1bmN0aW9uIHNoaWZ0RWFjaCh4KSB7IHJldHVybiB4LnNoaWZ0KCk7IH1cblx0ICBmdW5jdGlvbiBub3RUaGVTYW1lKGkpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoeCwgaikge1xuXHQgICAgICByZXR1cm4gaiAhPT0gaTtcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICBaaXBJdGVyYWJsZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcblx0ICAgIHRoaXMuX3MucVt0aGlzLl9pXS5wdXNoKHgpO1xuXHQgICAgaWYgKHRoaXMuX3MucS5ldmVyeShub3RFbXB0eSkpIHtcblx0ICAgICAgdmFyIHF1ZXVlZFZhbHVlcyA9IHRoaXMuX3MucS5tYXAoc2hpZnRFYWNoKSxcblx0ICAgICAgICAgIHJlcyA9IHRyeUNhdGNoKHRoaXMuX3MuY2IpLmFwcGx5KG51bGwsIHF1ZXVlZFZhbHVlcyk7XG5cdCAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9zLm8ub25FcnJvcihyZXMuZSk7IH1cblx0ICAgICAgdGhpcy5fcy5vLm9uTmV4dChyZXMpO1xuXHQgICAgfSBlbHNlIGlmICh0aGlzLl9zLmRvbmUuZmlsdGVyKG5vdFRoZVNhbWUodGhpcy5faSkpLmV2ZXJ5KGlkZW50aXR5KSkge1xuXHQgICAgICB0aGlzLl9zLm8ub25Db21wbGV0ZWQoKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBaaXBJdGVyYWJsZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX3Muby5vbkVycm9yKGUpOyB9O1xuXHRcblx0ICBaaXBJdGVyYWJsZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLl9zLmRvbmVbdGhpcy5faV0gPSB0cnVlO1xuXHQgICAgdGhpcy5fcy5kb25lLmV2ZXJ5KGlkZW50aXR5KSAmJiB0aGlzLl9zLm8ub25Db21wbGV0ZWQoKTtcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gWmlwSXRlcmFibGVPYnNlcnZlcjtcblx0fShBYnN0cmFjdE9ic2VydmVyKSk7XG5cdFxuXHQvKipcblx0ICogTWVyZ2VzIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSB1c2luZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2hlbmV2ZXIgYWxsIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBvciBhbiBhcnJheSBoYXZlIHByb2R1Y2VkIGFuIGVsZW1lbnQgYXQgYSBjb3JyZXNwb25kaW5nIGluZGV4LlxuXHQgKiBUaGUgbGFzdCBlbGVtZW50IGluIHRoZSBhcmd1bWVudHMgbXVzdCBiZSBhIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBzZXJpZXMgb2YgZWxlbWVudHMgYXQgY29ycmVzcG9uZGluZyBpbmRleGVzIGluIHRoZSBhcmdzLlxuXHQgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgY29tYmluaW5nIGVsZW1lbnRzIG9mIHRoZSBhcmdzIHVzaW5nIHRoZSBzcGVjaWZpZWQgcmVzdWx0IHNlbGVjdG9yIGZ1bmN0aW9uLlxuXHQgKi9cblx0b2JzZXJ2YWJsZVByb3RvLnppcEl0ZXJhYmxlID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7IHRocm93IG5ldyBFcnJvcignaW52YWxpZCBhcmd1bWVudHMnKTsgfVxuXHRcblx0ICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuXHQgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG5cdCAgdmFyIHJlc3VsdFNlbGVjdG9yID0gaXNGdW5jdGlvbihhcmdzW2xlbiAtIDFdKSA/IGFyZ3MucG9wKCkgOiBhcmd1bWVudHNUb0FycmF5O1xuXHRcblx0ICB2YXIgcGFyZW50ID0gdGhpcztcblx0ICBhcmdzLnVuc2hpZnQocGFyZW50KTtcblx0ICByZXR1cm4gbmV3IFppcEl0ZXJhYmxlT2JzZXJ2YWJsZShhcmdzLCByZXN1bHRTZWxlY3Rvcik7XG5cdH07XG5cdFxuXHQgIGZ1bmN0aW9uIGFzT2JzZXJ2YWJsZShzb3VyY2UpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiBzdWJzY3JpYmUobykgeyByZXR1cm4gc291cmNlLnN1YnNjcmliZShvKTsgfTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqICBIaWRlcyB0aGUgaWRlbnRpdHkgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cblx0ICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGhpZGVzIHRoZSBpZGVudGl0eSBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuXHQgICAqL1xuXHQgIG9ic2VydmFibGVQcm90by5hc09ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoYXNPYnNlcnZhYmxlKHRoaXMpLCB0aGlzKTtcblx0ICB9O1xuXHRcblx0ICB2YXIgRGVtYXRlcmlhbGl6ZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoRGVtYXRlcmlhbGl6ZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBEZW1hdGVyaWFsaXplT2JzZXJ2YWJsZShzb3VyY2UpIHtcblx0ICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIERlbWF0ZXJpYWxpemVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgRGVtYXRlcmlhbGl6ZU9ic2VydmVyKG8pKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIERlbWF0ZXJpYWxpemVPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgdmFyIERlbWF0ZXJpYWxpemVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhEZW1hdGVyaWFsaXplT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cdFxuXHQgICAgZnVuY3Rpb24gRGVtYXRlcmlhbGl6ZU9ic2VydmVyKG8pIHtcblx0ICAgICAgdGhpcy5fbyA9IG87XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIERlbWF0ZXJpYWxpemVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHguYWNjZXB0KHRoaXMuX28pOyB9O1xuXHQgICAgRGVtYXRlcmlhbGl6ZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcblx0ICAgIERlbWF0ZXJpYWxpemVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cdFxuXHQgICAgcmV0dXJuIERlbWF0ZXJpYWxpemVPYnNlcnZlcjtcblx0ICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblx0XG5cdCAgLyoqXG5cdCAgICogRGVtYXRlcmlhbGl6ZXMgdGhlIGV4cGxpY2l0IG5vdGlmaWNhdGlvbiB2YWx1ZXMgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhcyBpbXBsaWNpdCBub3RpZmljYXRpb25zLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGV4aGliaXRpbmcgdGhlIGJlaGF2aW9yIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHNvdXJjZSBzZXF1ZW5jZSdzIG5vdGlmaWNhdGlvbiB2YWx1ZXMuXG5cdCAgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLmRlbWF0ZXJpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gbmV3IERlbWF0ZXJpYWxpemVPYnNlcnZhYmxlKHRoaXMpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmFibGUoc291cmNlLCBrZXlGbiwgY29tcGFyZXIpIHtcblx0ICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgIHRoaXMua2V5Rm4gPSBrZXlGbjtcblx0ICAgICAgdGhpcy5jb21wYXJlciA9IGNvbXBhcmVyO1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuXHQgICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyKG8sIHRoaXMua2V5Rm4sIHRoaXMuY29tcGFyZXIpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2YWJsZTtcblx0ICB9KE9ic2VydmFibGVCYXNlKSk7XG5cdFxuXHQgIHZhciBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlciwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2ZXIobywga2V5Rm4sIGNvbXBhcmVyKSB7XG5cdCAgICAgIHRoaXMubyA9IG87XG5cdCAgICAgIHRoaXMua2V5Rm4gPSBrZXlGbjtcblx0ICAgICAgdGhpcy5jb21wYXJlciA9IGNvbXBhcmVyO1xuXHQgICAgICB0aGlzLmhhc0N1cnJlbnRLZXkgPSBmYWxzZTtcblx0ICAgICAgdGhpcy5jdXJyZW50S2V5ID0gbnVsbDtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgIHZhciBrZXkgPSB4LCBjb21wYXJlckVxdWFscztcblx0ICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5rZXlGbikpIHtcblx0ICAgICAgICBrZXkgPSB0cnlDYXRjaCh0aGlzLmtleUZuKSh4KTtcblx0ICAgICAgICBpZiAoa2V5ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5vLm9uRXJyb3Ioa2V5LmUpOyB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHRoaXMuaGFzQ3VycmVudEtleSkge1xuXHQgICAgICAgIGNvbXBhcmVyRXF1YWxzID0gdHJ5Q2F0Y2godGhpcy5jb21wYXJlcikodGhpcy5jdXJyZW50S2V5LCBrZXkpO1xuXHQgICAgICAgIGlmIChjb21wYXJlckVxdWFscyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuby5vbkVycm9yKGNvbXBhcmVyRXF1YWxzLmUpOyB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCF0aGlzLmhhc0N1cnJlbnRLZXkgfHwgIWNvbXBhcmVyRXF1YWxzKSB7XG5cdCAgICAgICAgdGhpcy5oYXNDdXJyZW50S2V5ID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLmN1cnJlbnRLZXkgPSBrZXk7XG5cdCAgICAgICAgdGhpcy5vLm9uTmV4dCh4KTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24oZSkge1xuXHQgICAgICB0aGlzLm8ub25FcnJvcihlKTtcblx0ICAgIH07XG5cdCAgICBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlcjtcblx0ICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblx0XG5cdCAgLyoqXG5cdCAgKiAgUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgb25seSBkaXN0aW5jdCBjb250aWd1b3VzIGVsZW1lbnRzIGFjY29yZGluZyB0byB0aGUga2V5Rm4gYW5kIHRoZSBjb21wYXJlci5cblx0ICAqIEBwYXJhbSB7RnVuY3Rpb259IFtrZXlGbl0gQSBmdW5jdGlvbiB0byBjb21wdXRlIHRoZSBjb21wYXJpc29uIGtleSBmb3IgZWFjaCBlbGVtZW50LiBJZiBub3QgcHJvdmlkZWQsIGl0IHByb2plY3RzIHRoZSB2YWx1ZS5cblx0ICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjb21wYXJlcl0gRXF1YWxpdHkgY29tcGFyZXIgZm9yIGNvbXB1dGVkIGtleSB2YWx1ZXMuIElmIG5vdCBwcm92aWRlZCwgZGVmYXVsdHMgdG8gYW4gZXF1YWxpdHkgY29tcGFyZXIgZnVuY3Rpb24uXG5cdCAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvbmx5IGNvbnRhaW5pbmcgdGhlIGRpc3RpbmN0IGNvbnRpZ3VvdXMgZWxlbWVudHMsIGJhc2VkIG9uIGEgY29tcHV0ZWQga2V5IHZhbHVlLCBmcm9tIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG5cdCAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG8uZGlzdGluY3RVbnRpbENoYW5nZWQgPSBmdW5jdGlvbiAoa2V5Rm4sIGNvbXBhcmVyKSB7XG5cdCAgICBjb21wYXJlciB8fCAoY29tcGFyZXIgPSBkZWZhdWx0Q29tcGFyZXIpO1xuXHQgICAgcmV0dXJuIG5ldyBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmFibGUodGhpcywga2V5Rm4sIGNvbXBhcmVyKTtcblx0ICB9O1xuXHRcblx0ICB2YXIgVGFwT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKFRhcE9ic2VydmFibGUsX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIFRhcE9ic2VydmFibGUoc291cmNlLCBvYnNlcnZlck9yT25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkge1xuXHQgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgdGhpcy5fb04gPSBvYnNlcnZlck9yT25OZXh0O1xuXHQgICAgICB0aGlzLl9vRSA9IG9uRXJyb3I7XG5cdCAgICAgIHRoaXMuX29DID0gb25Db21wbGV0ZWQ7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIFRhcE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIobywgdGhpcykpO1xuXHQgICAgfTtcblx0XG5cdCAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcblx0ICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIobywgcCkge1xuXHQgICAgICB0aGlzLm8gPSBvO1xuXHQgICAgICB0aGlzLnQgPSAhcC5fb04gfHwgaXNGdW5jdGlvbihwLl9vTikgP1xuXHQgICAgICAgIG9ic2VydmVyQ3JlYXRlKHAuX29OIHx8IG5vb3AsIHAuX29FIHx8IG5vb3AsIHAuX29DIHx8IG5vb3ApIDpcblx0ICAgICAgICBwLl9vTjtcblx0ICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcblx0ICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKHgpIHtcblx0ICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMudC5vbk5leHQpLmNhbGwodGhpcy50LCB4KTtcblx0ICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgdGhpcy5vLm9uRXJyb3IocmVzLmUpOyB9XG5cdCAgICAgIHRoaXMuby5vbk5leHQoeCk7XG5cdCAgICB9O1xuXHQgICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcblx0ICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMudC5vbkVycm9yKS5jYWxsKHRoaXMudCwgZXJyKTtcblx0ICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuby5vbkVycm9yKHJlcy5lKTsgfVxuXHQgICAgICB0aGlzLm8ub25FcnJvcihlcnIpO1xuXHQgICAgfTtcblx0ICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy50Lm9uQ29tcGxldGVkKS5jYWxsKHRoaXMudCk7XG5cdCAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLm8ub25FcnJvcihyZXMuZSk7IH1cblx0ICAgICAgdGhpcy5vLm9uQ29tcGxldGVkKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBUYXBPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgLyoqXG5cdCAgKiAgSW52b2tlcyBhbiBhY3Rpb24gZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhbmQgaW52b2tlcyBhbiBhY3Rpb24gdXBvbiBncmFjZWZ1bCBvciBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cblx0ICAqICBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBmb3IgZGVidWdnaW5nLCBsb2dnaW5nLCBldGMuIG9mIHF1ZXJ5IGJlaGF2aW9yIGJ5IGludGVyY2VwdGluZyB0aGUgbWVzc2FnZSBzdHJlYW0gdG8gcnVuIGFyYml0cmFyeSBhY3Rpb25zIGZvciBtZXNzYWdlcyBvbiB0aGUgcGlwZWxpbmUuXG5cdCAgKiBAcGFyYW0ge0Z1bmN0aW9uIHwgT2JzZXJ2ZXJ9IG9ic2VydmVyT3JPbk5leHQgQWN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBlbGVtZW50IGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIG9yIGFuIG8uXG5cdCAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25FcnJvcl0gIEFjdGlvbiB0byBpbnZva2UgdXBvbiBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS4gVXNlZCBpZiBvbmx5IHRoZSBvYnNlcnZlck9yT25OZXh0IHBhcmFtZXRlciBpcyBhbHNvIGEgZnVuY3Rpb24uXG5cdCAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25Db21wbGV0ZWRdICBBY3Rpb24gdG8gaW52b2tlIHVwb24gZ3JhY2VmdWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuIFVzZWQgaWYgb25seSB0aGUgb2JzZXJ2ZXJPck9uTmV4dCBwYXJhbWV0ZXIgaXMgYWxzbyBhIGZ1bmN0aW9uLlxuXHQgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aCB0aGUgc2lkZS1lZmZlY3RpbmcgYmVoYXZpb3IgYXBwbGllZC5cblx0ICAqL1xuXHQgIG9ic2VydmFibGVQcm90b1snZG8nXSA9IG9ic2VydmFibGVQcm90by50YXAgPSBvYnNlcnZhYmxlUHJvdG8uZG9BY3Rpb24gPSBmdW5jdGlvbiAob2JzZXJ2ZXJPck9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcblx0ICAgIHJldHVybiBuZXcgVGFwT2JzZXJ2YWJsZSh0aGlzLCBvYnNlcnZlck9yT25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgKiAgSW52b2tlcyBhbiBhY3Rpb24gZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cblx0ICAqICBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBmb3IgZGVidWdnaW5nLCBsb2dnaW5nLCBldGMuIG9mIHF1ZXJ5IGJlaGF2aW9yIGJ5IGludGVyY2VwdGluZyB0aGUgbWVzc2FnZSBzdHJlYW0gdG8gcnVuIGFyYml0cmFyeSBhY3Rpb25zIGZvciBtZXNzYWdlcyBvbiB0aGUgcGlwZWxpbmUuXG5cdCAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbk5leHQgQWN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBlbGVtZW50IGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuXHQgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG5cdCAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoIHRoZSBzaWRlLWVmZmVjdGluZyBiZWhhdmlvciBhcHBsaWVkLlxuXHQgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLmRvT25OZXh0ID0gb2JzZXJ2YWJsZVByb3RvLnRhcE9uTmV4dCA9IGZ1bmN0aW9uIChvbk5leHQsIHRoaXNBcmcpIHtcblx0ICAgIHJldHVybiB0aGlzLnRhcCh0eXBlb2YgdGhpc0FyZyAhPT0gJ3VuZGVmaW5lZCcgPyBmdW5jdGlvbiAoeCkgeyBvbk5leHQuY2FsbCh0aGlzQXJnLCB4KTsgfSA6IG9uTmV4dCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgKiAgSW52b2tlcyBhbiBhY3Rpb24gdXBvbiBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cblx0ICAqICBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBmb3IgZGVidWdnaW5nLCBsb2dnaW5nLCBldGMuIG9mIHF1ZXJ5IGJlaGF2aW9yIGJ5IGludGVyY2VwdGluZyB0aGUgbWVzc2FnZSBzdHJlYW0gdG8gcnVuIGFyYml0cmFyeSBhY3Rpb25zIGZvciBtZXNzYWdlcyBvbiB0aGUgcGlwZWxpbmUuXG5cdCAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkVycm9yIEFjdGlvbiB0byBpbnZva2UgdXBvbiBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cblx0ICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuXHQgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aCB0aGUgc2lkZS1lZmZlY3RpbmcgYmVoYXZpb3IgYXBwbGllZC5cblx0ICAqL1xuXHQgIG9ic2VydmFibGVQcm90by5kb09uRXJyb3IgPSBvYnNlcnZhYmxlUHJvdG8udGFwT25FcnJvciA9IGZ1bmN0aW9uIChvbkVycm9yLCB0aGlzQXJnKSB7XG5cdCAgICByZXR1cm4gdGhpcy50YXAobm9vcCwgdHlwZW9mIHRoaXNBcmcgIT09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24gKGUpIHsgb25FcnJvci5jYWxsKHRoaXNBcmcsIGUpOyB9IDogb25FcnJvcik7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgKiAgSW52b2tlcyBhbiBhY3Rpb24gdXBvbiBncmFjZWZ1bCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cblx0ICAqICBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBmb3IgZGVidWdnaW5nLCBsb2dnaW5nLCBldGMuIG9mIHF1ZXJ5IGJlaGF2aW9yIGJ5IGludGVyY2VwdGluZyB0aGUgbWVzc2FnZSBzdHJlYW0gdG8gcnVuIGFyYml0cmFyeSBhY3Rpb25zIGZvciBtZXNzYWdlcyBvbiB0aGUgcGlwZWxpbmUuXG5cdCAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkNvbXBsZXRlZCBBY3Rpb24gdG8gaW52b2tlIHVwb24gZ3JhY2VmdWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG5cdCAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cblx0ICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgc291cmNlIHNlcXVlbmNlIHdpdGggdGhlIHNpZGUtZWZmZWN0aW5nIGJlaGF2aW9yIGFwcGxpZWQuXG5cdCAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG8uZG9PbkNvbXBsZXRlZCA9IG9ic2VydmFibGVQcm90by50YXBPbkNvbXBsZXRlZCA9IGZ1bmN0aW9uIChvbkNvbXBsZXRlZCwgdGhpc0FyZykge1xuXHQgICAgcmV0dXJuIHRoaXMudGFwKG5vb3AsIG51bGwsIHR5cGVvZiB0aGlzQXJnICE9PSAndW5kZWZpbmVkJyA/IGZ1bmN0aW9uICgpIHsgb25Db21wbGV0ZWQuY2FsbCh0aGlzQXJnKTsgfSA6IG9uQ29tcGxldGVkKTtcblx0ICB9O1xuXHRcblx0ICB2YXIgRmluYWxseU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoRmluYWxseU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBGaW5hbGx5T2JzZXJ2YWJsZShzb3VyY2UsIGZuLCB0aGlzQXJnKSB7XG5cdCAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICB0aGlzLl9mbiA9IGJpbmRDYWxsYmFjayhmbiwgdGhpc0FyZywgMCk7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIEZpbmFsbHlPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgdmFyIGQgPSB0cnlDYXRjaCh0aGlzLnNvdXJjZS5zdWJzY3JpYmUpLmNhbGwodGhpcy5zb3VyY2UsIG8pO1xuXHQgICAgICBpZiAoZCA9PT0gZXJyb3JPYmopIHtcblx0ICAgICAgICB0aGlzLl9mbigpO1xuXHQgICAgICAgIHRocm93ZXIoZC5lKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIG5ldyBGaW5hbGx5RGlzcG9zYWJsZShkLCB0aGlzLl9mbik7XG5cdCAgICB9O1xuXHRcblx0ICAgIGZ1bmN0aW9uIEZpbmFsbHlEaXNwb3NhYmxlKHMsIGZuKSB7XG5cdCAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLl9zID0gcztcblx0ICAgICAgdGhpcy5fZm4gPSBmbjtcblx0ICAgIH1cblx0ICAgIEZpbmFsbHlEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuXHQgICAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9zLmRpc3Bvc2UpLmNhbGwodGhpcy5fcyk7XG5cdCAgICAgICAgdGhpcy5fZm4oKTtcblx0ICAgICAgICByZXMgPT09IGVycm9yT2JqICYmIHRocm93ZXIocmVzLmUpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBGaW5hbGx5T2JzZXJ2YWJsZTtcblx0XG5cdCAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXHRcblx0ICAvKipcblx0ICAgKiAgSW52b2tlcyBhIHNwZWNpZmllZCBhY3Rpb24gYWZ0ZXIgdGhlIHNvdXJjZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRlcm1pbmF0ZXMgZ3JhY2VmdWxseSBvciBleGNlcHRpb25hbGx5LlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZpbmFsbHlBY3Rpb24gQWN0aW9uIHRvIGludm9rZSBhZnRlciB0aGUgc291cmNlIG9ic2VydmFibGUgc2VxdWVuY2UgdGVybWluYXRlcy5cblx0ICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gU291cmNlIHNlcXVlbmNlIHdpdGggdGhlIGFjdGlvbi1pbnZva2luZyB0ZXJtaW5hdGlvbiBiZWhhdmlvciBhcHBsaWVkLlxuXHQgICAqL1xuXHQgIG9ic2VydmFibGVQcm90b1snZmluYWxseSddID0gZnVuY3Rpb24gKGFjdGlvbiwgdGhpc0FyZykge1xuXHQgICAgcmV0dXJuIG5ldyBGaW5hbGx5T2JzZXJ2YWJsZSh0aGlzLCBhY3Rpb24sIHRoaXNBcmcpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBJZ25vcmVFbGVtZW50c09ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhJZ25vcmVFbGVtZW50c09ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdFxuXHQgICAgZnVuY3Rpb24gSWdub3JlRWxlbWVudHNPYnNlcnZhYmxlKHNvdXJjZSkge1xuXHQgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgSWdub3JlRWxlbWVudHNPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihvKSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIobykge1xuXHQgICAgICB0aGlzLm8gPSBvO1xuXHQgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuXHQgICAgfVxuXHQgICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUub25OZXh0ID0gbm9vcDtcblx0ICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgIGlmKCF0aGlzLmlzU3RvcHBlZCkge1xuXHQgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLm8ub25FcnJvcihlcnIpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUub25Db21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmKCF0aGlzLmlzU3RvcHBlZCkge1xuXHQgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLm8ub25Db21wbGV0ZWQoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbigpIHsgdGhpcy5pc1N0b3BwZWQgPSB0cnVlOyB9O1xuXHQgICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZmFpbCA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG5cdCAgICAgICAgdGhpcy5vYnNlcnZlci5vbkVycm9yKGUpO1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBJZ25vcmVFbGVtZW50c09ic2VydmFibGU7XG5cdCAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXHRcblx0ICAvKipcblx0ICAgKiAgSWdub3JlcyBhbGwgZWxlbWVudHMgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBsZWF2aW5nIG9ubHkgdGhlIHRlcm1pbmF0aW9uIG1lc3NhZ2VzLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBlbXB0eSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2lnbmFscyB0ZXJtaW5hdGlvbiwgc3VjY2Vzc2Z1bCBvciBleGNlcHRpb25hbCwgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cblx0ICAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG8uaWdub3JlRWxlbWVudHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gbmV3IElnbm9yZUVsZW1lbnRzT2JzZXJ2YWJsZSh0aGlzKTtcblx0ICB9O1xuXHRcblx0ICB2YXIgTWF0ZXJpYWxpemVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKE1hdGVyaWFsaXplT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIE1hdGVyaWFsaXplT2JzZXJ2YWJsZShzb3VyY2UsIGZuKSB7XG5cdCAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBNYXRlcmlhbGl6ZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuXHQgICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBNYXRlcmlhbGl6ZU9ic2VydmVyKG8pKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIE1hdGVyaWFsaXplT2JzZXJ2YWJsZTtcblx0ICB9KE9ic2VydmFibGVCYXNlKSk7XG5cdFxuXHQgIHZhciBNYXRlcmlhbGl6ZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKE1hdGVyaWFsaXplT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cdFxuXHQgICAgZnVuY3Rpb24gTWF0ZXJpYWxpemVPYnNlcnZlcihvKSB7XG5cdCAgICAgIHRoaXMuX28gPSBvO1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBNYXRlcmlhbGl6ZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5fby5vbk5leHQobm90aWZpY2F0aW9uQ3JlYXRlT25OZXh0KHgpKSB9O1xuXHQgICAgTWF0ZXJpYWxpemVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uTmV4dChub3RpZmljYXRpb25DcmVhdGVPbkVycm9yKGUpKTsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXHQgICAgTWF0ZXJpYWxpemVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uTmV4dChub3RpZmljYXRpb25DcmVhdGVPbkNvbXBsZXRlZCgpKTsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXHRcblx0ICAgIHJldHVybiBNYXRlcmlhbGl6ZU9ic2VydmVyO1xuXHQgIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXHRcblx0ICAvKipcblx0ICAgKiAgTWF0ZXJpYWxpemVzIHRoZSBpbXBsaWNpdCBub3RpZmljYXRpb25zIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYXMgZXhwbGljaXQgbm90aWZpY2F0aW9uIHZhbHVlcy5cblx0ICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSBtYXRlcmlhbGl6ZWQgbm90aWZpY2F0aW9uIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG5cdCAgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLm1hdGVyaWFsaXplID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIG5ldyBNYXRlcmlhbGl6ZU9ic2VydmFibGUodGhpcyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIFJlcGVhdHMgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UgYSBzcGVjaWZpZWQgbnVtYmVyIG9mIHRpbWVzLiBJZiB0aGUgcmVwZWF0IGNvdW50IGlzIG5vdCBzcGVjaWZpZWQsIHRoZSBzZXF1ZW5jZSByZXBlYXRzIGluZGVmaW5pdGVseS5cblx0ICAgKiBAcGFyYW0ge051bWJlcn0gW3JlcGVhdENvdW50XSAgTnVtYmVyIG9mIHRpbWVzIHRvIHJlcGVhdCB0aGUgc2VxdWVuY2UuIElmIG5vdCBwcm92aWRlZCwgcmVwZWF0cyB0aGUgc2VxdWVuY2UgaW5kZWZpbml0ZWx5LlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBwcm9kdWNpbmcgdGhlIGVsZW1lbnRzIG9mIHRoZSBnaXZlbiBzZXF1ZW5jZSByZXBlYXRlZGx5LlxuXHQgICAqL1xuXHQgIG9ic2VydmFibGVQcm90by5yZXBlYXQgPSBmdW5jdGlvbiAocmVwZWF0Q291bnQpIHtcblx0ICAgIHJldHVybiBlbnVtZXJhYmxlUmVwZWF0KHRoaXMsIHJlcGVhdENvdW50KS5jb25jYXQoKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAgUmVwZWF0cyB0aGUgc291cmNlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgdGltZXMgb3IgdW50aWwgaXQgc3VjY2Vzc2Z1bGx5IHRlcm1pbmF0ZXMuIElmIHRoZSByZXRyeSBjb3VudCBpcyBub3Qgc3BlY2lmaWVkLCBpdCByZXRyaWVzIGluZGVmaW5pdGVseS5cblx0ICAgKiAgTm90ZSBpZiB5b3UgZW5jb3VudGVyIGFuIGVycm9yIGFuZCB3YW50IGl0IHRvIHJldHJ5IG9uY2UsIHRoZW4geW91IG11c3QgdXNlIC5yZXRyeSgyKTtcblx0ICAgKlxuXHQgICAqIEBleGFtcGxlXG5cdCAgICogIHZhciByZXMgPSByZXRyaWVkID0gcmV0cnkucmVwZWF0KCk7XG5cdCAgICogIHZhciByZXMgPSByZXRyaWVkID0gcmV0cnkucmVwZWF0KDIpO1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBbcmV0cnlDb3VudF0gIE51bWJlciBvZiB0aW1lcyB0byByZXRyeSB0aGUgc2VxdWVuY2UuIElmIG5vdCBwcm92aWRlZCwgcmV0cnkgdGhlIHNlcXVlbmNlIGluZGVmaW5pdGVseS5cblx0ICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBwcm9kdWNpbmcgdGhlIGVsZW1lbnRzIG9mIHRoZSBnaXZlbiBzZXF1ZW5jZSByZXBlYXRlZGx5IHVudGlsIGl0IHRlcm1pbmF0ZXMgc3VjY2Vzc2Z1bGx5LlxuXHQgICAqL1xuXHQgIG9ic2VydmFibGVQcm90by5yZXRyeSA9IGZ1bmN0aW9uIChyZXRyeUNvdW50KSB7XG5cdCAgICByZXR1cm4gZW51bWVyYWJsZVJlcGVhdCh0aGlzLCByZXRyeUNvdW50KS5jYXRjaEVycm9yKCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIFJlcGVhdHMgdGhlIHNvdXJjZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHVwb24gZXJyb3IgZWFjaCB0aW1lIHRoZSBub3RpZmllciBlbWl0cyBvciB1bnRpbCBpdCBzdWNjZXNzZnVsbHkgdGVybWluYXRlcy4gXG5cdCAgICogIGlmIHRoZSBub3RpZmllciBjb21wbGV0ZXMsIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbXBsZXRlcy5cblx0ICAgKlxuXHQgICAqIEBleGFtcGxlXG5cdCAgICogIHZhciB0aW1lciA9IE9ic2VydmFibGUudGltZXIoNTAwKTtcblx0ICAgKiAgdmFyIHNvdXJjZSA9IG9ic2VydmFibGUucmV0cnlXaGVuKHRpbWVyKTtcblx0ICAgKiBAcGFyYW0ge09ic2VydmFibGV9IFtub3RpZmllcl0gQW4gb2JzZXJ2YWJsZSB0aGF0IHRyaWdnZXJzIHRoZSByZXRyaWVzIG9yIGNvbXBsZXRlcyB0aGUgb2JzZXJ2YWJsZSB3aXRoIG9uTmV4dCBvciBvbkNvbXBsZXRlZCByZXNwZWN0aXZlbHkuXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgcHJvZHVjaW5nIHRoZSBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gc2VxdWVuY2UgcmVwZWF0ZWRseSB1bnRpbCBpdCB0ZXJtaW5hdGVzIHN1Y2Nlc3NmdWxseS5cblx0ICAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG8ucmV0cnlXaGVuID0gZnVuY3Rpb24gKG5vdGlmaWVyKSB7XG5cdCAgICByZXR1cm4gZW51bWVyYWJsZVJlcGVhdCh0aGlzKS5jYXRjaEVycm9yV2hlbihub3RpZmllcik7XG5cdCAgfTtcblx0ICB2YXIgU2Nhbk9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhTY2FuT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIFNjYW5PYnNlcnZhYmxlKHNvdXJjZSwgYWNjdW11bGF0b3IsIGhhc1NlZWQsIHNlZWQpIHtcblx0ICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSBhY2N1bXVsYXRvcjtcblx0ICAgICAgdGhpcy5oYXNTZWVkID0gaGFzU2VlZDtcblx0ICAgICAgdGhpcy5zZWVkID0gc2VlZDtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgU2Nhbk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFNjYW5PYnNlcnZlcihvLHRoaXMpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFNjYW5PYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgdmFyIFNjYW5PYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhTY2FuT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBTY2FuT2JzZXJ2ZXIobywgcGFyZW50KSB7XG5cdCAgICAgIHRoaXMuX28gPSBvO1xuXHQgICAgICB0aGlzLl9wID0gcGFyZW50O1xuXHQgICAgICB0aGlzLl9mbiA9IHBhcmVudC5hY2N1bXVsYXRvcjtcblx0ICAgICAgdGhpcy5faHMgPSBwYXJlbnQuaGFzU2VlZDtcblx0ICAgICAgdGhpcy5fcyA9IHBhcmVudC5zZWVkO1xuXHQgICAgICB0aGlzLl9oYSA9IGZhbHNlO1xuXHQgICAgICB0aGlzLl9hID0gbnVsbDtcblx0ICAgICAgdGhpcy5faHYgPSBmYWxzZTtcblx0ICAgICAgdGhpcy5faSA9IDA7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIFNjYW5PYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgICF0aGlzLl9odiAmJiAodGhpcy5faHYgPSB0cnVlKTtcblx0ICAgICAgaWYgKHRoaXMuX2hhKSB7XG5cdCAgICAgICAgdGhpcy5fYSA9IHRyeUNhdGNoKHRoaXMuX2ZuKSh0aGlzLl9hLCB4LCB0aGlzLl9pLCB0aGlzLl9wKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLl9hID0gdGhpcy5faHMgPyB0cnlDYXRjaCh0aGlzLl9mbikodGhpcy5fcywgeCwgdGhpcy5faSwgdGhpcy5fcCkgOiB4O1xuXHQgICAgICAgIHRoaXMuX2hhID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodGhpcy5fYSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcih0aGlzLl9hLmUpOyB9XG5cdCAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX2EpO1xuXHQgICAgICB0aGlzLl9pKys7XG5cdCAgICB9O1xuXHRcblx0ICAgIFNjYW5PYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFNjYW5PYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAhdGhpcy5faHYgJiYgdGhpcy5faHMgJiYgdGhpcy5fby5vbk5leHQodGhpcy5fcyk7XG5cdCAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFNjYW5PYnNlcnZlcjtcblx0ICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblx0XG5cdCAgLyoqXG5cdCAgKiAgQXBwbGllcyBhbiBhY2N1bXVsYXRvciBmdW5jdGlvbiBvdmVyIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYW5kIHJldHVybnMgZWFjaCBpbnRlcm1lZGlhdGUgcmVzdWx0LiBUaGUgb3B0aW9uYWwgc2VlZCB2YWx1ZSBpcyB1c2VkIGFzIHRoZSBpbml0aWFsIGFjY3VtdWxhdG9yIHZhbHVlLlxuXHQgICogIEZvciBhZ2dyZWdhdGlvbiBiZWhhdmlvciB3aXRoIG5vIGludGVybWVkaWF0ZSByZXN1bHRzLCBzZWUgT2JzZXJ2YWJsZS5hZ2dyZWdhdGUuXG5cdCAgKiBAcGFyYW0ge01peGVkfSBbc2VlZF0gVGhlIGluaXRpYWwgYWNjdW11bGF0b3IgdmFsdWUuXG5cdCAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY2N1bXVsYXRvciBBbiBhY2N1bXVsYXRvciBmdW5jdGlvbiB0byBiZSBpbnZva2VkIG9uIGVhY2ggZWxlbWVudC5cblx0ICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIGFjY3VtdWxhdGVkIHZhbHVlcy5cblx0ICAqL1xuXHQgIG9ic2VydmFibGVQcm90by5zY2FuID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGhhc1NlZWQgPSBmYWxzZSwgc2VlZCwgYWNjdW11bGF0b3IgPSBhcmd1bWVudHNbMF07XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuXHQgICAgICBoYXNTZWVkID0gdHJ1ZTtcblx0ICAgICAgc2VlZCA9IGFyZ3VtZW50c1sxXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBuZXcgU2Nhbk9ic2VydmFibGUodGhpcywgYWNjdW11bGF0b3IsIGhhc1NlZWQsIHNlZWQpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBTa2lwTGFzdE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoU2tpcExhc3RPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gU2tpcExhc3RPYnNlcnZhYmxlKHNvdXJjZSwgYykge1xuXHQgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgdGhpcy5fYyA9IGM7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIFNraXBMYXN0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFNraXBMYXN0T2JzZXJ2ZXIobywgdGhpcy5fYykpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gU2tpcExhc3RPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgdmFyIFNraXBMYXN0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoU2tpcExhc3RPYnNlcnZlciwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIFNraXBMYXN0T2JzZXJ2ZXIobywgYykge1xuXHQgICAgICB0aGlzLl9vID0gbztcblx0ICAgICAgdGhpcy5fYyA9IGM7XG5cdCAgICAgIHRoaXMuX3EgPSBbXTtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgU2tpcExhc3RPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgIHRoaXMuX3EucHVzaCh4KTtcblx0ICAgICAgdGhpcy5fcS5sZW5ndGggPiB0aGlzLl9jICYmIHRoaXMuX28ub25OZXh0KHRoaXMuX3Euc2hpZnQoKSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFNraXBMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuXHQgICAgfTtcblx0XG5cdCAgICBTa2lwTGFzdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFNraXBMYXN0T2JzZXJ2ZXI7XG5cdCAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICBCeXBhc3NlcyBhIHNwZWNpZmllZCBudW1iZXIgb2YgZWxlbWVudHMgYXQgdGhlIGVuZCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuXHQgICAqIEBkZXNjcmlwdGlvblxuXHQgICAqICBUaGlzIG9wZXJhdG9yIGFjY3VtdWxhdGVzIGEgcXVldWUgd2l0aCBhIGxlbmd0aCBlbm91Z2ggdG8gc3RvcmUgdGhlIGZpcnN0IGBjb3VudGAgZWxlbWVudHMuIEFzIG1vcmUgZWxlbWVudHMgYXJlXG5cdCAgICogIHJlY2VpdmVkLCBlbGVtZW50cyBhcmUgdGFrZW4gZnJvbSB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlIGFuZCBwcm9kdWNlZCBvbiB0aGUgcmVzdWx0IHNlcXVlbmNlLiBUaGlzIGNhdXNlcyBlbGVtZW50cyB0byBiZSBkZWxheWVkLlxuXHQgICAqIEBwYXJhbSBjb3VudCBOdW1iZXIgb2YgZWxlbWVudHMgdG8gYnlwYXNzIGF0IHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cblx0ICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2UgZWxlbWVudHMgZXhjZXB0IGZvciB0aGUgYnlwYXNzZWQgb25lcyBhdCB0aGUgZW5kLlxuXHQgICAqL1xuXHQgIG9ic2VydmFibGVQcm90by5za2lwTGFzdCA9IGZ1bmN0aW9uIChjb3VudCkge1xuXHQgICAgaWYgKGNvdW50IDwgMCkgeyB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuXHQgICAgcmV0dXJuIG5ldyBTa2lwTGFzdE9ic2VydmFibGUodGhpcywgY291bnQpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICBQcmVwZW5kcyBhIHNlcXVlbmNlIG9mIHZhbHVlcyB0byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggYW4gb3B0aW9uYWwgc2NoZWR1bGVyIGFuZCBhbiBhcmd1bWVudCBsaXN0IG9mIHZhbHVlcyB0byBwcmVwZW5kLlxuXHQgICAqICBAZXhhbXBsZVxuXHQgICAqICB2YXIgcmVzID0gc291cmNlLnN0YXJ0V2l0aCgxLCAyLCAzKTtcblx0ICAgKiAgdmFyIHJlcyA9IHNvdXJjZS5zdGFydFdpdGgoUnguU2NoZWR1bGVyLnRpbWVvdXQsIDEsIDIsIDMpO1xuXHQgICAqIEBwYXJhbSB7QXJndW1lbnRzfSBhcmdzIFRoZSBzcGVjaWZpZWQgdmFsdWVzIHRvIHByZXBlbmQgdG8gdGhlIG9ic2VydmFibGUgc2VxdWVuY2Vcblx0ICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIHNvdXJjZSBzZXF1ZW5jZSBwcmVwZW5kZWQgd2l0aCB0aGUgc3BlY2lmaWVkIHZhbHVlcy5cblx0ICAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG8uc3RhcnRXaXRoID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHZhbHVlcywgc2NoZWR1bGVyLCBzdGFydCA9IDA7XG5cdCAgICBpZiAoISFhcmd1bWVudHMubGVuZ3RoICYmIGlzU2NoZWR1bGVyKGFyZ3VtZW50c1swXSkpIHtcblx0ICAgICAgc2NoZWR1bGVyID0gYXJndW1lbnRzWzBdO1xuXHQgICAgICBzdGFydCA9IDE7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzY2hlZHVsZXIgPSBpbW1lZGlhdGVTY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBmb3IodmFyIGFyZ3MgPSBbXSwgaSA9IHN0YXJ0LCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cblx0ICAgIHJldHVybiBlbnVtZXJhYmxlT2YoW29ic2VydmFibGVGcm9tQXJyYXkoYXJncywgc2NoZWR1bGVyKSwgdGhpc10pLmNvbmNhdCgpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBUYWtlTGFzdE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKFRha2VMYXN0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBUYWtlTGFzdE9ic2VydmVyKG8sIGMpIHtcblx0ICAgICAgdGhpcy5fbyA9IG87XG5cdCAgICAgIHRoaXMuX2MgPSBjO1xuXHQgICAgICB0aGlzLl9xID0gW107XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIFRha2VMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuXHQgICAgICB0aGlzLl9xLnB1c2goeCk7XG5cdCAgICAgIHRoaXMuX3EubGVuZ3RoID4gdGhpcy5fYyAmJiB0aGlzLl9xLnNoaWZ0KCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFRha2VMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuXHQgICAgfTtcblx0XG5cdCAgICBUYWtlTGFzdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHdoaWxlICh0aGlzLl9xLmxlbmd0aCA+IDApIHsgdGhpcy5fby5vbk5leHQodGhpcy5fcS5zaGlmdCgpKTsgfVxuXHQgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBUYWtlTGFzdE9ic2VydmVyO1xuXHQgIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXHRcblx0ICAvKipcblx0ICAgKiAgUmV0dXJucyBhIHNwZWNpZmllZCBudW1iZXIgb2YgY29udGlndW91cyBlbGVtZW50cyBmcm9tIHRoZSBlbmQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cblx0ICAgKiBAZGVzY3JpcHRpb25cblx0ICAgKiAgVGhpcyBvcGVyYXRvciBhY2N1bXVsYXRlcyBhIGJ1ZmZlciB3aXRoIGEgbGVuZ3RoIGVub3VnaCB0byBzdG9yZSBlbGVtZW50cyBjb3VudCBlbGVtZW50cy4gVXBvbiBjb21wbGV0aW9uIG9mXG5cdCAgICogIHRoZSBzb3VyY2Ugc2VxdWVuY2UsIHRoaXMgYnVmZmVyIGlzIGRyYWluZWQgb24gdGhlIHJlc3VsdCBzZXF1ZW5jZS4gVGhpcyBjYXVzZXMgdGhlIGVsZW1lbnRzIHRvIGJlIGRlbGF5ZWQuXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE51bWJlciBvZiBlbGVtZW50cyB0byB0YWtlIGZyb20gdGhlIGVuZCBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG5cdCAgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLnRha2VMYXN0ID0gZnVuY3Rpb24gKGNvdW50KSB7XG5cdCAgICBpZiAoY291bnQgPCAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG5cdCAgICB2YXIgc291cmNlID0gdGhpcztcblx0ICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuXHQgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgVGFrZUxhc3RPYnNlcnZlcihvLCBjb3VudCkpO1xuXHQgICAgfSwgc291cmNlKTtcblx0ICB9O1xuXHRcblx0b2JzZXJ2YWJsZVByb3RvLmZsYXRNYXBDb25jYXQgPSBvYnNlcnZhYmxlUHJvdG8uY29uY2F0TWFwID0gZnVuY3Rpb24oc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKSB7XG5cdCAgICByZXR1cm4gbmV3IEZsYXRNYXBPYnNlcnZhYmxlKHRoaXMsIHNlbGVjdG9yLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykubWVyZ2UoMSk7XG5cdH07XG5cdCAgdmFyIE1hcE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoTWFwT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0XG5cdCAgICBmdW5jdGlvbiBNYXBPYnNlcnZhYmxlKHNvdXJjZSwgc2VsZWN0b3IsIHRoaXNBcmcpIHtcblx0ICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgIHRoaXMuc2VsZWN0b3IgPSBiaW5kQ2FsbGJhY2soc2VsZWN0b3IsIHRoaXNBcmcsIDMpO1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbm5lck1hcChzZWxlY3Rvciwgc2VsZikge1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24gKHgsIGksIG8pIHsgcmV0dXJuIHNlbGVjdG9yLmNhbGwodGhpcywgc2VsZi5zZWxlY3Rvcih4LCBpLCBvKSwgaSwgbyk7IH07XG5cdCAgICB9XG5cdFxuXHQgICAgTWFwT2JzZXJ2YWJsZS5wcm90b3R5cGUuaW50ZXJuYWxNYXAgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHRoaXNBcmcpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBNYXBPYnNlcnZhYmxlKHRoaXMuc291cmNlLCBpbm5lck1hcChzZWxlY3RvciwgdGhpcyksIHRoaXNBcmcpO1xuXHQgICAgfTtcblx0XG5cdCAgICBNYXBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihvLCB0aGlzLnNlbGVjdG9yLCB0aGlzKSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuXHQgICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihvLCBzZWxlY3Rvciwgc291cmNlKSB7XG5cdCAgICAgIHRoaXMubyA9IG87XG5cdCAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3Rvcjtcblx0ICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgIHRoaXMuaSA9IDA7XG5cdCAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oeCkge1xuXHQgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5zZWxlY3RvcikoeCwgdGhpcy5pKyssIHRoaXMuc291cmNlKTtcblx0ICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuXHQgICAgICB0aGlzLm8ub25OZXh0KHJlc3VsdCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgdGhpcy5vLm9uRXJyb3IoZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5vLm9uQ29tcGxldGVkKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBNYXBPYnNlcnZhYmxlO1xuXHRcblx0ICB9KE9ic2VydmFibGVCYXNlKSk7XG5cdFxuXHQgIC8qKlxuXHQgICogUHJvamVjdHMgZWFjaCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgaW50byBhIG5ldyBmb3JtIGJ5IGluY29ycG9yYXRpbmcgdGhlIGVsZW1lbnQncyBpbmRleC5cblx0ICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggc291cmNlIGVsZW1lbnQ7IHRoZSBzZWNvbmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiByZXByZXNlbnRzIHRoZSBpbmRleCBvZiB0aGUgc291cmNlIGVsZW1lbnQuXG5cdCAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cblx0ICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGFyZSB0aGUgcmVzdWx0IG9mIGludm9raW5nIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50IG9mIHNvdXJjZS5cblx0ICAqL1xuXHQgIG9ic2VydmFibGVQcm90by5tYXAgPSBvYnNlcnZhYmxlUHJvdG8uc2VsZWN0ID0gZnVuY3Rpb24gKHNlbGVjdG9yLCB0aGlzQXJnKSB7XG5cdCAgICB2YXIgc2VsZWN0b3JGbiA9IHR5cGVvZiBzZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJyA/IHNlbGVjdG9yIDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZWN0b3I7IH07XG5cdCAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIE1hcE9ic2VydmFibGUgP1xuXHQgICAgICB0aGlzLmludGVybmFsTWFwKHNlbGVjdG9yRm4sIHRoaXNBcmcpIDpcblx0ICAgICAgbmV3IE1hcE9ic2VydmFibGUodGhpcywgc2VsZWN0b3JGbiwgdGhpc0FyZyk7XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gcGx1Y2tlcihhcmdzLCBsZW4pIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiBtYXBwZXIoeCkge1xuXHQgICAgICB2YXIgY3VycmVudFByb3AgPSB4O1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgdmFyIHAgPSBjdXJyZW50UHJvcFthcmdzW2ldXTtcblx0ICAgICAgICBpZiAodHlwZW9mIHAgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICBjdXJyZW50UHJvcCA9IHA7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBjdXJyZW50UHJvcDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJldHJpZXZlcyB0aGUgdmFsdWUgb2YgYSBzcGVjaWZpZWQgbmVzdGVkIHByb3BlcnR5IGZyb20gYWxsIGVsZW1lbnRzIGluXG5cdCAgICogdGhlIE9ic2VydmFibGUgc2VxdWVuY2UuXG5cdCAgICogQHBhcmFtIHtBcmd1bWVudHN9IGFyZ3VtZW50cyBUaGUgbmVzdGVkIHByb3BlcnRpZXMgdG8gcGx1Y2suXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IFJldHVybnMgYSBuZXcgT2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiBwcm9wZXJ0eSB2YWx1ZXMuXG5cdCAgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLnBsdWNrID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcblx0ICAgIGlmIChsZW4gPT09IDApIHsgdGhyb3cgbmV3IEVycm9yKCdMaXN0IG9mIHByb3BlcnRpZXMgY2Fubm90IGJlIGVtcHR5LicpOyB9XG5cdCAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuXHQgICAgcmV0dXJuIHRoaXMubWFwKHBsdWNrZXIoYXJncywgbGVuKSk7XG5cdCAgfTtcblx0XG5cdG9ic2VydmFibGVQcm90by5mbGF0TWFwID0gb2JzZXJ2YWJsZVByb3RvLnNlbGVjdE1hbnkgPSBmdW5jdGlvbihzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpIHtcblx0ICAgIHJldHVybiBuZXcgRmxhdE1hcE9ic2VydmFibGUodGhpcywgc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKS5tZXJnZUFsbCgpO1xuXHR9O1xuXHRcblx0UnguT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmxhdE1hcExhdGVzdCA9IGZ1bmN0aW9uKHNlbGVjdG9yLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykge1xuXHQgICAgcmV0dXJuIG5ldyBGbGF0TWFwT2JzZXJ2YWJsZSh0aGlzLCBzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpLnN3aXRjaExhdGVzdCgpO1xuXHR9O1xuXHQgIHZhciBTa2lwT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKFNraXBPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gU2tpcE9ic2VydmFibGUoc291cmNlLCBjb3VudCkge1xuXHQgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgdGhpcy5fY291bnQgPSBjb3VudDtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgU2tpcE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuXHQgICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTa2lwT2JzZXJ2ZXIobywgdGhpcy5fY291bnQpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgZnVuY3Rpb24gU2tpcE9ic2VydmVyKG8sIGMpIHtcblx0ICAgICAgdGhpcy5fbyA9IG87XG5cdCAgICAgIHRoaXMuX3IgPSBjO1xuXHQgICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgaW5oZXJpdHMoU2tpcE9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcblx0XG5cdCAgICBTa2lwT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuXHQgICAgICBpZiAodGhpcy5fciA8PSAwKSB7XG5cdCAgICAgICAgdGhpcy5fby5vbk5leHQoeCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5fci0tO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU2tpcE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuXHQgICAgU2tpcE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbigpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXHRcblx0ICAgIHJldHVybiBTa2lwT2JzZXJ2YWJsZTtcblx0ICB9KE9ic2VydmFibGVCYXNlKSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIEJ5cGFzc2VzIGEgc3BlY2lmaWVkIG51bWJlciBvZiBlbGVtZW50cyBpbiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFuZCB0aGVuIHJldHVybnMgdGhlIHJlbWFpbmluZyBlbGVtZW50cy5cblx0ICAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGJlZm9yZSByZXR1cm5pbmcgdGhlIHJlbWFpbmluZyBlbGVtZW50cy5cblx0ICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyB0aGF0IG9jY3VyIGFmdGVyIHRoZSBzcGVjaWZpZWQgaW5kZXggaW4gdGhlIGlucHV0IHNlcXVlbmNlLlxuXHQgICAqL1xuXHQgIG9ic2VydmFibGVQcm90by5za2lwID0gZnVuY3Rpb24gKGNvdW50KSB7XG5cdCAgICBpZiAoY291bnQgPCAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG5cdCAgICByZXR1cm4gbmV3IFNraXBPYnNlcnZhYmxlKHRoaXMsIGNvdW50KTtcblx0ICB9O1xuXHRcblx0ICB2YXIgU2tpcFdoaWxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhTa2lwV2hpbGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gU2tpcFdoaWxlT2JzZXJ2YWJsZShzb3VyY2UsIGZuKSB7XG5cdCAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICB0aGlzLl9mbiA9IGZuO1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBTa2lwV2hpbGVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU2tpcFdoaWxlT2JzZXJ2ZXIobywgdGhpcykpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gU2tpcFdoaWxlT2JzZXJ2YWJsZTtcblx0ICB9KE9ic2VydmFibGVCYXNlKSk7XG5cdFxuXHQgIHZhciBTa2lwV2hpbGVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhTa2lwV2hpbGVPYnNlcnZlciwgX19zdXBlcl9fKTtcblx0XG5cdCAgICBmdW5jdGlvbiBTa2lwV2hpbGVPYnNlcnZlcihvLCBwKSB7XG5cdCAgICAgIHRoaXMuX28gPSBvO1xuXHQgICAgICB0aGlzLl9wID0gcDtcblx0ICAgICAgdGhpcy5faSA9IDA7XG5cdCAgICAgIHRoaXMuX3IgPSBmYWxzZTtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgU2tpcFdoaWxlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuXHQgICAgICBpZiAoIXRoaXMuX3IpIHtcblx0ICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fcC5fZm4pKHgsIHRoaXMuX2krKywgdGhpcy5fcCk7XG5cdCAgICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihyZXMuZSk7IH1cblx0ICAgICAgICB0aGlzLl9yID0gIXJlcztcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLl9yICYmIHRoaXMuX28ub25OZXh0KHgpO1xuXHQgICAgfTtcblx0ICAgIFNraXBXaGlsZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcblx0ICAgIFNraXBXaGlsZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblx0XG5cdCAgICByZXR1cm4gU2tpcFdoaWxlT2JzZXJ2ZXI7XG5cdCAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICBCeXBhc3NlcyBlbGVtZW50cyBpbiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFzIGxvbmcgYXMgYSBzcGVjaWZpZWQgY29uZGl0aW9uIGlzIHRydWUgYW5kIHRoZW4gcmV0dXJucyB0aGUgcmVtYWluaW5nIGVsZW1lbnRzLlxuXHQgICAqICBUaGUgZWxlbWVudCdzIGluZGV4IGlzIHVzZWQgaW4gdGhlIGxvZ2ljIG9mIHRoZSBwcmVkaWNhdGUgZnVuY3Rpb24uXG5cdCAgICpcblx0ICAgKiAgdmFyIHJlcyA9IHNvdXJjZS5za2lwV2hpbGUoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZSA8IDEwOyB9KTtcblx0ICAgKiAgdmFyIHJlcyA9IHNvdXJjZS5za2lwV2hpbGUoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgeyByZXR1cm4gdmFsdWUgPCAxMCB8fCBpbmRleCA8IDEwOyB9KTtcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgQSBmdW5jdGlvbiB0byB0ZXN0IGVhY2ggZWxlbWVudCBmb3IgYSBjb25kaXRpb247IHRoZSBzZWNvbmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiByZXByZXNlbnRzIHRoZSBpbmRleCBvZiB0aGUgc291cmNlIGVsZW1lbnQuXG5cdCAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgZnJvbSB0aGUgaW5wdXQgc2VxdWVuY2Ugc3RhcnRpbmcgYXQgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIGxpbmVhciBzZXJpZXMgdGhhdCBkb2VzIG5vdCBwYXNzIHRoZSB0ZXN0IHNwZWNpZmllZCBieSBwcmVkaWNhdGUuXG5cdCAgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLnNraXBXaGlsZSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHRoaXNBcmcpIHtcblx0ICAgIHZhciBmbiA9IGJpbmRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuXHQgICAgcmV0dXJuIG5ldyBTa2lwV2hpbGVPYnNlcnZhYmxlKHRoaXMsIGZuKTtcblx0ICB9O1xuXHRcblx0ICB2YXIgVGFrZU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhUYWtlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIFRha2VPYnNlcnZhYmxlKHNvdXJjZSwgY291bnQpIHtcblx0ICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgIHRoaXMuX2NvdW50ID0gY291bnQ7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIFRha2VPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgVGFrZU9ic2VydmVyKG8sIHRoaXMuX2NvdW50KSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIGZ1bmN0aW9uIFRha2VPYnNlcnZlcihvLCBjKSB7XG5cdCAgICAgIHRoaXMuX28gPSBvO1xuXHQgICAgICB0aGlzLl9jID0gYztcblx0ICAgICAgdGhpcy5fciA9IGM7XG5cdCAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBpbmhlcml0cyhUYWtlT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuXHRcblx0ICAgIFRha2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgIGlmICh0aGlzLl9yLS0gPiAwKSB7XG5cdCAgICAgICAgdGhpcy5fby5vbk5leHQoeCk7XG5cdCAgICAgICAgdGhpcy5fciA8PSAwICYmIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBUYWtlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuXHQgICAgVGFrZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblx0XG5cdCAgICByZXR1cm4gVGFrZU9ic2VydmFibGU7XG5cdCAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXHRcblx0ICAvKipcblx0ICAgKiAgUmV0dXJucyBhIHNwZWNpZmllZCBudW1iZXIgb2YgY29udGlndW91cyBlbGVtZW50cyBmcm9tIHRoZSBzdGFydCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciBmb3IgdGhlIGVkZ2UgY2FzZSBvZiB0YWtlKDApLlxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHJldHVybi5cblx0ICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHVzZWQgdG8gcHJvZHVjZSBhbiBPbkNvbXBsZXRlZCBtZXNzYWdlIGluIGNhc2UgPHBhcmFtcmVmIG5hbWU9XCJjb3VudCBjb3VudDwvcGFyYW1yZWY+IGlzIHNldCB0byAwLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgZWxlbWVudHMgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIGlucHV0IHNlcXVlbmNlLlxuXHQgICAqL1xuXHQgIG9ic2VydmFibGVQcm90by50YWtlID0gZnVuY3Rpb24gKGNvdW50LCBzY2hlZHVsZXIpIHtcblx0ICAgIGlmIChjb3VudCA8IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cblx0ICAgIGlmIChjb3VudCA9PT0gMCkgeyByZXR1cm4gb2JzZXJ2YWJsZUVtcHR5KHNjaGVkdWxlcik7IH1cblx0ICAgIHJldHVybiBuZXcgVGFrZU9ic2VydmFibGUodGhpcywgY291bnQpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBUYWtlV2hpbGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKFRha2VXaGlsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBUYWtlV2hpbGVPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcblx0ICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgIHRoaXMuX2ZuID0gZm47XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIFRha2VXaGlsZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuXHQgICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBUYWtlV2hpbGVPYnNlcnZlcihvLCB0aGlzKSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBUYWtlV2hpbGVPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgdmFyIFRha2VXaGlsZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKFRha2VXaGlsZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFRha2VXaGlsZU9ic2VydmVyKG8sIHApIHtcblx0ICAgICAgdGhpcy5fbyA9IG87XG5cdCAgICAgIHRoaXMuX3AgPSBwO1xuXHQgICAgICB0aGlzLl9pID0gMDtcblx0ICAgICAgdGhpcy5fciA9IHRydWU7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIFRha2VXaGlsZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcblx0ICAgICAgaWYgKHRoaXMuX3IpIHtcblx0ICAgICAgICB0aGlzLl9yID0gdHJ5Q2F0Y2godGhpcy5fcC5fZm4pKHgsIHRoaXMuX2krKywgdGhpcy5fcCk7XG5cdCAgICAgICAgaWYgKHRoaXMuX3IgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IodGhpcy5fci5lKTsgfVxuXHQgICAgICB9XG5cdCAgICAgIGlmICh0aGlzLl9yKSB7XG5cdCAgICAgICAgdGhpcy5fby5vbk5leHQoeCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgVGFrZVdoaWxlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuXHQgICAgVGFrZVdoaWxlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXHRcblx0ICAgIHJldHVybiBUYWtlV2hpbGVPYnNlcnZlcjtcblx0ICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIFJldHVybnMgZWxlbWVudHMgZnJvbSBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFzIGxvbmcgYXMgYSBzcGVjaWZpZWQgY29uZGl0aW9uIGlzIHRydWUuXG5cdCAgICogIFRoZSBlbGVtZW50J3MgaW5kZXggaXMgdXNlZCBpbiB0aGUgbG9naWMgb2YgdGhlIHByZWRpY2F0ZSBmdW5jdGlvbi5cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgQSBmdW5jdGlvbiB0byB0ZXN0IGVhY2ggZWxlbWVudCBmb3IgYSBjb25kaXRpb247IHRoZSBzZWNvbmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiByZXByZXNlbnRzIHRoZSBpbmRleCBvZiB0aGUgc291cmNlIGVsZW1lbnQuXG5cdCAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgZnJvbSB0aGUgaW5wdXQgc2VxdWVuY2UgdGhhdCBvY2N1ciBiZWZvcmUgdGhlIGVsZW1lbnQgYXQgd2hpY2ggdGhlIHRlc3Qgbm8gbG9uZ2VyIHBhc3Nlcy5cblx0ICAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG8udGFrZVdoaWxlID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuXHQgICAgdmFyIGZuID0gYmluZENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG5cdCAgICByZXR1cm4gbmV3IFRha2VXaGlsZU9ic2VydmFibGUodGhpcywgZm4pO1xuXHQgIH07XG5cdFxuXHQgIHZhciBGaWx0ZXJPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKEZpbHRlck9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdFxuXHQgICAgZnVuY3Rpb24gRmlsdGVyT2JzZXJ2YWJsZShzb3VyY2UsIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuXHQgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgdGhpcy5wcmVkaWNhdGUgPSBiaW5kQ2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgRmlsdGVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIobywgdGhpcy5wcmVkaWNhdGUsIHRoaXMpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5uZXJQcmVkaWNhdGUocHJlZGljYXRlLCBzZWxmKSB7XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbih4LCBpLCBvKSB7IHJldHVybiBzZWxmLnByZWRpY2F0ZSh4LCBpLCBvKSAmJiBwcmVkaWNhdGUuY2FsbCh0aGlzLCB4LCBpLCBvKTsgfVxuXHQgICAgfVxuXHRcblx0ICAgIEZpbHRlck9ic2VydmFibGUucHJvdG90eXBlLmludGVybmFsRmlsdGVyID0gZnVuY3Rpb24ocHJlZGljYXRlLCB0aGlzQXJnKSB7XG5cdCAgICAgIHJldHVybiBuZXcgRmlsdGVyT2JzZXJ2YWJsZSh0aGlzLnNvdXJjZSwgaW5uZXJQcmVkaWNhdGUocHJlZGljYXRlLCB0aGlzKSwgdGhpc0FyZyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuXHQgICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihvLCBwcmVkaWNhdGUsIHNvdXJjZSkge1xuXHQgICAgICB0aGlzLm8gPSBvO1xuXHQgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgIHRoaXMuaSA9IDA7XG5cdCAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oeCkge1xuXHQgICAgICB2YXIgc2hvdWxkWWllbGQgPSB0cnlDYXRjaCh0aGlzLnByZWRpY2F0ZSkoeCwgdGhpcy5pKyssIHRoaXMuc291cmNlKTtcblx0ICAgICAgaWYgKHNob3VsZFlpZWxkID09PSBlcnJvck9iaikge1xuXHQgICAgICAgIHJldHVybiB0aGlzLm8ub25FcnJvcihzaG91bGRZaWVsZC5lKTtcblx0ICAgICAgfVxuXHQgICAgICBzaG91bGRZaWVsZCAmJiB0aGlzLm8ub25OZXh0KHgpO1xuXHQgICAgfTtcblx0XG5cdCAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIHRoaXMuby5vbkVycm9yKGUpO1xuXHQgICAgfTtcblx0XG5cdCAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gRmlsdGVyT2JzZXJ2YWJsZTtcblx0XG5cdCAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXHRcblx0ICAvKipcblx0ICAqICBGaWx0ZXJzIHRoZSBlbGVtZW50cyBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGJhc2VkIG9uIGEgcHJlZGljYXRlIGJ5IGluY29ycG9yYXRpbmcgdGhlIGVsZW1lbnQncyBpbmRleC5cblx0ICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBBIGZ1bmN0aW9uIHRvIHRlc3QgZWFjaCBzb3VyY2UgZWxlbWVudCBmb3IgYSBjb25kaXRpb247IHRoZSBzZWNvbmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiByZXByZXNlbnRzIHRoZSBpbmRleCBvZiB0aGUgc291cmNlIGVsZW1lbnQuXG5cdCAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cblx0ICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgZWxlbWVudHMgZnJvbSB0aGUgaW5wdXQgc2VxdWVuY2UgdGhhdCBzYXRpc2Z5IHRoZSBjb25kaXRpb24uXG5cdCAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG8uZmlsdGVyID0gb2JzZXJ2YWJsZVByb3RvLndoZXJlID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuXHQgICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBGaWx0ZXJPYnNlcnZhYmxlID8gdGhpcy5pbnRlcm5hbEZpbHRlcihwcmVkaWNhdGUsIHRoaXNBcmcpIDpcblx0ICAgICAgbmV3IEZpbHRlck9ic2VydmFibGUodGhpcywgcHJlZGljYXRlLCB0aGlzQXJnKTtcblx0ICB9O1xuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQ2JPYnNlcnZhYmxlKGZuLCBjdHgsIHNlbGVjdG9yLCBhcmdzKSB7XG5cdCAgdmFyIG8gPSBuZXcgQXN5bmNTdWJqZWN0KCk7XG5cdFxuXHQgIGFyZ3MucHVzaChjcmVhdGVDYkhhbmRsZXIobywgY3R4LCBzZWxlY3RvcikpO1xuXHQgIGZuLmFwcGx5KGN0eCwgYXJncyk7XG5cdFxuXHQgIHJldHVybiBvLmFzT2JzZXJ2YWJsZSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVDYkhhbmRsZXIobywgY3R4LCBzZWxlY3Rvcikge1xuXHQgIHJldHVybiBmdW5jdGlvbiBoYW5kbGVyICgpIHtcblx0ICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCByZXN1bHRzID0gbmV3IEFycmF5KGxlbik7XG5cdCAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgcmVzdWx0c1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuXHRcblx0ICAgIGlmIChpc0Z1bmN0aW9uKHNlbGVjdG9yKSkge1xuXHQgICAgICByZXN1bHRzID0gdHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KGN0eCwgcmVzdWx0cyk7XG5cdCAgICAgIGlmIChyZXN1bHRzID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHJlc3VsdHMuZSk7IH1cblx0ICAgICAgby5vbk5leHQocmVzdWx0cyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAocmVzdWx0cy5sZW5ndGggPD0gMSkge1xuXHQgICAgICAgIG8ub25OZXh0KHJlc3VsdHNbMF0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIG8ub25OZXh0KHJlc3VsdHMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgby5vbkNvbXBsZXRlZCgpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHdpdGggYSBjYWxsYmFjayBhcyB0aGUgbGFzdCBwYXJhbWV0ZXIgdG8gY29udmVydCB0byBhbiBPYnNlcnZhYmxlIHNlcXVlbmNlLlxuXHQgKiBAcGFyYW0ge01peGVkfSBbY3R4XSBUaGUgY29udGV4dCBmb3IgdGhlIGZ1bmMgcGFyYW1ldGVyIHRvIGJlIGV4ZWN1dGVkLiAgSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gdW5kZWZpbmVkLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbc2VsZWN0b3JdIEEgc2VsZWN0b3Igd2hpY2ggdGFrZXMgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZSBjYWxsYmFjayB0byBwcm9kdWNlIGEgc2luZ2xlIGl0ZW0gdG8geWllbGQgb24gbmV4dC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uLCB3aGVuIGV4ZWN1dGVkIHdpdGggdGhlIHJlcXVpcmVkIHBhcmFtZXRlcnMgbWludXMgdGhlIGNhbGxiYWNrLCBwcm9kdWNlcyBhbiBPYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggYSBzaW5nbGUgdmFsdWUgb2YgdGhlIGFyZ3VtZW50cyB0byB0aGUgY2FsbGJhY2sgYXMgYW4gYXJyYXkuXG5cdCAqL1xuXHRPYnNlcnZhYmxlLmZyb21DYWxsYmFjayA9IGZ1bmN0aW9uIChmbiwgY3R4LCBzZWxlY3Rvcikge1xuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICB0eXBlb2YgY3R4ID09PSAndW5kZWZpbmVkJyAmJiAoY3R4ID0gdGhpcyk7IFxuXHRcblx0ICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbilcblx0ICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG5cdCAgICByZXR1cm4gY3JlYXRlQ2JPYnNlcnZhYmxlKGZuLCBjdHgsIHNlbGVjdG9yLCBhcmdzKTtcblx0ICB9O1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gY3JlYXRlTm9kZU9ic2VydmFibGUoZm4sIGN0eCwgc2VsZWN0b3IsIGFyZ3MpIHtcblx0ICB2YXIgbyA9IG5ldyBBc3luY1N1YmplY3QoKTtcblx0XG5cdCAgYXJncy5wdXNoKGNyZWF0ZU5vZGVIYW5kbGVyKG8sIGN0eCwgc2VsZWN0b3IpKTtcblx0ICBmbi5hcHBseShjdHgsIGFyZ3MpO1xuXHRcblx0ICByZXR1cm4gby5hc09ic2VydmFibGUoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlTm9kZUhhbmRsZXIobywgY3R4LCBzZWxlY3Rvcikge1xuXHQgIHJldHVybiBmdW5jdGlvbiBoYW5kbGVyICgpIHtcblx0ICAgIHZhciBlcnIgPSBhcmd1bWVudHNbMF07XG5cdCAgICBpZiAoZXJyKSB7IHJldHVybiBvLm9uRXJyb3IoZXJyKTsgfVxuXHRcblx0ICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCByZXN1bHRzID0gW107XG5cdCAgICBmb3IodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHsgcmVzdWx0c1tpIC0gMV0gPSBhcmd1bWVudHNbaV07IH1cblx0XG5cdCAgICBpZiAoaXNGdW5jdGlvbihzZWxlY3RvcikpIHtcblx0ICAgICAgdmFyIHJlc3VsdHMgPSB0cnlDYXRjaChzZWxlY3RvcikuYXBwbHkoY3R4LCByZXN1bHRzKTtcblx0ICAgICAgaWYgKHJlc3VsdHMgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmVzdWx0cy5lKTsgfVxuXHQgICAgICBvLm9uTmV4dChyZXN1bHRzKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA8PSAxKSB7XG5cdCAgICAgICAgby5vbk5leHQocmVzdWx0c1swXSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgby5vbk5leHQocmVzdWx0cyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBvLm9uQ29tcGxldGVkKCk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgTm9kZS5qcyBjYWxsYmFjayBzdHlsZSBmdW5jdGlvbiB0byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLiAgVGhpcyBtdXN0IGJlIGluIGZ1bmN0aW9uIChlcnIsIC4uLikgZm9ybWF0LlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY2FsbFxuXHQgKiBAcGFyYW0ge01peGVkfSBbY3R4XSBUaGUgY29udGV4dCBmb3IgdGhlIGZ1bmMgcGFyYW1ldGVyIHRvIGJlIGV4ZWN1dGVkLiAgSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gdW5kZWZpbmVkLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbc2VsZWN0b3JdIEEgc2VsZWN0b3Igd2hpY2ggdGFrZXMgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZSBjYWxsYmFjayBtaW51cyB0aGUgZXJyb3IgdG8gcHJvZHVjZSBhIHNpbmdsZSBpdGVtIHRvIHlpZWxkIG9uIG5leHQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQW4gYXN5bmMgZnVuY3Rpb24gd2hpY2ggd2hlbiBhcHBsaWVkLCByZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgY2FsbGJhY2sgYXJndW1lbnRzIGFzIGFuIGFycmF5LlxuXHQgKi9cblx0T2JzZXJ2YWJsZS5mcm9tTm9kZUNhbGxiYWNrID0gZnVuY3Rpb24gKGZuLCBjdHgsIHNlbGVjdG9yKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIHR5cGVvZiBjdHggPT09ICd1bmRlZmluZWQnICYmIChjdHggPSB0aGlzKTsgXG5cdCAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuXHQgICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cblx0ICAgIHJldHVybiBjcmVhdGVOb2RlT2JzZXJ2YWJsZShmbiwgY3R4LCBzZWxlY3RvciwgYXJncyk7XG5cdCAgfTtcblx0fTtcblx0XG5cdCAgZnVuY3Rpb24gaXNOb2RlTGlzdChlbCkge1xuXHQgICAgaWYgKHJvb3QuU3RhdGljTm9kZUxpc3QpIHtcblx0ICAgICAgLy8gSUU4IFNwZWNpZmljXG5cdCAgICAgIC8vIGluc3RhbmNlb2YgaXMgc2xvd2VyIHRoYW4gT2JqZWN0I3RvU3RyaW5nLCBidXQgT2JqZWN0I3RvU3RyaW5nIHdpbGwgbm90IHdvcmsgYXMgaW50ZW5kZWQgaW4gSUU4XG5cdCAgICAgIHJldHVybiBlbCBpbnN0YW5jZW9mIHJvb3QuU3RhdGljTm9kZUxpc3QgfHwgZWwgaW5zdGFuY2VvZiByb290Lk5vZGVMaXN0O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlbCkgPT09ICdbb2JqZWN0IE5vZGVMaXN0XSc7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBMaXN0ZW5EaXNwb3NhYmxlKGUsIG4sIGZuKSB7XG5cdCAgICB0aGlzLl9lID0gZTtcblx0ICAgIHRoaXMuX24gPSBuO1xuXHQgICAgdGhpcy5fZm4gPSBmbjtcblx0ICAgIHRoaXMuX2UuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLl9uLCB0aGlzLl9mbiwgZmFsc2UpO1xuXHQgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG5cdCAgfVxuXHQgIExpc3RlbkRpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuXHQgICAgICB0aGlzLl9lLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5fbiwgdGhpcy5fZm4sIGZhbHNlKTtcblx0ICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBjcmVhdGVFdmVudExpc3RlbmVyIChlbCwgZXZlbnROYW1lLCBoYW5kbGVyKSB7XG5cdCAgICB2YXIgZGlzcG9zYWJsZXMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuXHRcblx0ICAgIC8vIEFzdW1lIE5vZGVMaXN0IG9yIEhUTUxDb2xsZWN0aW9uXG5cdCAgICB2YXIgZWxlbVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGVsKTtcblx0ICAgIGlmIChpc05vZGVMaXN0KGVsKSB8fCBlbGVtVG9TdHJpbmcgPT09ICdbb2JqZWN0IEhUTUxDb2xsZWN0aW9uXScpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGVsLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgZGlzcG9zYWJsZXMuYWRkKGNyZWF0ZUV2ZW50TGlzdGVuZXIoZWwuaXRlbShpKSwgZXZlbnROYW1lLCBoYW5kbGVyKSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoZWwpIHtcblx0ICAgICAgZGlzcG9zYWJsZXMuYWRkKG5ldyBMaXN0ZW5EaXNwb3NhYmxlKGVsLCBldmVudE5hbWUsIGhhbmRsZXIpKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZGlzcG9zYWJsZXM7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBDb25maWd1cmF0aW9uIG9wdGlvbiB0byBkZXRlcm1pbmUgd2hldGhlciB0byB1c2UgbmF0aXZlIGV2ZW50cyBvbmx5XG5cdCAgICovXG5cdCAgUnguY29uZmlnLnVzZU5hdGl2ZUV2ZW50cyA9IGZhbHNlO1xuXHRcblx0ICB2YXIgRXZlbnRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoRXZlbnRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gRXZlbnRPYnNlcnZhYmxlKGVsLCBuYW1lLCBmbikge1xuXHQgICAgICB0aGlzLl9lbCA9IGVsO1xuXHQgICAgICB0aGlzLl9uID0gbmFtZTtcblx0ICAgICAgdGhpcy5fZm4gPSBmbjtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gY3JlYXRlSGFuZGxlcihvLCBmbikge1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlciAoKSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdHMgPSBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XG5cdCAgICAgICAgICByZXN1bHRzID0gdHJ5Q2F0Y2goZm4pLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICBpZiAocmVzdWx0cyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXN1bHRzLmUpOyB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIG8ub25OZXh0KHJlc3VsdHMpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIEV2ZW50T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHJldHVybiBjcmVhdGVFdmVudExpc3RlbmVyKFxuXHQgICAgICAgIHRoaXMuX2VsLFxuXHQgICAgICAgIHRoaXMuX24sXG5cdCAgICAgICAgY3JlYXRlSGFuZGxlcihvLCB0aGlzLl9mbikpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gRXZlbnRPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IGFkZGluZyBhbiBldmVudCBsaXN0ZW5lciB0byB0aGUgbWF0Y2hpbmcgRE9NRWxlbWVudCBvciBlYWNoIGl0ZW0gaW4gdGhlIE5vZGVMaXN0LlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBlbGVtZW50IFRoZSBET01FbGVtZW50IG9yIE5vZGVMaXN0IHRvIGF0dGFjaCBhIGxpc3RlbmVyLlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgVGhlIGV2ZW50IG5hbWUgdG8gYXR0YWNoIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gQSBzZWxlY3RvciB3aGljaCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlIGV2ZW50IGhhbmRsZXIgdG8gcHJvZHVjZSBhIHNpbmdsZSBpdGVtIHRvIHlpZWxkIG9uIG5leHQuXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2YgZXZlbnRzIGZyb20gdGhlIHNwZWNpZmllZCBlbGVtZW50IGFuZCB0aGUgc3BlY2lmaWVkIGV2ZW50LlxuXHQgICAqL1xuXHQgIE9ic2VydmFibGUuZnJvbUV2ZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50TmFtZSwgc2VsZWN0b3IpIHtcblx0ICAgIC8vIE5vZGUuanMgc3BlY2lmaWNcblx0ICAgIGlmIChlbGVtZW50LmFkZExpc3RlbmVyKSB7XG5cdCAgICAgIHJldHVybiBmcm9tRXZlbnRQYXR0ZXJuKFxuXHQgICAgICAgIGZ1bmN0aW9uIChoKSB7IGVsZW1lbnQuYWRkTGlzdGVuZXIoZXZlbnROYW1lLCBoKTsgfSxcblx0ICAgICAgICBmdW5jdGlvbiAoaCkgeyBlbGVtZW50LnJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSwgaCk7IH0sXG5cdCAgICAgICAgc2VsZWN0b3IpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIFVzZSBvbmx5IGlmIG5vbi1uYXRpdmUgZXZlbnRzIGFyZSBhbGxvd2VkXG5cdCAgICBpZiAoIVJ4LmNvbmZpZy51c2VOYXRpdmVFdmVudHMpIHtcblx0ICAgICAgLy8gSGFuZGxlcyBqcSwgQW5ndWxhci5qcywgWmVwdG8sIE1hcmlvbmV0dGUsIEVtYmVyLmpzXG5cdCAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5vbiA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZWxlbWVudC5vZmYgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICByZXR1cm4gZnJvbUV2ZW50UGF0dGVybihcblx0ICAgICAgICAgIGZ1bmN0aW9uIChoKSB7IGVsZW1lbnQub24oZXZlbnROYW1lLCBoKTsgfSxcblx0ICAgICAgICAgIGZ1bmN0aW9uIChoKSB7IGVsZW1lbnQub2ZmKGV2ZW50TmFtZSwgaCk7IH0sXG5cdCAgICAgICAgICBzZWxlY3Rvcik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gbmV3IEV2ZW50T2JzZXJ2YWJsZShlbGVtZW50LCBldmVudE5hbWUsIHNlbGVjdG9yKS5wdWJsaXNoKCkucmVmQ291bnQoKTtcblx0ICB9O1xuXHRcblx0ICB2YXIgRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKEV2ZW50UGF0dGVybk9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBFdmVudFBhdHRlcm5PYnNlcnZhYmxlKGFkZCwgZGVsLCBmbikge1xuXHQgICAgICB0aGlzLl9hZGQgPSBhZGQ7XG5cdCAgICAgIHRoaXMuX2RlbCA9IGRlbDtcblx0ICAgICAgdGhpcy5fZm4gPSBmbjtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gY3JlYXRlSGFuZGxlcihvLCBmbikge1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlciAoKSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdHMgPSBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XG5cdCAgICAgICAgICByZXN1bHRzID0gdHJ5Q2F0Y2goZm4pLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICBpZiAocmVzdWx0cyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXN1bHRzLmUpOyB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIG8ub25OZXh0KHJlc3VsdHMpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIEV2ZW50UGF0dGVybk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuXHQgICAgICB2YXIgZm4gPSBjcmVhdGVIYW5kbGVyKG8sIHRoaXMuX2ZuKTtcblx0ICAgICAgdmFyIHJldHVyblZhbHVlID0gdGhpcy5fYWRkKGZuKTtcblx0ICAgICAgcmV0dXJuIG5ldyBFdmVudFBhdHRlcm5EaXNwb3NhYmxlKHRoaXMuX2RlbCwgZm4sIHJldHVyblZhbHVlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgZnVuY3Rpb24gRXZlbnRQYXR0ZXJuRGlzcG9zYWJsZShkZWwsIGZuLCByZXQpIHtcblx0ICAgICAgdGhpcy5fZGVsID0gZGVsO1xuXHQgICAgICB0aGlzLl9mbiA9IGZuO1xuXHQgICAgICB0aGlzLl9yZXQgPSByZXQ7XG5cdCAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuXHQgICAgfVxuXHRcblx0ICAgIEV2ZW50UGF0dGVybkRpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmKCF0aGlzLmlzRGlzcG9zZWQpIHtcblx0ICAgICAgICBpc0Z1bmN0aW9uKHRoaXMuX2RlbCkgJiYgdGhpcy5fZGVsKHRoaXMuX2ZuLCB0aGlzLl9yZXQpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBFdmVudFBhdHRlcm5PYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGZyb20gYW4gZXZlbnQgZW1pdHRlciB2aWEgYW4gYWRkSGFuZGxlci9yZW1vdmVIYW5kbGVyIHBhaXIuXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWRkSGFuZGxlciBUaGUgZnVuY3Rpb24gdG8gYWRkIGEgaGFuZGxlciB0byB0aGUgZW1pdHRlci5cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcmVtb3ZlSGFuZGxlcl0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIHJlbW92ZSBhIGhhbmRsZXIgZnJvbSBhbiBlbWl0dGVyLlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gQSBzZWxlY3RvciB3aGljaCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlIGV2ZW50IGhhbmRsZXIgdG8gcHJvZHVjZSBhIHNpbmdsZSBpdGVtIHRvIHlpZWxkIG9uIG5leHQuXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggd3JhcHMgYW4gZXZlbnQgZnJvbSBhbiBldmVudCBlbWl0dGVyXG5cdCAgICovXG5cdCAgdmFyIGZyb21FdmVudFBhdHRlcm4gPSBPYnNlcnZhYmxlLmZyb21FdmVudFBhdHRlcm4gPSBmdW5jdGlvbiAoYWRkSGFuZGxlciwgcmVtb3ZlSGFuZGxlciwgc2VsZWN0b3IpIHtcblx0ICAgIHJldHVybiBuZXcgRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZShhZGRIYW5kbGVyLCByZW1vdmVIYW5kbGVyLCBzZWxlY3RvcikucHVibGlzaCgpLnJlZkNvdW50KCk7XG5cdCAgfTtcblx0XG5cdCAgdmFyIEZyb21Qcm9taXNlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKEZyb21Qcm9taXNlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIEZyb21Qcm9taXNlT2JzZXJ2YWJsZShwLCBzKSB7XG5cdCAgICAgIHRoaXMuX3AgPSBwO1xuXHQgICAgICB0aGlzLl9zID0gcztcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gc2NoZWR1bGVOZXh0KHMsIHN0YXRlKSB7XG5cdCAgICAgIHZhciBvID0gc3RhdGVbMF0sIGRhdGEgPSBzdGF0ZVsxXTtcblx0ICAgICAgby5vbk5leHQoZGF0YSk7XG5cdCAgICAgIG8ub25Db21wbGV0ZWQoKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBzY2hlZHVsZUVycm9yKHMsIHN0YXRlKSB7XG5cdCAgICAgIHZhciBvID0gc3RhdGVbMF0sIGVyciA9IHN0YXRlWzFdO1xuXHQgICAgICBvLm9uRXJyb3IoZXJyKTtcblx0ICAgIH1cblx0XG5cdCAgICBGcm9tUHJvbWlzZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvKSB7XG5cdCAgICAgIHZhciBzYWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSwgc2VsZiA9IHRoaXM7XG5cdFxuXHQgICAgICB0aGlzLl9wXG5cdCAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgICAgICAgIHNhZC5zZXREaXNwb3NhYmxlKHNlbGYuX3Muc2NoZWR1bGUoW28sIGRhdGFdLCBzY2hlZHVsZU5leHQpKTtcblx0ICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgICBzYWQuc2V0RGlzcG9zYWJsZShzZWxmLl9zLnNjaGVkdWxlKFtvLCBlcnJdLCBzY2hlZHVsZUVycm9yKSk7XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICByZXR1cm4gc2FkO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gRnJvbVByb21pc2VPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgLyoqXG5cdCAgKiBDb252ZXJ0cyBhIFByb21pc2UgdG8gYW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZVxuXHQgICogQHBhcmFtIHtQcm9taXNlfSBBbiBFUzYgQ29tcGxpYW50IHByb21pc2UuXG5cdCAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCB3cmFwcyB0aGUgZXhpc3RpbmcgcHJvbWlzZSBzdWNjZXNzIGFuZCBmYWlsdXJlLlxuXHQgICovXG5cdCAgdmFyIG9ic2VydmFibGVGcm9tUHJvbWlzZSA9IE9ic2VydmFibGUuZnJvbVByb21pc2UgPSBmdW5jdGlvbiAocHJvbWlzZSwgc2NoZWR1bGVyKSB7XG5cdCAgICBzY2hlZHVsZXIgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuXHQgICAgcmV0dXJuIG5ldyBGcm9tUHJvbWlzZU9ic2VydmFibGUocHJvbWlzZSwgc2NoZWR1bGVyKTtcblx0ICB9O1xuXHRcblx0ICAvKlxuXHQgICAqIENvbnZlcnRzIGFuIGV4aXN0aW5nIG9ic2VydmFibGUgc2VxdWVuY2UgdG8gYW4gRVM2IENvbXBhdGlibGUgUHJvbWlzZVxuXHQgICAqIEBleGFtcGxlXG5cdCAgICogdmFyIHByb21pc2UgPSBSeC5PYnNlcnZhYmxlLnJldHVybig0MikudG9Qcm9taXNlKFJTVlAuUHJvbWlzZSk7XG5cdCAgICpcblx0ICAgKiAvLyBXaXRoIGNvbmZpZ1xuXHQgICAqIFJ4LmNvbmZpZy5Qcm9taXNlID0gUlNWUC5Qcm9taXNlO1xuXHQgICAqIHZhciBwcm9taXNlID0gUnguT2JzZXJ2YWJsZS5yZXR1cm4oNDIpLnRvUHJvbWlzZSgpO1xuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcm9taXNlQ3Rvcl0gVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBwcm9taXNlLiBJZiBub3QgcHJvdmlkZWQsIGl0IGxvb2tzIGZvciBpdCBpbiBSeC5jb25maWcuUHJvbWlzZS5cblx0ICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQW4gRVM2IGNvbXBhdGlibGUgcHJvbWlzZSB3aXRoIHRoZSBsYXN0IHZhbHVlIGZyb20gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG5cdCAgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLnRvUHJvbWlzZSA9IGZ1bmN0aW9uIChwcm9taXNlQ3Rvcikge1xuXHQgICAgcHJvbWlzZUN0b3IgfHwgKHByb21pc2VDdG9yID0gUnguY29uZmlnLlByb21pc2UpO1xuXHQgICAgaWYgKCFwcm9taXNlQ3RvcikgeyB0aHJvdyBuZXcgTm90U3VwcG9ydGVkRXJyb3IoJ1Byb21pc2UgdHlwZSBub3QgcHJvdmlkZWQgbm9yIGluIFJ4LmNvbmZpZy5Qcm9taXNlJyk7IH1cblx0ICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuXHQgICAgcmV0dXJuIG5ldyBwcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgIC8vIE5vIGNhbmNlbGxhdGlvbiBjYW4gYmUgZG9uZVxuXHQgICAgICB2YXIgdmFsdWU7XG5cdCAgICAgIHNvdXJjZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICB2YWx1ZSA9IHY7XG5cdCAgICAgIH0sIHJlamVjdCwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJlc29sdmUodmFsdWUpO1xuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEludm9rZXMgdGhlIGFzeW5jaHJvbm91cyBmdW5jdGlvbiwgc3VyZmFjaW5nIHRoZSByZXN1bHQgdGhyb3VnaCBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmN0aW9uQXN5bmMgQXN5bmNocm9ub3VzIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYSBQcm9taXNlIHRvIHJ1bi5cblx0ICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBleHBvc2luZyB0aGUgZnVuY3Rpb24ncyByZXN1bHQgdmFsdWUsIG9yIGFuIGV4Y2VwdGlvbi5cblx0ICAgKi9cblx0ICBPYnNlcnZhYmxlLnN0YXJ0QXN5bmMgPSBmdW5jdGlvbiAoZnVuY3Rpb25Bc3luYykge1xuXHQgICAgdmFyIHByb21pc2UgPSB0cnlDYXRjaChmdW5jdGlvbkFzeW5jKSgpO1xuXHQgICAgaWYgKHByb21pc2UgPT09IGVycm9yT2JqKSB7IHJldHVybiBvYnNlcnZhYmxlVGhyb3cocHJvbWlzZS5lKTsgfVxuXHQgICAgcmV0dXJuIG9ic2VydmFibGVGcm9tUHJvbWlzZShwcm9taXNlKTtcblx0ICB9O1xuXHRcblx0ICB2YXIgTXVsdGljYXN0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhNdWx0aWNhc3RPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gTXVsdGljYXN0T2JzZXJ2YWJsZShzb3VyY2UsIGZuMSwgZm4yKSB7XG5cdCAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICB0aGlzLl9mbjEgPSBmbjE7XG5cdCAgICAgIHRoaXMuX2ZuMiA9IGZuMjtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgTXVsdGljYXN0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHZhciBjb25uZWN0YWJsZSA9IHRoaXMuc291cmNlLm11bHRpY2FzdCh0aGlzLl9mbjEoKSk7XG5cdCAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZSh0aGlzLl9mbjIoY29ubmVjdGFibGUpLnN1YnNjcmliZShvKSwgY29ubmVjdGFibGUuY29ubmVjdCgpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIE11bHRpY2FzdE9ic2VydmFibGU7XG5cdCAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXHRcblx0ICAvKipcblx0ICAgKiBNdWx0aWNhc3RzIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugbm90aWZpY2F0aW9ucyB0aHJvdWdoIGFuIGluc3RhbnRpYXRlZCBzdWJqZWN0IGludG8gYWxsIHVzZXMgb2YgdGhlIHNlcXVlbmNlIHdpdGhpbiBhIHNlbGVjdG9yIGZ1bmN0aW9uLiBFYWNoXG5cdCAgICogc3Vic2NyaXB0aW9uIHRvIHRoZSByZXN1bHRpbmcgc2VxdWVuY2UgY2F1c2VzIGEgc2VwYXJhdGUgbXVsdGljYXN0IGludm9jYXRpb24sIGV4cG9zaW5nIHRoZSBzZXF1ZW5jZSByZXN1bHRpbmcgZnJvbSB0aGUgc2VsZWN0b3IgZnVuY3Rpb24nc1xuXHQgICAqIGludm9jYXRpb24uIEZvciBzcGVjaWFsaXphdGlvbnMgd2l0aCBmaXhlZCBzdWJqZWN0IHR5cGVzLCBzZWUgUHVibGlzaCwgUHVibGlzaExhc3QsIGFuZCBSZXBsYXkuXG5cdCAgICpcblx0ICAgKiBAZXhhbXBsZVxuXHQgICAqIDEgLSByZXMgPSBzb3VyY2UubXVsdGljYXN0KG9ic2VydmFibGUpO1xuXHQgICAqIDIgLSByZXMgPSBzb3VyY2UubXVsdGljYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBTdWJqZWN0KCk7IH0sIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KTtcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb258U3ViamVjdH0gc3ViamVjdE9yU3ViamVjdFNlbGVjdG9yXG5cdCAgICogRmFjdG9yeSBmdW5jdGlvbiB0byBjcmVhdGUgYW4gaW50ZXJtZWRpYXRlIHN1YmplY3QgdGhyb3VnaCB3aGljaCB0aGUgc291cmNlIHNlcXVlbmNlJ3MgZWxlbWVudHMgd2lsbCBiZSBtdWx0aWNhc3QgdG8gdGhlIHNlbGVjdG9yIGZ1bmN0aW9uLlxuXHQgICAqIE9yOlxuXHQgICAqIFN1YmplY3QgdG8gcHVzaCBzb3VyY2UgZWxlbWVudHMgaW50by5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gT3B0aW9uYWwgc2VsZWN0b3IgZnVuY3Rpb24gd2hpY2ggY2FuIHVzZSB0aGUgbXVsdGljYXN0ZWQgc291cmNlIHNlcXVlbmNlIHN1YmplY3QgdG8gdGhlIHBvbGljaWVzIGVuZm9yY2VkIGJ5IHRoZSBjcmVhdGVkIHN1YmplY3QuIFNwZWNpZmllZCBvbmx5IGlmIDxwYXJhbXJlZiBuYW1lPVwic3ViamVjdE9yU3ViamVjdFNlbGVjdG9yXCIgaXMgYSBmYWN0b3J5IGZ1bmN0aW9uLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aGluIGEgc2VsZWN0b3IgZnVuY3Rpb24uXG5cdCAgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLm11bHRpY2FzdCA9IGZ1bmN0aW9uIChzdWJqZWN0T3JTdWJqZWN0U2VsZWN0b3IsIHNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gaXNGdW5jdGlvbihzdWJqZWN0T3JTdWJqZWN0U2VsZWN0b3IpID9cblx0ICAgICAgbmV3IE11bHRpY2FzdE9ic2VydmFibGUodGhpcywgc3ViamVjdE9yU3ViamVjdFNlbGVjdG9yLCBzZWxlY3RvcikgOlxuXHQgICAgICBuZXcgQ29ubmVjdGFibGVPYnNlcnZhYmxlKHRoaXMsIHN1YmplY3RPclN1YmplY3RTZWxlY3Rvcik7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgc2VsZWN0b3Igb24gYSBjb25uZWN0YWJsZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZS5cblx0ICAgKiBUaGlzIG9wZXJhdG9yIGlzIGEgc3BlY2lhbGl6YXRpb24gb2YgTXVsdGljYXN0IHVzaW5nIGEgcmVndWxhciBTdWJqZWN0LlxuXHQgICAqXG5cdCAgICogQGV4YW1wbGVcblx0ICAgKiB2YXIgcmVzcmVzID0gc291cmNlLnB1Ymxpc2goKTtcblx0ICAgKiB2YXIgcmVzID0gc291cmNlLnB1Ymxpc2goZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0pO1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBTZWxlY3RvciBmdW5jdGlvbiB3aGljaCBjYW4gdXNlIHRoZSBtdWx0aWNhc3RlZCBzb3VyY2Ugc2VxdWVuY2UgYXMgbWFueSB0aW1lcyBhcyBuZWVkZWQsIHdpdGhvdXQgY2F1c2luZyBtdWx0aXBsZSBzdWJzY3JpcHRpb25zIHRvIHRoZSBzb3VyY2Ugc2VxdWVuY2UuIFN1YnNjcmliZXJzIHRvIHRoZSBnaXZlbiBzb3VyY2Ugd2lsbCByZWNlaXZlIGFsbCBub3RpZmljYXRpb25zIG9mIHRoZSBzb3VyY2UgZnJvbSB0aGUgdGltZSBvZiB0aGUgc3Vic2NyaXB0aW9uIG9uLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aGluIGEgc2VsZWN0b3IgZnVuY3Rpb24uXG5cdCAgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLnB1Ymxpc2ggPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcblx0ICAgIHJldHVybiBzZWxlY3RvciAmJiBpc0Z1bmN0aW9uKHNlbGVjdG9yKSA/XG5cdCAgICAgIHRoaXMubXVsdGljYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBTdWJqZWN0KCk7IH0sIHNlbGVjdG9yKSA6XG5cdCAgICAgIHRoaXMubXVsdGljYXN0KG5ldyBTdWJqZWN0KCkpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UuXG5cdCAgICogVGhpcyBvcGVyYXRvciBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIHB1Ymxpc2ggd2hpY2ggY3JlYXRlcyBhIHN1YnNjcmlwdGlvbiB3aGVuIHRoZSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIGdvZXMgZnJvbSB6ZXJvIHRvIG9uZSwgdGhlbiBzaGFyZXMgdGhhdCBzdWJzY3JpcHRpb24gd2l0aCBhbGwgc3Vic2VxdWVudCBvYnNlcnZlcnMgdW50aWwgdGhlIG51bWJlciBvZiBvYnNlcnZlcnMgcmV0dXJucyB0byB6ZXJvLCBhdCB3aGljaCBwb2ludCB0aGUgc3Vic2NyaXB0aW9uIGlzIGRpc3Bvc2VkLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG5cdCAgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLnNoYXJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIHRoaXMucHVibGlzaCgpLnJlZkNvdW50KCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgc2VsZWN0b3Igb24gYSBjb25uZWN0YWJsZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZSBjb250YWluaW5nIG9ubHkgdGhlIGxhc3Qgbm90aWZpY2F0aW9uLlxuXHQgICAqIFRoaXMgb3BlcmF0b3IgaXMgYSBzcGVjaWFsaXphdGlvbiBvZiBNdWx0aWNhc3QgdXNpbmcgYSBBc3luY1N1YmplY3QuXG5cdCAgICpcblx0ICAgKiBAZXhhbXBsZVxuXHQgICAqIHZhciByZXMgPSBzb3VyY2UucHVibGlzaExhc3QoKTtcblx0ICAgKiB2YXIgcmVzID0gc291cmNlLnB1Ymxpc2hMYXN0KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KTtcblx0ICAgKlxuXHQgICAqIEBwYXJhbSBzZWxlY3RvciBbT3B0aW9uYWxdIFNlbGVjdG9yIGZ1bmN0aW9uIHdoaWNoIGNhbiB1c2UgdGhlIG11bHRpY2FzdGVkIHNvdXJjZSBzZXF1ZW5jZSBhcyBtYW55IHRpbWVzIGFzIG5lZWRlZCwgd2l0aG91dCBjYXVzaW5nIG11bHRpcGxlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIHNvdXJjZSBzZXF1ZW5jZS4gU3Vic2NyaWJlcnMgdG8gdGhlIGdpdmVuIHNvdXJjZSB3aWxsIG9ubHkgcmVjZWl2ZSB0aGUgbGFzdCBub3RpZmljYXRpb24gb2YgdGhlIHNvdXJjZS5cblx0ICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBhIHNlcXVlbmNlIHByb2R1Y2VkIGJ5IG11bHRpY2FzdGluZyB0aGUgc291cmNlIHNlcXVlbmNlIHdpdGhpbiBhIHNlbGVjdG9yIGZ1bmN0aW9uLlxuXHQgICAqL1xuXHQgIG9ic2VydmFibGVQcm90by5wdWJsaXNoTGFzdCA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuXHQgICAgcmV0dXJuIHNlbGVjdG9yICYmIGlzRnVuY3Rpb24oc2VsZWN0b3IpID9cblx0ICAgICAgdGhpcy5tdWx0aWNhc3QoZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IEFzeW5jU3ViamVjdCgpOyB9LCBzZWxlY3RvcikgOlxuXHQgICAgICB0aGlzLm11bHRpY2FzdChuZXcgQXN5bmNTdWJqZWN0KCkpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGlzIHRoZSByZXN1bHQgb2YgaW52b2tpbmcgdGhlIHNlbGVjdG9yIG9uIGEgY29ubmVjdGFibGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UgYW5kIHN0YXJ0cyB3aXRoIGluaXRpYWxWYWx1ZS5cblx0ICAgKiBUaGlzIG9wZXJhdG9yIGlzIGEgc3BlY2lhbGl6YXRpb24gb2YgTXVsdGljYXN0IHVzaW5nIGEgQmVoYXZpb3JTdWJqZWN0LlxuXHQgICAqXG5cdCAgICogQGV4YW1wbGVcblx0ICAgKiB2YXIgcmVzID0gc291cmNlLnB1Ymxpc2hWYWx1ZSg0Mik7XG5cdCAgICogdmFyIHJlcyA9IHNvdXJjZS5wdWJsaXNoVmFsdWUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguc2VsZWN0KGZ1bmN0aW9uICh5KSB7IHJldHVybiB5ICogeTsgfSkgfSwgNDIpO1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBPcHRpb25hbCBzZWxlY3RvciBmdW5jdGlvbiB3aGljaCBjYW4gdXNlIHRoZSBtdWx0aWNhc3RlZCBzb3VyY2Ugc2VxdWVuY2UgYXMgbWFueSB0aW1lcyBhcyBuZWVkZWQsIHdpdGhvdXQgY2F1c2luZyBtdWx0aXBsZSBzdWJzY3JpcHRpb25zIHRvIHRoZSBzb3VyY2Ugc2VxdWVuY2UuIFN1YnNjcmliZXJzIHRvIHRoZSBnaXZlbiBzb3VyY2Ugd2lsbCByZWNlaXZlIGltbWVkaWF0ZWx5IHJlY2VpdmUgdGhlIGluaXRpYWwgdmFsdWUsIGZvbGxvd2VkIGJ5IGFsbCBub3RpZmljYXRpb25zIG9mIHRoZSBzb3VyY2UgZnJvbSB0aGUgdGltZSBvZiB0aGUgc3Vic2NyaXB0aW9uIG9uLlxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IGluaXRpYWxWYWx1ZSBJbml0aWFsIHZhbHVlIHJlY2VpdmVkIGJ5IG9ic2VydmVycyB1cG9uIHN1YnNjcmlwdGlvbi5cblx0ICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBhIHNlcXVlbmNlIHByb2R1Y2VkIGJ5IG11bHRpY2FzdGluZyB0aGUgc291cmNlIHNlcXVlbmNlIHdpdGhpbiBhIHNlbGVjdG9yIGZ1bmN0aW9uLlxuXHQgICAqL1xuXHQgIG9ic2VydmFibGVQcm90by5wdWJsaXNoVmFsdWUgPSBmdW5jdGlvbiAoaW5pdGlhbFZhbHVlT3JTZWxlY3RvciwgaW5pdGlhbFZhbHVlKSB7XG5cdCAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMiA/XG5cdCAgICAgIHRoaXMubXVsdGljYXN0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEJlaGF2aW9yU3ViamVjdChpbml0aWFsVmFsdWUpO1xuXHQgICAgICB9LCBpbml0aWFsVmFsdWVPclNlbGVjdG9yKSA6XG5cdCAgICAgIHRoaXMubXVsdGljYXN0KG5ldyBCZWhhdmlvclN1YmplY3QoaW5pdGlhbFZhbHVlT3JTZWxlY3RvcikpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UgYW5kIHN0YXJ0cyB3aXRoIGFuIGluaXRpYWxWYWx1ZS5cblx0ICAgKiBUaGlzIG9wZXJhdG9yIGlzIGEgc3BlY2lhbGl6YXRpb24gb2YgcHVibGlzaFZhbHVlIHdoaWNoIGNyZWF0ZXMgYSBzdWJzY3JpcHRpb24gd2hlbiB0aGUgbnVtYmVyIG9mIG9ic2VydmVycyBnb2VzIGZyb20gemVybyB0byBvbmUsIHRoZW4gc2hhcmVzIHRoYXQgc3Vic2NyaXB0aW9uIHdpdGggYWxsIHN1YnNlcXVlbnQgb2JzZXJ2ZXJzIHVudGlsIHRoZSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIHJldHVybnMgdG8gemVybywgYXQgd2hpY2ggcG9pbnQgdGhlIHN1YnNjcmlwdGlvbiBpcyBkaXNwb3NlZC5cblx0ICAgKiBAcGFyYW0ge01peGVkfSBpbml0aWFsVmFsdWUgSW5pdGlhbCB2YWx1ZSByZWNlaXZlZCBieSBvYnNlcnZlcnMgdXBvbiBzdWJzY3JpcHRpb24uXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cblx0ICAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG8uc2hhcmVWYWx1ZSA9IGZ1bmN0aW9uIChpbml0aWFsVmFsdWUpIHtcblx0ICAgIHJldHVybiB0aGlzLnB1Ymxpc2hWYWx1ZShpbml0aWFsVmFsdWUpLnJlZkNvdW50KCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgc2VsZWN0b3Igb24gYSBjb25uZWN0YWJsZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZSByZXBsYXlpbmcgbm90aWZpY2F0aW9ucyBzdWJqZWN0IHRvIGEgbWF4aW11bSB0aW1lIGxlbmd0aCBmb3IgdGhlIHJlcGxheSBidWZmZXIuXG5cdCAgICogVGhpcyBvcGVyYXRvciBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIE11bHRpY2FzdCB1c2luZyBhIFJlcGxheVN1YmplY3QuXG5cdCAgICpcblx0ICAgKiBAZXhhbXBsZVxuXHQgICAqIHZhciByZXMgPSBzb3VyY2UucmVwbGF5KG51bGwsIDMpO1xuXHQgICAqIHZhciByZXMgPSBzb3VyY2UucmVwbGF5KG51bGwsIDMsIDUwMCk7XG5cdCAgICogdmFyIHJlcyA9IHNvdXJjZS5yZXBsYXkobnVsbCwgMywgNTAwLCBzY2hlZHVsZXIpO1xuXHQgICAqIHZhciByZXMgPSBzb3VyY2UucmVwbGF5KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnRha2UoNikucmVwZWF0KCk7IH0sIDMsIDUwMCwgc2NoZWR1bGVyKTtcblx0ICAgKlxuXHQgICAqIEBwYXJhbSBzZWxlY3RvciBbT3B0aW9uYWxdIFNlbGVjdG9yIGZ1bmN0aW9uIHdoaWNoIGNhbiB1c2UgdGhlIG11bHRpY2FzdGVkIHNvdXJjZSBzZXF1ZW5jZSBhcyBtYW55IHRpbWVzIGFzIG5lZWRlZCwgd2l0aG91dCBjYXVzaW5nIG11bHRpcGxlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIHNvdXJjZSBzZXF1ZW5jZS4gU3Vic2NyaWJlcnMgdG8gdGhlIGdpdmVuIHNvdXJjZSB3aWxsIHJlY2VpdmUgYWxsIHRoZSBub3RpZmljYXRpb25zIG9mIHRoZSBzb3VyY2Ugc3ViamVjdCB0byB0aGUgc3BlY2lmaWVkIHJlcGxheSBidWZmZXIgdHJpbW1pbmcgcG9saWN5LlxuXHQgICAqIEBwYXJhbSBidWZmZXJTaXplIFtPcHRpb25hbF0gTWF4aW11bSBlbGVtZW50IGNvdW50IG9mIHRoZSByZXBsYXkgYnVmZmVyLlxuXHQgICAqIEBwYXJhbSB3aW5kb3dTaXplIFtPcHRpb25hbF0gTWF4aW11bSB0aW1lIGxlbmd0aCBvZiB0aGUgcmVwbGF5IGJ1ZmZlci5cblx0ICAgKiBAcGFyYW0gc2NoZWR1bGVyIFtPcHRpb25hbF0gU2NoZWR1bGVyIHdoZXJlIGNvbm5lY3RlZCBvYnNlcnZlcnMgd2l0aGluIHRoZSBzZWxlY3RvciBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgb24uXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoaW4gYSBzZWxlY3RvciBmdW5jdGlvbi5cblx0ICAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG8ucmVwbGF5ID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBidWZmZXJTaXplLCB3aW5kb3dTaXplLCBzY2hlZHVsZXIpIHtcblx0ICAgIHJldHVybiBzZWxlY3RvciAmJiBpc0Z1bmN0aW9uKHNlbGVjdG9yKSA/XG5cdCAgICAgIHRoaXMubXVsdGljYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBSZXBsYXlTdWJqZWN0KGJ1ZmZlclNpemUsIHdpbmRvd1NpemUsIHNjaGVkdWxlcik7IH0sIHNlbGVjdG9yKSA6XG5cdCAgICAgIHRoaXMubXVsdGljYXN0KG5ldyBSZXBsYXlTdWJqZWN0KGJ1ZmZlclNpemUsIHdpbmRvd1NpemUsIHNjaGVkdWxlcikpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UgcmVwbGF5aW5nIG5vdGlmaWNhdGlvbnMgc3ViamVjdCB0byBhIG1heGltdW0gdGltZSBsZW5ndGggZm9yIHRoZSByZXBsYXkgYnVmZmVyLlxuXHQgICAqIFRoaXMgb3BlcmF0b3IgaXMgYSBzcGVjaWFsaXphdGlvbiBvZiByZXBsYXkgd2hpY2ggY3JlYXRlcyBhIHN1YnNjcmlwdGlvbiB3aGVuIHRoZSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIGdvZXMgZnJvbSB6ZXJvIHRvIG9uZSwgdGhlbiBzaGFyZXMgdGhhdCBzdWJzY3JpcHRpb24gd2l0aCBhbGwgc3Vic2VxdWVudCBvYnNlcnZlcnMgdW50aWwgdGhlIG51bWJlciBvZiBvYnNlcnZlcnMgcmV0dXJucyB0byB6ZXJvLCBhdCB3aGljaCBwb2ludCB0aGUgc3Vic2NyaXB0aW9uIGlzIGRpc3Bvc2VkLlxuXHQgICAqXG5cdCAgICogQGV4YW1wbGVcblx0ICAgKiB2YXIgcmVzID0gc291cmNlLnNoYXJlUmVwbGF5KDMpO1xuXHQgICAqIHZhciByZXMgPSBzb3VyY2Uuc2hhcmVSZXBsYXkoMywgNTAwKTtcblx0ICAgKiB2YXIgcmVzID0gc291cmNlLnNoYXJlUmVwbGF5KDMsIDUwMCwgc2NoZWR1bGVyKTtcblx0ICAgKlxuXHRcblx0ICAgKiBAcGFyYW0gYnVmZmVyU2l6ZSBbT3B0aW9uYWxdIE1heGltdW0gZWxlbWVudCBjb3VudCBvZiB0aGUgcmVwbGF5IGJ1ZmZlci5cblx0ICAgKiBAcGFyYW0gd2luZG93IFtPcHRpb25hbF0gTWF4aW11bSB0aW1lIGxlbmd0aCBvZiB0aGUgcmVwbGF5IGJ1ZmZlci5cblx0ICAgKiBAcGFyYW0gc2NoZWR1bGVyIFtPcHRpb25hbF0gU2NoZWR1bGVyIHdoZXJlIGNvbm5lY3RlZCBvYnNlcnZlcnMgd2l0aGluIHRoZSBzZWxlY3RvciBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgb24uXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cblx0ICAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG8uc2hhcmVSZXBsYXkgPSBmdW5jdGlvbiAoYnVmZmVyU2l6ZSwgd2luZG93U2l6ZSwgc2NoZWR1bGVyKSB7XG5cdCAgICByZXR1cm4gdGhpcy5yZXBsYXkobnVsbCwgYnVmZmVyU2l6ZSwgd2luZG93U2l6ZSwgc2NoZWR1bGVyKS5yZWZDb3VudCgpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBSZWZDb3VudE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoUmVmQ291bnRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gUmVmQ291bnRPYnNlcnZhYmxlKHNvdXJjZSkge1xuXHQgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgdGhpcy5fY291bnQgPSAwO1xuXHQgICAgICB0aGlzLl9jb25uZWN0YWJsZVN1YnNjcmlwdGlvbiA9IG51bGw7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIFJlZkNvdW50T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobyk7XG5cdCAgICAgICsrdGhpcy5fY291bnQgPT09IDEgJiYgKHRoaXMuX2Nvbm5lY3RhYmxlU3Vic2NyaXB0aW9uID0gdGhpcy5zb3VyY2UuY29ubmVjdCgpKTtcblx0ICAgICAgcmV0dXJuIG5ldyBSZWZDb3VudERpc3Bvc2FibGUodGhpcywgc3Vic2NyaXB0aW9uKTtcblx0ICAgIH07XG5cdFxuXHQgICAgZnVuY3Rpb24gUmVmQ291bnREaXNwb3NhYmxlKHAsIHMpIHtcblx0ICAgICAgdGhpcy5fcCA9IHA7XG5cdCAgICAgIHRoaXMuX3MgPSBzO1xuXHQgICAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcblx0ICAgIH1cblx0XG5cdCAgICBSZWZDb3VudERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG5cdCAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLl9zLmRpc3Bvc2UoKTtcblx0ICAgICAgICAtLXRoaXMuX3AuX2NvdW50ID09PSAwICYmIHRoaXMuX3AuX2Nvbm5lY3RhYmxlU3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gUmVmQ291bnRPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgdmFyIENvbm5lY3RhYmxlT2JzZXJ2YWJsZSA9IFJ4LkNvbm5lY3RhYmxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhDb25uZWN0YWJsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBDb25uZWN0YWJsZU9ic2VydmFibGUoc291cmNlLCBzdWJqZWN0KSB7XG5cdCAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICB0aGlzLl9jb25uZWN0aW9uID0gbnVsbDtcblx0ICAgICAgdGhpcy5fc291cmNlID0gc291cmNlLmFzT2JzZXJ2YWJsZSgpO1xuXHQgICAgICB0aGlzLl9zdWJqZWN0ID0gc3ViamVjdDtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gQ29ubmVjdERpc3Bvc2FibGUocGFyZW50LCBzdWJzY3JpcHRpb24pIHtcblx0ICAgICAgdGhpcy5fcCA9IHBhcmVudDtcblx0ICAgICAgdGhpcy5fcyA9IHN1YnNjcmlwdGlvbjtcblx0ICAgIH1cblx0XG5cdCAgICBDb25uZWN0RGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHRoaXMuX3MpIHtcblx0ICAgICAgICB0aGlzLl9zLmRpc3Bvc2UoKTtcblx0ICAgICAgICB0aGlzLl9zID0gbnVsbDtcblx0ICAgICAgICB0aGlzLl9wLl9jb25uZWN0aW9uID0gbnVsbDtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLmNvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmICghdGhpcy5fY29ubmVjdGlvbikge1xuXHQgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLl9zb3VyY2Uuc3Vic2NyaWJlKHRoaXMuX3N1YmplY3QpO1xuXHQgICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24gPSBuZXcgQ29ubmVjdERpc3Bvc2FibGUodGhpcywgc3Vic2NyaXB0aW9uKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcy5fY29ubmVjdGlvbjtcblx0ICAgIH07XG5cdFxuXHQgICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX3N1YmplY3Quc3Vic2NyaWJlKG8pO1xuXHQgICAgfTtcblx0XG5cdCAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLnJlZkNvdW50ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gbmV3IFJlZkNvdW50T2JzZXJ2YWJsZSh0aGlzKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIENvbm5lY3RhYmxlT2JzZXJ2YWJsZTtcblx0ICB9KE9ic2VydmFibGUpKTtcblx0XG5cdCAgdmFyIFRpbWVyT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKFRpbWVyT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIFRpbWVyT2JzZXJ2YWJsZShkdCwgcykge1xuXHQgICAgICB0aGlzLl9kdCA9IGR0O1xuXHQgICAgICB0aGlzLl9zID0gcztcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgVGltZXJPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX3Muc2NoZWR1bGVGdXR1cmUobywgdGhpcy5fZHQsIHNjaGVkdWxlTWV0aG9kKTtcblx0ICAgIH07XG5cdFxuXHQgICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qocywgbykge1xuXHQgICAgICBvLm9uTmV4dCgwKTtcblx0ICAgICAgby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBUaW1lck9ic2VydmFibGU7XG5cdCAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXHRcblx0ICBmdW5jdGlvbiBfb2JzZXJ2YWJsZVRpbWVyKGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuXHQgICAgcmV0dXJuIG5ldyBUaW1lck9ic2VydmFibGUoZHVlVGltZSwgc2NoZWR1bGVyKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIG9ic2VydmFibGVUaW1lckRhdGVBbmRQZXJpb2QoZHVlVGltZSwgcGVyaW9kLCBzY2hlZHVsZXIpIHtcblx0ICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcblx0ICAgICAgdmFyIGQgPSBkdWVUaW1lLCBwID0gbm9ybWFsaXplVGltZShwZXJpb2QpO1xuXHQgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlRnV0dXJlKDAsIGQsIGZ1bmN0aW9uIChjb3VudCwgc2VsZikge1xuXHQgICAgICAgIGlmIChwID4gMCkge1xuXHQgICAgICAgICAgdmFyIG5vdyA9IHNjaGVkdWxlci5ub3coKTtcblx0ICAgICAgICAgIGQgPSBuZXcgRGF0ZShkLmdldFRpbWUoKSArIHApO1xuXHQgICAgICAgICAgZC5nZXRUaW1lKCkgPD0gbm93ICYmIChkID0gbmV3IERhdGUobm93ICsgcCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBvYnNlcnZlci5vbk5leHQoY291bnQpO1xuXHQgICAgICAgIHNlbGYoY291bnQgKyAxLCBuZXcgRGF0ZShkKSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBvYnNlcnZhYmxlVGltZXJUaW1lU3BhbkFuZFBlcmlvZChkdWVUaW1lLCBwZXJpb2QsIHNjaGVkdWxlcikge1xuXHQgICAgcmV0dXJuIGR1ZVRpbWUgPT09IHBlcmlvZCA/XG5cdCAgICAgIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuXHQgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGVQZXJpb2RpYygwLCBwZXJpb2QsIGZ1bmN0aW9uIChjb3VudCkge1xuXHQgICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGNvdW50KTtcblx0ICAgICAgICAgIHJldHVybiBjb3VudCArIDE7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0pIDpcblx0ICAgICAgb2JzZXJ2YWJsZURlZmVyKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZVRpbWVyRGF0ZUFuZFBlcmlvZChuZXcgRGF0ZShzY2hlZHVsZXIubm93KCkgKyBkdWVUaW1lKSwgcGVyaW9kLCBzY2hlZHVsZXIpO1xuXHQgICAgICB9KTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqICBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBwcm9kdWNlcyBhIHZhbHVlIGFmdGVyIGVhY2ggcGVyaW9kLlxuXHQgICAqXG5cdCAgICogQGV4YW1wbGVcblx0ICAgKiAgMSAtIHJlcyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAgICogIDIgLSByZXMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDAsIFJ4LlNjaGVkdWxlci50aW1lb3V0KTtcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBwZXJpb2QgUGVyaW9kIGZvciBwcm9kdWNpbmcgdGhlIHZhbHVlcyBpbiB0aGUgcmVzdWx0aW5nIHNlcXVlbmNlIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpLlxuXHQgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgUnguU2NoZWR1bGVyLnRpbWVvdXQgaXMgdXNlZC5cblx0ICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHByb2R1Y2VzIGEgdmFsdWUgYWZ0ZXIgZWFjaCBwZXJpb2QuXG5cdCAgICovXG5cdCAgdmFyIG9ic2VydmFibGVpbnRlcnZhbCA9IE9ic2VydmFibGUuaW50ZXJ2YWwgPSBmdW5jdGlvbiAocGVyaW9kLCBzY2hlZHVsZXIpIHtcblx0ICAgIHJldHVybiBvYnNlcnZhYmxlVGltZXJUaW1lU3BhbkFuZFBlcmlvZChwZXJpb2QsIHBlcmlvZCwgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSA/IHNjaGVkdWxlciA6IGRlZmF1bHRTY2hlZHVsZXIpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBwcm9kdWNlcyBhIHZhbHVlIGFmdGVyIGR1ZVRpbWUgaGFzIGVsYXBzZWQgYW5kIHRoZW4gYWZ0ZXIgZWFjaCBwZXJpb2QuXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGR1ZVRpbWUgQWJzb2x1dGUgKHNwZWNpZmllZCBhcyBhIERhdGUgb2JqZWN0KSBvciByZWxhdGl2ZSB0aW1lIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpIGF0IHdoaWNoIHRvIHByb2R1Y2UgdGhlIGZpcnN0IHZhbHVlLlxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IFtwZXJpb2RPclNjaGVkdWxlcl0gIFBlcmlvZCB0byBwcm9kdWNlIHN1YnNlcXVlbnQgdmFsdWVzIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpLCBvciB0aGUgc2NoZWR1bGVyIHRvIHJ1biB0aGUgdGltZXIgb24uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSByZXN1bHRpbmcgdGltZXIgaXMgbm90IHJlY3VycmluZy5cblx0ICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZW91dCBzY2hlZHVsZXIgaXMgdXNlZC5cblx0ICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHByb2R1Y2VzIGEgdmFsdWUgYWZ0ZXIgZHVlIHRpbWUgaGFzIGVsYXBzZWQgYW5kIHRoZW4gZWFjaCBwZXJpb2QuXG5cdCAgICovXG5cdCAgdmFyIG9ic2VydmFibGVUaW1lciA9IE9ic2VydmFibGUudGltZXIgPSBmdW5jdGlvbiAoZHVlVGltZSwgcGVyaW9kT3JTY2hlZHVsZXIsIHNjaGVkdWxlcikge1xuXHQgICAgdmFyIHBlcmlvZDtcblx0ICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuXHQgICAgaWYgKHBlcmlvZE9yU2NoZWR1bGVyICE9IG51bGwgJiYgdHlwZW9mIHBlcmlvZE9yU2NoZWR1bGVyID09PSAnbnVtYmVyJykge1xuXHQgICAgICBwZXJpb2QgPSBwZXJpb2RPclNjaGVkdWxlcjtcblx0ICAgIH0gZWxzZSBpZiAoaXNTY2hlZHVsZXIocGVyaW9kT3JTY2hlZHVsZXIpKSB7XG5cdCAgICAgIHNjaGVkdWxlciA9IHBlcmlvZE9yU2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgaWYgKChkdWVUaW1lIGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgZHVlVGltZSA9PT0gJ251bWJlcicpICYmIHBlcmlvZCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIHJldHVybiBfb2JzZXJ2YWJsZVRpbWVyKGR1ZVRpbWUsIHNjaGVkdWxlcik7XG5cdCAgICB9XG5cdCAgICBpZiAoZHVlVGltZSBpbnN0YW5jZW9mIERhdGUgJiYgcGVyaW9kICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgcmV0dXJuIG9ic2VydmFibGVUaW1lckRhdGVBbmRQZXJpb2QoZHVlVGltZS5nZXRUaW1lKCksIHBlcmlvZE9yU2NoZWR1bGVyLCBzY2hlZHVsZXIpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG9ic2VydmFibGVUaW1lclRpbWVTcGFuQW5kUGVyaW9kKGR1ZVRpbWUsIHBlcmlvZCwgc2NoZWR1bGVyKTtcblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBvYnNlcnZhYmxlRGVsYXlSZWxhdGl2ZShzb3VyY2UsIGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuXHQgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHZhciBhY3RpdmUgPSBmYWxzZSxcblx0ICAgICAgICBjYW5jZWxhYmxlID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSxcblx0ICAgICAgICBleGNlcHRpb24gPSBudWxsLFxuXHQgICAgICAgIHEgPSBbXSxcblx0ICAgICAgICBydW5uaW5nID0gZmFsc2UsXG5cdCAgICAgICAgc3Vic2NyaXB0aW9uO1xuXHQgICAgICBzdWJzY3JpcHRpb24gPSBzb3VyY2UubWF0ZXJpYWxpemUoKS50aW1lc3RhbXAoc2NoZWR1bGVyKS5zdWJzY3JpYmUoZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xuXHQgICAgICAgIHZhciBkLCBzaG91bGRSdW47XG5cdCAgICAgICAgaWYgKG5vdGlmaWNhdGlvbi52YWx1ZS5raW5kID09PSAnRScpIHtcblx0ICAgICAgICAgIHEgPSBbXTtcblx0ICAgICAgICAgIHEucHVzaChub3RpZmljYXRpb24pO1xuXHQgICAgICAgICAgZXhjZXB0aW9uID0gbm90aWZpY2F0aW9uLnZhbHVlLmVycm9yO1xuXHQgICAgICAgICAgc2hvdWxkUnVuID0gIXJ1bm5pbmc7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHEucHVzaCh7IHZhbHVlOiBub3RpZmljYXRpb24udmFsdWUsIHRpbWVzdGFtcDogbm90aWZpY2F0aW9uLnRpbWVzdGFtcCArIGR1ZVRpbWUgfSk7XG5cdCAgICAgICAgICBzaG91bGRSdW4gPSAhYWN0aXZlO1xuXHQgICAgICAgICAgYWN0aXZlID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHNob3VsZFJ1bikge1xuXHQgICAgICAgICAgaWYgKGV4Y2VwdGlvbiAhPT0gbnVsbCkge1xuXHQgICAgICAgICAgICBvLm9uRXJyb3IoZXhjZXB0aW9uKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblx0ICAgICAgICAgICAgY2FuY2VsYWJsZS5zZXREaXNwb3NhYmxlKGQpO1xuXHQgICAgICAgICAgICBkLnNldERpc3Bvc2FibGUoc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlRnV0dXJlKG51bGwsIGR1ZVRpbWUsIGZ1bmN0aW9uIChfLCBzZWxmKSB7XG5cdCAgICAgICAgICAgICAgdmFyIGUsIHJlY3Vyc2VEdWVUaW1lLCByZXN1bHQsIHNob3VsZFJlY3Vyc2U7XG5cdCAgICAgICAgICAgICAgaWYgKGV4Y2VwdGlvbiAhPT0gbnVsbCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICBydW5uaW5nID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICBkbyB7XG5cdCAgICAgICAgICAgICAgICByZXN1bHQgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoID4gMCAmJiBxWzBdLnRpbWVzdGFtcCAtIHNjaGVkdWxlci5ub3coKSA8PSAwKSB7XG5cdCAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHEuc2hpZnQoKS52YWx1ZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgICAgcmVzdWx0LmFjY2VwdChvKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICB9IHdoaWxlIChyZXN1bHQgIT09IG51bGwpO1xuXHQgICAgICAgICAgICAgIHNob3VsZFJlY3Vyc2UgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICByZWN1cnNlRHVlVGltZSA9IDA7XG5cdCAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICAgICAgc2hvdWxkUmVjdXJzZSA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICByZWN1cnNlRHVlVGltZSA9IE1hdGgubWF4KDAsIHFbMF0udGltZXN0YW1wIC0gc2NoZWR1bGVyLm5vdygpKTtcblx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgYWN0aXZlID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIGUgPSBleGNlcHRpb247XG5cdCAgICAgICAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgIGlmIChlICE9PSBudWxsKSB7XG5cdCAgICAgICAgICAgICAgICBvLm9uRXJyb3IoZSk7XG5cdCAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaG91bGRSZWN1cnNlKSB7XG5cdCAgICAgICAgICAgICAgICBzZWxmKG51bGwsIHJlY3Vyc2VEdWVUaW1lKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9uLCBjYW5jZWxhYmxlKTtcblx0ICAgIH0sIHNvdXJjZSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBvYnNlcnZhYmxlRGVsYXlBYnNvbHV0ZShzb3VyY2UsIGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuXHQgICAgcmV0dXJuIG9ic2VydmFibGVEZWZlcihmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBvYnNlcnZhYmxlRGVsYXlSZWxhdGl2ZShzb3VyY2UsIGR1ZVRpbWUgLSBzY2hlZHVsZXIubm93KCksIHNjaGVkdWxlcik7XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlbGF5V2l0aFNlbGVjdG9yKHNvdXJjZSwgc3Vic2NyaXB0aW9uRGVsYXksIGRlbGF5RHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgdmFyIHN1YkRlbGF5LCBzZWxlY3Rvcjtcblx0ICAgIGlmIChpc0Z1bmN0aW9uKHN1YnNjcmlwdGlvbkRlbGF5KSkge1xuXHQgICAgICBzZWxlY3RvciA9IHN1YnNjcmlwdGlvbkRlbGF5O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc3ViRGVsYXkgPSBzdWJzY3JpcHRpb25EZWxheTtcblx0ICAgICAgc2VsZWN0b3IgPSBkZWxheUR1cmF0aW9uU2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgdmFyIGRlbGF5cyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCksIGF0RW5kID0gZmFsc2UsIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG5cdFxuXHQgICAgICBmdW5jdGlvbiBzdGFydCgpIHtcblx0ICAgICAgICBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShzb3VyY2Uuc3Vic2NyaWJlKFxuXHQgICAgICAgICAgZnVuY3Rpb24gKHgpIHtcblx0ICAgICAgICAgICAgdmFyIGRlbGF5ID0gdHJ5Q2F0Y2goc2VsZWN0b3IpKHgpO1xuXHQgICAgICAgICAgICBpZiAoZGVsYXkgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IoZGVsYXkuZSk7IH1cblx0ICAgICAgICAgICAgdmFyIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblx0ICAgICAgICAgICAgZGVsYXlzLmFkZChkKTtcblx0ICAgICAgICAgICAgZC5zZXREaXNwb3NhYmxlKGRlbGF5LnN1YnNjcmliZShcblx0ICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBvLm9uTmV4dCh4KTtcblx0ICAgICAgICAgICAgICAgIGRlbGF5cy5yZW1vdmUoZCk7XG5cdCAgICAgICAgICAgICAgICBkb25lKCk7XG5cdCAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH0sXG5cdCAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgby5vbk5leHQoeCk7XG5cdCAgICAgICAgICAgICAgICBkZWxheXMucmVtb3ZlKGQpO1xuXHQgICAgICAgICAgICAgICAgZG9uZSgpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgKSk7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LFxuXHQgICAgICAgICAgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBhdEVuZCA9IHRydWU7XG5cdCAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XG5cdCAgICAgICAgICAgIGRvbmUoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICApKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgZnVuY3Rpb24gZG9uZSAoKSB7XG5cdCAgICAgICAgYXRFbmQgJiYgZGVsYXlzLmxlbmd0aCA9PT0gMCAmJiBvLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghc3ViRGVsYXkpIHtcblx0ICAgICAgICBzdGFydCgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKHN1YkRlbGF5LnN1YnNjcmliZShzdGFydCwgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LCBzdGFydCkpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9uLCBkZWxheXMpO1xuXHQgICAgfSwgdGhpcyk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiAgVGltZSBzaGlmdHMgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgZHVlVGltZS5cblx0ICAgKiAgVGhlIHJlbGF0aXZlIHRpbWUgaW50ZXJ2YWxzIGJldHdlZW4gdGhlIHZhbHVlcyBhcmUgcHJlc2VydmVkLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGR1ZVRpbWUgQWJzb2x1dGUgKHNwZWNpZmllZCBhcyBhIERhdGUgb2JqZWN0KSBvciByZWxhdGl2ZSB0aW1lIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpIGJ5IHdoaWNoIHRvIHNoaWZ0IHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuXHQgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSBkZWxheSB0aW1lcnMgb24uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lb3V0IHNjaGVkdWxlciBpcyB1c2VkLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaW1lLXNoaWZ0ZWQgc2VxdWVuY2UuXG5cdCAgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLmRlbGF5ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGZpcnN0QXJnID0gYXJndW1lbnRzWzBdO1xuXHQgICAgaWYgKHR5cGVvZiBmaXJzdEFyZyA9PT0gJ251bWJlcicgfHwgZmlyc3RBcmcgaW5zdGFuY2VvZiBEYXRlKSB7XG5cdCAgICAgIHZhciBkdWVUaW1lID0gZmlyc3RBcmcsIHNjaGVkdWxlciA9IGFyZ3VtZW50c1sxXTtcblx0ICAgICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG5cdCAgICAgIHJldHVybiBkdWVUaW1lIGluc3RhbmNlb2YgRGF0ZSA/XG5cdCAgICAgICAgb2JzZXJ2YWJsZURlbGF5QWJzb2x1dGUodGhpcywgZHVlVGltZSwgc2NoZWR1bGVyKSA6XG5cdCAgICAgICAgb2JzZXJ2YWJsZURlbGF5UmVsYXRpdmUodGhpcywgZHVlVGltZSwgc2NoZWR1bGVyKTtcblx0ICAgIH0gZWxzZSBpZiAoT2JzZXJ2YWJsZS5pc09ic2VydmFibGUoZmlyc3RBcmcpIHx8IGlzRnVuY3Rpb24oZmlyc3RBcmcpKSB7XG5cdCAgICAgIHJldHVybiBkZWxheVdpdGhTZWxlY3Rvcih0aGlzLCBmaXJzdEFyZywgYXJndW1lbnRzWzFdKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMnKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICB2YXIgRGVib3VuY2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKERlYm91bmNlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIERlYm91bmNlT2JzZXJ2YWJsZShzb3VyY2UsIGR0LCBzKSB7XG5cdCAgICAgIGlzU2NoZWR1bGVyKHMpIHx8IChzID0gZGVmYXVsdFNjaGVkdWxlcik7XG5cdCAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICB0aGlzLl9kdCA9IGR0O1xuXHQgICAgICB0aGlzLl9zID0gcztcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgRGVib3VuY2VPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgdmFyIGNhbmNlbGFibGUgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuXHQgICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoXG5cdCAgICAgICAgdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBEZWJvdW5jZU9ic2VydmVyKG8sIHRoaXMuc291cmNlLCB0aGlzLl9kdCwgdGhpcy5fcywgY2FuY2VsYWJsZSkpLFxuXHQgICAgICAgIGNhbmNlbGFibGUpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gRGVib3VuY2VPYnNlcnZhYmxlO1xuXHQgIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblx0XG5cdCAgdmFyIERlYm91bmNlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoRGVib3VuY2VPYnNlcnZlciwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIERlYm91bmNlT2JzZXJ2ZXIob2JzZXJ2ZXIsIHNvdXJjZSwgZHVlVGltZSwgc2NoZWR1bGVyLCBjYW5jZWxhYmxlKSB7XG5cdCAgICAgIHRoaXMuX28gPSBvYnNlcnZlcjtcblx0ICAgICAgdGhpcy5fcyA9IHNvdXJjZTtcblx0ICAgICAgdGhpcy5fZCA9IGR1ZVRpbWU7XG5cdCAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgdGhpcy5fYyA9IGNhbmNlbGFibGU7XG5cdCAgICAgIHRoaXMuX3YgPSBudWxsO1xuXHQgICAgICB0aGlzLl9odiA9IGZhbHNlO1xuXHQgICAgICB0aGlzLl9pZCA9IDA7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIERlYm91bmNlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuXHQgICAgICB0aGlzLl9odiA9IHRydWU7XG5cdCAgICAgIHRoaXMuX3YgPSB4O1xuXHQgICAgICB2YXIgY3VycmVudElkID0gKyt0aGlzLl9pZCwgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXHQgICAgICB0aGlzLl9jLnNldERpc3Bvc2FibGUoZCk7XG5cdCAgICAgIGQuc2V0RGlzcG9zYWJsZSh0aGlzLl9zY2hlZHVsZXIuc2NoZWR1bGVGdXR1cmUodGhpcywgdGhpcy5fZCwgZnVuY3Rpb24gKF8sIHNlbGYpIHtcblx0ICAgICAgICBzZWxmLl9odiAmJiBzZWxmLl9pZCA9PT0gY3VycmVudElkICYmIHNlbGYuX28ub25OZXh0KHgpO1xuXHQgICAgICAgIHNlbGYuX2h2ID0gZmFsc2U7XG5cdCAgICAgIH0pKTtcblx0ICAgIH07XG5cdFxuXHQgICAgRGVib3VuY2VPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgICB0aGlzLl9jLmRpc3Bvc2UoKTtcblx0ICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuXHQgICAgICB0aGlzLl9odiA9IGZhbHNlO1xuXHQgICAgICB0aGlzLl9pZCsrO1xuXHQgICAgfTtcblx0XG5cdCAgICBEZWJvdW5jZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMuX2MuZGlzcG9zZSgpO1xuXHQgICAgICB0aGlzLl9odiAmJiB0aGlzLl9vLm9uTmV4dCh0aGlzLl92KTtcblx0ICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgICB0aGlzLl9odiA9IGZhbHNlO1xuXHQgICAgICB0aGlzLl9pZCsrO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gRGVib3VuY2VPYnNlcnZlcjtcblx0ICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblx0XG5cdCAgZnVuY3Rpb24gZGVib3VuY2VXaXRoU2VsZWN0b3Ioc291cmNlLCBkdXJhdGlvblNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgdmFyIHZhbHVlLCBoYXNWYWx1ZSA9IGZhbHNlLCBjYW5jZWxhYmxlID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSwgaWQgPSAwO1xuXHQgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gc291cmNlLnN1YnNjcmliZShcblx0ICAgICAgICBmdW5jdGlvbiAoeCkge1xuXHQgICAgICAgICAgdmFyIHRocm90dGxlID0gdHJ5Q2F0Y2goZHVyYXRpb25TZWxlY3RvcikoeCk7XG5cdCAgICAgICAgICBpZiAodGhyb3R0bGUgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IodGhyb3R0bGUuZSk7IH1cblx0XG5cdCAgICAgICAgICBpc1Byb21pc2UodGhyb3R0bGUpICYmICh0aHJvdHRsZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZSh0aHJvdHRsZSkpO1xuXHRcblx0ICAgICAgICAgIGhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICAgIHZhbHVlID0geDtcblx0ICAgICAgICAgIGlkKys7XG5cdCAgICAgICAgICB2YXIgY3VycmVudGlkID0gaWQsIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblx0ICAgICAgICAgIGNhbmNlbGFibGUuc2V0RGlzcG9zYWJsZShkKTtcblx0ICAgICAgICAgIGQuc2V0RGlzcG9zYWJsZSh0aHJvdHRsZS5zdWJzY3JpYmUoXG5cdCAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICBoYXNWYWx1ZSAmJiBpZCA9PT0gY3VycmVudGlkICYmIG8ub25OZXh0KHZhbHVlKTtcblx0ICAgICAgICAgICAgICBoYXNWYWx1ZSA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgIGQuZGlzcG9zZSgpO1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH0sXG5cdCAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICBoYXNWYWx1ZSAmJiBpZCA9PT0gY3VycmVudGlkICYmIG8ub25OZXh0KHZhbHVlKTtcblx0ICAgICAgICAgICAgICBoYXNWYWx1ZSA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgIGQuZGlzcG9zZSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICApKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICBjYW5jZWxhYmxlLmRpc3Bvc2UoKTtcblx0ICAgICAgICAgIG8ub25FcnJvcihlKTtcblx0ICAgICAgICAgIGhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgICBpZCsrO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgY2FuY2VsYWJsZS5kaXNwb3NlKCk7XG5cdCAgICAgICAgICBoYXNWYWx1ZSAmJiBvLm9uTmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgICAgICBoYXNWYWx1ZSA9IGZhbHNlO1xuXHQgICAgICAgICAgaWQrKztcblx0ICAgICAgICB9XG5cdCAgICAgICk7XG5cdCAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb24sIGNhbmNlbGFibGUpO1xuXHQgICAgfSwgc291cmNlKTtcblx0ICB9XG5cdFxuXHQgIG9ic2VydmFibGVQcm90by5kZWJvdW5jZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChpc0Z1bmN0aW9uIChhcmd1bWVudHNbMF0pKSB7XG5cdCAgICAgIHJldHVybiBkZWJvdW5jZVdpdGhTZWxlY3Rvcih0aGlzLCBhcmd1bWVudHNbMF0pO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnbnVtYmVyJykge1xuXHQgICAgICByZXR1cm4gbmV3IERlYm91bmNlT2JzZXJ2YWJsZSh0aGlzLCBhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnRzJyk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgdmFyIFRpbWVzdGFtcE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoVGltZXN0YW1wT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIFRpbWVzdGFtcE9ic2VydmFibGUoc291cmNlLCBzKSB7XG5cdCAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICB0aGlzLl9zID0gcztcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgVGltZXN0YW1wT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFRpbWVzdGFtcE9ic2VydmVyKG8sIHRoaXMuX3MpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFRpbWVzdGFtcE9ic2VydmFibGU7XG5cdCAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXHRcblx0ICB2YXIgVGltZXN0YW1wT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoVGltZXN0YW1wT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBUaW1lc3RhbXBPYnNlcnZlcihvLCBzKSB7XG5cdCAgICAgIHRoaXMuX28gPSBvO1xuXHQgICAgICB0aGlzLl9zID0gcztcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgVGltZXN0YW1wT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuXHQgICAgICB0aGlzLl9vLm9uTmV4dCh7IHZhbHVlOiB4LCB0aW1lc3RhbXA6IHRoaXMuX3Mubm93KCkgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFRpbWVzdGFtcE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgVGltZXN0YW1wT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gVGltZXN0YW1wT2JzZXJ2ZXI7XG5cdCAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICBSZWNvcmRzIHRoZSB0aW1lc3RhbXAgZm9yIGVhY2ggdmFsdWUgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cblx0ICAgKlxuXHQgICAqIEBleGFtcGxlXG5cdCAgICogIDEgLSByZXMgPSBzb3VyY2UudGltZXN0YW1wKCk7IC8vIHByb2R1Y2VzIHsgdmFsdWU6IHgsIHRpbWVzdGFtcDogdHMgfVxuXHQgICAqICAyIC0gcmVzID0gc291cmNlLnRpbWVzdGFtcChSeC5TY2hlZHVsZXIuZGVmYXVsdCk7XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB1c2VkIHRvIGNvbXB1dGUgdGltZXN0YW1wcy4gSWYgbm90IHNwZWNpZmllZCwgdGhlIGRlZmF1bHQgc2NoZWR1bGVyIGlzIHVzZWQuXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aW1lc3RhbXAgaW5mb3JtYXRpb24gb24gdmFsdWVzLlxuXHQgICAqL1xuXHQgIG9ic2VydmFibGVQcm90by50aW1lc3RhbXAgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG5cdCAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcblx0ICAgIHJldHVybiBuZXcgVGltZXN0YW1wT2JzZXJ2YWJsZSh0aGlzLCBzY2hlZHVsZXIpO1xuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIHNhbXBsZU9ic2VydmFibGUoc291cmNlLCBzYW1wbGVyKSB7XG5cdCAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgdmFyIGF0RW5kID0gZmFsc2UsIHZhbHVlLCBoYXNWYWx1ZSA9IGZhbHNlO1xuXHRcblx0ICAgICAgZnVuY3Rpb24gc2FtcGxlU3Vic2NyaWJlKCkge1xuXHQgICAgICAgIGlmIChoYXNWYWx1ZSkge1xuXHQgICAgICAgICAgaGFzVmFsdWUgPSBmYWxzZTtcblx0ICAgICAgICAgIG8ub25OZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgYXRFbmQgJiYgby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgc291cmNlU3Vic2NyaXB0aW9uID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cdCAgICAgIHNvdXJjZVN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUoXG5cdCAgICAgICAgZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG5cdCAgICAgICAgICBoYXNWYWx1ZSA9IHRydWU7XG5cdCAgICAgICAgICB2YWx1ZSA9IG5ld1ZhbHVlO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LFxuXHQgICAgICAgIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIGF0RW5kID0gdHJ1ZTtcblx0ICAgICAgICAgIHNvdXJjZVN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICApKTtcblx0XG5cdCAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcblx0ICAgICAgICBzb3VyY2VTdWJzY3JpcHRpb24sXG5cdCAgICAgICAgc2FtcGxlci5zdWJzY3JpYmUoc2FtcGxlU3Vic2NyaWJlLCBmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH0sIHNhbXBsZVN1YnNjcmliZSlcblx0ICAgICAgKTtcblx0ICAgIH0sIHNvdXJjZSk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiAgU2FtcGxlcyB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhdCBlYWNoIGludGVydmFsLlxuXHQgICAqXG5cdCAgICogQGV4YW1wbGVcblx0ICAgKiAgMSAtIHJlcyA9IHNvdXJjZS5zYW1wbGUoc2FtcGxlT2JzZXJ2YWJsZSk7IC8vIFNhbXBsZXIgdGljayBzZXF1ZW5jZVxuXHQgICAqICAyIC0gcmVzID0gc291cmNlLnNhbXBsZSg1MDAwKTsgLy8gNSBzZWNvbmRzXG5cdCAgICogIDIgLSByZXMgPSBzb3VyY2Uuc2FtcGxlKDUwMDAsIFJ4LlNjaGVkdWxlci50aW1lb3V0KTsgLy8gNSBzZWNvbmRzXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge01peGVkfSBpbnRlcnZhbE9yU2FtcGxlciBJbnRlcnZhbCBhdCB3aGljaCB0byBzYW1wbGUgKHNwZWNpZmllZCBhcyBhbiBpbnRlZ2VyIGRlbm90aW5nIG1pbGxpc2Vjb25kcykgb3IgU2FtcGxlciBPYnNlcnZhYmxlLlxuXHQgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSAgU2NoZWR1bGVyIHRvIHJ1biB0aGUgc2FtcGxpbmcgdGltZXIgb24uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lb3V0IHNjaGVkdWxlciBpcyB1c2VkLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBTYW1wbGVkIG9ic2VydmFibGUgc2VxdWVuY2UuXG5cdCAgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLnNhbXBsZSA9IG9ic2VydmFibGVQcm90by50aHJvdHRsZUxhdGVzdCA9IGZ1bmN0aW9uIChpbnRlcnZhbE9yU2FtcGxlciwgc2NoZWR1bGVyKSB7XG5cdCAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcblx0ICAgIHJldHVybiB0eXBlb2YgaW50ZXJ2YWxPclNhbXBsZXIgPT09ICdudW1iZXInID9cblx0ICAgICAgc2FtcGxlT2JzZXJ2YWJsZSh0aGlzLCBvYnNlcnZhYmxlaW50ZXJ2YWwoaW50ZXJ2YWxPclNhbXBsZXIsIHNjaGVkdWxlcikpIDpcblx0ICAgICAgc2FtcGxlT2JzZXJ2YWJsZSh0aGlzLCBpbnRlcnZhbE9yU2FtcGxlcik7XG5cdCAgfTtcblx0XG5cdCAgdmFyIFRpbWVvdXRFcnJvciA9IFJ4LlRpbWVvdXRFcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblx0ICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2UgfHwgJ1RpbWVvdXQgaGFzIG9jY3VycmVkJztcblx0ICAgIHRoaXMubmFtZSA9ICdUaW1lb3V0RXJyb3InO1xuXHQgICAgRXJyb3IuY2FsbCh0aGlzKTtcblx0ICB9O1xuXHQgIFRpbWVvdXRFcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5cdFxuXHQgIGZ1bmN0aW9uIHRpbWVvdXRXaXRoU2VsZWN0b3Ioc291cmNlLCBmaXJzdFRpbWVvdXQsIHRpbWVvdXREdXJhdGlvblNlbGVjdG9yLCBvdGhlcikge1xuXHQgICAgaWYgKGlzRnVuY3Rpb24oZmlyc3RUaW1lb3V0KSkge1xuXHQgICAgICBvdGhlciA9IHRpbWVvdXREdXJhdGlvblNlbGVjdG9yO1xuXHQgICAgICB0aW1lb3V0RHVyYXRpb25TZWxlY3RvciA9IGZpcnN0VGltZW91dDtcblx0ICAgICAgZmlyc3RUaW1lb3V0ID0gb2JzZXJ2YWJsZU5ldmVyKCk7XG5cdCAgICB9XG5cdCAgICBPYnNlcnZhYmxlLmlzT2JzZXJ2YWJsZShvdGhlcikgfHwgKG90aGVyID0gb2JzZXJ2YWJsZVRocm93KG5ldyBUaW1lb3V0RXJyb3IoKSkpO1xuXHQgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuXHQgICAgICAgIHRpbWVyID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSxcblx0ICAgICAgICBvcmlnaW5hbCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXHRcblx0ICAgICAgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUob3JpZ2luYWwpO1xuXHRcblx0ICAgICAgdmFyIGlkID0gMCwgc3dpdGNoZWQgPSBmYWxzZTtcblx0XG5cdCAgICAgIGZ1bmN0aW9uIHNldFRpbWVyKHRpbWVvdXQpIHtcblx0ICAgICAgICB2YXIgbXlJZCA9IGlkLCBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIHRpbWVyV2lucygpIHtcblx0ICAgICAgICAgIHN3aXRjaGVkID0gKG15SWQgPT09IGlkKTtcblx0ICAgICAgICAgIHJldHVybiBzd2l0Y2hlZDtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRpbWVyLnNldERpc3Bvc2FibGUoZCk7XG5cdCAgICAgICAgZC5zZXREaXNwb3NhYmxlKHRpbWVvdXQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHRpbWVyV2lucygpICYmIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKG90aGVyLnN1YnNjcmliZShvKSk7XG5cdCAgICAgICAgICBkLmRpc3Bvc2UoKTtcblx0ICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgICAgdGltZXJXaW5zKCkgJiYgby5vbkVycm9yKGUpO1xuXHQgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHRpbWVyV2lucygpICYmIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKG90aGVyLnN1YnNjcmliZShvKSk7XG5cdCAgICAgICAgfSkpO1xuXHQgICAgICB9O1xuXHRcblx0ICAgICAgc2V0VGltZXIoZmlyc3RUaW1lb3V0KTtcblx0XG5cdCAgICAgIGZ1bmN0aW9uIG9XaW5zKCkge1xuXHQgICAgICAgIHZhciByZXMgPSAhc3dpdGNoZWQ7XG5cdCAgICAgICAgaWYgKHJlcykgeyBpZCsrOyB9XG5cdCAgICAgICAgcmV0dXJuIHJlcztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgb3JpZ2luYWwuc2V0RGlzcG9zYWJsZShzb3VyY2Uuc3Vic2NyaWJlKGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgICAgaWYgKG9XaW5zKCkpIHtcblx0ICAgICAgICAgIG8ub25OZXh0KHgpO1xuXHQgICAgICAgICAgdmFyIHRpbWVvdXQgPSB0cnlDYXRjaCh0aW1lb3V0RHVyYXRpb25TZWxlY3RvcikoeCk7XG5cdCAgICAgICAgICBpZiAodGltZW91dCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcih0aW1lb3V0LmUpOyB9XG5cdCAgICAgICAgICBzZXRUaW1lcihpc1Byb21pc2UodGltZW91dCkgPyBvYnNlcnZhYmxlRnJvbVByb21pc2UodGltZW91dCkgOiB0aW1lb3V0KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgb1dpbnMoKSAmJiBvLm9uRXJyb3IoZSk7XG5cdCAgICAgIH0sIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBvV2lucygpICYmIG8ub25Db21wbGV0ZWQoKTtcblx0ICAgICAgfSkpO1xuXHQgICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9uLCB0aW1lcik7XG5cdCAgICB9LCBzb3VyY2UpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdGltZW91dChzb3VyY2UsIGR1ZVRpbWUsIG90aGVyLCBzY2hlZHVsZXIpIHtcblx0ICAgIGlmIChpc1NjaGVkdWxlcihvdGhlcikpIHtcblx0ICAgICAgc2NoZWR1bGVyID0gb3RoZXI7XG5cdCAgICAgIG90aGVyID0gb2JzZXJ2YWJsZVRocm93KG5ldyBUaW1lb3V0RXJyb3IoKSk7XG5cdCAgICB9XG5cdCAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBFcnJvcikgeyBvdGhlciA9IG9ic2VydmFibGVUaHJvdyhvdGhlcik7IH1cblx0ICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuXHQgICAgT2JzZXJ2YWJsZS5pc09ic2VydmFibGUob3RoZXIpIHx8IChvdGhlciA9IG9ic2VydmFibGVUaHJvdyhuZXcgVGltZW91dEVycm9yKCkpKTtcblx0ICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuXHQgICAgICB2YXIgaWQgPSAwLFxuXHQgICAgICAgIG9yaWdpbmFsID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksXG5cdCAgICAgICAgc3Vic2NyaXB0aW9uID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSxcblx0ICAgICAgICBzd2l0Y2hlZCA9IGZhbHNlLFxuXHQgICAgICAgIHRpbWVyID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcblx0XG5cdCAgICAgIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKG9yaWdpbmFsKTtcblx0XG5cdCAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRpbWVyKCkge1xuXHQgICAgICAgIHZhciBteUlkID0gaWQ7XG5cdCAgICAgICAgdGltZXIuc2V0RGlzcG9zYWJsZShzY2hlZHVsZXIuc2NoZWR1bGVGdXR1cmUobnVsbCwgZHVlVGltZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgc3dpdGNoZWQgPSBpZCA9PT0gbXlJZDtcblx0ICAgICAgICAgIGlmIChzd2l0Y2hlZCkge1xuXHQgICAgICAgICAgICBpc1Byb21pc2Uob3RoZXIpICYmIChvdGhlciA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShvdGhlcikpO1xuXHQgICAgICAgICAgICBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShvdGhlci5zdWJzY3JpYmUobykpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgY3JlYXRlVGltZXIoKTtcblx0XG5cdCAgICAgIG9yaWdpbmFsLnNldERpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShmdW5jdGlvbiAoeCkge1xuXHQgICAgICAgIGlmICghc3dpdGNoZWQpIHtcblx0ICAgICAgICAgIGlkKys7XG5cdCAgICAgICAgICBvLm9uTmV4dCh4KTtcblx0ICAgICAgICAgIGNyZWF0ZVRpbWVyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIGlmICghc3dpdGNoZWQpIHtcblx0ICAgICAgICAgIGlkKys7XG5cdCAgICAgICAgICBvLm9uRXJyb3IoZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKCFzd2l0Y2hlZCkge1xuXHQgICAgICAgICAgaWQrKztcblx0ICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pKTtcblx0ICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbiwgdGltZXIpO1xuXHQgICAgfSwgc291cmNlKTtcblx0ICB9XG5cdFxuXHQgIG9ic2VydmFibGVQcm90by50aW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGZpcnN0QXJnID0gYXJndW1lbnRzWzBdO1xuXHQgICAgaWYgKGZpcnN0QXJnIGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgZmlyc3RBcmcgPT09ICdudW1iZXInKSB7XG5cdCAgICAgIHJldHVybiB0aW1lb3V0KHRoaXMsIGZpcnN0QXJnLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG5cdCAgICB9IGVsc2UgaWYgKE9ic2VydmFibGUuaXNPYnNlcnZhYmxlKGZpcnN0QXJnKSB8fCBpc0Z1bmN0aW9uKGZpcnN0QXJnKSkge1xuXHQgICAgICByZXR1cm4gdGltZW91dFdpdGhTZWxlY3Rvcih0aGlzLCBmaXJzdEFyZywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50cycpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIG9ubHkgdGhlIGZpcnN0IGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgZHVyaW5nIHNlcXVlbnRpYWwgdGltZSB3aW5kb3dzIG9mIGEgc3BlY2lmaWVkIGR1cmF0aW9uLlxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSB3aW5kb3dEdXJhdGlvbiB0aW1lIHRvIHdhaXQgYmVmb3JlIGVtaXR0aW5nIGFub3RoZXIgaXRlbSBhZnRlciBlbWl0dGluZyB0aGUgbGFzdCBpdGVtXG5cdCAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIHRoZSBTY2hlZHVsZXIgdG8gdXNlIGludGVybmFsbHkgdG8gbWFuYWdlIHRoZSB0aW1lcnMgdGhhdCBoYW5kbGUgdGltZW91dCBmb3IgZWFjaCBpdGVtLiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci50aW1lb3V0LlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgcGVyZm9ybXMgdGhlIHRocm90dGxlIG9wZXJhdGlvbi5cblx0ICAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG8udGhyb3R0bGUgPSBmdW5jdGlvbiAod2luZG93RHVyYXRpb24sIHNjaGVkdWxlcikge1xuXHQgICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG5cdCAgICB2YXIgZHVyYXRpb24gPSArd2luZG93RHVyYXRpb24gfHwgMDtcblx0ICAgIGlmIChkdXJhdGlvbiA8PSAwKSB7IHRocm93IG5ldyBSYW5nZUVycm9yKCd3aW5kb3dEdXJhdGlvbiBjYW5ub3QgYmUgbGVzcyBvciBlcXVhbCB6ZXJvLicpOyB9XG5cdCAgICB2YXIgc291cmNlID0gdGhpcztcblx0ICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuXHQgICAgICB2YXIgbGFzdE9uTmV4dCA9IDA7XG5cdCAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKFxuXHQgICAgICAgIGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgICAgICB2YXIgbm93ID0gc2NoZWR1bGVyLm5vdygpO1xuXHQgICAgICAgICAgaWYgKGxhc3RPbk5leHQgPT09IDAgfHwgbm93IC0gbGFzdE9uTmV4dCA+PSBkdXJhdGlvbikge1xuXHQgICAgICAgICAgICBsYXN0T25OZXh0ID0gbm93O1xuXHQgICAgICAgICAgICBvLm9uTmV4dCh4KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LGZ1bmN0aW9uIChlKSB7IG8ub25FcnJvcihlKTsgfSwgZnVuY3Rpb24gKCkgeyBvLm9uQ29tcGxldGVkKCk7IH1cblx0ICAgICAgKTtcblx0ICAgIH0sIHNvdXJjZSk7XG5cdCAgfTtcblx0XG5cdCAgdmFyIFBhdXNhYmxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhQYXVzYWJsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBQYXVzYWJsZU9ic2VydmFibGUoc291cmNlLCBwYXVzZXIpIHtcblx0ICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBTdWJqZWN0KCk7XG5cdFxuXHQgICAgICBpZiAocGF1c2VyICYmIHBhdXNlci5zdWJzY3JpYmUpIHtcblx0ICAgICAgICB0aGlzLnBhdXNlciA9IHRoaXMuY29udHJvbGxlci5tZXJnZShwYXVzZXIpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMucGF1c2VyID0gdGhpcy5jb250cm9sbGVyO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBQYXVzYWJsZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuXHQgICAgICB2YXIgY29ubiA9IHRoaXMuc291cmNlLnB1Ymxpc2goKSxcblx0ICAgICAgICBzdWJzY3JpcHRpb24gPSBjb25uLnN1YnNjcmliZShvKSxcblx0ICAgICAgICBjb25uZWN0aW9uID0gZGlzcG9zYWJsZUVtcHR5O1xuXHRcblx0ICAgICAgdmFyIHBhdXNhYmxlID0gdGhpcy5wYXVzZXIuZGlzdGluY3RVbnRpbENoYW5nZWQoKS5zdWJzY3JpYmUoZnVuY3Rpb24gKGIpIHtcblx0ICAgICAgICBpZiAoYikge1xuXHQgICAgICAgICAgY29ubmVjdGlvbiA9IGNvbm4uY29ubmVjdCgpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBjb25uZWN0aW9uLmRpc3Bvc2UoKTtcblx0ICAgICAgICAgIGNvbm5lY3Rpb24gPSBkaXNwb3NhYmxlRW1wdHk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIHJldHVybiBuZXcgTkFyeURpc3Bvc2FibGUoW3N1YnNjcmlwdGlvbiwgY29ubmVjdGlvbiwgcGF1c2FibGVdKTtcblx0ICAgIH07XG5cdFxuXHQgICAgUGF1c2FibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5jb250cm9sbGVyLm9uTmV4dChmYWxzZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFBhdXNhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aGlzLmNvbnRyb2xsZXIub25OZXh0KHRydWUpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gUGF1c2FibGVPYnNlcnZhYmxlO1xuXHRcblx0ICB9KE9ic2VydmFibGUpKTtcblx0XG5cdCAgLyoqXG5cdCAgICogUGF1c2VzIHRoZSB1bmRlcmx5aW5nIG9ic2VydmFibGUgc2VxdWVuY2UgYmFzZWQgdXBvbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCB5aWVsZHMgdHJ1ZS9mYWxzZS5cblx0ICAgKiBAZXhhbXBsZVxuXHQgICAqIHZhciBwYXVzZXIgPSBuZXcgUnguU3ViamVjdCgpO1xuXHQgICAqIHZhciBzb3VyY2UgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMCkucGF1c2FibGUocGF1c2VyKTtcblx0ICAgKiBAcGFyYW0ge09ic2VydmFibGV9IHBhdXNlciBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB1c2VkIHRvIHBhdXNlIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCBpcyBwYXVzZWQgYmFzZWQgdXBvbiB0aGUgcGF1c2VyLlxuXHQgICAqL1xuXHQgIG9ic2VydmFibGVQcm90by5wYXVzYWJsZSA9IGZ1bmN0aW9uIChwYXVzZXIpIHtcblx0ICAgIHJldHVybiBuZXcgUGF1c2FibGVPYnNlcnZhYmxlKHRoaXMsIHBhdXNlcik7XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gY29tYmluZUxhdGVzdFNvdXJjZShzb3VyY2UsIHN1YmplY3QsIHJlc3VsdFNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgdmFyIGhhc1ZhbHVlID0gW2ZhbHNlLCBmYWxzZV0sXG5cdCAgICAgICAgaGFzVmFsdWVBbGwgPSBmYWxzZSxcblx0ICAgICAgICBpc0RvbmUgPSBmYWxzZSxcblx0ICAgICAgICB2YWx1ZXMgPSBuZXcgQXJyYXkoMiksXG5cdCAgICAgICAgZXJyO1xuXHRcblx0ICAgICAgZnVuY3Rpb24gbmV4dCh4LCBpKSB7XG5cdCAgICAgICAgdmFsdWVzW2ldID0geDtcblx0ICAgICAgICBoYXNWYWx1ZVtpXSA9IHRydWU7XG5cdCAgICAgICAgaWYgKGhhc1ZhbHVlQWxsIHx8IChoYXNWYWx1ZUFsbCA9IGhhc1ZhbHVlLmV2ZXJ5KGlkZW50aXR5KSkpIHtcblx0ICAgICAgICAgIGlmIChlcnIpIHsgcmV0dXJuIG8ub25FcnJvcihlcnIpOyB9XG5cdCAgICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2gocmVzdWx0U2VsZWN0b3IpLmFwcGx5KG51bGwsIHZhbHVlcyk7XG5cdCAgICAgICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHJlcy5lKTsgfVxuXHQgICAgICAgICAgby5vbk5leHQocmVzKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaXNEb25lICYmIHZhbHVlc1sxXSAmJiBvLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcblx0ICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKFxuXHQgICAgICAgICAgZnVuY3Rpb24gKHgpIHtcblx0ICAgICAgICAgICAgbmV4dCh4LCAwKTtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgICAgICBpZiAodmFsdWVzWzFdKSB7XG5cdCAgICAgICAgICAgICAgby5vbkVycm9yKGUpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIGVyciA9IGU7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIGlzRG9uZSA9IHRydWU7XG5cdCAgICAgICAgICAgIHZhbHVlc1sxXSAmJiBvLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgICAgICB9KSxcblx0ICAgICAgICBzdWJqZWN0LnN1YnNjcmliZShcblx0ICAgICAgICAgIGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgICAgICAgIG5leHQoeCwgMSk7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LFxuXHQgICAgICAgICAgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBpc0RvbmUgPSB0cnVlO1xuXHQgICAgICAgICAgICBuZXh0KHRydWUsIDEpO1xuXHQgICAgICAgICAgfSlcblx0ICAgICAgICApO1xuXHQgICAgfSwgc291cmNlKTtcblx0ICB9XG5cdFxuXHQgIHZhciBQYXVzYWJsZUJ1ZmZlcmVkT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhQYXVzYWJsZUJ1ZmZlcmVkT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIFBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlKHNvdXJjZSwgcGF1c2VyKSB7XG5cdCAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXcgU3ViamVjdCgpO1xuXHRcblx0ICAgICAgaWYgKHBhdXNlciAmJiBwYXVzZXIuc3Vic2NyaWJlKSB7XG5cdCAgICAgICAgdGhpcy5wYXVzZXIgPSB0aGlzLmNvbnRyb2xsZXIubWVyZ2UocGF1c2VyKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLnBhdXNlciA9IHRoaXMuY29udHJvbGxlcjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuXHQgICAgICB2YXIgcSA9IFtdLCBwcmV2aW91c1Nob3VsZEZpcmU7XG5cdFxuXHQgICAgICBmdW5jdGlvbiBkcmFpblF1ZXVlKCkgeyB3aGlsZSAocS5sZW5ndGggPiAwKSB7IG8ub25OZXh0KHEuc2hpZnQoKSk7IH0gfVxuXHRcblx0ICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9XG5cdCAgICAgICAgY29tYmluZUxhdGVzdFNvdXJjZShcblx0ICAgICAgICAgIHRoaXMuc291cmNlLFxuXHQgICAgICAgICAgdGhpcy5wYXVzZXIuc3RhcnRXaXRoKGZhbHNlKS5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpLFxuXHQgICAgICAgICAgZnVuY3Rpb24gKGRhdGEsIHNob3VsZEZpcmUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogZGF0YSwgc2hvdWxkRmlyZTogc2hvdWxkRmlyZSB9O1xuXHQgICAgICAgICAgfSlcblx0ICAgICAgICAgIC5zdWJzY3JpYmUoXG5cdCAgICAgICAgICAgIGZ1bmN0aW9uIChyZXN1bHRzKSB7XG5cdCAgICAgICAgICAgICAgaWYgKHByZXZpb3VzU2hvdWxkRmlyZSAhPT0gdW5kZWZpbmVkICYmIHJlc3VsdHMuc2hvdWxkRmlyZSAhPT0gcHJldmlvdXNTaG91bGRGaXJlKSB7XG5cdCAgICAgICAgICAgICAgICBwcmV2aW91c1Nob3VsZEZpcmUgPSByZXN1bHRzLnNob3VsZEZpcmU7XG5cdCAgICAgICAgICAgICAgICAvLyBjaGFuZ2UgaW4gc2hvdWxkRmlyZVxuXHQgICAgICAgICAgICAgICAgaWYgKHJlc3VsdHMuc2hvdWxkRmlyZSkgeyBkcmFpblF1ZXVlKCk7IH1cblx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgcHJldmlvdXNTaG91bGRGaXJlID0gcmVzdWx0cy5zaG91bGRGaXJlO1xuXHQgICAgICAgICAgICAgICAgLy8gbmV3IGRhdGFcblx0ICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzLnNob3VsZEZpcmUpIHtcblx0ICAgICAgICAgICAgICAgICAgby5vbk5leHQocmVzdWx0cy5kYXRhKTtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgIHEucHVzaChyZXN1bHRzLmRhdGEpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgICAgICAgIGRyYWluUXVldWUoKTtcblx0ICAgICAgICAgICAgICBvLm9uRXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgIGRyYWluUXVldWUoKTtcblx0ICAgICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICk7XG5cdCAgICAgIHJldHVybiBzdWJzY3JpcHRpb247ICAgICAgXG5cdCAgICB9O1xuXHRcblx0ICAgIFBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5jb250cm9sbGVyLm9uTmV4dChmYWxzZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMuY29udHJvbGxlci5vbk5leHQodHJ1ZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBQYXVzYWJsZUJ1ZmZlcmVkT2JzZXJ2YWJsZTtcblx0XG5cdCAgfShPYnNlcnZhYmxlKSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIFBhdXNlcyB0aGUgdW5kZXJseWluZyBvYnNlcnZhYmxlIHNlcXVlbmNlIGJhc2VkIHVwb24gdGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggeWllbGRzIHRydWUvZmFsc2UsXG5cdCAgICogYW5kIHlpZWxkcyB0aGUgdmFsdWVzIHRoYXQgd2VyZSBidWZmZXJlZCB3aGlsZSBwYXVzZWQuXG5cdCAgICogQGV4YW1wbGVcblx0ICAgKiB2YXIgcGF1c2VyID0gbmV3IFJ4LlN1YmplY3QoKTtcblx0ICAgKiB2YXIgc291cmNlID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDApLnBhdXNhYmxlQnVmZmVyZWQocGF1c2VyKTtcblx0ICAgKiBAcGFyYW0ge09ic2VydmFibGV9IHBhdXNlciBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB1c2VkIHRvIHBhdXNlIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlLlxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCBpcyBwYXVzZWQgYmFzZWQgdXBvbiB0aGUgcGF1c2VyLlxuXHQgICAqL1xuXHQgIG9ic2VydmFibGVQcm90by5wYXVzYWJsZUJ1ZmZlcmVkID0gZnVuY3Rpb24gKHBhdXNlcikge1xuXHQgICAgcmV0dXJuIG5ldyBQYXVzYWJsZUJ1ZmZlcmVkT2JzZXJ2YWJsZSh0aGlzLCBwYXVzZXIpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBDb250cm9sbGVkT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhDb250cm9sbGVkT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIENvbnRyb2xsZWRPYnNlcnZhYmxlIChzb3VyY2UsIGVuYWJsZVF1ZXVlLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICAgIHRoaXMuc3ViamVjdCA9IG5ldyBDb250cm9sbGVkU3ViamVjdChlbmFibGVRdWV1ZSwgc2NoZWR1bGVyKTtcblx0ICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2UubXVsdGljYXN0KHRoaXMuc3ViamVjdCkucmVmQ291bnQoKTtcblx0ICAgIH1cblx0XG5cdCAgICBDb250cm9sbGVkT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIENvbnRyb2xsZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5yZXF1ZXN0ID0gZnVuY3Rpb24gKG51bWJlck9mSXRlbXMpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc3ViamVjdC5yZXF1ZXN0KG51bWJlck9mSXRlbXMgPT0gbnVsbCA/IC0xIDogbnVtYmVyT2ZJdGVtcyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBDb250cm9sbGVkT2JzZXJ2YWJsZTtcblx0XG5cdCAgfShPYnNlcnZhYmxlKSk7XG5cdFxuXHQgIHZhciBDb250cm9sbGVkU3ViamVjdCA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhDb250cm9sbGVkU3ViamVjdCwgX19zdXBlcl9fKTtcblx0ICAgIGZ1bmN0aW9uIENvbnRyb2xsZWRTdWJqZWN0KGVuYWJsZVF1ZXVlLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgZW5hYmxlUXVldWUgPT0gbnVsbCAmJiAoZW5hYmxlUXVldWUgPSB0cnVlKTtcblx0XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgICB0aGlzLnN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xuXHQgICAgICB0aGlzLmVuYWJsZVF1ZXVlID0gZW5hYmxlUXVldWU7XG5cdCAgICAgIHRoaXMucXVldWUgPSBlbmFibGVRdWV1ZSA/IFtdIDogbnVsbDtcblx0ICAgICAgdGhpcy5yZXF1ZXN0ZWRDb3VudCA9IDA7XG5cdCAgICAgIHRoaXMucmVxdWVzdGVkRGlzcG9zYWJsZSA9IG51bGw7XG5cdCAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuXHQgICAgICB0aGlzLmhhc0ZhaWxlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlciB8fCBjdXJyZW50VGhyZWFkU2NoZWR1bGVyO1xuXHQgICAgfVxuXHRcblx0ICAgIGFkZFByb3BlcnRpZXMoQ29udHJvbGxlZFN1YmplY3QucHJvdG90eXBlLCBPYnNlcnZlciwge1xuXHQgICAgICBfc3Vic2NyaWJlOiBmdW5jdGlvbiAobykge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnN1YmplY3Quc3Vic2NyaWJlKG8pO1xuXHQgICAgICB9LFxuXHQgICAgICBvbkNvbXBsZXRlZDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcblx0ICAgICAgICBpZiAoIXRoaXMuZW5hYmxlUXVldWUgfHwgdGhpcy5xdWV1ZS5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgIHRoaXMuc3ViamVjdC5vbkNvbXBsZXRlZCgpO1xuXHQgICAgICAgICAgdGhpcy5kaXNwb3NlQ3VycmVudFJlcXVlc3QoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKE5vdGlmaWNhdGlvbi5jcmVhdGVPbkNvbXBsZXRlZCgpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdCAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuXHQgICAgICAgIHRoaXMuaGFzRmFpbGVkID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG5cdCAgICAgICAgaWYgKCF0aGlzLmVuYWJsZVF1ZXVlIHx8IHRoaXMucXVldWUubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICB0aGlzLnN1YmplY3Qub25FcnJvcihlcnJvcik7XG5cdCAgICAgICAgICB0aGlzLmRpc3Bvc2VDdXJyZW50UmVxdWVzdCgpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goTm90aWZpY2F0aW9uLmNyZWF0ZU9uRXJyb3IoZXJyb3IpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdCAgICAgIG9uTmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgaWYgKHRoaXMucmVxdWVzdGVkQ291bnQgPD0gMCkge1xuXHQgICAgICAgICAgdGhpcy5lbmFibGVRdWV1ZSAmJiB0aGlzLnF1ZXVlLnB1c2goTm90aWZpY2F0aW9uLmNyZWF0ZU9uTmV4dCh2YWx1ZSkpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAodGhpcy5yZXF1ZXN0ZWRDb3VudC0tID09PSAwKSAmJiB0aGlzLmRpc3Bvc2VDdXJyZW50UmVxdWVzdCgpO1xuXHQgICAgICAgICAgdGhpcy5zdWJqZWN0Lm9uTmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHQgICAgICBfcHJvY2Vzc1JlcXVlc3Q6IGZ1bmN0aW9uIChudW1iZXJPZkl0ZW1zKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuZW5hYmxlUXVldWUpIHtcblx0ICAgICAgICAgIHdoaWxlICh0aGlzLnF1ZXVlLmxlbmd0aCA+IDAgJiYgKG51bWJlck9mSXRlbXMgPiAwIHx8IHRoaXMucXVldWVbMF0ua2luZCAhPT0gJ04nKSkge1xuXHQgICAgICAgICAgICB2YXIgZmlyc3QgPSB0aGlzLnF1ZXVlLnNoaWZ0KCk7XG5cdCAgICAgICAgICAgIGZpcnN0LmFjY2VwdCh0aGlzLnN1YmplY3QpO1xuXHQgICAgICAgICAgICBpZiAoZmlyc3Qua2luZCA9PT0gJ04nKSB7XG5cdCAgICAgICAgICAgICAgbnVtYmVyT2ZJdGVtcy0tO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZUN1cnJlbnRSZXF1ZXN0KCk7XG5cdCAgICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gbnVtYmVyT2ZJdGVtcztcblx0ICAgICAgfSxcblx0ICAgICAgcmVxdWVzdDogZnVuY3Rpb24gKG51bWJlcikge1xuXHQgICAgICAgIHRoaXMuZGlzcG9zZUN1cnJlbnRSZXF1ZXN0KCk7XG5cdCAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHRcblx0ICAgICAgICB0aGlzLnJlcXVlc3RlZERpc3Bvc2FibGUgPSB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShudW1iZXIsXG5cdCAgICAgICAgZnVuY3Rpb24ocywgaSkge1xuXHQgICAgICAgICAgdmFyIHJlbWFpbmluZyA9IHNlbGYuX3Byb2Nlc3NSZXF1ZXN0KGkpO1xuXHQgICAgICAgICAgdmFyIHN0b3BwZWQgPSBzZWxmLmhhc0NvbXBsZXRlZCB8fCBzZWxmLmhhc0ZhaWxlZDtcblx0ICAgICAgICAgIGlmICghc3RvcHBlZCAmJiByZW1haW5pbmcgPiAwKSB7XG5cdCAgICAgICAgICAgIHNlbGYucmVxdWVzdGVkQ291bnQgPSByZW1haW5pbmc7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUNyZWF0ZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgc2VsZi5yZXF1ZXN0ZWRDb3VudCA9IDA7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgIC8vIFNjaGVkdWxlZCBpdGVtIGlzIHN0aWxsIGluIHByb2dyZXNzLiBSZXR1cm4gYSBuZXdcblx0ICAgICAgICAgICAgICAvLyBkaXNwb3NhYmxlIHRvIGFsbG93IHRoZSByZXF1ZXN0IHRvIGJlIGludGVycnVwdGVkXG5cdCAgICAgICAgICAgICAgLy8gdmlhIGRpc3Bvc2UuXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RlZERpc3Bvc2FibGU7XG5cdCAgICAgIH0sXG5cdCAgICAgIGRpc3Bvc2VDdXJyZW50UmVxdWVzdDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh0aGlzLnJlcXVlc3RlZERpc3Bvc2FibGUpIHtcblx0ICAgICAgICAgIHRoaXMucmVxdWVzdGVkRGlzcG9zYWJsZS5kaXNwb3NlKCk7XG5cdCAgICAgICAgICB0aGlzLnJlcXVlc3RlZERpc3Bvc2FibGUgPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgcmV0dXJuIENvbnRyb2xsZWRTdWJqZWN0O1xuXHQgIH0oT2JzZXJ2YWJsZSkpO1xuXHRcblx0ICAvKipcblx0ICAgKiBBdHRhY2hlcyBhIGNvbnRyb2xsZXIgdG8gdGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgYWJpbGl0eSB0byBxdWV1ZS5cblx0ICAgKiBAZXhhbXBsZVxuXHQgICAqIHZhciBzb3VyY2UgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMCkuY29udHJvbGxlZCgpO1xuXHQgICAqIHNvdXJjZS5yZXF1ZXN0KDMpOyAvLyBSZWFkcyAzIHZhbHVlc1xuXHQgICAqIEBwYXJhbSB7Ym9vbH0gZW5hYmxlUXVldWUgdHJ1dGh5IHZhbHVlIHRvIGRldGVybWluZSBpZiB2YWx1ZXMgc2hvdWxkIGJlIHF1ZXVlZCBwZW5kaW5nIHRoZSBuZXh0IHJlcXVlc3Rcblx0ICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIGRldGVybWluZXMgaG93IHRoZSByZXF1ZXN0cyB3aWxsIGJlIHNjaGVkdWxlZFxuXHQgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCBvbmx5IHByb3BhZ2F0ZXMgdmFsdWVzIG9uIHJlcXVlc3QuXG5cdCAgICovXG5cdCAgb2JzZXJ2YWJsZVByb3RvLmNvbnRyb2xsZWQgPSBmdW5jdGlvbiAoZW5hYmxlUXVldWUsIHNjaGVkdWxlcikge1xuXHRcblx0ICAgIGlmIChlbmFibGVRdWV1ZSAmJiBpc1NjaGVkdWxlcihlbmFibGVRdWV1ZSkpIHtcblx0ICAgICAgc2NoZWR1bGVyID0gZW5hYmxlUXVldWU7XG5cdCAgICAgIGVuYWJsZVF1ZXVlID0gdHJ1ZTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoZW5hYmxlUXVldWUgPT0gbnVsbCkgeyAgZW5hYmxlUXVldWUgPSB0cnVlOyB9XG5cdCAgICByZXR1cm4gbmV3IENvbnRyb2xsZWRPYnNlcnZhYmxlKHRoaXMsIGVuYWJsZVF1ZXVlLCBzY2hlZHVsZXIpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFBpcGVzIHRoZSBleGlzdGluZyBPYnNlcnZhYmxlIHNlcXVlbmNlIGludG8gYSBOb2RlLmpzIFN0cmVhbS5cblx0ICAgKiBAcGFyYW0ge1N0cmVhbX0gZGVzdCBUaGUgZGVzdGluYXRpb24gTm9kZS5qcyBzdHJlYW0uXG5cdCAgICogQHJldHVybnMge1N0cmVhbX0gVGhlIGRlc3RpbmF0aW9uIHN0cmVhbS5cblx0ICAgKi9cblx0ICBvYnNlcnZhYmxlUHJvdG8ucGlwZSA9IGZ1bmN0aW9uIChkZXN0KSB7XG5cdCAgICB2YXIgc291cmNlID0gdGhpcy5wYXVzYWJsZUJ1ZmZlcmVkKCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gb25EcmFpbigpIHtcblx0ICAgICAgc291cmNlLnJlc3VtZSgpO1xuXHQgICAgfVxuXHRcblx0ICAgIGRlc3QuYWRkTGlzdGVuZXIoJ2RyYWluJywgb25EcmFpbik7XG5cdFxuXHQgICAgc291cmNlLnN1YnNjcmliZShcblx0ICAgICAgZnVuY3Rpb24gKHgpIHtcblx0ICAgICAgICAhZGVzdC53cml0ZShTdHJpbmcoeCkpICYmIHNvdXJjZS5wYXVzZSgpO1xuXHQgICAgICB9LFxuXHQgICAgICBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgZGVzdC5lbWl0KCdlcnJvcicsIGVycik7XG5cdCAgICAgIH0sXG5cdCAgICAgIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAvLyBIYWNrIGNoZWNrIGJlY2F1c2UgU1RESU8gaXMgbm90IGNsb3NhYmxlXG5cdCAgICAgICAgIWRlc3QuX2lzU3RkaW8gJiYgZGVzdC5lbmQoKTtcblx0ICAgICAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uRHJhaW4pO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICBzb3VyY2UucmVzdW1lKCk7XG5cdFxuXHQgICAgcmV0dXJuIGRlc3Q7XG5cdCAgfTtcblx0XG5cdCAgdmFyIFRyYW5zZHVjZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKFRyYW5zZHVjZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gVHJhbnNkdWNlT2JzZXJ2ZXIobywgeGZvcm0pIHtcblx0ICAgICAgdGhpcy5fbyA9IG87XG5cdCAgICAgIHRoaXMuX3hmb3JtID0geGZvcm07XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIFRyYW5zZHVjZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcblx0ICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX3hmb3JtWydAQHRyYW5zZHVjZXIvc3RlcCddKS5jYWxsKHRoaXMuX3hmb3JtLCB0aGlzLl9vLCB4KTtcblx0ICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgdGhpcy5fby5vbkVycm9yKHJlcy5lKTsgfVxuXHQgICAgfTtcblx0XG5cdCAgICBUcmFuc2R1Y2VPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG5cdFxuXHQgICAgVHJhbnNkdWNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5feGZvcm1bJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSh0aGlzLl9vKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFRyYW5zZHVjZU9ic2VydmVyO1xuXHQgIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXHRcblx0ICBmdW5jdGlvbiB0cmFuc2Zvcm1Gb3JPYnNlcnZlcihvKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICAnQEB0cmFuc2R1Y2VyL2luaXQnOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gbztcblx0ICAgICAgfSxcblx0ICAgICAgJ0BAdHJhbnNkdWNlci9zdGVwJzogZnVuY3Rpb24ob2JzLCBpbnB1dCkge1xuXHQgICAgICAgIHJldHVybiBvYnMub25OZXh0KGlucHV0KTtcblx0ICAgICAgfSxcblx0ICAgICAgJ0BAdHJhbnNkdWNlci9yZXN1bHQnOiBmdW5jdGlvbihvYnMpIHtcblx0ICAgICAgICByZXR1cm4gb2JzLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBFeGVjdXRlcyBhIHRyYW5zZHVjZXIgdG8gdHJhbnNmb3JtIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlXG5cdCAgICogQHBhcmFtIHtUcmFuc2R1Y2VyfSB0cmFuc2R1Y2VyIEEgdHJhbnNkdWNlciB0byBleGVjdXRlXG5cdCAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgcmVzdWx0cyBmcm9tIHRoZSB0cmFuc2R1Y2VyLlxuXHQgICAqL1xuXHQgIG9ic2VydmFibGVQcm90by50cmFuc2R1Y2UgPSBmdW5jdGlvbih0cmFuc2R1Y2VyKSB7XG5cdCAgICB2YXIgc291cmNlID0gdGhpcztcblx0ICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbihvKSB7XG5cdCAgICAgIHZhciB4Zm9ybSA9IHRyYW5zZHVjZXIodHJhbnNmb3JtRm9yT2JzZXJ2ZXIobykpO1xuXHQgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgVHJhbnNkdWNlT2JzZXJ2ZXIobywgeGZvcm0pKTtcblx0ICAgIH0sIHNvdXJjZSk7XG5cdCAgfTtcblx0XG5cdCAgdmFyIEFub255bW91c09ic2VydmFibGUgPSBSeC5Bbm9ueW1vdXNPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblx0ICAgIGluaGVyaXRzKEFub255bW91c09ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cdFxuXHQgICAgLy8gRml4IHN1YnNjcmliZXIgdG8gY2hlY2sgZm9yIHVuZGVmaW5lZCBvciBmdW5jdGlvbiByZXR1cm5lZCB0byBkZWNvcmF0ZSBhcyBEaXNwb3NhYmxlXG5cdCAgICBmdW5jdGlvbiBmaXhTdWJzY3JpYmVyKHN1YnNjcmliZXIpIHtcblx0ICAgICAgcmV0dXJuIHN1YnNjcmliZXIgJiYgaXNGdW5jdGlvbihzdWJzY3JpYmVyLmRpc3Bvc2UpID8gc3Vic2NyaWJlciA6XG5cdCAgICAgICAgaXNGdW5jdGlvbihzdWJzY3JpYmVyKSA/IGRpc3Bvc2FibGVDcmVhdGUoc3Vic2NyaWJlcikgOiBkaXNwb3NhYmxlRW1wdHk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gc2V0RGlzcG9zYWJsZShzLCBzdGF0ZSkge1xuXHQgICAgICB2YXIgYWRvID0gc3RhdGVbMF0sIHNlbGYgPSBzdGF0ZVsxXTtcblx0ICAgICAgdmFyIHN1YiA9IHRyeUNhdGNoKHNlbGYuX19zdWJzY3JpYmUpLmNhbGwoc2VsZiwgYWRvKTtcblx0ICAgICAgaWYgKHN1YiA9PT0gZXJyb3JPYmogJiYgIWFkby5mYWlsKGVycm9yT2JqLmUpKSB7IHRocm93ZXIoZXJyb3JPYmouZSk7IH1cblx0ICAgICAgYWRvLnNldERpc3Bvc2FibGUoZml4U3Vic2NyaWJlcihzdWIpKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBBbm9ueW1vdXNPYnNlcnZhYmxlKHN1YnNjcmliZSwgcGFyZW50KSB7XG5cdCAgICAgIHRoaXMuc291cmNlID0gcGFyZW50O1xuXHQgICAgICB0aGlzLl9fc3Vic2NyaWJlID0gc3Vic2NyaWJlO1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBBbm9ueW1vdXNPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgdmFyIGFkbyA9IG5ldyBBdXRvRGV0YWNoT2JzZXJ2ZXIobyksIHN0YXRlID0gW2FkbywgdGhpc107XG5cdFxuXHQgICAgICBpZiAoY3VycmVudFRocmVhZFNjaGVkdWxlci5zY2hlZHVsZVJlcXVpcmVkKCkpIHtcblx0ICAgICAgICBjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlLCBzZXREaXNwb3NhYmxlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzZXREaXNwb3NhYmxlKG51bGwsIHN0YXRlKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gYWRvO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gQW5vbnltb3VzT2JzZXJ2YWJsZTtcblx0XG5cdCAgfShPYnNlcnZhYmxlKSk7XG5cdFxuXHQgIHZhciBBdXRvRGV0YWNoT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoQXV0b0RldGFjaE9ic2VydmVyLCBfX3N1cGVyX18pO1xuXHRcblx0ICAgIGZ1bmN0aW9uIEF1dG9EZXRhY2hPYnNlcnZlcihvYnNlcnZlcikge1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuXHQgICAgICB0aGlzLm0gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgQXV0b0RldGFjaE9ic2VydmVyUHJvdG90eXBlID0gQXV0b0RldGFjaE9ic2VydmVyLnByb3RvdHlwZTtcblx0XG5cdCAgICBBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5vYnNlcnZlci5vbk5leHQpLmNhbGwodGhpcy5vYnNlcnZlciwgdmFsdWUpO1xuXHQgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikge1xuXHQgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuXHQgICAgICAgIHRocm93ZXIocmVzdWx0LmUpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIEF1dG9EZXRhY2hPYnNlcnZlclByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMub2JzZXJ2ZXIub25FcnJvcikuY2FsbCh0aGlzLm9ic2VydmVyLCBlcnIpO1xuXHQgICAgICB0aGlzLmRpc3Bvc2UoKTtcblx0ICAgICAgcmVzdWx0ID09PSBlcnJvck9iaiAmJiB0aHJvd2VyKHJlc3VsdC5lKTtcblx0ICAgIH07XG5cdFxuXHQgICAgQXV0b0RldGFjaE9ic2VydmVyUHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMub2JzZXJ2ZXIub25Db21wbGV0ZWQpLmNhbGwodGhpcy5vYnNlcnZlcik7XG5cdCAgICAgIHRoaXMuZGlzcG9zZSgpO1xuXHQgICAgICByZXN1bHQgPT09IGVycm9yT2JqICYmIHRocm93ZXIocmVzdWx0LmUpO1xuXHQgICAgfTtcblx0XG5cdCAgICBBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUuc2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICh2YWx1ZSkgeyB0aGlzLm0uc2V0RGlzcG9zYWJsZSh2YWx1ZSk7IH07XG5cdCAgICBBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUuZ2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMubS5nZXREaXNwb3NhYmxlKCk7IH07XG5cdFxuXHQgICAgQXV0b0RldGFjaE9ic2VydmVyUHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF9fc3VwZXJfXy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuXHQgICAgICB0aGlzLm0uZGlzcG9zZSgpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gQXV0b0RldGFjaE9ic2VydmVyO1xuXHQgIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXHRcblx0ICB2YXIgSW5uZXJTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAocywgbykge1xuXHQgICAgdGhpcy5fcyA9IHM7XG5cdCAgICB0aGlzLl9vID0gbztcblx0ICB9O1xuXHRcblx0ICBJbm5lclN1YnNjcmlwdGlvbi5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICghdGhpcy5fcy5pc0Rpc3Bvc2VkICYmIHRoaXMuX28gIT09IG51bGwpIHtcblx0ICAgICAgdmFyIGlkeCA9IHRoaXMuX3Mub2JzZXJ2ZXJzLmluZGV4T2YodGhpcy5fbyk7XG5cdCAgICAgIHRoaXMuX3Mub2JzZXJ2ZXJzLnNwbGljZShpZHgsIDEpO1xuXHQgICAgICB0aGlzLl9vID0gbnVsbDtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAgUmVwcmVzZW50cyBhbiBvYmplY3QgdGhhdCBpcyBib3RoIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYXMgd2VsbCBhcyBhbiBvYnNlcnZlci5cblx0ICAgKiAgRWFjaCBub3RpZmljYXRpb24gaXMgYnJvYWRjYXN0ZWQgdG8gYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzLlxuXHQgICAqL1xuXHQgIHZhciBTdWJqZWN0ID0gUnguU3ViamVjdCA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhTdWJqZWN0LCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gU3ViamVjdCgpIHtcblx0ICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG5cdCAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xuXHQgICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG5cdCAgICB9XG5cdFxuXHQgICAgYWRkUHJvcGVydGllcyhTdWJqZWN0LnByb3RvdHlwZSwgT2JzZXJ2ZXIucHJvdG90eXBlLCB7XG5cdCAgICAgIF9zdWJzY3JpYmU6IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcblx0ICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG5cdCAgICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG8pO1xuXHQgICAgICAgICAgcmV0dXJuIG5ldyBJbm5lclN1YnNjcmlwdGlvbih0aGlzLCBvKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcblx0ICAgICAgICAgIG8ub25FcnJvcih0aGlzLmVycm9yKTtcblx0ICAgICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcblx0ICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuXHQgICAgICB9LFxuXHQgICAgICAvKipcblx0ICAgICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuXHQgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuXHQgICAgICAgKi9cblx0ICAgICAgaGFzT2JzZXJ2ZXJzOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLm9ic2VydmVycy5sZW5ndGggPiAwOyB9LFxuXHQgICAgICAvKipcblx0ICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLlxuXHQgICAgICAgKi9cblx0ICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuXHQgICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcblx0ICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICBvc1tpXS5vbkNvbXBsZXRlZCgpO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHQgICAgICAvKipcblx0ICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBleGNlcHRpb24uXG5cdCAgICAgICAqIEBwYXJhbSB7TWl4ZWR9IGVycm9yIFRoZSBleGNlcHRpb24gdG8gc2VuZCB0byBhbGwgb2JzZXJ2ZXJzLlxuXHQgICAgICAgKi9cblx0ICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG5cdCAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcblx0ICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG5cdCAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG5cdCAgICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG5cdCAgICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTtcblx0ICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICBvc1tpXS5vbkVycm9yKGVycm9yKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgYXJyaXZhbCBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuXHQgICAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VuZCB0byBhbGwgb2JzZXJ2ZXJzLlxuXHQgICAgICAgKi9cblx0ICAgICAgb25OZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuXHQgICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICBvc1tpXS5vbk5leHQodmFsdWUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIFVuc3Vic2NyaWJlIGFsbCBvYnNlcnZlcnMgYW5kIHJlbGVhc2UgcmVzb3VyY2VzLlxuXHQgICAgICAgKi9cblx0ICAgICAgZGlzcG9zZTogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG5cdCAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBudWxsO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENyZWF0ZXMgYSBzdWJqZWN0IGZyb20gdGhlIHNwZWNpZmllZCBvYnNlcnZlciBhbmQgb2JzZXJ2YWJsZS5cblx0ICAgICAqIEBwYXJhbSB7T2JzZXJ2ZXJ9IG9ic2VydmVyIFRoZSBvYnNlcnZlciB1c2VkIHRvIHNlbmQgbWVzc2FnZXMgdG8gdGhlIHN1YmplY3QuXG5cdCAgICAgKiBAcGFyYW0ge09ic2VydmFibGV9IG9ic2VydmFibGUgVGhlIG9ic2VydmFibGUgdXNlZCB0byBzdWJzY3JpYmUgdG8gbWVzc2FnZXMgc2VudCBmcm9tIHRoZSBzdWJqZWN0LlxuXHQgICAgICogQHJldHVybnMge1N1YmplY3R9IFN1YmplY3QgaW1wbGVtZW50ZWQgdXNpbmcgdGhlIGdpdmVuIG9ic2VydmVyIGFuZCBvYnNlcnZhYmxlLlxuXHQgICAgICovXG5cdCAgICBTdWJqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChvYnNlcnZlciwgb2JzZXJ2YWJsZSkge1xuXHQgICAgICByZXR1cm4gbmV3IEFub255bW91c1N1YmplY3Qob2JzZXJ2ZXIsIG9ic2VydmFibGUpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gU3ViamVjdDtcblx0ICB9KE9ic2VydmFibGUpKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIFJlcHJlc2VudHMgdGhlIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLlxuXHQgICAqICBUaGUgbGFzdCB2YWx1ZSBiZWZvcmUgdGhlIE9uQ29tcGxldGVkIG5vdGlmaWNhdGlvbiwgb3IgdGhlIGVycm9yIHJlY2VpdmVkIHRocm91Z2ggT25FcnJvciwgaXMgc2VudCB0byBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMuXG5cdCAgICovXG5cdCAgdmFyIEFzeW5jU3ViamVjdCA9IFJ4LkFzeW5jU3ViamVjdCA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhBc3luY1N1YmplY3QsIF9fc3VwZXJfXyk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBDcmVhdGVzIGEgc3ViamVjdCB0aGF0IGNhbiBvbmx5IHJlY2VpdmUgb25lIHZhbHVlIGFuZCB0aGF0IHZhbHVlIGlzIGNhY2hlZCBmb3IgYWxsIGZ1dHVyZSBvYnNlcnZhdGlvbnMuXG5cdCAgICAgKiBAY29uc3RydWN0b3Jcblx0ICAgICAqL1xuXHQgICAgZnVuY3Rpb24gQXN5bmNTdWJqZWN0KCkge1xuXHQgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcblx0ICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcblx0ICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcblx0ICAgICAgdGhpcy5oYXNFcnJvciA9IGZhbHNlO1xuXHQgICAgfVxuXHRcblx0ICAgIGFkZFByb3BlcnRpZXMoQXN5bmNTdWJqZWN0LnByb3RvdHlwZSwgT2JzZXJ2ZXIucHJvdG90eXBlLCB7XG5cdCAgICAgIF9zdWJzY3JpYmU6IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcblx0XG5cdCAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuXHQgICAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvKTtcblx0ICAgICAgICAgIHJldHVybiBuZXcgSW5uZXJTdWJzY3JpcHRpb24odGhpcywgbyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodGhpcy5oYXNFcnJvcikge1xuXHQgICAgICAgICAgby5vbkVycm9yKHRoaXMuZXJyb3IpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNWYWx1ZSkge1xuXHQgICAgICAgICAgby5vbk5leHQodGhpcy52YWx1ZSk7XG5cdCAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG5cdCAgICAgIH0sXG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG5cdCAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufSBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG5cdCAgICAgICAqL1xuXHQgICAgICBoYXNPYnNlcnZlcnM6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuXHQgICAgICAgIHJldHVybiB0aGlzLm9ic2VydmVycy5sZW5ndGggPiAwO1xuXHQgICAgICB9LFxuXHQgICAgICAvKipcblx0ICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLCBhbHNvIGNhdXNpbmcgdGhlIGxhc3QgcmVjZWl2ZWQgdmFsdWUgdG8gYmUgc2VudCBvdXQgKGlmIGFueSkuXG5cdCAgICAgICAqL1xuXHQgICAgICBvbkNvbXBsZXRlZDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBpLCBsZW47XG5cdCAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcblx0ICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG5cdCAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG5cdCAgICAgICAgICB2YXIgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoO1xuXHRcblx0ICAgICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlKSB7XG5cdCAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICAgIHZhciBvID0gb3NbaV07XG5cdCAgICAgICAgICAgICAgby5vbk5leHQodGhpcy52YWx1ZSk7XG5cdCAgICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgICBvc1tpXS5vbkNvbXBsZXRlZCgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMgYWJvdXQgdGhlIGVycm9yLlxuXHQgICAgICAgKiBAcGFyYW0ge01peGVkfSBlcnJvciBUaGUgRXJyb3IgdG8gc2VuZCB0byBhbGwgb2JzZXJ2ZXJzLlxuXHQgICAgICAgKi9cblx0ICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG5cdCAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcblx0ICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG5cdCAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG5cdCAgICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTtcblx0ICAgICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcblx0XG5cdCAgICAgICAgICBmb3IgKHZhciBpID0gMCwgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgb3NbaV0ub25FcnJvcihlcnJvcik7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBTZW5kcyBhIHZhbHVlIHRvIHRoZSBzdWJqZWN0LiBUaGUgbGFzdCB2YWx1ZSByZWNlaXZlZCBiZWZvcmUgc3VjY2Vzc2Z1bCB0ZXJtaW5hdGlvbiB3aWxsIGJlIHNlbnQgdG8gYWxsIHN1YnNjcmliZWQgYW5kIGZ1dHVyZSBvYnNlcnZlcnMuXG5cdCAgICAgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlIFRoZSB2YWx1ZSB0byBzdG9yZSBpbiB0aGUgc3ViamVjdC5cblx0ICAgICAgICovXG5cdCAgICAgIG9uTmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcblx0ICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsgcmV0dXJuOyB9XG5cdCAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuXHQgICAgICB9LFxuXHQgICAgICAvKipcblx0ICAgICAgICogVW5zdWJzY3JpYmUgYWxsIG9ic2VydmVycyBhbmQgcmVsZWFzZSByZXNvdXJjZXMuXG5cdCAgICAgICAqL1xuXHQgICAgICBkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLm9ic2VydmVycyA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG5cdCAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIHJldHVybiBBc3luY1N1YmplY3Q7XG5cdCAgfShPYnNlcnZhYmxlKSk7XG5cdFxuXHQgIHZhciBBbm9ueW1vdXNTdWJqZWN0ID0gUnguQW5vbnltb3VzU3ViamVjdCA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhBbm9ueW1vdXNTdWJqZWN0LCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gQW5vbnltb3VzU3ViamVjdChvYnNlcnZlciwgb2JzZXJ2YWJsZSkge1xuXHQgICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG5cdCAgICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGU7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIGFkZFByb3BlcnRpZXMoQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUsIE9ic2VydmVyLnByb3RvdHlwZSwge1xuXHQgICAgICBfc3Vic2NyaWJlOiBmdW5jdGlvbiAobykge1xuXHQgICAgICAgIHJldHVybiB0aGlzLm9ic2VydmFibGUuc3Vic2NyaWJlKG8pO1xuXHQgICAgICB9LFxuXHQgICAgICBvbkNvbXBsZXRlZDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMub2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcblx0ICAgICAgfSxcblx0ICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG5cdCAgICAgICAgdGhpcy5vYnNlcnZlci5vbkVycm9yKGVycm9yKTtcblx0ICAgICAgfSxcblx0ICAgICAgb25OZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLm9ic2VydmVyLm9uTmV4dCh2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIHJldHVybiBBbm9ueW1vdXNTdWJqZWN0O1xuXHQgIH0oT2JzZXJ2YWJsZSkpO1xuXHRcblx0ICAvKipcblx0ICAgKiAgUmVwcmVzZW50cyBhIHZhbHVlIHRoYXQgY2hhbmdlcyBvdmVyIHRpbWUuXG5cdCAgICogIE9ic2VydmVycyBjYW4gc3Vic2NyaWJlIHRvIHRoZSBzdWJqZWN0IHRvIHJlY2VpdmUgdGhlIGxhc3QgKG9yIGluaXRpYWwpIHZhbHVlIGFuZCBhbGwgc3Vic2VxdWVudCBub3RpZmljYXRpb25zLlxuXHQgICAqL1xuXHQgIHZhciBCZWhhdmlvclN1YmplY3QgPSBSeC5CZWhhdmlvclN1YmplY3QgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuXHQgICAgaW5oZXJpdHMoQmVoYXZpb3JTdWJqZWN0LCBfX3N1cGVyX18pO1xuXHQgICAgZnVuY3Rpb24gQmVoYXZpb3JTdWJqZWN0KHZhbHVlKSB7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cdCAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XG5cdCAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG5cdCAgICB9XG5cdFxuXHQgICAgYWRkUHJvcGVydGllcyhCZWhhdmlvclN1YmplY3QucHJvdG90eXBlLCBPYnNlcnZlci5wcm90b3R5cGUsIHtcblx0ICAgICAgX3N1YnNjcmliZTogZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuXHQgICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gobyk7XG5cdCAgICAgICAgICBvLm9uTmV4dCh0aGlzLnZhbHVlKTtcblx0ICAgICAgICAgIHJldHVybiBuZXcgSW5uZXJTdWJzY3JpcHRpb24odGhpcywgbyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG5cdCAgICAgICAgICBvLm9uRXJyb3IodGhpcy5lcnJvcik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcblx0ICAgICAgfSxcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEdldHMgdGhlIGN1cnJlbnQgdmFsdWUgb3IgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cblx0ICAgICAgICogVmFsdWUgaXMgZnJvemVuIGFmdGVyIG9uQ29tcGxldGVkIGlzIGNhbGxlZC5cblx0ICAgICAgICogQWZ0ZXIgb25FcnJvciBpcyBjYWxsZWQgYWx3YXlzIHRocm93cyB0aGUgc3BlY2lmaWVkIGV4Y2VwdGlvbi5cblx0ICAgICAgICogQW4gZXhjZXB0aW9uIGlzIGFsd2F5cyB0aHJvd24gYWZ0ZXIgZGlzcG9zZSBpcyBjYWxsZWQuXG5cdCAgICAgICAqIEByZXR1cm5zIHtNaXhlZH0gVGhlIGluaXRpYWwgdmFsdWUgcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvciB1bnRpbCBvbk5leHQgaXMgY2FsbGVkOyBhZnRlciB3aGljaCwgdGhlIGxhc3QgdmFsdWUgcGFzc2VkIHRvIG9uTmV4dC5cblx0ICAgICAgICovXG5cdCAgICAgIGdldFZhbHVlOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcblx0ICAgICAgICBpZiAodGhpcy5oYXNFcnJvcikgeyB0aHJvd2VyKHRoaXMuZXJyb3IpOyB9XG5cdCAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG5cdCAgICAgIH0sXG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG5cdCAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufSBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG5cdCAgICAgICAqL1xuXHQgICAgICBoYXNPYnNlcnZlcnM6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA+IDA7IH0sXG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMgYWJvdXQgdGhlIGVuZCBvZiB0aGUgc2VxdWVuY2UuXG5cdCAgICAgICAqL1xuXHQgICAgICBvbkNvbXBsZXRlZDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG5cdCAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7IHJldHVybjsgfVxuXHQgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMCwgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgIG9zW2ldLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuXHQgICAgICB9LFxuXHQgICAgICAvKipcblx0ICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBleGNlcHRpb24uXG5cdCAgICAgICAqIEBwYXJhbSB7TWl4ZWR9IGVycm9yIFRoZSBleGNlcHRpb24gdG8gc2VuZCB0byBhbGwgb2JzZXJ2ZXJzLlxuXHQgICAgICAgKi9cblx0ICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG5cdCAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcblx0ICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsgcmV0dXJuOyB9XG5cdCAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcblx0XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgICBvc1tpXS5vbkVycm9yKGVycm9yKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG5cdCAgICAgIH0sXG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMgYWJvdXQgdGhlIGFycml2YWwgb2YgdGhlIHNwZWNpZmllZCBlbGVtZW50IGluIHRoZSBzZXF1ZW5jZS5cblx0ICAgICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cblx0ICAgICAgICovXG5cdCAgICAgIG9uTmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcblx0ICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsgcmV0dXJuOyB9XG5cdCAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgb3NbaV0ub25OZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBVbnN1YnNjcmliZSBhbGwgb2JzZXJ2ZXJzIGFuZCByZWxlYXNlIHJlc291cmNlcy5cblx0ICAgICAgICovXG5cdCAgICAgIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbnVsbDtcblx0ICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcblx0ICAgICAgICB0aGlzLmVycm9yID0gbnVsbDtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgcmV0dXJuIEJlaGF2aW9yU3ViamVjdDtcblx0ICB9KE9ic2VydmFibGUpKTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVwcmVzZW50cyBhbiBvYmplY3QgdGhhdCBpcyBib3RoIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYXMgd2VsbCBhcyBhbiBvYnNlcnZlci5cblx0ICAgKiBFYWNoIG5vdGlmaWNhdGlvbiBpcyBicm9hZGNhc3RlZCB0byBhbGwgc3Vic2NyaWJlZCBhbmQgZnV0dXJlIG9ic2VydmVycywgc3ViamVjdCB0byBidWZmZXIgdHJpbW1pbmcgcG9saWNpZXMuXG5cdCAgICovXG5cdCAgdmFyIFJlcGxheVN1YmplY3QgPSBSeC5SZXBsYXlTdWJqZWN0ID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblx0XG5cdCAgICB2YXIgbWF4U2FmZUludGVnZXIgPSBNYXRoLnBvdygyLCA1MykgLSAxO1xuXHRcblx0ICAgIGZ1bmN0aW9uIGNyZWF0ZVJlbW92YWJsZURpc3Bvc2FibGUoc3ViamVjdCwgb2JzZXJ2ZXIpIHtcblx0ICAgICAgcmV0dXJuIGRpc3Bvc2FibGVDcmVhdGUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIG9ic2VydmVyLmRpc3Bvc2UoKTtcblx0ICAgICAgICAhc3ViamVjdC5pc0Rpc3Bvc2VkICYmIHN1YmplY3Qub2JzZXJ2ZXJzLnNwbGljZShzdWJqZWN0Lm9ic2VydmVycy5pbmRleE9mKG9ic2VydmVyKSwgMSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIGluaGVyaXRzKFJlcGxheVN1YmplY3QsIF9fc3VwZXJfXyk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiAgSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFJlcGxheVN1YmplY3QgY2xhc3Mgd2l0aCB0aGUgc3BlY2lmaWVkIGJ1ZmZlciBzaXplLCB3aW5kb3cgc2l6ZSBhbmQgc2NoZWR1bGVyLlxuXHQgICAgICogIEBwYXJhbSB7TnVtYmVyfSBbYnVmZmVyU2l6ZV0gTWF4aW11bSBlbGVtZW50IGNvdW50IG9mIHRoZSByZXBsYXkgYnVmZmVyLlxuXHQgICAgICogIEBwYXJhbSB7TnVtYmVyfSBbd2luZG93U2l6ZV0gTWF4aW11bSB0aW1lIGxlbmd0aCBvZiB0aGUgcmVwbGF5IGJ1ZmZlci5cblx0ICAgICAqICBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRoZSBvYnNlcnZlcnMgYXJlIGludm9rZWQgb24uXG5cdCAgICAgKi9cblx0ICAgIGZ1bmN0aW9uIFJlcGxheVN1YmplY3QoYnVmZmVyU2l6ZSwgd2luZG93U2l6ZSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IGJ1ZmZlclNpemUgPT0gbnVsbCA/IG1heFNhZmVJbnRlZ2VyIDogYnVmZmVyU2l6ZTtcblx0ICAgICAgdGhpcy53aW5kb3dTaXplID0gd2luZG93U2l6ZSA9PSBudWxsID8gbWF4U2FmZUludGVnZXIgOiB3aW5kb3dTaXplO1xuXHQgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlciB8fCBjdXJyZW50VGhyZWFkU2NoZWR1bGVyO1xuXHQgICAgICB0aGlzLnEgPSBbXTtcblx0ICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcblx0ICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcblx0ICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIGFkZFByb3BlcnRpZXMoUmVwbGF5U3ViamVjdC5wcm90b3R5cGUsIE9ic2VydmVyLnByb3RvdHlwZSwge1xuXHQgICAgICBfc3Vic2NyaWJlOiBmdW5jdGlvbiAobykge1xuXHQgICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG5cdCAgICAgICAgdmFyIHNvID0gbmV3IFNjaGVkdWxlZE9ic2VydmVyKHRoaXMuc2NoZWR1bGVyLCBvKSwgc3Vic2NyaXB0aW9uID0gY3JlYXRlUmVtb3ZhYmxlRGlzcG9zYWJsZSh0aGlzLCBzbyk7XG5cdFxuXHQgICAgICAgIHRoaXMuX3RyaW0odGhpcy5zY2hlZHVsZXIubm93KCkpO1xuXHQgICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2goc28pO1xuXHRcblx0ICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5xLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgICBzby5vbk5leHQodGhpcy5xW2ldLnZhbHVlKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG5cdCAgICAgICAgICBzby5vbkVycm9yKHRoaXMuZXJyb3IpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgIHNvLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBzby5lbnN1cmVBY3RpdmUoKTtcblx0ICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuXHQgICAgICB9LFxuXHQgICAgICAvKipcblx0ICAgICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuXHQgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuXHQgICAgICAgKi9cblx0ICAgICAgaGFzT2JzZXJ2ZXJzOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA+IDA7XG5cdCAgICAgIH0sXG5cdCAgICAgIF90cmltOiBmdW5jdGlvbiAobm93KSB7XG5cdCAgICAgICAgd2hpbGUgKHRoaXMucS5sZW5ndGggPiB0aGlzLmJ1ZmZlclNpemUpIHtcblx0ICAgICAgICAgIHRoaXMucS5zaGlmdCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB3aGlsZSAodGhpcy5xLmxlbmd0aCA+IDAgJiYgKG5vdyAtIHRoaXMucVswXS5pbnRlcnZhbCkgPiB0aGlzLndpbmRvd1NpemUpIHtcblx0ICAgICAgICAgIHRoaXMucS5zaGlmdCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgYXJyaXZhbCBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuXHQgICAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VuZCB0byBhbGwgb2JzZXJ2ZXJzLlxuXHQgICAgICAgKi9cblx0ICAgICAgb25OZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuXHQgICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkgeyByZXR1cm47IH1cblx0ICAgICAgICB2YXIgbm93ID0gdGhpcy5zY2hlZHVsZXIubm93KCk7XG5cdCAgICAgICAgdGhpcy5xLnB1c2goeyBpbnRlcnZhbDogbm93LCB2YWx1ZTogdmFsdWUgfSk7XG5cdCAgICAgICAgdGhpcy5fdHJpbShub3cpO1xuXHRcblx0ICAgICAgICBmb3IgKHZhciBpID0gMCwgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgIHZhciBvYnNlcnZlciA9IG9zW2ldO1xuXHQgICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KHZhbHVlKTtcblx0ICAgICAgICAgIG9ic2VydmVyLmVuc3VyZUFjdGl2ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgZXhjZXB0aW9uLlxuXHQgICAgICAgKiBAcGFyYW0ge01peGVkfSBlcnJvciBUaGUgZXhjZXB0aW9uIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cblx0ICAgICAgICovXG5cdCAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuXHQgICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG5cdCAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7IHJldHVybjsgfVxuXHQgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG5cdCAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7XG5cdCAgICAgICAgdmFyIG5vdyA9IHRoaXMuc2NoZWR1bGVyLm5vdygpO1xuXHQgICAgICAgIHRoaXMuX3RyaW0obm93KTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMCwgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgIHZhciBvYnNlcnZlciA9IG9zW2ldO1xuXHQgICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlcnJvcik7XG5cdCAgICAgICAgICBvYnNlcnZlci5lbnN1cmVBY3RpdmUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcblx0ICAgICAgfSxcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgZW5kIG9mIHRoZSBzZXF1ZW5jZS5cblx0ICAgICAgICovXG5cdCAgICAgIG9uQ29tcGxldGVkOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcblx0ICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsgcmV0dXJuOyB9XG5cdCAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuXHQgICAgICAgIHZhciBub3cgPSB0aGlzLnNjaGVkdWxlci5ub3coKTtcblx0ICAgICAgICB0aGlzLl90cmltKG5vdyk7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBvc1tpXTtcblx0ICAgICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG5cdCAgICAgICAgICBvYnNlcnZlci5lbnN1cmVBY3RpdmUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcblx0ICAgICAgfSxcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIFVuc3Vic2NyaWJlIGFsbCBvYnNlcnZlcnMgYW5kIHJlbGVhc2UgcmVzb3VyY2VzLlxuXHQgICAgICAgKi9cblx0ICAgICAgZGlzcG9zZTogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG5cdCAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBudWxsO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICByZXR1cm4gUmVwbGF5U3ViamVjdDtcblx0ICB9KE9ic2VydmFibGUpKTtcblx0XG5cdCAgLyoqXG5cdCAgKiBVc2VkIHRvIHBhdXNlIGFuZCByZXN1bWUgc3RyZWFtcy5cblx0ICAqL1xuXHQgIFJ4LlBhdXNlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cdCAgICBpbmhlcml0cyhQYXVzZXIsIF9fc3VwZXJfXyk7XG5cdCAgICBmdW5jdGlvbiBQYXVzZXIoKSB7XG5cdCAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUGF1c2VzIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlLlxuXHQgICAgICovXG5cdCAgICBQYXVzZXIucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKCkgeyB0aGlzLm9uTmV4dChmYWxzZSk7IH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAqIFJlc3VtZXMgdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UuXG5cdCAgICAqL1xuXHQgICAgUGF1c2VyLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7IHRoaXMub25OZXh0KHRydWUpOyB9O1xuXHRcblx0ICAgIHJldHVybiBQYXVzZXI7XG5cdCAgfShTdWJqZWN0KSk7XG5cdFxuXHQgIGlmICh0cnVlKSB7XG5cdCAgICByb290LlJ4ID0gUng7XG5cdFxuXHQgICAgIShfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gUng7XG5cdCAgICB9LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXywgZXhwb3J0cywgbW9kdWxlKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHQgIH0gZWxzZSBpZiAoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSkge1xuXHQgICAgLy8gaW4gTm9kZS5qcyBvciBSaW5nb0pTXG5cdCAgICBpZiAobW9kdWxlRXhwb3J0cykge1xuXHQgICAgICAoZnJlZU1vZHVsZS5leHBvcnRzID0gUngpLlJ4ID0gUng7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBmcmVlRXhwb3J0cy5SeCA9IFJ4O1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBpbiBhIGJyb3dzZXIgb3IgUmhpbm9cblx0ICAgIHJvb3QuUnggPSBSeDtcblx0ICB9XG5cdFxuXHQgIC8vIEFsbCBjb2RlIGJlZm9yZSB0aGlzIHBvaW50IHdpbGwgYmUgZmlsdGVyZWQgZnJvbSBzdGFjayB0cmFjZXMuXG5cdCAgdmFyIHJFbmRpbmdMaW5lID0gY2FwdHVyZUxpbmUoKTtcblx0XG5cdH0uY2FsbCh0aGlzKSk7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxMSkobW9kdWxlKSwgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSwgX193ZWJwYWNrX3JlcXVpcmVfXygxMikpKVxuXG4vKioqLyB9LFxuLyogMzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXHJcblx0XHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdFx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG5cdCovXHJcblx0dmFyIHN0eWxlc0luRG9tID0ge30sXHJcblx0XHRtZW1vaXplID0gZnVuY3Rpb24oZm4pIHtcclxuXHRcdFx0dmFyIG1lbW87XHJcblx0XHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuXHRcdFx0XHRyZXR1cm4gbWVtbztcclxuXHRcdFx0fTtcclxuXHRcdH0sXHJcblx0XHRpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIC9tc2llIFs2LTldXFxiLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xyXG5cdFx0fSksXHJcblx0XHRnZXRIZWFkRWxlbWVudCA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRyZXR1cm4gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XHJcblx0XHR9KSxcclxuXHRcdHNpbmdsZXRvbkVsZW1lbnQgPSBudWxsLFxyXG5cdFx0c2luZ2xldG9uQ291bnRlciA9IDA7XHJcblx0XHJcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XHJcblx0XHRpZih0cnVlKSB7XHJcblx0XHRcdGlmKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xyXG5cdFx0fVxyXG5cdFxyXG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblx0XHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cclxuXHRcdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcclxuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xyXG5cdFxyXG5cdFx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0KTtcclxuXHRcdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XHJcblx0XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcclxuXHRcdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XHJcblx0XHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XHJcblx0XHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xyXG5cdFx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihuZXdMaXN0KSB7XHJcblx0XHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0KTtcclxuXHRcdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XHJcblx0XHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xyXG5cdFx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKVxyXG5cdFx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXSgpO1xyXG5cdFx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG5cdFxyXG5cdGZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcclxuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XHJcblx0XHRcdGlmKGRvbVN0eWxlKSB7XHJcblx0XHRcdFx0ZG9tU3R5bGUucmVmcysrO1xyXG5cdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dmFyIHBhcnRzID0gW107XHJcblx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRmdW5jdGlvbiBsaXN0VG9TdHlsZXMobGlzdCkge1xyXG5cdFx0dmFyIHN0eWxlcyA9IFtdO1xyXG5cdFx0dmFyIG5ld1N0eWxlcyA9IHt9O1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xyXG5cdFx0XHR2YXIgaWQgPSBpdGVtWzBdO1xyXG5cdFx0XHR2YXIgY3NzID0gaXRlbVsxXTtcclxuXHRcdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcclxuXHRcdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XHJcblx0XHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcclxuXHRcdFx0aWYoIW5ld1N0eWxlc1tpZF0pXHJcblx0XHRcdFx0c3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBzdHlsZXM7XHJcblx0fVxyXG5cdFxyXG5cdGZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudCgpIHtcclxuXHRcdHZhciBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcblx0XHR2YXIgaGVhZCA9IGdldEhlYWRFbGVtZW50KCk7XHJcblx0XHRzdHlsZUVsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuXHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcclxuXHRcdHJldHVybiBzdHlsZUVsZW1lbnQ7XHJcblx0fVxyXG5cdFxyXG5cdGZ1bmN0aW9uIGNyZWF0ZUxpbmtFbGVtZW50KCkge1xyXG5cdFx0dmFyIGxpbmtFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcblx0XHR2YXIgaGVhZCA9IGdldEhlYWRFbGVtZW50KCk7XHJcblx0XHRsaW5rRWxlbWVudC5yZWwgPSBcInN0eWxlc2hlZXRcIjtcclxuXHRcdGhlYWQuYXBwZW5kQ2hpbGQobGlua0VsZW1lbnQpO1xyXG5cdFx0cmV0dXJuIGxpbmtFbGVtZW50O1xyXG5cdH1cclxuXHRcclxuXHRmdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcclxuXHRcdHZhciBzdHlsZUVsZW1lbnQsIHVwZGF0ZSwgcmVtb3ZlO1xyXG5cdFxyXG5cdFx0aWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XHJcblx0XHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQgPSBzaW5nbGV0b25FbGVtZW50IHx8IChzaW5nbGV0b25FbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KCkpO1xyXG5cdFx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCBmYWxzZSk7XHJcblx0XHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIHRydWUpO1xyXG5cdFx0fSBlbHNlIGlmKG9iai5zb3VyY2VNYXAgJiZcclxuXHRcdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXHJcblx0XHRcdHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcclxuXHRcdFx0dHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxyXG5cdFx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXHJcblx0XHRcdHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcclxuXHRcdFx0c3R5bGVFbGVtZW50ID0gY3JlYXRlTGlua0VsZW1lbnQoKTtcclxuXHRcdFx0dXBkYXRlID0gdXBkYXRlTGluay5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCk7XHJcblx0XHRcdHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudCk7XHJcblx0XHRcdFx0aWYoc3R5bGVFbGVtZW50LmhyZWYpXHJcblx0XHRcdFx0XHRVUkwucmV2b2tlT2JqZWN0VVJMKHN0eWxlRWxlbWVudC5ocmVmKTtcclxuXHRcdFx0fTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHN0eWxlRWxlbWVudCA9IGNyZWF0ZVN0eWxlRWxlbWVudCgpO1xyXG5cdFx0XHR1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50KTtcclxuXHRcdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c3R5bGVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KTtcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHRcclxuXHRcdHVwZGF0ZShvYmopO1xyXG5cdFxyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xyXG5cdFx0XHRpZihuZXdPYmopIHtcclxuXHRcdFx0XHRpZihuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApXHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG5cdFxyXG5cdHZhciByZXBsYWNlVGV4dCA9IChmdW5jdGlvbiAoKSB7XHJcblx0XHR2YXIgdGV4dFN0b3JlID0gW107XHJcblx0XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24gKGluZGV4LCByZXBsYWNlbWVudCkge1xyXG5cdFx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XHJcblx0XHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xyXG5cdFx0fTtcclxuXHR9KSgpO1xyXG5cdFxyXG5cdGZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGVFbGVtZW50LCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcclxuXHRcdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcclxuXHRcclxuXHRcdGlmIChzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XHJcblx0XHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGVFbGVtZW50LmNoaWxkTm9kZXM7XHJcblx0XHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcclxuXHRcdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XHJcblx0XHRcdFx0c3R5bGVFbGVtZW50Lmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0c3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGNzc05vZGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdGZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGVFbGVtZW50LCBvYmopIHtcclxuXHRcdHZhciBjc3MgPSBvYmouY3NzO1xyXG5cdFx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xyXG5cdFx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XHJcblx0XHJcblx0XHRpZihtZWRpYSkge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXHJcblx0XHR9XHJcblx0XHJcblx0XHRpZihzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0d2hpbGUoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcclxuXHRcdFx0XHRzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0ZnVuY3Rpb24gdXBkYXRlTGluayhsaW5rRWxlbWVudCwgb2JqKSB7XHJcblx0XHR2YXIgY3NzID0gb2JqLmNzcztcclxuXHRcdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcclxuXHRcdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xyXG5cdFxyXG5cdFx0aWYoc291cmNlTWFwKSB7XHJcblx0XHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XHJcblx0XHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgXCIgKi9cIjtcclxuXHRcdH1cclxuXHRcclxuXHRcdHZhciBibG9iID0gbmV3IEJsb2IoW2Nzc10sIHsgdHlwZTogXCJ0ZXh0L2Nzc1wiIH0pO1xyXG5cdFxyXG5cdFx0dmFyIG9sZFNyYyA9IGxpbmtFbGVtZW50LmhyZWY7XHJcblx0XHJcblx0XHRsaW5rRWxlbWVudC5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuXHRcclxuXHRcdGlmKG9sZFNyYylcclxuXHRcdFx0VVJMLnJldm9rZU9iamVjdFVSTChvbGRTcmMpO1xyXG5cdH1cclxuXG5cbi8qKiovIH0sXG4vKiAzNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uL25vZGVfbW9kdWxlcy9hdXRvcHJlZml4ZXItbG9hZGVyL2luZGV4LmpzP2Jyb3dzZXJzPWxhc3QgMiB2ZXJzaW9uIS4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vbWFpbi5zY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi9ub2RlX21vZHVsZXMvYXV0b3ByZWZpeGVyLWxvYWRlci9pbmRleC5qcz9icm93c2Vycz1sYXN0IDIgdmVyc2lvbiEuLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL21haW4uc2Nzc1wiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDM4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB2aWV3Qm94PVxcXCIwIDAgMjY4MSA4MTRcXFwiIHZlcnNpb249XFxcIjEuMVxcXCIgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB4bWxuczp4bGluaz1cXFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1xcXCIgeG1sbnM6c2tldGNoPVxcXCJodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2gvbnNcXFwiPjx0aXRsZT5DbGltYiBMb2dvIEJldGE8L3RpdGxlPjxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPjxkZWZzPjwvZGVmcz48ZyBpZD1cXFwiUGFnZS0xXFxcIiBzdHJva2U9XFxcIm5vbmVcXFwiIHN0cm9rZS13aWR0aD1cXFwiMVxcXCIgZmlsbD1cXFwibm9uZVxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBza2V0Y2g6dHlwZT1cXFwiTVNQYWdlXFxcIj48ZyBpZD1cXFwiQ2xpbWItTG9nby1CZXRhXFxcIiBza2V0Y2g6dHlwZT1cXFwiTVNBcnRib2FyZEdyb3VwXFxcIiBmaWxsPVxcXCIjMTkzNzREXFxcIj48ZyBpZD1cXFwiY2xpLS0tLWIuc29jaWFsLSstUGF0aC1Db3B5LSstVHlwZS1zb21ldGhpbmctQ29weS1Db3B5LUNvcHktQ29weS1Db3B5XFxcIiBza2V0Y2g6dHlwZT1cXFwiTVNMYXllckdyb3VwXFxcIiB0cmFuc2Zvcm09XFxcInRyYW5zbGF0ZSgyMDYuMDAwMDAwLCAyNDkuMDAwMDAwKVxcXCI+PGcgaWQ9XFxcImNsaS0tLS1iLnNvY2lhbC0rLVBhdGgtQ29weVxcXCIgc2tldGNoOnR5cGU9XFxcIk1TU2hhcGVHcm91cFxcXCI+PHBhdGggZD1cXFwiTTcyMy4zNzQyMDcsMTg3LjQ0MjIxMSBMNzY3LjAyNzY0MSwzMzcuMzgzNTc1IEM3NjcuNTEwODg5LDM0MS4yNjU1NTIgNzcxLjg2MDEyNCwzNDUuMTQ3NTI5IDc3Ni4yMDkzNTksMzQ1LjE0NzUyOSBMODMzLjIzMjY2NCwzNDUuMTQ3NTI5IEM4MzkuMDMxNjQ0LDM0NS4xNDc1MjkgODQzLjM4MDg3OSwzNDAuNzgwMzA1IDg0Mi40MTQzODMsMzM0LjQ3MjA5MiBMNzM5LjQ4MjQ4NSw4LjM4NjAxOTgyIEM3MzguOTk5MjM3LDQuMDE4Nzk1NjQgNzM0LjY1MDAwMiwwLjYyMjA2NTcyOCA3MzAuNzg0MDE1LDAuNjIyMDY1NzI4IEw3MjMuMDUyMDQxLDAuNjIyMDY1NzI4IEM3MjAuNjM1OCwwLjYyMjA2NTcyOCA3MTYuMjg2NTY1LDIuNTYzMDU0MjUgNzE0LjgzNjgyLDUuNDc0NTM3MDQgTDY0My41MTQzMDIsMjA5LjAxOTA2MiBMNTc2LjQ5NDAwMywxMDUuNDMxNzg4IEM1NzMuNzIxMDU4LDEwMS4xNDU4OTUgNTY3LjM0MjUzOSw5Ny42NzE0OTE5IDU2Mi4yNTU2LDk3LjY3MTQ5MTkgTDU1Mi4xNzkwMzMsOTcuNjcxNDkxOSBDNTQ3LjA4ODMyNiw5Ny42NzE0OTE5IDU0MS41MjkzODQsMTAxLjU1ODc0OSA1MzkuNzcwMDYxLDEwNi4zMzQxODcgTDQ1NC45ODAwNjgsMzM2LjQ4NDgzMyBDNDUzLjIxNzQ5LDM0MS4yNjkxMDggNDU1LjkyNzA4NiwzNDUuMTQ3NTI5IDQ2MS4wMTQxMDIsMzQ1LjE0NzUyOSBMNTIyLjEzODA2NywzNDUuMTQ3NTI5IEM1MjcuMjMzMTUsMzQ1LjE0NzUyOSA1MzIuNzkxMDU0LDM0MS4yNjE3MzMgNTM0LjU1Mjc5NywzMzYuNDY2MTcxIEw1NzEuNDczMTQ0LDIzNS45NjY5MjQgTDY0Mi4xMDg1MjgsMzQ2LjEwNzcxMiBDNjQzLjQ4NzE0MSwzNDguMjU3MzYzIDY0Ni42NjcwOTIsMzUwIDY0OS4yMTIzMDcsMzUwIEw2NTkuOTcxNDEyLDM1MCBDNjYyLjUxNjEwOCwzNTAgNjY1LjI4MjA0NCwzNDguMDQ1MDc4IDY2Ni4xNDE5ODIsMzQ1LjY1MzkxOCBMNjgzLjgyNzI2MSwyOTYuNDc3ODcyIEw3MjMuMzc0MjA3LDE4Ny40NDIyMTEgWlxcXCIgaWQ9XFxcIlBhdGgtQ29weVxcXCI+PC9wYXRoPjxwYXRoIGQ9XFxcIk0wLjE0NTIxMzQ0MSwyNDcuMDg1MTAxIEMwLjE0NTIxMzQ0MSwzMDUuMjM0MDQgNDkuMDg3MjM3NywzNDguODQ1NzQ1IDEwNC4zMjg3MywzNDguODQ1NzQ1IEMxMzkuMjE4MDk0LDM0OC44NDU3NDUgMTY0LjQxNTk2OCwzMzUuMjc3NjU5IDE4Mi4zNDUyMjQsMzA4LjE0MTQ4NyBDMTg1LjczNzI0NiwzMDMuMjk1NzQyIDE4My4zMTQzNzMsMjk4LjQ0OTk5NyAxNzguOTUzMjAzLDI5NC41NzM0MDEgTDE0OS44Nzg3MzMsMjY5LjM3NTUyNyBDMTQ2Ljk3MTI4NiwyNjYuOTUyNjU1IDE0Mi42MTAxMTYsMjY3LjkyMTgwNCAxMzkuMjE4MDk0LDI3MS4zMTM4MjUgQzEzMS40NjQ5MDIsMjc5LjA2NzAxNyAxMjMuMjI3MTM2LDI4Ni4zMzU2MzUgMTA2LjI2NzAyOCwyODYuMzM1NjM1IEM4NC45NDU3NTA1LDI4Ni4zMzU2MzUgNjguNDcwMjE3NiwyNjguODkwOTUzIDY4LjQ3MDIxNzYsMjQ3LjA4NTEwMSBDNjguNDcwMjE3NiwyMjUuNzYzODIzIDg1LjkxNDg5OTUsMjA3LjgzNDU2NiAxMDcuMjM2MTc3LDIwNy44MzQ1NjYgQzExOC4zODEzOTEsMjA3LjgzNDU2NiAxMjguNTU3NDU1LDIxMy4xNjQ4ODYgMTM1LjM0MTQ5OCwyMjAuNDMzNTAzIEMxMzcuNzY0MzcxLDIyMi44NTYzNzYgMTQzLjU3OTI2NSwyMjMuODI1NTI1IDE0Ni4wMDIxMzcsMjIxLjQwMjY1MiBMMTc1LjA3NjYwNywxOTMuNzgxOTA2IEMxNzkuNDM3Nzc3LDE4OS45MDUzMSAxODAuODkxNTAxLDE4NC41NzQ5OSAxNzcuNDk5NDgsMTgwLjIxMzgyIEMxNTkuMDg1NjQ5LDE1Ny45MjMzOTMgMTM1LjM0MTQ5OCwxNDUuMzI0NDU2IDEwNC44MTMzMDUsMTQ1LjMyNDQ1NiBDNDkuNTcxODEyMiwxNDUuMzI0NDU2IDAuMTQ1MjEzNDQxLDE4OS45MDUzMSAwLjE0NTIxMzQ0MSwyNDcuMDg1MTAxIEwwLjE0NTIxMzQ0MSwyNDcuMDg1MTAxIFogTTIxOC42ODgzMTIsMzM0Ljc5MzA4NSBDMjE4LjY4ODMxMiwzMzkuNjM4ODMgMjIzLjA0OTQ4MiwzNDQgMjI3Ljg5NTIyNywzNDQgTDI4MS4xOTg0MjIsMzQ0IEMyODYuMDQ0MTY3LDM0NCAyOTAuNDA1MzM3LDMzOS42Mzg4MyAyOTAuNDA1MzM3LDMzNC43OTMwODUgTDI5MC40MDUzMzcsMTQuMDA0NzY3MiBDMjkwLjQwNTMzNyw5LjE1OTAyMjI2IDI4Ni4wNDQxNjcsNC43OTc4NTE3OSAyODEuMTk4NDIyLDQuNzk3ODUxNzkgTDIyNy44OTUyMjcsNC43OTc4NTE3OSBDMjIzLjA0OTQ4Miw0Ljc5Nzg1MTc5IDIxOC42ODgzMTIsOS4xNTkwMjIyNiAyMTguNjg4MzEyLDE0LjAwNDc2NzIgTDIxOC42ODgzMTIsMzM0Ljc5MzA4NSBaIE0zNzguMTEzMzIxLDkxLjUzNjY4NjggQzM5OS40MzQ1OTksOTEuNTM2Njg2OCA0MTYuODc5MjgxLDc0LjU3NjU3OTQgNDE2Ljg3OTI4MSw1My4yNTUzMDE1IEM0MTYuODc5MjgxLDMxLjkzNDAyMzYgMzk5LjQzNDU5OSwxNC40ODkzNDE3IDM3OC4xMTMzMjEsMTQuNDg5MzQxNyBDMzU2Ljc5MjA0NCwxNC40ODkzNDE3IDMzOS44MzE5MzYsMzEuOTM0MDIzNiAzMzkuODMxOTM2LDUzLjI1NTMwMTUgQzMzOS44MzE5MzYsNzQuNTc2NTc5NCAzNTYuNzkyMDQ0LDkxLjUzNjY4NjggMzc4LjExMzMyMSw5MS41MzY2ODY4IEwzNzguMTEzMzIxLDkxLjUzNjY4NjggWiBNMzQyLjczOTM4MywzMzQuNzkzMDg1IEMzNDIuNzM5MzgzLDMzOS42Mzg4MyAzNDcuMTAwNTU0LDM0NCAzNTEuOTQ2Mjk5LDM0NCBMNDA1LjI0OTQ5MywzNDQgQzQxMC4wOTUyMzgsMzQ0IDQxNC40NTY0MDksMzM5LjYzODgzIDQxNC40NTY0MDksMzM0Ljc5MzA4NSBMNDE0LjQ1NjQwOSwxNTkuMzc3MTE2IEM0MTQuNDU2NDA5LDE1NC4wNDY3OTcgNDEwLjA5NTIzOCwxNTAuMTcwMjAxIDQwNS4yNDk0OTMsMTUwLjE3MDIwMSBMMzUxLjk0NjI5OSwxNTAuMTcwMjAxIEMzNDcuMTAwNTU0LDE1MC4xNzAyMDEgMzQyLjczOTM4MywxNTQuMDQ2Nzk3IDM0Mi43MzkzODMsMTU5LjM3NzExNiBMMzQyLjczOTM4MywzMzQuNzkzMDg1IFogTTg4OS4xNTQzMSwzMzQuNzkzMDg1IEM4ODkuMTU0MzEsMzM5LjYzODgzIDg5My41MTU0ODEsMzQ0IDg5OC4zNjEyMjYsMzQ0IEw5MjEuMTM2MjI3LDM0NCBDOTI1Ljk4MTk3MiwzNDQgOTI5LjM3Mzk5NCwzMzkuNjM4ODMgOTMxLjMxMjI5MiwzMzQuMzA4NTEgTDkzNy4xMjcxODUsMzE4LjMxNzU1MiBDOTM3LjEyNzE4NSwzMTguMzE3NTUyIDk1OS40MTc2MTIsMzQ4Ljg0NTc0NSAxMDAyLjA2MDE3LDM0OC44NDU3NDUgQzEwNTYuODE3MDksMzQ4Ljg0NTc0NSAxMDk4LjAwNTkyLDMwMi44MTExNjggMTA5OC4wMDU5MiwyNDcuMDg1MTAxIEMxMDk4LjAwNTkyLDE3OC43NjAwOTYgMTA1My40MjUwNiwxNDUuMzI0NDU2IDEwMDEuNTc1NTksMTQ1LjMyNDQ1NiBDOTg1LjEwMDA2MSwxNDUuMzI0NDU2IDk2Ny4xNzA4MDQsMTUxLjEzOTM1IDk2MS4zNTU5MSwxNTQuNTMxMzcxIEw5NjEuMzU1OTEsMTQuMDA0NzY3MiBDOTYxLjM1NTkxLDkuMTU5MDIyMjYgOTU2Ljk5NDc0LDQuNzk3ODUxNzkgOTUyLjE0ODk5NSw0Ljc5Nzg1MTc5IEw4OTguMzYxMjI2LDQuNzk3ODUxNzkgQzg5My41MTU0ODEsNC43OTc4NTE3OSA4ODkuMTU0MzEsOS4xNTkwMjIyNiA4ODkuMTU0MzEsMTQuMDA0NzY3MiBMODg5LjE1NDMxLDMzNC43OTMwODUgWiBNOTUzLjYwMjcxOCwyNDYuNjAwNTI2IEM5NTMuNjAyNzE4LDIyNC43OTQ2NzQgOTcwLjA3ODI1MSwyMDcuODM0NTY2IDk5Mi4zNjg2NzgsMjA3LjgzNDU2NiBDMTAxNC42NTkxMSwyMDcuODM0NTY2IDEwMzEuNjE5MjEsMjI0Ljc5NDY3NCAxMDMxLjYxOTIxLDI0Ni42MDA1MjYgQzEwMzEuNjE5MjEsMjY4Ljg5MDk1MyAxMDE0LjY1OTExLDI4Ni4zMzU2MzUgOTkyLjM2ODY3OCwyODYuMzM1NjM1IEM5NzAuMDc4MjUxLDI4Ni4zMzU2MzUgOTUzLjYwMjcxOCwyNjguODkwOTUzIDk1My42MDI3MTgsMjQ2LjYwMDUyNiBMOTUzLjYwMjcxOCwyNDYuNjAwNTI2IFogTTExMzQuMjU2NDUsMzIxLjIyNDk5OSBDMTEzNC4yNTY0NSwzMzYuMjQ2ODA4IDExNDYuODU1MzksMzQ4Ljg0NTc0NSAxMTYxLjg3NzIsMzQ4Ljg0NTc0NSBDMTE3Ny4zODM1OCwzNDguODQ1NzQ1IDExODkuNDk3OTUsMzM2LjI0NjgwOCAxMTg5LjQ5Nzk1LDMyMS4yMjQ5OTkgQzExODkuNDk3OTUsMzA1LjcxODYxNSAxMTc3LjM4MzU4LDI5My42MDQyNTIgMTE2MS44NzcyLDI5My42MDQyNTIgQzExNDYuODU1MzksMjkzLjYwNDI1MiAxMTM0LjI1NjQ1LDMwNS43MTg2MTUgMTEzNC4yNTY0NSwzMjEuMjI0OTk5IEwxMTM0LjI1NjQ1LDMyMS4yMjQ5OTkgWiBNMTIzNi4wMTcxLDMzMi44NTQ3ODcgQzEyNDUuNzA4NTksMzQwLjYwNzk3OSAxMjY5LjkzNzMxLDM0OC44NDU3NDUgMTMwMS45MTkyMywzNDguODQ1NzQ1IEMxMzU2LjY3NjE1LDM0OC44NDU3NDUgMTM4My44MTIzMiwzMjEuMjI0OTk5IDEzODMuODEyMzIsMjg3LjMwNDc4NCBDMTM4My44MTIzMiwyNDguNTM4ODI0IDEzNTYuNjc2MTUsMjMzLjAzMjQ0IDEzMTcuNDI1NjEsMjE5LjQ2NDM1NCBDMTMwMC45NTAwOCwyMTMuNjQ5NDYgMTI5NS42MTk3NiwyMDguODAzNzE1IDEyOTUuNjE5NzYsMjAzLjk1Nzk3IEMxMjk1LjYxOTc2LDE5OC42Mjc2NTEgMTI5OS45ODA5MywxOTcuMTczOTI3IDEzMDYuMjgwNCwxOTcuMTczOTI3IEMxMzI1LjE3ODgsMTk3LjE3MzkyNyAxMzQ3LjQ2OTIzLDIwOC4zMTkxNDEgMTM0Ny40NjkyMywyMDguMzE5MTQxIEMxMzUxLjM0NTgzLDIwOS43NzI4NjQgMTM1Ni4xOTE1NywyMDguMzE5MTQxIDEzNTcuNjQ1MywyMDUuNDExNjk0IEwxMzc1LjU3NDU1LDE3Mi40NjA2MjggQzEzNzguNDgyLDE2Ny42MTQ4ODMgMTM3NS4wODk5OCwxNjMuMjUzNzEyIDEzNzAuNzI4ODEsMTYwLjM0NjI2NSBDMTM2MC4wNjgxNywxNTMuNTYyMjIzIDEzMzYuODA4NTksMTQ1LjMyNDQ1NiAxMzA2LjI4MDQsMTQ1LjMyNDQ1NiBDMTI1My45NDYzNSwxNDUuMzI0NDU2IDEyMzAuNjg2NzgsMTcxLjQ5MTQ3OSAxMjMwLjY4Njc4LDIwMy45NTc5NyBDMTIzMC42ODY3OCwyMzQuMDAxNTg5IDEyNDcuMTYyMzEsMjU1LjgwNzQ0MSAxMjg0Ljk1OTEyLDI2OC44OTA5NTMgQzEzMDkuNjcyNDIsMjc3LjYxMzI5NCAxMzEyLjU3OTg3LDI4NC4zOTczMzcgMTMxMi41Nzk4NywyODkuMjQzMDgyIEMxMzEyLjU3OTg3LDI5NS4wNTc5NzYgMTMwOC4yMTg3LDI5Ny45NjU0MjMgMTMwMy4zNzI5NSwyOTcuOTY1NDIzIEMxMjgyLjUzNjI1LDI5Ny45NjU0MjMgMTI1OS43NjEyNSwyODUuMzY2NDg2IDEyNTkuNzYxMjUsMjg1LjM2NjQ4NiBDMTI1NS44ODQ2NSwyODMuNDI4MTg4IDEyNTEuMDM4OTEsMjg2LjMzNTYzNSAxMjQ5LjU4NTE4LDI4OS4yNDMwODIgTDEyMzIuNjI1MDgsMzIyLjY3ODcyMiBDMTIzMC4yMDIyLDMyNy4wMzk4OTMgMTIzMi42MjUwOCwzMjkuOTQ3MzQgMTIzNi4wMTcxLDMzMi44NTQ3ODcgTDEyMzYuMDE3MSwzMzIuODU0Nzg3IFogTTE0MDcuNTU2NDcsMjQ2LjYwMDUyNiBDMTQwNy41NTY0NywzMDIuMzI2NTkzIDE0NTMuMTA2NDcsMzQ4Ljg0NTc0NSAxNTA4LjM0Nzk2LDM0OC44NDU3NDUgQzE1NjMuNTg5NDYsMzQ4Ljg0NTc0NSAxNjA5LjEzOTQ2LDMwMi4zMjY1OTMgMTYwOS4xMzk0NiwyNDYuNjAwNTI2IEMxNjA5LjEzOTQ2LDE5MS44NDM2MDggMTU2My41ODk0NiwxNDUuMzI0NDU2IDE1MDguMzQ3OTYsMTQ1LjMyNDQ1NiBDMTQ1My4xMDY0NywxNDUuMzI0NDU2IDE0MDcuNTU2NDcsMTkxLjg0MzYwOCAxNDA3LjU1NjQ3LDI0Ni42MDA1MjYgTDE0MDcuNTU2NDcsMjQ2LjYwMDUyNiBaIE0xNDcwLjA2NjU4LDI0Ni42MDA1MjYgQzE0NzAuMDY2NTgsMjI1LjI3OTI0OCAxNDg3LjAyNjY5LDIwNy44MzQ1NjYgMTUwOC4zNDc5NiwyMDcuODM0NTY2IEMxNTI5LjY2OTI0LDIwNy44MzQ1NjYgMTU0Ni42MjkzNSwyMjUuMjc5MjQ4IDE1NDYuNjI5MzUsMjQ2LjYwMDUyNiBDMTU0Ni42MjkzNSwyNjguNDA2Mzc4IDE1MjkuNjY5MjQsMjg2LjMzNTYzNSAxNTA4LjM0Nzk2LDI4Ni4zMzU2MzUgQzE0ODcuMDI2NjksMjg2LjMzNTYzNSAxNDcwLjA2NjU4LDI2OC40MDYzNzggMTQ3MC4wNjY1OCwyNDYuNjAwNTI2IEwxNDcwLjA2NjU4LDI0Ni42MDA1MjYgWiBNMTYzMS40Mjk4OSwyNDcuMDg1MTAxIEMxNjMxLjQyOTg5LDMwNS4yMzQwNCAxNjgwLjM3MTkxLDM0OC44NDU3NDUgMTczNS42MTM0LDM0OC44NDU3NDUgQzE3NzAuNTAyNzcsMzQ4Ljg0NTc0NSAxNzk1LjcwMDY0LDMzNS4yNzc2NTkgMTgxMy42Mjk5LDMwOC4xNDE0ODcgQzE4MTcuMDIxOTIsMzAzLjI5NTc0MiAxODE0LjU5OTA1LDI5OC40NDk5OTcgMTgxMC4yMzc4OCwyOTQuNTczNDAxIEwxNzgxLjE2MzQxLDI2OS4zNzU1MjcgQzE3NzguMjU1OTYsMjY2Ljk1MjY1NSAxNzczLjg5NDc5LDI2Ny45MjE4MDQgMTc3MC41MDI3NywyNzEuMzEzODI1IEMxNzYyLjc0OTU4LDI3OS4wNjcwMTcgMTc1NC41MTE4MSwyODYuMzM1NjM1IDE3MzcuNTUxNywyODYuMzM1NjM1IEMxNzE2LjIzMDQyLDI4Ni4zMzU2MzUgMTY5OS43NTQ4OSwyNjguODkwOTUzIDE2OTkuNzU0ODksMjQ3LjA4NTEwMSBDMTY5OS43NTQ4OSwyMjUuNzYzODIzIDE3MTcuMTk5NTcsMjA3LjgzNDU2NiAxNzM4LjUyMDg1LDIwNy44MzQ1NjYgQzE3NDkuNjY2MDYsMjA3LjgzNDU2NiAxNzU5Ljg0MjEzLDIxMy4xNjQ4ODYgMTc2Ni42MjYxNywyMjAuNDMzNTAzIEMxNzY5LjA0OTA0LDIyMi44NTYzNzYgMTc3NC44NjM5NCwyMjMuODI1NTI1IDE3NzcuMjg2ODEsMjIxLjQwMjY1MiBMMTgwNi4zNjEyOCwxOTMuNzgxOTA2IEMxODEwLjcyMjQ1LDE4OS45MDUzMSAxODEyLjE3NjE3LDE4NC41NzQ5OSAxODA4Ljc4NDE1LDE4MC4yMTM4MiBDMTc5MC4zNzAzMiwxNTcuOTIzMzkzIDE3NjYuNjI2MTcsMTQ1LjMyNDQ1NiAxNzM2LjA5Nzk4LDE0NS4zMjQ0NTYgQzE2ODAuODU2NDksMTQ1LjMyNDQ1NiAxNjMxLjQyOTg5LDE4OS45MDUzMSAxNjMxLjQyOTg5LDI0Ny4wODUxMDEgTDE2MzEuNDI5ODksMjQ3LjA4NTEwMSBaIE0xODg1LjM0NjkyLDkxLjUzNjY4NjggQzE5MDYuNjY4Miw5MS41MzY2ODY4IDE5MjQuMTEyODgsNzQuNTc2NTc5NCAxOTI0LjExMjg4LDUzLjI1NTMwMTUgQzE5MjQuMTEyODgsMzEuOTM0MDIzNiAxOTA2LjY2ODIsMTQuNDg5MzQxNyAxODg1LjM0NjkyLDE0LjQ4OTM0MTcgQzE4NjQuMDI1NjUsMTQuNDg5MzQxNyAxODQ3LjA2NTU0LDMxLjkzNDAyMzYgMTg0Ny4wNjU1NCw1My4yNTUzMDE1IEMxODQ3LjA2NTU0LDc0LjU3NjU3OTQgMTg2NC4wMjU2NSw5MS41MzY2ODY4IDE4ODUuMzQ2OTIsOTEuNTM2Njg2OCBMMTg4NS4zNDY5Miw5MS41MzY2ODY4IFogTTE4NDkuOTcyOTksMzM0Ljc5MzA4NSBDMTg0OS45NzI5OSwzMzkuNjM4ODMgMTg1NC4zMzQxNiwzNDQgMTg1OS4xNzk5LDM0NCBMMTkxMi40ODMxLDM0NCBDMTkxNy4zMjg4NCwzNDQgMTkyMS42OTAwMSwzMzkuNjM4ODMgMTkyMS42OTAwMSwzMzQuNzkzMDg1IEwxOTIxLjY5MDAxLDE1OS4zNzcxMTYgQzE5MjEuNjkwMDEsMTU0LjA0Njc5NyAxOTE3LjMyODg0LDE1MC4xNzAyMDEgMTkxMi40ODMxLDE1MC4xNzAyMDEgTDE4NTkuMTc5OSwxNTAuMTcwMjAxIEMxODU0LjMzNDE2LDE1MC4xNzAyMDEgMTg0OS45NzI5OSwxNTQuMDQ2Nzk3IDE4NDkuOTcyOTksMTU5LjM3NzExNiBMMTg0OS45NzI5OSwzMzQuNzkzMDg1IFogTTE5NjAuOTQwNTUsMjg0Ljg4MTkxMSBDMTk2MC45NDA1NSwzMjMuMTYzMjk3IDE5ODkuNTMwNDQsMzQ4Ljg0NTc0NSAyMDI3LjgxMTgzLDM0OC44NDU3NDUgQzIwNTguMzQwMDIsMzQ4Ljg0NTc0NSAyMDc1LjMwMDEzLDMzNC43OTMwODUgMjA4Ni40NDUzNCwzMjQuNjE3MDIgTDIwOTMuMjI5MzgsMzM3LjcwMDUzMiBDMjA5NS42NTIyNiwzNDMuMDMwODUxIDIwOTkuMDQ0MjgsMzQ0IDIxMDEuOTUxNzIsMzQ0IEwyMTIzLjI3MywzNDQgQzIxMjguMTE4NzUsMzQ0IDIxMzIuNDc5OTIsMzM5LjYzODgzIDIxMzIuNDc5OTIsMzM0Ljc5MzA4NSBMMjEzMi40Nzk5MiwyMjcuNzAyMTIxIEMyMTMyLjQ3OTkyLDE3MC41MjIzMyAyMTEwLjY3NDA3LDE0NS4zMjQ0NTYgMjA1MC41ODY4MywxNDUuMzI0NDU2IEMyMDI0LjQxOTgsMTQ1LjMyNDQ1NiAxOTkwLjQ5OTU5LDE1MS4xMzkzNSAxOTg2LjEzODQyLDE1Mi41OTMwNzQgQzE5ODEuNzc3MjUsMTU0LjA0Njc5NyAxOTc3LjQxNjA4LDE1Ny40Mzg4MTggMTk3OC44Njk4LDE2NS42NzY1ODUgTDE5ODMuMjMwOTcsMTk2LjIwNDc3OCBDMTk4NC4yMDAxMiwyMDMuNDczMzk2IDE5ODcuNTkyMTQsMjA4LjgwMzcxNSAxOTk0Ljg2MDc2LDIwNi4zODA4NDMgQzIwMDcuNDU5NywyMDIuNTA0MjQ3IDIwMzAuMjM0NywxOTkuMTEyMjI1IDIwNDMuMzE4MjEsMTk5LjExMjIyNSBDMjA2Ni41Nzc3OSwxOTkuMTEyMjI1IDIwNjkuNDg1MjMsMjA4LjgwMzcxNSAyMDY5LjQ4NTIzLDIyNy43MDIxMjEgQzIwNjkuNDg1MjMsMjI3LjcwMjEyMSAyMDUzLjk3ODg1LDIxOS45NDg5MjkgMjAzMi4xNzMsMjE5Ljk0ODkyOSBDMTk4OC4wNzY3MiwyMTkuOTQ4OTI5IDE5NjAuOTQwNTUsMjQ3LjU2OTY3NSAxOTYwLjk0MDU1LDI4NC44ODE5MTEgTDE5NjAuOTQwNTUsMjg0Ljg4MTkxMSBaIE0yMDIzLjkzNTIzLDI4MC4wMzYxNjYgQzIwMjMuOTM1MjMsMjY4Ljg5MDk1MyAyMDMzLjE0MjE1LDI1OS42ODQwMzcgMjA0NC43NzE5MywyNTkuNjg0MDM3IEMyMDU2LjQwMTcyLDI1OS42ODQwMzcgMjA2NS42MDg2NCwyNjguODkwOTUzIDIwNjYuMDkzMjEsMjgwLjAzNjE2NiBDMjA2Ni4wOTMyMSwyOTEuNjY1OTU0IDIwNTYuNDAxNzIsMzAxLjM1NzQ0NCAyMDQ0Ljc3MTkzLDMwMS4zNTc0NDQgQzIwMzMuMTQyMTUsMzAxLjM1NzQ0NCAyMDIzLjkzNTIzLDI5MS42NjU5NTQgMjAyMy45MzUyMywyODAuMDM2MTY2IEwyMDIzLjkzNTIzLDI4MC4wMzYxNjYgWiBNMjE4MS45MDY1MiwzMzQuNzkzMDg1IEMyMTgxLjkwNjUyLDMzOS42Mzg4MyAyMTg2LjI2NzY5LDM0NCAyMTkxLjExMzQzLDM0NCBMMjI0NC40MTY2MywzNDQgQzIyNDkuMjYyMzcsMzQ0IDIyNTMuNjIzNTQsMzM5LjYzODgzIDIyNTMuNjIzNTQsMzM0Ljc5MzA4NSBMMjI1My42MjM1NCwxNC4wMDQ3NjcyIEMyMjUzLjYyMzU0LDkuMTU5MDIyMjYgMjI0OS4yNjIzNyw0Ljc5Nzg1MTc5IDIyNDQuNDE2NjMsNC43OTc4NTE3OSBMMjE5MS4xMTM0Myw0Ljc5Nzg1MTc5IEMyMTg2LjI2NzY5LDQuNzk3ODUxNzkgMjE4MS45MDY1Miw5LjE1OTAyMjI2IDIxODEuOTA2NTIsMTQuMDA0NzY3MiBMMjE4MS45MDY1MiwzMzQuNzkzMDg1IFpcXFwiIGlkPVxcXCJjbGktLS0tYi5zb2NpYWxcXFwiPjwvcGF0aD48L2c+PC9nPjwvZz48L2c+PC9zdmc+XCJcblxuLyoqKi8gfSxcbi8qIDM5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKG1vZHVsZSwgZ2xvYmFsKSB7LyohIGh0dHBzOi8vbXRocy5iZS9wdW55Y29kZSB2MS4zLjIgYnkgQG1hdGhpYXMgKi9cblx0OyhmdW5jdGlvbihyb290KSB7XG5cdFxuXHRcdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZXMgKi9cblx0XHR2YXIgZnJlZUV4cG9ydHMgPSB0eXBlb2YgZXhwb3J0cyA9PSAnb2JqZWN0JyAmJiBleHBvcnRzICYmXG5cdFx0XHQhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzO1xuXHRcdHZhciBmcmVlTW9kdWxlID0gdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiZcblx0XHRcdCFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlO1xuXHRcdHZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWw7XG5cdFx0aWYgKFxuXHRcdFx0ZnJlZUdsb2JhbC5nbG9iYWwgPT09IGZyZWVHbG9iYWwgfHxcblx0XHRcdGZyZWVHbG9iYWwud2luZG93ID09PSBmcmVlR2xvYmFsIHx8XG5cdFx0XHRmcmVlR2xvYmFsLnNlbGYgPT09IGZyZWVHbG9iYWxcblx0XHQpIHtcblx0XHRcdHJvb3QgPSBmcmVlR2xvYmFsO1xuXHRcdH1cblx0XG5cdFx0LyoqXG5cdFx0ICogVGhlIGBwdW55Y29kZWAgb2JqZWN0LlxuXHRcdCAqIEBuYW1lIHB1bnljb2RlXG5cdFx0ICogQHR5cGUgT2JqZWN0XG5cdFx0ICovXG5cdFx0dmFyIHB1bnljb2RlLFxuXHRcblx0XHQvKiogSGlnaGVzdCBwb3NpdGl2ZSBzaWduZWQgMzItYml0IGZsb2F0IHZhbHVlICovXG5cdFx0bWF4SW50ID0gMjE0NzQ4MzY0NywgLy8gYWthLiAweDdGRkZGRkZGIG9yIDJeMzEtMVxuXHRcblx0XHQvKiogQm9vdHN0cmluZyBwYXJhbWV0ZXJzICovXG5cdFx0YmFzZSA9IDM2LFxuXHRcdHRNaW4gPSAxLFxuXHRcdHRNYXggPSAyNixcblx0XHRza2V3ID0gMzgsXG5cdFx0ZGFtcCA9IDcwMCxcblx0XHRpbml0aWFsQmlhcyA9IDcyLFxuXHRcdGluaXRpYWxOID0gMTI4LCAvLyAweDgwXG5cdFx0ZGVsaW1pdGVyID0gJy0nLCAvLyAnXFx4MkQnXG5cdFxuXHRcdC8qKiBSZWd1bGFyIGV4cHJlc3Npb25zICovXG5cdFx0cmVnZXhQdW55Y29kZSA9IC9eeG4tLS8sXG5cdFx0cmVnZXhOb25BU0NJSSA9IC9bXlxceDIwLVxceDdFXS8sIC8vIHVucHJpbnRhYmxlIEFTQ0lJIGNoYXJzICsgbm9uLUFTQ0lJIGNoYXJzXG5cdFx0cmVnZXhTZXBhcmF0b3JzID0gL1tcXHgyRVxcdTMwMDJcXHVGRjBFXFx1RkY2MV0vZywgLy8gUkZDIDM0OTAgc2VwYXJhdG9yc1xuXHRcblx0XHQvKiogRXJyb3IgbWVzc2FnZXMgKi9cblx0XHRlcnJvcnMgPSB7XG5cdFx0XHQnb3ZlcmZsb3cnOiAnT3ZlcmZsb3c6IGlucHV0IG5lZWRzIHdpZGVyIGludGVnZXJzIHRvIHByb2Nlc3MnLFxuXHRcdFx0J25vdC1iYXNpYyc6ICdJbGxlZ2FsIGlucHV0ID49IDB4ODAgKG5vdCBhIGJhc2ljIGNvZGUgcG9pbnQpJyxcblx0XHRcdCdpbnZhbGlkLWlucHV0JzogJ0ludmFsaWQgaW5wdXQnXG5cdFx0fSxcblx0XG5cdFx0LyoqIENvbnZlbmllbmNlIHNob3J0Y3V0cyAqL1xuXHRcdGJhc2VNaW51c1RNaW4gPSBiYXNlIC0gdE1pbixcblx0XHRmbG9vciA9IE1hdGguZmxvb3IsXG5cdFx0c3RyaW5nRnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZSxcblx0XG5cdFx0LyoqIFRlbXBvcmFyeSB2YXJpYWJsZSAqL1xuXHRcdGtleTtcblx0XG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFxuXHRcdC8qKlxuXHRcdCAqIEEgZ2VuZXJpYyBlcnJvciB1dGlsaXR5IGZ1bmN0aW9uLlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIGVycm9yIHR5cGUuXG5cdFx0ICogQHJldHVybnMge0Vycm9yfSBUaHJvd3MgYSBgUmFuZ2VFcnJvcmAgd2l0aCB0aGUgYXBwbGljYWJsZSBlcnJvciBtZXNzYWdlLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGVycm9yKHR5cGUpIHtcblx0XHRcdHRocm93IFJhbmdlRXJyb3IoZXJyb3JzW3R5cGVdKTtcblx0XHR9XG5cdFxuXHRcdC8qKlxuXHRcdCAqIEEgZ2VuZXJpYyBgQXJyYXkjbWFwYCB1dGlsaXR5IGZ1bmN0aW9uLlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCBmb3IgZXZlcnkgYXJyYXlcblx0XHQgKiBpdGVtLlxuXHRcdCAqIEByZXR1cm5zIHtBcnJheX0gQSBuZXcgYXJyYXkgb2YgdmFsdWVzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFjayBmdW5jdGlvbi5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBtYXAoYXJyYXksIGZuKSB7XG5cdFx0XHR2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXHRcdFx0dmFyIHJlc3VsdCA9IFtdO1xuXHRcdFx0d2hpbGUgKGxlbmd0aC0tKSB7XG5cdFx0XHRcdHJlc3VsdFtsZW5ndGhdID0gZm4oYXJyYXlbbGVuZ3RoXSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH1cblx0XG5cdFx0LyoqXG5cdFx0ICogQSBzaW1wbGUgYEFycmF5I21hcGAtbGlrZSB3cmFwcGVyIHRvIHdvcmsgd2l0aCBkb21haW4gbmFtZSBzdHJpbmdzIG9yIGVtYWlsXG5cdFx0ICogYWRkcmVzc2VzLlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcy5cblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCBmb3IgZXZlcnlcblx0XHQgKiBjaGFyYWN0ZXIuXG5cdFx0ICogQHJldHVybnMge0FycmF5fSBBIG5ldyBzdHJpbmcgb2YgY2hhcmFjdGVycyByZXR1cm5lZCBieSB0aGUgY2FsbGJhY2tcblx0XHQgKiBmdW5jdGlvbi5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBtYXBEb21haW4oc3RyaW5nLCBmbikge1xuXHRcdFx0dmFyIHBhcnRzID0gc3RyaW5nLnNwbGl0KCdAJyk7XG5cdFx0XHR2YXIgcmVzdWx0ID0gJyc7XG5cdFx0XHRpZiAocGFydHMubGVuZ3RoID4gMSkge1xuXHRcdFx0XHQvLyBJbiBlbWFpbCBhZGRyZXNzZXMsIG9ubHkgdGhlIGRvbWFpbiBuYW1lIHNob3VsZCBiZSBwdW55Y29kZWQuIExlYXZlXG5cdFx0XHRcdC8vIHRoZSBsb2NhbCBwYXJ0IChpLmUuIGV2ZXJ5dGhpbmcgdXAgdG8gYEBgKSBpbnRhY3QuXG5cdFx0XHRcdHJlc3VsdCA9IHBhcnRzWzBdICsgJ0AnO1xuXHRcdFx0XHRzdHJpbmcgPSBwYXJ0c1sxXTtcblx0XHRcdH1cblx0XHRcdC8vIEF2b2lkIGBzcGxpdChyZWdleClgIGZvciBJRTggY29tcGF0aWJpbGl0eS4gU2VlICMxNy5cblx0XHRcdHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKHJlZ2V4U2VwYXJhdG9ycywgJ1xceDJFJyk7XG5cdFx0XHR2YXIgbGFiZWxzID0gc3RyaW5nLnNwbGl0KCcuJyk7XG5cdFx0XHR2YXIgZW5jb2RlZCA9IG1hcChsYWJlbHMsIGZuKS5qb2luKCcuJyk7XG5cdFx0XHRyZXR1cm4gcmVzdWx0ICsgZW5jb2RlZDtcblx0XHR9XG5cdFxuXHRcdC8qKlxuXHRcdCAqIENyZWF0ZXMgYW4gYXJyYXkgY29udGFpbmluZyB0aGUgbnVtZXJpYyBjb2RlIHBvaW50cyBvZiBlYWNoIFVuaWNvZGVcblx0XHQgKiBjaGFyYWN0ZXIgaW4gdGhlIHN0cmluZy4gV2hpbGUgSmF2YVNjcmlwdCB1c2VzIFVDUy0yIGludGVybmFsbHksXG5cdFx0ICogdGhpcyBmdW5jdGlvbiB3aWxsIGNvbnZlcnQgYSBwYWlyIG9mIHN1cnJvZ2F0ZSBoYWx2ZXMgKGVhY2ggb2Ygd2hpY2hcblx0XHQgKiBVQ1MtMiBleHBvc2VzIGFzIHNlcGFyYXRlIGNoYXJhY3RlcnMpIGludG8gYSBzaW5nbGUgY29kZSBwb2ludCxcblx0XHQgKiBtYXRjaGluZyBVVEYtMTYuXG5cdFx0ICogQHNlZSBgcHVueWNvZGUudWNzMi5lbmNvZGVgXG5cdFx0ICogQHNlZSA8aHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtZW5jb2Rpbmc+XG5cdFx0ICogQG1lbWJlck9mIHB1bnljb2RlLnVjczJcblx0XHQgKiBAbmFtZSBkZWNvZGVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nIFRoZSBVbmljb2RlIGlucHV0IHN0cmluZyAoVUNTLTIpLlxuXHRcdCAqIEByZXR1cm5zIHtBcnJheX0gVGhlIG5ldyBhcnJheSBvZiBjb2RlIHBvaW50cy5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiB1Y3MyZGVjb2RlKHN0cmluZykge1xuXHRcdFx0dmFyIG91dHB1dCA9IFtdLFxuXHRcdFx0ICAgIGNvdW50ZXIgPSAwLFxuXHRcdFx0ICAgIGxlbmd0aCA9IHN0cmluZy5sZW5ndGgsXG5cdFx0XHQgICAgdmFsdWUsXG5cdFx0XHQgICAgZXh0cmE7XG5cdFx0XHR3aGlsZSAoY291bnRlciA8IGxlbmd0aCkge1xuXHRcdFx0XHR2YWx1ZSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7XG5cdFx0XHRcdGlmICh2YWx1ZSA+PSAweEQ4MDAgJiYgdmFsdWUgPD0gMHhEQkZGICYmIGNvdW50ZXIgPCBsZW5ndGgpIHtcblx0XHRcdFx0XHQvLyBoaWdoIHN1cnJvZ2F0ZSwgYW5kIHRoZXJlIGlzIGEgbmV4dCBjaGFyYWN0ZXJcblx0XHRcdFx0XHRleHRyYSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7XG5cdFx0XHRcdFx0aWYgKChleHRyYSAmIDB4RkMwMCkgPT0gMHhEQzAwKSB7IC8vIGxvdyBzdXJyb2dhdGVcblx0XHRcdFx0XHRcdG91dHB1dC5wdXNoKCgodmFsdWUgJiAweDNGRikgPDwgMTApICsgKGV4dHJhICYgMHgzRkYpICsgMHgxMDAwMCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIHVubWF0Y2hlZCBzdXJyb2dhdGU7IG9ubHkgYXBwZW5kIHRoaXMgY29kZSB1bml0LCBpbiBjYXNlIHRoZSBuZXh0XG5cdFx0XHRcdFx0XHQvLyBjb2RlIHVuaXQgaXMgdGhlIGhpZ2ggc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXJcblx0XHRcdFx0XHRcdG91dHB1dC5wdXNoKHZhbHVlKTtcblx0XHRcdFx0XHRcdGNvdW50ZXItLTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0b3V0cHV0LnB1c2godmFsdWUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gb3V0cHV0O1xuXHRcdH1cblx0XG5cdFx0LyoqXG5cdFx0ICogQ3JlYXRlcyBhIHN0cmluZyBiYXNlZCBvbiBhbiBhcnJheSBvZiBudW1lcmljIGNvZGUgcG9pbnRzLlxuXHRcdCAqIEBzZWUgYHB1bnljb2RlLnVjczIuZGVjb2RlYFxuXHRcdCAqIEBtZW1iZXJPZiBwdW55Y29kZS51Y3MyXG5cdFx0ICogQG5hbWUgZW5jb2RlXG5cdFx0ICogQHBhcmFtIHtBcnJheX0gY29kZVBvaW50cyBUaGUgYXJyYXkgb2YgbnVtZXJpYyBjb2RlIHBvaW50cy5cblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgbmV3IFVuaWNvZGUgc3RyaW5nIChVQ1MtMikuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gdWNzMmVuY29kZShhcnJheSkge1xuXHRcdFx0cmV0dXJuIG1hcChhcnJheSwgZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdFx0dmFyIG91dHB1dCA9ICcnO1xuXHRcdFx0XHRpZiAodmFsdWUgPiAweEZGRkYpIHtcblx0XHRcdFx0XHR2YWx1ZSAtPSAweDEwMDAwO1xuXHRcdFx0XHRcdG91dHB1dCArPSBzdHJpbmdGcm9tQ2hhckNvZGUodmFsdWUgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApO1xuXHRcdFx0XHRcdHZhbHVlID0gMHhEQzAwIHwgdmFsdWUgJiAweDNGRjtcblx0XHRcdFx0fVxuXHRcdFx0XHRvdXRwdXQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlKTtcblx0XHRcdFx0cmV0dXJuIG91dHB1dDtcblx0XHRcdH0pLmpvaW4oJycpO1xuXHRcdH1cblx0XG5cdFx0LyoqXG5cdFx0ICogQ29udmVydHMgYSBiYXNpYyBjb2RlIHBvaW50IGludG8gYSBkaWdpdC9pbnRlZ2VyLlxuXHRcdCAqIEBzZWUgYGRpZ2l0VG9CYXNpYygpYFxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHtOdW1iZXJ9IGNvZGVQb2ludCBUaGUgYmFzaWMgbnVtZXJpYyBjb2RlIHBvaW50IHZhbHVlLlxuXHRcdCAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludCAoZm9yIHVzZSBpblxuXHRcdCAqIHJlcHJlc2VudGluZyBpbnRlZ2VycykgaW4gdGhlIHJhbmdlIGAwYCB0byBgYmFzZSAtIDFgLCBvciBgYmFzZWAgaWZcblx0XHQgKiB0aGUgY29kZSBwb2ludCBkb2VzIG5vdCByZXByZXNlbnQgYSB2YWx1ZS5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBiYXNpY1RvRGlnaXQoY29kZVBvaW50KSB7XG5cdFx0XHRpZiAoY29kZVBvaW50IC0gNDggPCAxMCkge1xuXHRcdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gMjI7XG5cdFx0XHR9XG5cdFx0XHRpZiAoY29kZVBvaW50IC0gNjUgPCAyNikge1xuXHRcdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gNjU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoY29kZVBvaW50IC0gOTcgPCAyNikge1xuXHRcdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gOTc7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gYmFzZTtcblx0XHR9XG5cdFxuXHRcdC8qKlxuXHRcdCAqIENvbnZlcnRzIGEgZGlnaXQvaW50ZWdlciBpbnRvIGEgYmFzaWMgY29kZSBwb2ludC5cblx0XHQgKiBAc2VlIGBiYXNpY1RvRGlnaXQoKWBcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7TnVtYmVyfSBkaWdpdCBUaGUgbnVtZXJpYyB2YWx1ZSBvZiBhIGJhc2ljIGNvZGUgcG9pbnQuXG5cdFx0ICogQHJldHVybnMge051bWJlcn0gVGhlIGJhc2ljIGNvZGUgcG9pbnQgd2hvc2UgdmFsdWUgKHdoZW4gdXNlZCBmb3Jcblx0XHQgKiByZXByZXNlbnRpbmcgaW50ZWdlcnMpIGlzIGBkaWdpdGAsIHdoaWNoIG5lZWRzIHRvIGJlIGluIHRoZSByYW5nZVxuXHRcdCAqIGAwYCB0byBgYmFzZSAtIDFgLiBJZiBgZmxhZ2AgaXMgbm9uLXplcm8sIHRoZSB1cHBlcmNhc2UgZm9ybSBpc1xuXHRcdCAqIHVzZWQ7IGVsc2UsIHRoZSBsb3dlcmNhc2UgZm9ybSBpcyB1c2VkLiBUaGUgYmVoYXZpb3IgaXMgdW5kZWZpbmVkXG5cdFx0ICogaWYgYGZsYWdgIGlzIG5vbi16ZXJvIGFuZCBgZGlnaXRgIGhhcyBubyB1cHBlcmNhc2UgZm9ybS5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBkaWdpdFRvQmFzaWMoZGlnaXQsIGZsYWcpIHtcblx0XHRcdC8vICAwLi4yNSBtYXAgdG8gQVNDSUkgYS4ueiBvciBBLi5aXG5cdFx0XHQvLyAyNi4uMzUgbWFwIHRvIEFTQ0lJIDAuLjlcblx0XHRcdHJldHVybiBkaWdpdCArIDIyICsgNzUgKiAoZGlnaXQgPCAyNikgLSAoKGZsYWcgIT0gMCkgPDwgNSk7XG5cdFx0fVxuXHRcblx0XHQvKipcblx0XHQgKiBCaWFzIGFkYXB0YXRpb24gZnVuY3Rpb24gYXMgcGVyIHNlY3Rpb24gMy40IG9mIFJGQyAzNDkyLlxuXHRcdCAqIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM0OTIjc2VjdGlvbi0zLjRcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGFkYXB0KGRlbHRhLCBudW1Qb2ludHMsIGZpcnN0VGltZSkge1xuXHRcdFx0dmFyIGsgPSAwO1xuXHRcdFx0ZGVsdGEgPSBmaXJzdFRpbWUgPyBmbG9vcihkZWx0YSAvIGRhbXApIDogZGVsdGEgPj4gMTtcblx0XHRcdGRlbHRhICs9IGZsb29yKGRlbHRhIC8gbnVtUG9pbnRzKTtcblx0XHRcdGZvciAoLyogbm8gaW5pdGlhbGl6YXRpb24gKi87IGRlbHRhID4gYmFzZU1pbnVzVE1pbiAqIHRNYXggPj4gMTsgayArPSBiYXNlKSB7XG5cdFx0XHRcdGRlbHRhID0gZmxvb3IoZGVsdGEgLyBiYXNlTWludXNUTWluKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBmbG9vcihrICsgKGJhc2VNaW51c1RNaW4gKyAxKSAqIGRlbHRhIC8gKGRlbHRhICsgc2tldykpO1xuXHRcdH1cblx0XG5cdFx0LyoqXG5cdFx0ICogQ29udmVydHMgYSBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzIHRvIGEgc3RyaW5nIG9mIFVuaWNvZGVcblx0XHQgKiBzeW1ib2xzLlxuXHRcdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy5cblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgcmVzdWx0aW5nIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gZGVjb2RlKGlucHV0KSB7XG5cdFx0XHQvLyBEb24ndCB1c2UgVUNTLTJcblx0XHRcdHZhciBvdXRwdXQgPSBbXSxcblx0XHRcdCAgICBpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aCxcblx0XHRcdCAgICBvdXQsXG5cdFx0XHQgICAgaSA9IDAsXG5cdFx0XHQgICAgbiA9IGluaXRpYWxOLFxuXHRcdFx0ICAgIGJpYXMgPSBpbml0aWFsQmlhcyxcblx0XHRcdCAgICBiYXNpYyxcblx0XHRcdCAgICBqLFxuXHRcdFx0ICAgIGluZGV4LFxuXHRcdFx0ICAgIG9sZGksXG5cdFx0XHQgICAgdyxcblx0XHRcdCAgICBrLFxuXHRcdFx0ICAgIGRpZ2l0LFxuXHRcdFx0ICAgIHQsXG5cdFx0XHQgICAgLyoqIENhY2hlZCBjYWxjdWxhdGlvbiByZXN1bHRzICovXG5cdFx0XHQgICAgYmFzZU1pbnVzVDtcblx0XG5cdFx0XHQvLyBIYW5kbGUgdGhlIGJhc2ljIGNvZGUgcG9pbnRzOiBsZXQgYGJhc2ljYCBiZSB0aGUgbnVtYmVyIG9mIGlucHV0IGNvZGVcblx0XHRcdC8vIHBvaW50cyBiZWZvcmUgdGhlIGxhc3QgZGVsaW1pdGVyLCBvciBgMGAgaWYgdGhlcmUgaXMgbm9uZSwgdGhlbiBjb3B5XG5cdFx0XHQvLyB0aGUgZmlyc3QgYmFzaWMgY29kZSBwb2ludHMgdG8gdGhlIG91dHB1dC5cblx0XG5cdFx0XHRiYXNpYyA9IGlucHV0Lmxhc3RJbmRleE9mKGRlbGltaXRlcik7XG5cdFx0XHRpZiAoYmFzaWMgPCAwKSB7XG5cdFx0XHRcdGJhc2ljID0gMDtcblx0XHRcdH1cblx0XG5cdFx0XHRmb3IgKGogPSAwOyBqIDwgYmFzaWM7ICsraikge1xuXHRcdFx0XHQvLyBpZiBpdCdzIG5vdCBhIGJhc2ljIGNvZGUgcG9pbnRcblx0XHRcdFx0aWYgKGlucHV0LmNoYXJDb2RlQXQoaikgPj0gMHg4MCkge1xuXHRcdFx0XHRcdGVycm9yKCdub3QtYmFzaWMnKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRvdXRwdXQucHVzaChpbnB1dC5jaGFyQ29kZUF0KGopKTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBNYWluIGRlY29kaW5nIGxvb3A6IHN0YXJ0IGp1c3QgYWZ0ZXIgdGhlIGxhc3QgZGVsaW1pdGVyIGlmIGFueSBiYXNpYyBjb2RlXG5cdFx0XHQvLyBwb2ludHMgd2VyZSBjb3BpZWQ7IHN0YXJ0IGF0IHRoZSBiZWdpbm5pbmcgb3RoZXJ3aXNlLlxuXHRcblx0XHRcdGZvciAoaW5kZXggPSBiYXNpYyA+IDAgPyBiYXNpYyArIDEgOiAwOyBpbmRleCA8IGlucHV0TGVuZ3RoOyAvKiBubyBmaW5hbCBleHByZXNzaW9uICovKSB7XG5cdFxuXHRcdFx0XHQvLyBgaW5kZXhgIGlzIHRoZSBpbmRleCBvZiB0aGUgbmV4dCBjaGFyYWN0ZXIgdG8gYmUgY29uc3VtZWQuXG5cdFx0XHRcdC8vIERlY29kZSBhIGdlbmVyYWxpemVkIHZhcmlhYmxlLWxlbmd0aCBpbnRlZ2VyIGludG8gYGRlbHRhYCxcblx0XHRcdFx0Ly8gd2hpY2ggZ2V0cyBhZGRlZCB0byBgaWAuIFRoZSBvdmVyZmxvdyBjaGVja2luZyBpcyBlYXNpZXJcblx0XHRcdFx0Ly8gaWYgd2UgaW5jcmVhc2UgYGlgIGFzIHdlIGdvLCB0aGVuIHN1YnRyYWN0IG9mZiBpdHMgc3RhcnRpbmdcblx0XHRcdFx0Ly8gdmFsdWUgYXQgdGhlIGVuZCB0byBvYnRhaW4gYGRlbHRhYC5cblx0XHRcdFx0Zm9yIChvbGRpID0gaSwgdyA9IDEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkge1xuXHRcblx0XHRcdFx0XHRpZiAoaW5kZXggPj0gaW5wdXRMZW5ndGgpIHtcblx0XHRcdFx0XHRcdGVycm9yKCdpbnZhbGlkLWlucHV0Jyk7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRkaWdpdCA9IGJhc2ljVG9EaWdpdChpbnB1dC5jaGFyQ29kZUF0KGluZGV4KyspKTtcblx0XG5cdFx0XHRcdFx0aWYgKGRpZ2l0ID49IGJhc2UgfHwgZGlnaXQgPiBmbG9vcigobWF4SW50IC0gaSkgLyB3KSkge1xuXHRcdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRpICs9IGRpZ2l0ICogdztcblx0XHRcdFx0XHR0ID0gayA8PSBiaWFzID8gdE1pbiA6IChrID49IGJpYXMgKyB0TWF4ID8gdE1heCA6IGsgLSBiaWFzKTtcblx0XG5cdFx0XHRcdFx0aWYgKGRpZ2l0IDwgdCkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRiYXNlTWludXNUID0gYmFzZSAtIHQ7XG5cdFx0XHRcdFx0aWYgKHcgPiBmbG9vcihtYXhJbnQgLyBiYXNlTWludXNUKSkge1xuXHRcdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHR3ICo9IGJhc2VNaW51c1Q7XG5cdFxuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRvdXQgPSBvdXRwdXQubGVuZ3RoICsgMTtcblx0XHRcdFx0YmlhcyA9IGFkYXB0KGkgLSBvbGRpLCBvdXQsIG9sZGkgPT0gMCk7XG5cdFxuXHRcdFx0XHQvLyBgaWAgd2FzIHN1cHBvc2VkIHRvIHdyYXAgYXJvdW5kIGZyb20gYG91dGAgdG8gYDBgLFxuXHRcdFx0XHQvLyBpbmNyZW1lbnRpbmcgYG5gIGVhY2ggdGltZSwgc28gd2UnbGwgZml4IHRoYXQgbm93OlxuXHRcdFx0XHRpZiAoZmxvb3IoaSAvIG91dCkgPiBtYXhJbnQgLSBuKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdG4gKz0gZmxvb3IoaSAvIG91dCk7XG5cdFx0XHRcdGkgJT0gb3V0O1xuXHRcblx0XHRcdFx0Ly8gSW5zZXJ0IGBuYCBhdCBwb3NpdGlvbiBgaWAgb2YgdGhlIG91dHB1dFxuXHRcdFx0XHRvdXRwdXQuc3BsaWNlKGkrKywgMCwgbik7XG5cdFxuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiB1Y3MyZW5jb2RlKG91dHB1dCk7XG5cdFx0fVxuXHRcblx0XHQvKipcblx0XHQgKiBDb252ZXJ0cyBhIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMgKGUuZy4gYSBkb21haW4gbmFtZSBsYWJlbCkgdG8gYVxuXHRcdCAqIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMuXG5cdFx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzLlxuXHRcdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSByZXN1bHRpbmcgUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBlbmNvZGUoaW5wdXQpIHtcblx0XHRcdHZhciBuLFxuXHRcdFx0ICAgIGRlbHRhLFxuXHRcdFx0ICAgIGhhbmRsZWRDUENvdW50LFxuXHRcdFx0ICAgIGJhc2ljTGVuZ3RoLFxuXHRcdFx0ICAgIGJpYXMsXG5cdFx0XHQgICAgaixcblx0XHRcdCAgICBtLFxuXHRcdFx0ICAgIHEsXG5cdFx0XHQgICAgayxcblx0XHRcdCAgICB0LFxuXHRcdFx0ICAgIGN1cnJlbnRWYWx1ZSxcblx0XHRcdCAgICBvdXRwdXQgPSBbXSxcblx0XHRcdCAgICAvKiogYGlucHV0TGVuZ3RoYCB3aWxsIGhvbGQgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyBpbiBgaW5wdXRgLiAqL1xuXHRcdFx0ICAgIGlucHV0TGVuZ3RoLFxuXHRcdFx0ICAgIC8qKiBDYWNoZWQgY2FsY3VsYXRpb24gcmVzdWx0cyAqL1xuXHRcdFx0ICAgIGhhbmRsZWRDUENvdW50UGx1c09uZSxcblx0XHRcdCAgICBiYXNlTWludXNULFxuXHRcdFx0ICAgIHFNaW51c1Q7XG5cdFxuXHRcdFx0Ly8gQ29udmVydCB0aGUgaW5wdXQgaW4gVUNTLTIgdG8gVW5pY29kZVxuXHRcdFx0aW5wdXQgPSB1Y3MyZGVjb2RlKGlucHV0KTtcblx0XG5cdFx0XHQvLyBDYWNoZSB0aGUgbGVuZ3RoXG5cdFx0XHRpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aDtcblx0XG5cdFx0XHQvLyBJbml0aWFsaXplIHRoZSBzdGF0ZVxuXHRcdFx0biA9IGluaXRpYWxOO1xuXHRcdFx0ZGVsdGEgPSAwO1xuXHRcdFx0YmlhcyA9IGluaXRpYWxCaWFzO1xuXHRcblx0XHRcdC8vIEhhbmRsZSB0aGUgYmFzaWMgY29kZSBwb2ludHNcblx0XHRcdGZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXHRcdFx0XHRpZiAoY3VycmVudFZhbHVlIDwgMHg4MCkge1xuXHRcdFx0XHRcdG91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShjdXJyZW50VmFsdWUpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdGhhbmRsZWRDUENvdW50ID0gYmFzaWNMZW5ndGggPSBvdXRwdXQubGVuZ3RoO1xuXHRcblx0XHRcdC8vIGBoYW5kbGVkQ1BDb3VudGAgaXMgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyB0aGF0IGhhdmUgYmVlbiBoYW5kbGVkO1xuXHRcdFx0Ly8gYGJhc2ljTGVuZ3RoYCBpcyB0aGUgbnVtYmVyIG9mIGJhc2ljIGNvZGUgcG9pbnRzLlxuXHRcblx0XHRcdC8vIEZpbmlzaCB0aGUgYmFzaWMgc3RyaW5nIC0gaWYgaXQgaXMgbm90IGVtcHR5IC0gd2l0aCBhIGRlbGltaXRlclxuXHRcdFx0aWYgKGJhc2ljTGVuZ3RoKSB7XG5cdFx0XHRcdG91dHB1dC5wdXNoKGRlbGltaXRlcik7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gTWFpbiBlbmNvZGluZyBsb29wOlxuXHRcdFx0d2hpbGUgKGhhbmRsZWRDUENvdW50IDwgaW5wdXRMZW5ndGgpIHtcblx0XG5cdFx0XHRcdC8vIEFsbCBub24tYmFzaWMgY29kZSBwb2ludHMgPCBuIGhhdmUgYmVlbiBoYW5kbGVkIGFscmVhZHkuIEZpbmQgdGhlIG5leHRcblx0XHRcdFx0Ly8gbGFyZ2VyIG9uZTpcblx0XHRcdFx0Zm9yIChtID0gbWF4SW50LCBqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHtcblx0XHRcdFx0XHRjdXJyZW50VmFsdWUgPSBpbnB1dFtqXTtcblx0XHRcdFx0XHRpZiAoY3VycmVudFZhbHVlID49IG4gJiYgY3VycmVudFZhbHVlIDwgbSkge1xuXHRcdFx0XHRcdFx0bSA9IGN1cnJlbnRWYWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIEluY3JlYXNlIGBkZWx0YWAgZW5vdWdoIHRvIGFkdmFuY2UgdGhlIGRlY29kZXIncyA8bixpPiBzdGF0ZSB0byA8bSwwPixcblx0XHRcdFx0Ly8gYnV0IGd1YXJkIGFnYWluc3Qgb3ZlcmZsb3dcblx0XHRcdFx0aGFuZGxlZENQQ291bnRQbHVzT25lID0gaGFuZGxlZENQQ291bnQgKyAxO1xuXHRcdFx0XHRpZiAobSAtIG4gPiBmbG9vcigobWF4SW50IC0gZGVsdGEpIC8gaGFuZGxlZENQQ291bnRQbHVzT25lKSkge1xuXHRcdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRkZWx0YSArPSAobSAtIG4pICogaGFuZGxlZENQQ291bnRQbHVzT25lO1xuXHRcdFx0XHRuID0gbTtcblx0XG5cdFx0XHRcdGZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRcdFx0Y3VycmVudFZhbHVlID0gaW5wdXRbal07XG5cdFxuXHRcdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPCBuICYmICsrZGVsdGEgPiBtYXhJbnQpIHtcblx0XHRcdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRWYWx1ZSA9PSBuKSB7XG5cdFx0XHRcdFx0XHQvLyBSZXByZXNlbnQgZGVsdGEgYXMgYSBnZW5lcmFsaXplZCB2YXJpYWJsZS1sZW5ndGggaW50ZWdlclxuXHRcdFx0XHRcdFx0Zm9yIChxID0gZGVsdGEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkge1xuXHRcdFx0XHRcdFx0XHR0ID0gayA8PSBiaWFzID8gdE1pbiA6IChrID49IGJpYXMgKyB0TWF4ID8gdE1heCA6IGsgLSBiaWFzKTtcblx0XHRcdFx0XHRcdFx0aWYgKHEgPCB0KSB7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cU1pbnVzVCA9IHEgLSB0O1xuXHRcdFx0XHRcdFx0XHRiYXNlTWludXNUID0gYmFzZSAtIHQ7XG5cdFx0XHRcdFx0XHRcdG91dHB1dC5wdXNoKFxuXHRcdFx0XHRcdFx0XHRcdHN0cmluZ0Zyb21DaGFyQ29kZShkaWdpdFRvQmFzaWModCArIHFNaW51c1QgJSBiYXNlTWludXNULCAwKSlcblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0cSA9IGZsb29yKHFNaW51c1QgLyBiYXNlTWludXNUKTtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRvdXRwdXQucHVzaChzdHJpbmdGcm9tQ2hhckNvZGUoZGlnaXRUb0Jhc2ljKHEsIDApKSk7XG5cdFx0XHRcdFx0XHRiaWFzID0gYWRhcHQoZGVsdGEsIGhhbmRsZWRDUENvdW50UGx1c09uZSwgaGFuZGxlZENQQ291bnQgPT0gYmFzaWNMZW5ndGgpO1xuXHRcdFx0XHRcdFx0ZGVsdGEgPSAwO1xuXHRcdFx0XHRcdFx0KytoYW5kbGVkQ1BDb3VudDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdCsrZGVsdGE7XG5cdFx0XHRcdCsrbjtcblx0XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xuXHRcdH1cblx0XG5cdFx0LyoqXG5cdFx0ICogQ29udmVydHMgYSBQdW55Y29kZSBzdHJpbmcgcmVwcmVzZW50aW5nIGEgZG9tYWluIG5hbWUgb3IgYW4gZW1haWwgYWRkcmVzc1xuXHRcdCAqIHRvIFVuaWNvZGUuIE9ubHkgdGhlIFB1bnljb2RlZCBwYXJ0cyBvZiB0aGUgaW5wdXQgd2lsbCBiZSBjb252ZXJ0ZWQsIGkuZS5cblx0XHQgKiBpdCBkb2Vzbid0IG1hdHRlciBpZiB5b3UgY2FsbCBpdCBvbiBhIHN0cmluZyB0aGF0IGhhcyBhbHJlYWR5IGJlZW5cblx0XHQgKiBjb252ZXJ0ZWQgdG8gVW5pY29kZS5cblx0XHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIFB1bnljb2RlZCBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzIHRvXG5cdFx0ICogY29udmVydCB0byBVbmljb2RlLlxuXHRcdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBVbmljb2RlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiBQdW55Y29kZVxuXHRcdCAqIHN0cmluZy5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiB0b1VuaWNvZGUoaW5wdXQpIHtcblx0XHRcdHJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykge1xuXHRcdFx0XHRyZXR1cm4gcmVnZXhQdW55Y29kZS50ZXN0KHN0cmluZylcblx0XHRcdFx0XHQ/IGRlY29kZShzdHJpbmcuc2xpY2UoNCkudG9Mb3dlckNhc2UoKSlcblx0XHRcdFx0XHQ6IHN0cmluZztcblx0XHRcdH0pO1xuXHRcdH1cblx0XG5cdFx0LyoqXG5cdFx0ICogQ29udmVydHMgYSBVbmljb2RlIHN0cmluZyByZXByZXNlbnRpbmcgYSBkb21haW4gbmFtZSBvciBhbiBlbWFpbCBhZGRyZXNzIHRvXG5cdFx0ICogUHVueWNvZGUuIE9ubHkgdGhlIG5vbi1BU0NJSSBwYXJ0cyBvZiB0aGUgZG9tYWluIG5hbWUgd2lsbCBiZSBjb252ZXJ0ZWQsXG5cdFx0ICogaS5lLiBpdCBkb2Vzbid0IG1hdHRlciBpZiB5b3UgY2FsbCBpdCB3aXRoIGEgZG9tYWluIHRoYXQncyBhbHJlYWR5IGluXG5cdFx0ICogQVNDSUkuXG5cdFx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzIHRvIGNvbnZlcnQsIGFzIGFcblx0XHQgKiBVbmljb2RlIHN0cmluZy5cblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgUHVueWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIGRvbWFpbiBuYW1lIG9yXG5cdFx0ICogZW1haWwgYWRkcmVzcy5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiB0b0FTQ0lJKGlucHV0KSB7XG5cdFx0XHRyZXR1cm4gbWFwRG9tYWluKGlucHV0LCBmdW5jdGlvbihzdHJpbmcpIHtcblx0XHRcdFx0cmV0dXJuIHJlZ2V4Tm9uQVNDSUkudGVzdChzdHJpbmcpXG5cdFx0XHRcdFx0PyAneG4tLScgKyBlbmNvZGUoc3RyaW5nKVxuXHRcdFx0XHRcdDogc3RyaW5nO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XG5cdFx0LyoqIERlZmluZSB0aGUgcHVibGljIEFQSSAqL1xuXHRcdHB1bnljb2RlID0ge1xuXHRcdFx0LyoqXG5cdFx0XHQgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgUHVueWNvZGUuanMgdmVyc2lvbiBudW1iZXIuXG5cdFx0XHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0XHRcdCAqIEB0eXBlIFN0cmluZ1xuXHRcdFx0ICovXG5cdFx0XHQndmVyc2lvbic6ICcxLjMuMicsXG5cdFx0XHQvKipcblx0XHRcdCAqIEFuIG9iamVjdCBvZiBtZXRob2RzIHRvIGNvbnZlcnQgZnJvbSBKYXZhU2NyaXB0J3MgaW50ZXJuYWwgY2hhcmFjdGVyXG5cdFx0XHQgKiByZXByZXNlbnRhdGlvbiAoVUNTLTIpIHRvIFVuaWNvZGUgY29kZSBwb2ludHMsIGFuZCBiYWNrLlxuXHRcdFx0ICogQHNlZSA8aHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtZW5jb2Rpbmc+XG5cdFx0XHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0XHRcdCAqIEB0eXBlIE9iamVjdFxuXHRcdFx0ICovXG5cdFx0XHQndWNzMic6IHtcblx0XHRcdFx0J2RlY29kZSc6IHVjczJkZWNvZGUsXG5cdFx0XHRcdCdlbmNvZGUnOiB1Y3MyZW5jb2RlXG5cdFx0XHR9LFxuXHRcdFx0J2RlY29kZSc6IGRlY29kZSxcblx0XHRcdCdlbmNvZGUnOiBlbmNvZGUsXG5cdFx0XHQndG9BU0NJSSc6IHRvQVNDSUksXG5cdFx0XHQndG9Vbmljb2RlJzogdG9Vbmljb2RlXG5cdFx0fTtcblx0XG5cdFx0LyoqIEV4cG9zZSBgcHVueWNvZGVgICovXG5cdFx0Ly8gU29tZSBBTUQgYnVpbGQgb3B0aW1pemVycywgbGlrZSByLmpzLCBjaGVjayBmb3Igc3BlY2lmaWMgY29uZGl0aW9uIHBhdHRlcm5zXG5cdFx0Ly8gbGlrZSB0aGUgZm9sbG93aW5nOlxuXHRcdGlmIChcblx0XHRcdHRydWVcblx0XHQpIHtcblx0XHRcdCEoX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHB1bnljb2RlO1xuXHRcdFx0fS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18sIGV4cG9ydHMsIG1vZHVsZSksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcblx0XHR9IGVsc2UgaWYgKGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUpIHtcblx0XHRcdGlmIChtb2R1bGUuZXhwb3J0cyA9PSBmcmVlRXhwb3J0cykgeyAvLyBpbiBOb2RlLmpzIG9yIFJpbmdvSlMgdjAuOC4wK1xuXHRcdFx0XHRmcmVlTW9kdWxlLmV4cG9ydHMgPSBwdW55Y29kZTtcblx0XHRcdH0gZWxzZSB7IC8vIGluIE5hcndoYWwgb3IgUmluZ29KUyB2MC43LjAtXG5cdFx0XHRcdGZvciAoa2V5IGluIHB1bnljb2RlKSB7XG5cdFx0XHRcdFx0cHVueWNvZGUuaGFzT3duUHJvcGVydHkoa2V5KSAmJiAoZnJlZUV4cG9ydHNba2V5XSA9IHB1bnljb2RlW2tleV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHsgLy8gaW4gUmhpbm8gb3IgYSB3ZWIgYnJvd3NlclxuXHRcdFx0cm9vdC5wdW55Y29kZSA9IHB1bnljb2RlO1xuXHRcdH1cblx0XG5cdH0odGhpcykpO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTEpKG1vZHVsZSksIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogNDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuXHQvL1xuXHQvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuXHQvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cdC8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuXHQvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5cdC8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcblx0Ly8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG5cdC8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXHQvL1xuXHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuXHQvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblx0Ly9cblx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuXHQvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5cdC8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cblx0Ly8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG5cdC8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuXHQvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG5cdC8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyBJZiBvYmouaGFzT3duUHJvcGVydHkgaGFzIGJlZW4gb3ZlcnJpZGRlbiwgdGhlbiBjYWxsaW5nXG5cdC8vIG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSB3aWxsIGJyZWFrLlxuXHQvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9qb3llbnQvbm9kZS9pc3N1ZXMvMTcwN1xuXHRmdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocXMsIHNlcCwgZXEsIG9wdGlvbnMpIHtcblx0ICBzZXAgPSBzZXAgfHwgJyYnO1xuXHQgIGVxID0gZXEgfHwgJz0nO1xuXHQgIHZhciBvYmogPSB7fTtcblx0XG5cdCAgaWYgKHR5cGVvZiBxcyAhPT0gJ3N0cmluZycgfHwgcXMubGVuZ3RoID09PSAwKSB7XG5cdCAgICByZXR1cm4gb2JqO1xuXHQgIH1cblx0XG5cdCAgdmFyIHJlZ2V4cCA9IC9cXCsvZztcblx0ICBxcyA9IHFzLnNwbGl0KHNlcCk7XG5cdFxuXHQgIHZhciBtYXhLZXlzID0gMTAwMDtcblx0ICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5tYXhLZXlzID09PSAnbnVtYmVyJykge1xuXHQgICAgbWF4S2V5cyA9IG9wdGlvbnMubWF4S2V5cztcblx0ICB9XG5cdFxuXHQgIHZhciBsZW4gPSBxcy5sZW5ndGg7XG5cdCAgLy8gbWF4S2V5cyA8PSAwIG1lYW5zIHRoYXQgd2Ugc2hvdWxkIG5vdCBsaW1pdCBrZXlzIGNvdW50XG5cdCAgaWYgKG1heEtleXMgPiAwICYmIGxlbiA+IG1heEtleXMpIHtcblx0ICAgIGxlbiA9IG1heEtleXM7XG5cdCAgfVxuXHRcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG5cdCAgICB2YXIgeCA9IHFzW2ldLnJlcGxhY2UocmVnZXhwLCAnJTIwJyksXG5cdCAgICAgICAgaWR4ID0geC5pbmRleE9mKGVxKSxcblx0ICAgICAgICBrc3RyLCB2c3RyLCBrLCB2O1xuXHRcblx0ICAgIGlmIChpZHggPj0gMCkge1xuXHQgICAgICBrc3RyID0geC5zdWJzdHIoMCwgaWR4KTtcblx0ICAgICAgdnN0ciA9IHguc3Vic3RyKGlkeCArIDEpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAga3N0ciA9IHg7XG5cdCAgICAgIHZzdHIgPSAnJztcblx0ICAgIH1cblx0XG5cdCAgICBrID0gZGVjb2RlVVJJQ29tcG9uZW50KGtzdHIpO1xuXHQgICAgdiA9IGRlY29kZVVSSUNvbXBvbmVudCh2c3RyKTtcblx0XG5cdCAgICBpZiAoIWhhc093blByb3BlcnR5KG9iaiwgaykpIHtcblx0ICAgICAgb2JqW2tdID0gdjtcblx0ICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShvYmpba10pKSB7XG5cdCAgICAgIG9ialtrXS5wdXNoKHYpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb2JqW2tdID0gW29ialtrXSwgdl07XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gb2JqO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA0MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBzdHJpbmdpZnlQcmltaXRpdmUgPSBmdW5jdGlvbih2KSB7XG5cdCAgc3dpdGNoICh0eXBlb2Ygdikge1xuXHQgICAgY2FzZSAnc3RyaW5nJzpcblx0ICAgICAgcmV0dXJuIHY7XG5cdFxuXHQgICAgY2FzZSAnYm9vbGVhbic6XG5cdCAgICAgIHJldHVybiB2ID8gJ3RydWUnIDogJ2ZhbHNlJztcblx0XG5cdCAgICBjYXNlICdudW1iZXInOlxuXHQgICAgICByZXR1cm4gaXNGaW5pdGUodikgPyB2IDogJyc7XG5cdFxuXHQgICAgZGVmYXVsdDpcblx0ICAgICAgcmV0dXJuICcnO1xuXHQgIH1cblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqLCBzZXAsIGVxLCBuYW1lKSB7XG5cdCAgc2VwID0gc2VwIHx8ICcmJztcblx0ICBlcSA9IGVxIHx8ICc9Jztcblx0ICBpZiAob2JqID09PSBudWxsKSB7XG5cdCAgICBvYmogPSB1bmRlZmluZWQ7XG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcblx0ICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLm1hcChmdW5jdGlvbihrKSB7XG5cdCAgICAgIHZhciBrcyA9IGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUoaykpICsgZXE7XG5cdCAgICAgIGlmIChBcnJheS5pc0FycmF5KG9ialtrXSkpIHtcblx0ICAgICAgICByZXR1cm4gb2JqW2tdLm1hcChmdW5jdGlvbih2KSB7XG5cdCAgICAgICAgICByZXR1cm4ga3MgKyBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKHYpKTtcblx0ICAgICAgICB9KS5qb2luKHNlcCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmpba10pKTtcblx0ICAgICAgfVxuXHQgICAgfSkuam9pbihzZXApO1xuXHRcblx0ICB9XG5cdFxuXHQgIGlmICghbmFtZSkgcmV0dXJuICcnO1xuXHQgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKG5hbWUpKSArIGVxICtcblx0ICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmopKTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogNDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGV4cG9ydHMuZGVjb2RlID0gZXhwb3J0cy5wYXJzZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHRleHBvcnRzLmVuY29kZSA9IGV4cG9ydHMuc3RyaW5naWZ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cblxuLyoqKi8gfSxcbi8qIDQzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cblx0Ly9cblx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcblx0Ly8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuXHQvLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcblx0Ly8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuXHQvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG5cdC8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuXHQvLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcblx0Ly9cblx0Ly8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcblx0Ly8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cdC8vXG5cdC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncblx0Ly8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuXHQvLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG5cdC8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuXHQvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcblx0Ly8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuXHQvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXHRcblx0dmFyIHB1bnljb2RlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdFxuXHRleHBvcnRzLnBhcnNlID0gdXJsUGFyc2U7XG5cdGV4cG9ydHMucmVzb2x2ZSA9IHVybFJlc29sdmU7XG5cdGV4cG9ydHMucmVzb2x2ZU9iamVjdCA9IHVybFJlc29sdmVPYmplY3Q7XG5cdGV4cG9ydHMuZm9ybWF0ID0gdXJsRm9ybWF0O1xuXHRcblx0ZXhwb3J0cy5VcmwgPSBVcmw7XG5cdFxuXHRmdW5jdGlvbiBVcmwoKSB7XG5cdCAgdGhpcy5wcm90b2NvbCA9IG51bGw7XG5cdCAgdGhpcy5zbGFzaGVzID0gbnVsbDtcblx0ICB0aGlzLmF1dGggPSBudWxsO1xuXHQgIHRoaXMuaG9zdCA9IG51bGw7XG5cdCAgdGhpcy5wb3J0ID0gbnVsbDtcblx0ICB0aGlzLmhvc3RuYW1lID0gbnVsbDtcblx0ICB0aGlzLmhhc2ggPSBudWxsO1xuXHQgIHRoaXMuc2VhcmNoID0gbnVsbDtcblx0ICB0aGlzLnF1ZXJ5ID0gbnVsbDtcblx0ICB0aGlzLnBhdGhuYW1lID0gbnVsbDtcblx0ICB0aGlzLnBhdGggPSBudWxsO1xuXHQgIHRoaXMuaHJlZiA9IG51bGw7XG5cdH1cblx0XG5cdC8vIFJlZmVyZW5jZTogUkZDIDM5ODYsIFJGQyAxODA4LCBSRkMgMjM5NlxuXHRcblx0Ly8gZGVmaW5lIHRoZXNlIGhlcmUgc28gYXQgbGVhc3QgdGhleSBvbmx5IGhhdmUgdG8gYmVcblx0Ly8gY29tcGlsZWQgb25jZSBvbiB0aGUgZmlyc3QgbW9kdWxlIGxvYWQuXG5cdHZhciBwcm90b2NvbFBhdHRlcm4gPSAvXihbYS16MC05ListXSs6KS9pLFxuXHQgICAgcG9ydFBhdHRlcm4gPSAvOlswLTldKiQvLFxuXHRcblx0ICAgIC8vIFJGQyAyMzk2OiBjaGFyYWN0ZXJzIHJlc2VydmVkIGZvciBkZWxpbWl0aW5nIFVSTHMuXG5cdCAgICAvLyBXZSBhY3R1YWxseSBqdXN0IGF1dG8tZXNjYXBlIHRoZXNlLlxuXHQgICAgZGVsaW1zID0gWyc8JywgJz4nLCAnXCInLCAnYCcsICcgJywgJ1xccicsICdcXG4nLCAnXFx0J10sXG5cdFxuXHQgICAgLy8gUkZDIDIzOTY6IGNoYXJhY3RlcnMgbm90IGFsbG93ZWQgZm9yIHZhcmlvdXMgcmVhc29ucy5cblx0ICAgIHVud2lzZSA9IFsneycsICd9JywgJ3wnLCAnXFxcXCcsICdeJywgJ2AnXS5jb25jYXQoZGVsaW1zKSxcblx0XG5cdCAgICAvLyBBbGxvd2VkIGJ5IFJGQ3MsIGJ1dCBjYXVzZSBvZiBYU1MgYXR0YWNrcy4gIEFsd2F5cyBlc2NhcGUgdGhlc2UuXG5cdCAgICBhdXRvRXNjYXBlID0gWydcXCcnXS5jb25jYXQodW53aXNlKSxcblx0ICAgIC8vIENoYXJhY3RlcnMgdGhhdCBhcmUgbmV2ZXIgZXZlciBhbGxvd2VkIGluIGEgaG9zdG5hbWUuXG5cdCAgICAvLyBOb3RlIHRoYXQgYW55IGludmFsaWQgY2hhcnMgYXJlIGFsc28gaGFuZGxlZCwgYnV0IHRoZXNlXG5cdCAgICAvLyBhcmUgdGhlIG9uZXMgdGhhdCBhcmUgKmV4cGVjdGVkKiB0byBiZSBzZWVuLCBzbyB3ZSBmYXN0LXBhdGhcblx0ICAgIC8vIHRoZW0uXG5cdCAgICBub25Ib3N0Q2hhcnMgPSBbJyUnLCAnLycsICc/JywgJzsnLCAnIyddLmNvbmNhdChhdXRvRXNjYXBlKSxcblx0ICAgIGhvc3RFbmRpbmdDaGFycyA9IFsnLycsICc/JywgJyMnXSxcblx0ICAgIGhvc3RuYW1lTWF4TGVuID0gMjU1LFxuXHQgICAgaG9zdG5hbWVQYXJ0UGF0dGVybiA9IC9eW2EtejAtOUEtWl8tXXswLDYzfSQvLFxuXHQgICAgaG9zdG5hbWVQYXJ0U3RhcnQgPSAvXihbYS16MC05QS1aXy1dezAsNjN9KSguKikkLyxcblx0ICAgIC8vIHByb3RvY29scyB0aGF0IGNhbiBhbGxvdyBcInVuc2FmZVwiIGFuZCBcInVud2lzZVwiIGNoYXJzLlxuXHQgICAgdW5zYWZlUHJvdG9jb2wgPSB7XG5cdCAgICAgICdqYXZhc2NyaXB0JzogdHJ1ZSxcblx0ICAgICAgJ2phdmFzY3JpcHQ6JzogdHJ1ZVxuXHQgICAgfSxcblx0ICAgIC8vIHByb3RvY29scyB0aGF0IG5ldmVyIGhhdmUgYSBob3N0bmFtZS5cblx0ICAgIGhvc3RsZXNzUHJvdG9jb2wgPSB7XG5cdCAgICAgICdqYXZhc2NyaXB0JzogdHJ1ZSxcblx0ICAgICAgJ2phdmFzY3JpcHQ6JzogdHJ1ZVxuXHQgICAgfSxcblx0ICAgIC8vIHByb3RvY29scyB0aGF0IGFsd2F5cyBjb250YWluIGEgLy8gYml0LlxuXHQgICAgc2xhc2hlZFByb3RvY29sID0ge1xuXHQgICAgICAnaHR0cCc6IHRydWUsXG5cdCAgICAgICdodHRwcyc6IHRydWUsXG5cdCAgICAgICdmdHAnOiB0cnVlLFxuXHQgICAgICAnZ29waGVyJzogdHJ1ZSxcblx0ICAgICAgJ2ZpbGUnOiB0cnVlLFxuXHQgICAgICAnaHR0cDonOiB0cnVlLFxuXHQgICAgICAnaHR0cHM6JzogdHJ1ZSxcblx0ICAgICAgJ2Z0cDonOiB0cnVlLFxuXHQgICAgICAnZ29waGVyOic6IHRydWUsXG5cdCAgICAgICdmaWxlOic6IHRydWVcblx0ICAgIH0sXG5cdCAgICBxdWVyeXN0cmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHRcblx0ZnVuY3Rpb24gdXJsUGFyc2UodXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCkge1xuXHQgIGlmICh1cmwgJiYgaXNPYmplY3QodXJsKSAmJiB1cmwgaW5zdGFuY2VvZiBVcmwpIHJldHVybiB1cmw7XG5cdFxuXHQgIHZhciB1ID0gbmV3IFVybDtcblx0ICB1LnBhcnNlKHVybCwgcGFyc2VRdWVyeVN0cmluZywgc2xhc2hlc0Rlbm90ZUhvc3QpO1xuXHQgIHJldHVybiB1O1xuXHR9XG5cdFxuXHRVcmwucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24odXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCkge1xuXHQgIGlmICghaXNTdHJpbmcodXJsKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlBhcmFtZXRlciAndXJsJyBtdXN0IGJlIGEgc3RyaW5nLCBub3QgXCIgKyB0eXBlb2YgdXJsKTtcblx0ICB9XG5cdFxuXHQgIHZhciByZXN0ID0gdXJsO1xuXHRcblx0ICAvLyB0cmltIGJlZm9yZSBwcm9jZWVkaW5nLlxuXHQgIC8vIFRoaXMgaXMgdG8gc3VwcG9ydCBwYXJzZSBzdHVmZiBsaWtlIFwiICBodHRwOi8vZm9vLmNvbSAgXFxuXCJcblx0ICByZXN0ID0gcmVzdC50cmltKCk7XG5cdFxuXHQgIHZhciBwcm90byA9IHByb3RvY29sUGF0dGVybi5leGVjKHJlc3QpO1xuXHQgIGlmIChwcm90bykge1xuXHQgICAgcHJvdG8gPSBwcm90b1swXTtcblx0ICAgIHZhciBsb3dlclByb3RvID0gcHJvdG8udG9Mb3dlckNhc2UoKTtcblx0ICAgIHRoaXMucHJvdG9jb2wgPSBsb3dlclByb3RvO1xuXHQgICAgcmVzdCA9IHJlc3Quc3Vic3RyKHByb3RvLmxlbmd0aCk7XG5cdCAgfVxuXHRcblx0ICAvLyBmaWd1cmUgb3V0IGlmIGl0J3MgZ290IGEgaG9zdFxuXHQgIC8vIHVzZXJAc2VydmVyIGlzICphbHdheXMqIGludGVycHJldGVkIGFzIGEgaG9zdG5hbWUsIGFuZCB1cmxcblx0ICAvLyByZXNvbHV0aW9uIHdpbGwgdHJlYXQgLy9mb28vYmFyIGFzIGhvc3Q9Zm9vLHBhdGg9YmFyIGJlY2F1c2UgdGhhdCdzXG5cdCAgLy8gaG93IHRoZSBicm93c2VyIHJlc29sdmVzIHJlbGF0aXZlIFVSTHMuXG5cdCAgaWYgKHNsYXNoZXNEZW5vdGVIb3N0IHx8IHByb3RvIHx8IHJlc3QubWF0Y2goL15cXC9cXC9bXkBcXC9dK0BbXkBcXC9dKy8pKSB7XG5cdCAgICB2YXIgc2xhc2hlcyA9IHJlc3Quc3Vic3RyKDAsIDIpID09PSAnLy8nO1xuXHQgICAgaWYgKHNsYXNoZXMgJiYgIShwcm90byAmJiBob3N0bGVzc1Byb3RvY29sW3Byb3RvXSkpIHtcblx0ICAgICAgcmVzdCA9IHJlc3Quc3Vic3RyKDIpO1xuXHQgICAgICB0aGlzLnNsYXNoZXMgPSB0cnVlO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKCFob3N0bGVzc1Byb3RvY29sW3Byb3RvXSAmJlxuXHQgICAgICAoc2xhc2hlcyB8fCAocHJvdG8gJiYgIXNsYXNoZWRQcm90b2NvbFtwcm90b10pKSkge1xuXHRcblx0ICAgIC8vIHRoZXJlJ3MgYSBob3N0bmFtZS5cblx0ICAgIC8vIHRoZSBmaXJzdCBpbnN0YW5jZSBvZiAvLCA/LCA7LCBvciAjIGVuZHMgdGhlIGhvc3QuXG5cdCAgICAvL1xuXHQgICAgLy8gSWYgdGhlcmUgaXMgYW4gQCBpbiB0aGUgaG9zdG5hbWUsIHRoZW4gbm9uLWhvc3QgY2hhcnMgKmFyZSogYWxsb3dlZFxuXHQgICAgLy8gdG8gdGhlIGxlZnQgb2YgdGhlIGxhc3QgQCBzaWduLCB1bmxlc3Mgc29tZSBob3N0LWVuZGluZyBjaGFyYWN0ZXJcblx0ICAgIC8vIGNvbWVzICpiZWZvcmUqIHRoZSBALXNpZ24uXG5cdCAgICAvLyBVUkxzIGFyZSBvYm5veGlvdXMuXG5cdCAgICAvL1xuXHQgICAgLy8gZXg6XG5cdCAgICAvLyBodHRwOi8vYUBiQGMvID0+IHVzZXI6YUBiIGhvc3Q6Y1xuXHQgICAgLy8gaHR0cDovL2FAYj9AYyA9PiB1c2VyOmEgaG9zdDpjIHBhdGg6Lz9AY1xuXHRcblx0ICAgIC8vIHYwLjEyIFRPRE8oaXNhYWNzKTogVGhpcyBpcyBub3QgcXVpdGUgaG93IENocm9tZSBkb2VzIHRoaW5ncy5cblx0ICAgIC8vIFJldmlldyBvdXIgdGVzdCBjYXNlIGFnYWluc3QgYnJvd3NlcnMgbW9yZSBjb21wcmVoZW5zaXZlbHkuXG5cdFxuXHQgICAgLy8gZmluZCB0aGUgZmlyc3QgaW5zdGFuY2Ugb2YgYW55IGhvc3RFbmRpbmdDaGFyc1xuXHQgICAgdmFyIGhvc3RFbmQgPSAtMTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaG9zdEVuZGluZ0NoYXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBoZWMgPSByZXN0LmluZGV4T2YoaG9zdEVuZGluZ0NoYXJzW2ldKTtcblx0ICAgICAgaWYgKGhlYyAhPT0gLTEgJiYgKGhvc3RFbmQgPT09IC0xIHx8IGhlYyA8IGhvc3RFbmQpKVxuXHQgICAgICAgIGhvc3RFbmQgPSBoZWM7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gYXQgdGhpcyBwb2ludCwgZWl0aGVyIHdlIGhhdmUgYW4gZXhwbGljaXQgcG9pbnQgd2hlcmUgdGhlXG5cdCAgICAvLyBhdXRoIHBvcnRpb24gY2Fubm90IGdvIHBhc3QsIG9yIHRoZSBsYXN0IEAgY2hhciBpcyB0aGUgZGVjaWRlci5cblx0ICAgIHZhciBhdXRoLCBhdFNpZ247XG5cdCAgICBpZiAoaG9zdEVuZCA9PT0gLTEpIHtcblx0ICAgICAgLy8gYXRTaWduIGNhbiBiZSBhbnl3aGVyZS5cblx0ICAgICAgYXRTaWduID0gcmVzdC5sYXN0SW5kZXhPZignQCcpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gYXRTaWduIG11c3QgYmUgaW4gYXV0aCBwb3J0aW9uLlxuXHQgICAgICAvLyBodHRwOi8vYUBiL2NAZCA9PiBob3N0OmIgYXV0aDphIHBhdGg6L2NAZFxuXHQgICAgICBhdFNpZ24gPSByZXN0Lmxhc3RJbmRleE9mKCdAJywgaG9zdEVuZCk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gTm93IHdlIGhhdmUgYSBwb3J0aW9uIHdoaWNoIGlzIGRlZmluaXRlbHkgdGhlIGF1dGguXG5cdCAgICAvLyBQdWxsIHRoYXQgb2ZmLlxuXHQgICAgaWYgKGF0U2lnbiAhPT0gLTEpIHtcblx0ICAgICAgYXV0aCA9IHJlc3Quc2xpY2UoMCwgYXRTaWduKTtcblx0ICAgICAgcmVzdCA9IHJlc3Quc2xpY2UoYXRTaWduICsgMSk7XG5cdCAgICAgIHRoaXMuYXV0aCA9IGRlY29kZVVSSUNvbXBvbmVudChhdXRoKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyB0aGUgaG9zdCBpcyB0aGUgcmVtYWluaW5nIHRvIHRoZSBsZWZ0IG9mIHRoZSBmaXJzdCBub24taG9zdCBjaGFyXG5cdCAgICBob3N0RW5kID0gLTE7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vbkhvc3RDaGFycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgaGVjID0gcmVzdC5pbmRleE9mKG5vbkhvc3RDaGFyc1tpXSk7XG5cdCAgICAgIGlmIChoZWMgIT09IC0xICYmIChob3N0RW5kID09PSAtMSB8fCBoZWMgPCBob3N0RW5kKSlcblx0ICAgICAgICBob3N0RW5kID0gaGVjO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgd2Ugc3RpbGwgaGF2ZSBub3QgaGl0IGl0LCB0aGVuIHRoZSBlbnRpcmUgdGhpbmcgaXMgYSBob3N0LlxuXHQgICAgaWYgKGhvc3RFbmQgPT09IC0xKVxuXHQgICAgICBob3N0RW5kID0gcmVzdC5sZW5ndGg7XG5cdFxuXHQgICAgdGhpcy5ob3N0ID0gcmVzdC5zbGljZSgwLCBob3N0RW5kKTtcblx0ICAgIHJlc3QgPSByZXN0LnNsaWNlKGhvc3RFbmQpO1xuXHRcblx0ICAgIC8vIHB1bGwgb3V0IHBvcnQuXG5cdCAgICB0aGlzLnBhcnNlSG9zdCgpO1xuXHRcblx0ICAgIC8vIHdlJ3ZlIGluZGljYXRlZCB0aGF0IHRoZXJlIGlzIGEgaG9zdG5hbWUsXG5cdCAgICAvLyBzbyBldmVuIGlmIGl0J3MgZW1wdHksIGl0IGhhcyB0byBiZSBwcmVzZW50LlxuXHQgICAgdGhpcy5ob3N0bmFtZSA9IHRoaXMuaG9zdG5hbWUgfHwgJyc7XG5cdFxuXHQgICAgLy8gaWYgaG9zdG5hbWUgYmVnaW5zIHdpdGggWyBhbmQgZW5kcyB3aXRoIF1cblx0ICAgIC8vIGFzc3VtZSB0aGF0IGl0J3MgYW4gSVB2NiBhZGRyZXNzLlxuXHQgICAgdmFyIGlwdjZIb3N0bmFtZSA9IHRoaXMuaG9zdG5hbWVbMF0gPT09ICdbJyAmJlxuXHQgICAgICAgIHRoaXMuaG9zdG5hbWVbdGhpcy5ob3N0bmFtZS5sZW5ndGggLSAxXSA9PT0gJ10nO1xuXHRcblx0ICAgIC8vIHZhbGlkYXRlIGEgbGl0dGxlLlxuXHQgICAgaWYgKCFpcHY2SG9zdG5hbWUpIHtcblx0ICAgICAgdmFyIGhvc3RwYXJ0cyA9IHRoaXMuaG9zdG5hbWUuc3BsaXQoL1xcLi8pO1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGhvc3RwYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB2YXIgcGFydCA9IGhvc3RwYXJ0c1tpXTtcblx0ICAgICAgICBpZiAoIXBhcnQpIGNvbnRpbnVlO1xuXHQgICAgICAgIGlmICghcGFydC5tYXRjaChob3N0bmFtZVBhcnRQYXR0ZXJuKSkge1xuXHQgICAgICAgICAgdmFyIG5ld3BhcnQgPSAnJztcblx0ICAgICAgICAgIGZvciAodmFyIGogPSAwLCBrID0gcGFydC5sZW5ndGg7IGogPCBrOyBqKyspIHtcblx0ICAgICAgICAgICAgaWYgKHBhcnQuY2hhckNvZGVBdChqKSA+IDEyNykge1xuXHQgICAgICAgICAgICAgIC8vIHdlIHJlcGxhY2Ugbm9uLUFTQ0lJIGNoYXIgd2l0aCBhIHRlbXBvcmFyeSBwbGFjZWhvbGRlclxuXHQgICAgICAgICAgICAgIC8vIHdlIG5lZWQgdGhpcyB0byBtYWtlIHN1cmUgc2l6ZSBvZiBob3N0bmFtZSBpcyBub3Rcblx0ICAgICAgICAgICAgICAvLyBicm9rZW4gYnkgcmVwbGFjaW5nIG5vbi1BU0NJSSBieSBub3RoaW5nXG5cdCAgICAgICAgICAgICAgbmV3cGFydCArPSAneCc7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgbmV3cGFydCArPSBwYXJ0W2pdO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICAvLyB3ZSB0ZXN0IGFnYWluIHdpdGggQVNDSUkgY2hhciBvbmx5XG5cdCAgICAgICAgICBpZiAoIW5ld3BhcnQubWF0Y2goaG9zdG5hbWVQYXJ0UGF0dGVybikpIHtcblx0ICAgICAgICAgICAgdmFyIHZhbGlkUGFydHMgPSBob3N0cGFydHMuc2xpY2UoMCwgaSk7XG5cdCAgICAgICAgICAgIHZhciBub3RIb3N0ID0gaG9zdHBhcnRzLnNsaWNlKGkgKyAxKTtcblx0ICAgICAgICAgICAgdmFyIGJpdCA9IHBhcnQubWF0Y2goaG9zdG5hbWVQYXJ0U3RhcnQpO1xuXHQgICAgICAgICAgICBpZiAoYml0KSB7XG5cdCAgICAgICAgICAgICAgdmFsaWRQYXJ0cy5wdXNoKGJpdFsxXSk7XG5cdCAgICAgICAgICAgICAgbm90SG9zdC51bnNoaWZ0KGJpdFsyXSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKG5vdEhvc3QubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgICAgcmVzdCA9ICcvJyArIG5vdEhvc3Quam9pbignLicpICsgcmVzdDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLmhvc3RuYW1lID0gdmFsaWRQYXJ0cy5qb2luKCcuJyk7XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmICh0aGlzLmhvc3RuYW1lLmxlbmd0aCA+IGhvc3RuYW1lTWF4TGVuKSB7XG5cdCAgICAgIHRoaXMuaG9zdG5hbWUgPSAnJztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIGhvc3RuYW1lcyBhcmUgYWx3YXlzIGxvd2VyIGNhc2UuXG5cdCAgICAgIHRoaXMuaG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFpcHY2SG9zdG5hbWUpIHtcblx0ICAgICAgLy8gSUROQSBTdXBwb3J0OiBSZXR1cm5zIGEgcHVueSBjb2RlZCByZXByZXNlbnRhdGlvbiBvZiBcImRvbWFpblwiLlxuXHQgICAgICAvLyBJdCBvbmx5IGNvbnZlcnRzIHRoZSBwYXJ0IG9mIHRoZSBkb21haW4gbmFtZSB0aGF0XG5cdCAgICAgIC8vIGhhcyBub24gQVNDSUkgY2hhcmFjdGVycy4gSS5lLiBpdCBkb3NlbnQgbWF0dGVyIGlmXG5cdCAgICAgIC8vIHlvdSBjYWxsIGl0IHdpdGggYSBkb21haW4gdGhhdCBhbHJlYWR5IGlzIGluIEFTQ0lJLlxuXHQgICAgICB2YXIgZG9tYWluQXJyYXkgPSB0aGlzLmhvc3RuYW1lLnNwbGl0KCcuJyk7XG5cdCAgICAgIHZhciBuZXdPdXQgPSBbXTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb21haW5BcnJheS5sZW5ndGg7ICsraSkge1xuXHQgICAgICAgIHZhciBzID0gZG9tYWluQXJyYXlbaV07XG5cdCAgICAgICAgbmV3T3V0LnB1c2gocy5tYXRjaCgvW15BLVphLXowLTlfLV0vKSA/XG5cdCAgICAgICAgICAgICd4bi0tJyArIHB1bnljb2RlLmVuY29kZShzKSA6IHMpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuaG9zdG5hbWUgPSBuZXdPdXQuam9pbignLicpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBwID0gdGhpcy5wb3J0ID8gJzonICsgdGhpcy5wb3J0IDogJyc7XG5cdCAgICB2YXIgaCA9IHRoaXMuaG9zdG5hbWUgfHwgJyc7XG5cdCAgICB0aGlzLmhvc3QgPSBoICsgcDtcblx0ICAgIHRoaXMuaHJlZiArPSB0aGlzLmhvc3Q7XG5cdFxuXHQgICAgLy8gc3RyaXAgWyBhbmQgXSBmcm9tIHRoZSBob3N0bmFtZVxuXHQgICAgLy8gdGhlIGhvc3QgZmllbGQgc3RpbGwgcmV0YWlucyB0aGVtLCB0aG91Z2hcblx0ICAgIGlmIChpcHY2SG9zdG5hbWUpIHtcblx0ICAgICAgdGhpcy5ob3N0bmFtZSA9IHRoaXMuaG9zdG5hbWUuc3Vic3RyKDEsIHRoaXMuaG9zdG5hbWUubGVuZ3RoIC0gMik7XG5cdCAgICAgIGlmIChyZXN0WzBdICE9PSAnLycpIHtcblx0ICAgICAgICByZXN0ID0gJy8nICsgcmVzdDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLy8gbm93IHJlc3QgaXMgc2V0IHRvIHRoZSBwb3N0LWhvc3Qgc3R1ZmYuXG5cdCAgLy8gY2hvcCBvZmYgYW55IGRlbGltIGNoYXJzLlxuXHQgIGlmICghdW5zYWZlUHJvdG9jb2xbbG93ZXJQcm90b10pIHtcblx0XG5cdCAgICAvLyBGaXJzdCwgbWFrZSAxMDAlIHN1cmUgdGhhdCBhbnkgXCJhdXRvRXNjYXBlXCIgY2hhcnMgZ2V0XG5cdCAgICAvLyBlc2NhcGVkLCBldmVuIGlmIGVuY29kZVVSSUNvbXBvbmVudCBkb2Vzbid0IHRoaW5rIHRoZXlcblx0ICAgIC8vIG5lZWQgdG8gYmUuXG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF1dG9Fc2NhcGUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBhZSA9IGF1dG9Fc2NhcGVbaV07XG5cdCAgICAgIHZhciBlc2MgPSBlbmNvZGVVUklDb21wb25lbnQoYWUpO1xuXHQgICAgICBpZiAoZXNjID09PSBhZSkge1xuXHQgICAgICAgIGVzYyA9IGVzY2FwZShhZSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmVzdCA9IHJlc3Quc3BsaXQoYWUpLmpvaW4oZXNjKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHRcblx0ICAvLyBjaG9wIG9mZiBmcm9tIHRoZSB0YWlsIGZpcnN0LlxuXHQgIHZhciBoYXNoID0gcmVzdC5pbmRleE9mKCcjJyk7XG5cdCAgaWYgKGhhc2ggIT09IC0xKSB7XG5cdCAgICAvLyBnb3QgYSBmcmFnbWVudCBzdHJpbmcuXG5cdCAgICB0aGlzLmhhc2ggPSByZXN0LnN1YnN0cihoYXNoKTtcblx0ICAgIHJlc3QgPSByZXN0LnNsaWNlKDAsIGhhc2gpO1xuXHQgIH1cblx0ICB2YXIgcW0gPSByZXN0LmluZGV4T2YoJz8nKTtcblx0ICBpZiAocW0gIT09IC0xKSB7XG5cdCAgICB0aGlzLnNlYXJjaCA9IHJlc3Quc3Vic3RyKHFtKTtcblx0ICAgIHRoaXMucXVlcnkgPSByZXN0LnN1YnN0cihxbSArIDEpO1xuXHQgICAgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcblx0ICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5c3RyaW5nLnBhcnNlKHRoaXMucXVlcnkpO1xuXHQgICAgfVxuXHQgICAgcmVzdCA9IHJlc3Quc2xpY2UoMCwgcW0pO1xuXHQgIH0gZWxzZSBpZiAocGFyc2VRdWVyeVN0cmluZykge1xuXHQgICAgLy8gbm8gcXVlcnkgc3RyaW5nLCBidXQgcGFyc2VRdWVyeVN0cmluZyBzdGlsbCByZXF1ZXN0ZWRcblx0ICAgIHRoaXMuc2VhcmNoID0gJyc7XG5cdCAgICB0aGlzLnF1ZXJ5ID0ge307XG5cdCAgfVxuXHQgIGlmIChyZXN0KSB0aGlzLnBhdGhuYW1lID0gcmVzdDtcblx0ICBpZiAoc2xhc2hlZFByb3RvY29sW2xvd2VyUHJvdG9dICYmXG5cdCAgICAgIHRoaXMuaG9zdG5hbWUgJiYgIXRoaXMucGF0aG5hbWUpIHtcblx0ICAgIHRoaXMucGF0aG5hbWUgPSAnLyc7XG5cdCAgfVxuXHRcblx0ICAvL3RvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0XG5cdCAgaWYgKHRoaXMucGF0aG5hbWUgfHwgdGhpcy5zZWFyY2gpIHtcblx0ICAgIHZhciBwID0gdGhpcy5wYXRobmFtZSB8fCAnJztcblx0ICAgIHZhciBzID0gdGhpcy5zZWFyY2ggfHwgJyc7XG5cdCAgICB0aGlzLnBhdGggPSBwICsgcztcblx0ICB9XG5cdFxuXHQgIC8vIGZpbmFsbHksIHJlY29uc3RydWN0IHRoZSBocmVmIGJhc2VkIG9uIHdoYXQgaGFzIGJlZW4gdmFsaWRhdGVkLlxuXHQgIHRoaXMuaHJlZiA9IHRoaXMuZm9ybWF0KCk7XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHQvLyBmb3JtYXQgYSBwYXJzZWQgb2JqZWN0IGludG8gYSB1cmwgc3RyaW5nXG5cdGZ1bmN0aW9uIHVybEZvcm1hdChvYmopIHtcblx0ICAvLyBlbnN1cmUgaXQncyBhbiBvYmplY3QsIGFuZCBub3QgYSBzdHJpbmcgdXJsLlxuXHQgIC8vIElmIGl0J3MgYW4gb2JqLCB0aGlzIGlzIGEgbm8tb3AuXG5cdCAgLy8gdGhpcyB3YXksIHlvdSBjYW4gY2FsbCB1cmxfZm9ybWF0KCkgb24gc3RyaW5nc1xuXHQgIC8vIHRvIGNsZWFuIHVwIHBvdGVudGlhbGx5IHdvbmt5IHVybHMuXG5cdCAgaWYgKGlzU3RyaW5nKG9iaikpIG9iaiA9IHVybFBhcnNlKG9iaik7XG5cdCAgaWYgKCEob2JqIGluc3RhbmNlb2YgVXJsKSkgcmV0dXJuIFVybC5wcm90b3R5cGUuZm9ybWF0LmNhbGwob2JqKTtcblx0ICByZXR1cm4gb2JqLmZvcm1hdCgpO1xuXHR9XG5cdFxuXHRVcmwucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhdXRoID0gdGhpcy5hdXRoIHx8ICcnO1xuXHQgIGlmIChhdXRoKSB7XG5cdCAgICBhdXRoID0gZW5jb2RlVVJJQ29tcG9uZW50KGF1dGgpO1xuXHQgICAgYXV0aCA9IGF1dGgucmVwbGFjZSgvJTNBL2ksICc6Jyk7XG5cdCAgICBhdXRoICs9ICdAJztcblx0ICB9XG5cdFxuXHQgIHZhciBwcm90b2NvbCA9IHRoaXMucHJvdG9jb2wgfHwgJycsXG5cdCAgICAgIHBhdGhuYW1lID0gdGhpcy5wYXRobmFtZSB8fCAnJyxcblx0ICAgICAgaGFzaCA9IHRoaXMuaGFzaCB8fCAnJyxcblx0ICAgICAgaG9zdCA9IGZhbHNlLFxuXHQgICAgICBxdWVyeSA9ICcnO1xuXHRcblx0ICBpZiAodGhpcy5ob3N0KSB7XG5cdCAgICBob3N0ID0gYXV0aCArIHRoaXMuaG9zdDtcblx0ICB9IGVsc2UgaWYgKHRoaXMuaG9zdG5hbWUpIHtcblx0ICAgIGhvc3QgPSBhdXRoICsgKHRoaXMuaG9zdG5hbWUuaW5kZXhPZignOicpID09PSAtMSA/XG5cdCAgICAgICAgdGhpcy5ob3N0bmFtZSA6XG5cdCAgICAgICAgJ1snICsgdGhpcy5ob3N0bmFtZSArICddJyk7XG5cdCAgICBpZiAodGhpcy5wb3J0KSB7XG5cdCAgICAgIGhvc3QgKz0gJzonICsgdGhpcy5wb3J0O1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKHRoaXMucXVlcnkgJiZcblx0ICAgICAgaXNPYmplY3QodGhpcy5xdWVyeSkgJiZcblx0ICAgICAgT2JqZWN0LmtleXModGhpcy5xdWVyeSkubGVuZ3RoKSB7XG5cdCAgICBxdWVyeSA9IHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeSh0aGlzLnF1ZXJ5KTtcblx0ICB9XG5cdFxuXHQgIHZhciBzZWFyY2ggPSB0aGlzLnNlYXJjaCB8fCAocXVlcnkgJiYgKCc/JyArIHF1ZXJ5KSkgfHwgJyc7XG5cdFxuXHQgIGlmIChwcm90b2NvbCAmJiBwcm90b2NvbC5zdWJzdHIoLTEpICE9PSAnOicpIHByb3RvY29sICs9ICc6Jztcblx0XG5cdCAgLy8gb25seSB0aGUgc2xhc2hlZFByb3RvY29scyBnZXQgdGhlIC8vLiAgTm90IG1haWx0bzosIHhtcHA6LCBldGMuXG5cdCAgLy8gdW5sZXNzIHRoZXkgaGFkIHRoZW0gdG8gYmVnaW4gd2l0aC5cblx0ICBpZiAodGhpcy5zbGFzaGVzIHx8XG5cdCAgICAgICghcHJvdG9jb2wgfHwgc2xhc2hlZFByb3RvY29sW3Byb3RvY29sXSkgJiYgaG9zdCAhPT0gZmFsc2UpIHtcblx0ICAgIGhvc3QgPSAnLy8nICsgKGhvc3QgfHwgJycpO1xuXHQgICAgaWYgKHBhdGhuYW1lICYmIHBhdGhuYW1lLmNoYXJBdCgwKSAhPT0gJy8nKSBwYXRobmFtZSA9ICcvJyArIHBhdGhuYW1lO1xuXHQgIH0gZWxzZSBpZiAoIWhvc3QpIHtcblx0ICAgIGhvc3QgPSAnJztcblx0ICB9XG5cdFxuXHQgIGlmIChoYXNoICYmIGhhc2guY2hhckF0KDApICE9PSAnIycpIGhhc2ggPSAnIycgKyBoYXNoO1xuXHQgIGlmIChzZWFyY2ggJiYgc2VhcmNoLmNoYXJBdCgwKSAhPT0gJz8nKSBzZWFyY2ggPSAnPycgKyBzZWFyY2g7XG5cdFxuXHQgIHBhdGhuYW1lID0gcGF0aG5hbWUucmVwbGFjZSgvWz8jXS9nLCBmdW5jdGlvbihtYXRjaCkge1xuXHQgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChtYXRjaCk7XG5cdCAgfSk7XG5cdCAgc2VhcmNoID0gc2VhcmNoLnJlcGxhY2UoJyMnLCAnJTIzJyk7XG5cdFxuXHQgIHJldHVybiBwcm90b2NvbCArIGhvc3QgKyBwYXRobmFtZSArIHNlYXJjaCArIGhhc2g7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiB1cmxSZXNvbHZlKHNvdXJjZSwgcmVsYXRpdmUpIHtcblx0ICByZXR1cm4gdXJsUGFyc2Uoc291cmNlLCBmYWxzZSwgdHJ1ZSkucmVzb2x2ZShyZWxhdGl2ZSk7XG5cdH1cblx0XG5cdFVybC5wcm90b3R5cGUucmVzb2x2ZSA9IGZ1bmN0aW9uKHJlbGF0aXZlKSB7XG5cdCAgcmV0dXJuIHRoaXMucmVzb2x2ZU9iamVjdCh1cmxQYXJzZShyZWxhdGl2ZSwgZmFsc2UsIHRydWUpKS5mb3JtYXQoKTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHVybFJlc29sdmVPYmplY3Qoc291cmNlLCByZWxhdGl2ZSkge1xuXHQgIGlmICghc291cmNlKSByZXR1cm4gcmVsYXRpdmU7XG5cdCAgcmV0dXJuIHVybFBhcnNlKHNvdXJjZSwgZmFsc2UsIHRydWUpLnJlc29sdmVPYmplY3QocmVsYXRpdmUpO1xuXHR9XG5cdFxuXHRVcmwucHJvdG90eXBlLnJlc29sdmVPYmplY3QgPSBmdW5jdGlvbihyZWxhdGl2ZSkge1xuXHQgIGlmIChpc1N0cmluZyhyZWxhdGl2ZSkpIHtcblx0ICAgIHZhciByZWwgPSBuZXcgVXJsKCk7XG5cdCAgICByZWwucGFyc2UocmVsYXRpdmUsIGZhbHNlLCB0cnVlKTtcblx0ICAgIHJlbGF0aXZlID0gcmVsO1xuXHQgIH1cblx0XG5cdCAgdmFyIHJlc3VsdCA9IG5ldyBVcmwoKTtcblx0ICBPYmplY3Qua2V5cyh0aGlzKS5mb3JFYWNoKGZ1bmN0aW9uKGspIHtcblx0ICAgIHJlc3VsdFtrXSA9IHRoaXNba107XG5cdCAgfSwgdGhpcyk7XG5cdFxuXHQgIC8vIGhhc2ggaXMgYWx3YXlzIG92ZXJyaWRkZW4sIG5vIG1hdHRlciB3aGF0LlxuXHQgIC8vIGV2ZW4gaHJlZj1cIlwiIHdpbGwgcmVtb3ZlIGl0LlxuXHQgIHJlc3VsdC5oYXNoID0gcmVsYXRpdmUuaGFzaDtcblx0XG5cdCAgLy8gaWYgdGhlIHJlbGF0aXZlIHVybCBpcyBlbXB0eSwgdGhlbiB0aGVyZSdzIG5vdGhpbmcgbGVmdCB0byBkbyBoZXJlLlxuXHQgIGlmIChyZWxhdGl2ZS5ocmVmID09PSAnJykge1xuXHQgICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgLy8gaHJlZnMgbGlrZSAvL2Zvby9iYXIgYWx3YXlzIGN1dCB0byB0aGUgcHJvdG9jb2wuXG5cdCAgaWYgKHJlbGF0aXZlLnNsYXNoZXMgJiYgIXJlbGF0aXZlLnByb3RvY29sKSB7XG5cdCAgICAvLyB0YWtlIGV2ZXJ5dGhpbmcgZXhjZXB0IHRoZSBwcm90b2NvbCBmcm9tIHJlbGF0aXZlXG5cdCAgICBPYmplY3Qua2V5cyhyZWxhdGl2ZSkuZm9yRWFjaChmdW5jdGlvbihrKSB7XG5cdCAgICAgIGlmIChrICE9PSAncHJvdG9jb2wnKVxuXHQgICAgICAgIHJlc3VsdFtrXSA9IHJlbGF0aXZlW2tdO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLy91cmxQYXJzZSBhcHBlbmRzIHRyYWlsaW5nIC8gdG8gdXJscyBsaWtlIGh0dHA6Ly93d3cuZXhhbXBsZS5jb21cblx0ICAgIGlmIChzbGFzaGVkUHJvdG9jb2xbcmVzdWx0LnByb3RvY29sXSAmJlxuXHQgICAgICAgIHJlc3VsdC5ob3N0bmFtZSAmJiAhcmVzdWx0LnBhdGhuYW1lKSB7XG5cdCAgICAgIHJlc3VsdC5wYXRoID0gcmVzdWx0LnBhdGhuYW1lID0gJy8nO1xuXHQgICAgfVxuXHRcblx0ICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGlmIChyZWxhdGl2ZS5wcm90b2NvbCAmJiByZWxhdGl2ZS5wcm90b2NvbCAhPT0gcmVzdWx0LnByb3RvY29sKSB7XG5cdCAgICAvLyBpZiBpdCdzIGEga25vd24gdXJsIHByb3RvY29sLCB0aGVuIGNoYW5naW5nXG5cdCAgICAvLyB0aGUgcHJvdG9jb2wgZG9lcyB3ZWlyZCB0aGluZ3Ncblx0ICAgIC8vIGZpcnN0LCBpZiBpdCdzIG5vdCBmaWxlOiwgdGhlbiB3ZSBNVVNUIGhhdmUgYSBob3N0LFxuXHQgICAgLy8gYW5kIGlmIHRoZXJlIHdhcyBhIHBhdGhcblx0ICAgIC8vIHRvIGJlZ2luIHdpdGgsIHRoZW4gd2UgTVVTVCBoYXZlIGEgcGF0aC5cblx0ICAgIC8vIGlmIGl0IGlzIGZpbGU6LCB0aGVuIHRoZSBob3N0IGlzIGRyb3BwZWQsXG5cdCAgICAvLyBiZWNhdXNlIHRoYXQncyBrbm93biB0byBiZSBob3N0bGVzcy5cblx0ICAgIC8vIGFueXRoaW5nIGVsc2UgaXMgYXNzdW1lZCB0byBiZSBhYnNvbHV0ZS5cblx0ICAgIGlmICghc2xhc2hlZFByb3RvY29sW3JlbGF0aXZlLnByb3RvY29sXSkge1xuXHQgICAgICBPYmplY3Qua2V5cyhyZWxhdGl2ZSkuZm9yRWFjaChmdW5jdGlvbihrKSB7XG5cdCAgICAgICAgcmVzdWx0W2tdID0gcmVsYXRpdmVba107XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcblx0ICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgIH1cblx0XG5cdCAgICByZXN1bHQucHJvdG9jb2wgPSByZWxhdGl2ZS5wcm90b2NvbDtcblx0ICAgIGlmICghcmVsYXRpdmUuaG9zdCAmJiAhaG9zdGxlc3NQcm90b2NvbFtyZWxhdGl2ZS5wcm90b2NvbF0pIHtcblx0ICAgICAgdmFyIHJlbFBhdGggPSAocmVsYXRpdmUucGF0aG5hbWUgfHwgJycpLnNwbGl0KCcvJyk7XG5cdCAgICAgIHdoaWxlIChyZWxQYXRoLmxlbmd0aCAmJiAhKHJlbGF0aXZlLmhvc3QgPSByZWxQYXRoLnNoaWZ0KCkpKTtcblx0ICAgICAgaWYgKCFyZWxhdGl2ZS5ob3N0KSByZWxhdGl2ZS5ob3N0ID0gJyc7XG5cdCAgICAgIGlmICghcmVsYXRpdmUuaG9zdG5hbWUpIHJlbGF0aXZlLmhvc3RuYW1lID0gJyc7XG5cdCAgICAgIGlmIChyZWxQYXRoWzBdICE9PSAnJykgcmVsUGF0aC51bnNoaWZ0KCcnKTtcblx0ICAgICAgaWYgKHJlbFBhdGgubGVuZ3RoIDwgMikgcmVsUGF0aC51bnNoaWZ0KCcnKTtcblx0ICAgICAgcmVzdWx0LnBhdGhuYW1lID0gcmVsUGF0aC5qb2luKCcvJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXN1bHQucGF0aG5hbWUgPSByZWxhdGl2ZS5wYXRobmFtZTtcblx0ICAgIH1cblx0ICAgIHJlc3VsdC5zZWFyY2ggPSByZWxhdGl2ZS5zZWFyY2g7XG5cdCAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcblx0ICAgIHJlc3VsdC5ob3N0ID0gcmVsYXRpdmUuaG9zdCB8fCAnJztcblx0ICAgIHJlc3VsdC5hdXRoID0gcmVsYXRpdmUuYXV0aDtcblx0ICAgIHJlc3VsdC5ob3N0bmFtZSA9IHJlbGF0aXZlLmhvc3RuYW1lIHx8IHJlbGF0aXZlLmhvc3Q7XG5cdCAgICByZXN1bHQucG9ydCA9IHJlbGF0aXZlLnBvcnQ7XG5cdCAgICAvLyB0byBzdXBwb3J0IGh0dHAucmVxdWVzdFxuXHQgICAgaWYgKHJlc3VsdC5wYXRobmFtZSB8fCByZXN1bHQuc2VhcmNoKSB7XG5cdCAgICAgIHZhciBwID0gcmVzdWx0LnBhdGhuYW1lIHx8ICcnO1xuXHQgICAgICB2YXIgcyA9IHJlc3VsdC5zZWFyY2ggfHwgJyc7XG5cdCAgICAgIHJlc3VsdC5wYXRoID0gcCArIHM7XG5cdCAgICB9XG5cdCAgICByZXN1bHQuc2xhc2hlcyA9IHJlc3VsdC5zbGFzaGVzIHx8IHJlbGF0aXZlLnNsYXNoZXM7XG5cdCAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICB2YXIgaXNTb3VyY2VBYnMgPSAocmVzdWx0LnBhdGhuYW1lICYmIHJlc3VsdC5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJyksXG5cdCAgICAgIGlzUmVsQWJzID0gKFxuXHQgICAgICAgICAgcmVsYXRpdmUuaG9zdCB8fFxuXHQgICAgICAgICAgcmVsYXRpdmUucGF0aG5hbWUgJiYgcmVsYXRpdmUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLydcblx0ICAgICAgKSxcblx0ICAgICAgbXVzdEVuZEFicyA9IChpc1JlbEFicyB8fCBpc1NvdXJjZUFicyB8fFxuXHQgICAgICAgICAgICAgICAgICAgIChyZXN1bHQuaG9zdCAmJiByZWxhdGl2ZS5wYXRobmFtZSkpLFxuXHQgICAgICByZW1vdmVBbGxEb3RzID0gbXVzdEVuZEFicyxcblx0ICAgICAgc3JjUGF0aCA9IHJlc3VsdC5wYXRobmFtZSAmJiByZXN1bHQucGF0aG5hbWUuc3BsaXQoJy8nKSB8fCBbXSxcblx0ICAgICAgcmVsUGF0aCA9IHJlbGF0aXZlLnBhdGhuYW1lICYmIHJlbGF0aXZlLnBhdGhuYW1lLnNwbGl0KCcvJykgfHwgW10sXG5cdCAgICAgIHBzeWNob3RpYyA9IHJlc3VsdC5wcm90b2NvbCAmJiAhc2xhc2hlZFByb3RvY29sW3Jlc3VsdC5wcm90b2NvbF07XG5cdFxuXHQgIC8vIGlmIHRoZSB1cmwgaXMgYSBub24tc2xhc2hlZCB1cmwsIHRoZW4gcmVsYXRpdmVcblx0ICAvLyBsaW5rcyBsaWtlIC4uLy4uIHNob3VsZCBiZSBhYmxlXG5cdCAgLy8gdG8gY3Jhd2wgdXAgdG8gdGhlIGhvc3RuYW1lLCBhcyB3ZWxsLiAgVGhpcyBpcyBzdHJhbmdlLlxuXHQgIC8vIHJlc3VsdC5wcm90b2NvbCBoYXMgYWxyZWFkeSBiZWVuIHNldCBieSBub3cuXG5cdCAgLy8gTGF0ZXIgb24sIHB1dCB0aGUgZmlyc3QgcGF0aCBwYXJ0IGludG8gdGhlIGhvc3QgZmllbGQuXG5cdCAgaWYgKHBzeWNob3RpYykge1xuXHQgICAgcmVzdWx0Lmhvc3RuYW1lID0gJyc7XG5cdCAgICByZXN1bHQucG9ydCA9IG51bGw7XG5cdCAgICBpZiAocmVzdWx0Lmhvc3QpIHtcblx0ICAgICAgaWYgKHNyY1BhdGhbMF0gPT09ICcnKSBzcmNQYXRoWzBdID0gcmVzdWx0Lmhvc3Q7XG5cdCAgICAgIGVsc2Ugc3JjUGF0aC51bnNoaWZ0KHJlc3VsdC5ob3N0KTtcblx0ICAgIH1cblx0ICAgIHJlc3VsdC5ob3N0ID0gJyc7XG5cdCAgICBpZiAocmVsYXRpdmUucHJvdG9jb2wpIHtcblx0ICAgICAgcmVsYXRpdmUuaG9zdG5hbWUgPSBudWxsO1xuXHQgICAgICByZWxhdGl2ZS5wb3J0ID0gbnVsbDtcblx0ICAgICAgaWYgKHJlbGF0aXZlLmhvc3QpIHtcblx0ICAgICAgICBpZiAocmVsUGF0aFswXSA9PT0gJycpIHJlbFBhdGhbMF0gPSByZWxhdGl2ZS5ob3N0O1xuXHQgICAgICAgIGVsc2UgcmVsUGF0aC51bnNoaWZ0KHJlbGF0aXZlLmhvc3QpO1xuXHQgICAgICB9XG5cdCAgICAgIHJlbGF0aXZlLmhvc3QgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgbXVzdEVuZEFicyA9IG11c3RFbmRBYnMgJiYgKHJlbFBhdGhbMF0gPT09ICcnIHx8IHNyY1BhdGhbMF0gPT09ICcnKTtcblx0ICB9XG5cdFxuXHQgIGlmIChpc1JlbEFicykge1xuXHQgICAgLy8gaXQncyBhYnNvbHV0ZS5cblx0ICAgIHJlc3VsdC5ob3N0ID0gKHJlbGF0aXZlLmhvc3QgfHwgcmVsYXRpdmUuaG9zdCA9PT0gJycpID9cblx0ICAgICAgICAgICAgICAgICAgcmVsYXRpdmUuaG9zdCA6IHJlc3VsdC5ob3N0O1xuXHQgICAgcmVzdWx0Lmhvc3RuYW1lID0gKHJlbGF0aXZlLmhvc3RuYW1lIHx8IHJlbGF0aXZlLmhvc3RuYW1lID09PSAnJykgP1xuXHQgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmUuaG9zdG5hbWUgOiByZXN1bHQuaG9zdG5hbWU7XG5cdCAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoO1xuXHQgICAgcmVzdWx0LnF1ZXJ5ID0gcmVsYXRpdmUucXVlcnk7XG5cdCAgICBzcmNQYXRoID0gcmVsUGF0aDtcblx0ICAgIC8vIGZhbGwgdGhyb3VnaCB0byB0aGUgZG90LWhhbmRsaW5nIGJlbG93LlxuXHQgIH0gZWxzZSBpZiAocmVsUGF0aC5sZW5ndGgpIHtcblx0ICAgIC8vIGl0J3MgcmVsYXRpdmVcblx0ICAgIC8vIHRocm93IGF3YXkgdGhlIGV4aXN0aW5nIGZpbGUsIGFuZCB0YWtlIHRoZSBuZXcgcGF0aCBpbnN0ZWFkLlxuXHQgICAgaWYgKCFzcmNQYXRoKSBzcmNQYXRoID0gW107XG5cdCAgICBzcmNQYXRoLnBvcCgpO1xuXHQgICAgc3JjUGF0aCA9IHNyY1BhdGguY29uY2F0KHJlbFBhdGgpO1xuXHQgICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcblx0ICAgIHJlc3VsdC5xdWVyeSA9IHJlbGF0aXZlLnF1ZXJ5O1xuXHQgIH0gZWxzZSBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHJlbGF0aXZlLnNlYXJjaCkpIHtcblx0ICAgIC8vIGp1c3QgcHVsbCBvdXQgdGhlIHNlYXJjaC5cblx0ICAgIC8vIGxpa2UgaHJlZj0nP2ZvbycuXG5cdCAgICAvLyBQdXQgdGhpcyBhZnRlciB0aGUgb3RoZXIgdHdvIGNhc2VzIGJlY2F1c2UgaXQgc2ltcGxpZmllcyB0aGUgYm9vbGVhbnNcblx0ICAgIGlmIChwc3ljaG90aWMpIHtcblx0ICAgICAgcmVzdWx0Lmhvc3RuYW1lID0gcmVzdWx0Lmhvc3QgPSBzcmNQYXRoLnNoaWZ0KCk7XG5cdCAgICAgIC8vb2NjYXRpb25hbHkgdGhlIGF1dGggY2FuIGdldCBzdHVjayBvbmx5IGluIGhvc3Rcblx0ICAgICAgLy90aGlzIGVzcGVjaWFseSBoYXBwZW5zIGluIGNhc2VzIGxpa2Vcblx0ICAgICAgLy91cmwucmVzb2x2ZU9iamVjdCgnbWFpbHRvOmxvY2FsMUBkb21haW4xJywgJ2xvY2FsMkBkb21haW4yJylcblx0ICAgICAgdmFyIGF1dGhJbkhvc3QgPSByZXN1bHQuaG9zdCAmJiByZXN1bHQuaG9zdC5pbmRleE9mKCdAJykgPiAwID9cblx0ICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuaG9zdC5zcGxpdCgnQCcpIDogZmFsc2U7XG5cdCAgICAgIGlmIChhdXRoSW5Ib3N0KSB7XG5cdCAgICAgICAgcmVzdWx0LmF1dGggPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7XG5cdCAgICAgICAgcmVzdWx0Lmhvc3QgPSByZXN1bHQuaG9zdG5hbWUgPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJlc3VsdC5zZWFyY2ggPSByZWxhdGl2ZS5zZWFyY2g7XG5cdCAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcblx0ICAgIC8vdG8gc3VwcG9ydCBodHRwLnJlcXVlc3Rcblx0ICAgIGlmICghaXNOdWxsKHJlc3VsdC5wYXRobmFtZSkgfHwgIWlzTnVsbChyZXN1bHQuc2VhcmNoKSkge1xuXHQgICAgICByZXN1bHQucGF0aCA9IChyZXN1bHQucGF0aG5hbWUgPyByZXN1bHQucGF0aG5hbWUgOiAnJykgK1xuXHQgICAgICAgICAgICAgICAgICAgIChyZXN1bHQuc2VhcmNoID8gcmVzdWx0LnNlYXJjaCA6ICcnKTtcblx0ICAgIH1cblx0ICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGlmICghc3JjUGF0aC5sZW5ndGgpIHtcblx0ICAgIC8vIG5vIHBhdGggYXQgYWxsLiAgZWFzeS5cblx0ICAgIC8vIHdlJ3ZlIGFscmVhZHkgaGFuZGxlZCB0aGUgb3RoZXIgc3R1ZmYgYWJvdmUuXG5cdCAgICByZXN1bHQucGF0aG5hbWUgPSBudWxsO1xuXHQgICAgLy90byBzdXBwb3J0IGh0dHAucmVxdWVzdFxuXHQgICAgaWYgKHJlc3VsdC5zZWFyY2gpIHtcblx0ICAgICAgcmVzdWx0LnBhdGggPSAnLycgKyByZXN1bHQuc2VhcmNoO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVzdWx0LnBhdGggPSBudWxsO1xuXHQgICAgfVxuXHQgICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgLy8gaWYgYSB1cmwgRU5EcyBpbiAuIG9yIC4uLCB0aGVuIGl0IG11c3QgZ2V0IGEgdHJhaWxpbmcgc2xhc2guXG5cdCAgLy8gaG93ZXZlciwgaWYgaXQgZW5kcyBpbiBhbnl0aGluZyBlbHNlIG5vbi1zbGFzaHksXG5cdCAgLy8gdGhlbiBpdCBtdXN0IE5PVCBnZXQgYSB0cmFpbGluZyBzbGFzaC5cblx0ICB2YXIgbGFzdCA9IHNyY1BhdGguc2xpY2UoLTEpWzBdO1xuXHQgIHZhciBoYXNUcmFpbGluZ1NsYXNoID0gKFxuXHQgICAgICAocmVzdWx0Lmhvc3QgfHwgcmVsYXRpdmUuaG9zdCkgJiYgKGxhc3QgPT09ICcuJyB8fCBsYXN0ID09PSAnLi4nKSB8fFxuXHQgICAgICBsYXN0ID09PSAnJyk7XG5cdFxuXHQgIC8vIHN0cmlwIHNpbmdsZSBkb3RzLCByZXNvbHZlIGRvdWJsZSBkb3RzIHRvIHBhcmVudCBkaXJcblx0ICAvLyBpZiB0aGUgcGF0aCB0cmllcyB0byBnbyBhYm92ZSB0aGUgcm9vdCwgYHVwYCBlbmRzIHVwID4gMFxuXHQgIHZhciB1cCA9IDA7XG5cdCAgZm9yICh2YXIgaSA9IHNyY1BhdGgubGVuZ3RoOyBpID49IDA7IGktLSkge1xuXHQgICAgbGFzdCA9IHNyY1BhdGhbaV07XG5cdCAgICBpZiAobGFzdCA9PSAnLicpIHtcblx0ICAgICAgc3JjUGF0aC5zcGxpY2UoaSwgMSk7XG5cdCAgICB9IGVsc2UgaWYgKGxhc3QgPT09ICcuLicpIHtcblx0ICAgICAgc3JjUGF0aC5zcGxpY2UoaSwgMSk7XG5cdCAgICAgIHVwKys7XG5cdCAgICB9IGVsc2UgaWYgKHVwKSB7XG5cdCAgICAgIHNyY1BhdGguc3BsaWNlKGksIDEpO1xuXHQgICAgICB1cC0tO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLy8gaWYgdGhlIHBhdGggaXMgYWxsb3dlZCB0byBnbyBhYm92ZSB0aGUgcm9vdCwgcmVzdG9yZSBsZWFkaW5nIC4uc1xuXHQgIGlmICghbXVzdEVuZEFicyAmJiAhcmVtb3ZlQWxsRG90cykge1xuXHQgICAgZm9yICg7IHVwLS07IHVwKSB7XG5cdCAgICAgIHNyY1BhdGgudW5zaGlmdCgnLi4nKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmIChtdXN0RW5kQWJzICYmIHNyY1BhdGhbMF0gIT09ICcnICYmXG5cdCAgICAgICghc3JjUGF0aFswXSB8fCBzcmNQYXRoWzBdLmNoYXJBdCgwKSAhPT0gJy8nKSkge1xuXHQgICAgc3JjUGF0aC51bnNoaWZ0KCcnKTtcblx0ICB9XG5cdFxuXHQgIGlmIChoYXNUcmFpbGluZ1NsYXNoICYmIChzcmNQYXRoLmpvaW4oJy8nKS5zdWJzdHIoLTEpICE9PSAnLycpKSB7XG5cdCAgICBzcmNQYXRoLnB1c2goJycpO1xuXHQgIH1cblx0XG5cdCAgdmFyIGlzQWJzb2x1dGUgPSBzcmNQYXRoWzBdID09PSAnJyB8fFxuXHQgICAgICAoc3JjUGF0aFswXSAmJiBzcmNQYXRoWzBdLmNoYXJBdCgwKSA9PT0gJy8nKTtcblx0XG5cdCAgLy8gcHV0IHRoZSBob3N0IGJhY2tcblx0ICBpZiAocHN5Y2hvdGljKSB7XG5cdCAgICByZXN1bHQuaG9zdG5hbWUgPSByZXN1bHQuaG9zdCA9IGlzQWJzb2x1dGUgPyAnJyA6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY1BhdGgubGVuZ3RoID8gc3JjUGF0aC5zaGlmdCgpIDogJyc7XG5cdCAgICAvL29jY2F0aW9uYWx5IHRoZSBhdXRoIGNhbiBnZXQgc3R1Y2sgb25seSBpbiBob3N0XG5cdCAgICAvL3RoaXMgZXNwZWNpYWx5IGhhcHBlbnMgaW4gY2FzZXMgbGlrZVxuXHQgICAgLy91cmwucmVzb2x2ZU9iamVjdCgnbWFpbHRvOmxvY2FsMUBkb21haW4xJywgJ2xvY2FsMkBkb21haW4yJylcblx0ICAgIHZhciBhdXRoSW5Ib3N0ID0gcmVzdWx0Lmhvc3QgJiYgcmVzdWx0Lmhvc3QuaW5kZXhPZignQCcpID4gMCA/XG5cdCAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5ob3N0LnNwbGl0KCdAJykgOiBmYWxzZTtcblx0ICAgIGlmIChhdXRoSW5Ib3N0KSB7XG5cdCAgICAgIHJlc3VsdC5hdXRoID0gYXV0aEluSG9zdC5zaGlmdCgpO1xuXHQgICAgICByZXN1bHQuaG9zdCA9IHJlc3VsdC5ob3N0bmFtZSA9IGF1dGhJbkhvc3Quc2hpZnQoKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIG11c3RFbmRBYnMgPSBtdXN0RW5kQWJzIHx8IChyZXN1bHQuaG9zdCAmJiBzcmNQYXRoLmxlbmd0aCk7XG5cdFxuXHQgIGlmIChtdXN0RW5kQWJzICYmICFpc0Fic29sdXRlKSB7XG5cdCAgICBzcmNQYXRoLnVuc2hpZnQoJycpO1xuXHQgIH1cblx0XG5cdCAgaWYgKCFzcmNQYXRoLmxlbmd0aCkge1xuXHQgICAgcmVzdWx0LnBhdGhuYW1lID0gbnVsbDtcblx0ICAgIHJlc3VsdC5wYXRoID0gbnVsbDtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmVzdWx0LnBhdGhuYW1lID0gc3JjUGF0aC5qb2luKCcvJyk7XG5cdCAgfVxuXHRcblx0ICAvL3RvIHN1cHBvcnQgcmVxdWVzdC5odHRwXG5cdCAgaWYgKCFpc051bGwocmVzdWx0LnBhdGhuYW1lKSB8fCAhaXNOdWxsKHJlc3VsdC5zZWFyY2gpKSB7XG5cdCAgICByZXN1bHQucGF0aCA9IChyZXN1bHQucGF0aG5hbWUgPyByZXN1bHQucGF0aG5hbWUgOiAnJykgK1xuXHQgICAgICAgICAgICAgICAgICAocmVzdWx0LnNlYXJjaCA/IHJlc3VsdC5zZWFyY2ggOiAnJyk7XG5cdCAgfVxuXHQgIHJlc3VsdC5hdXRoID0gcmVsYXRpdmUuYXV0aCB8fCByZXN1bHQuYXV0aDtcblx0ICByZXN1bHQuc2xhc2hlcyA9IHJlc3VsdC5zbGFzaGVzIHx8IHJlbGF0aXZlLnNsYXNoZXM7XG5cdCAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdFVybC5wcm90b3R5cGUucGFyc2VIb3N0ID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGhvc3QgPSB0aGlzLmhvc3Q7XG5cdCAgdmFyIHBvcnQgPSBwb3J0UGF0dGVybi5leGVjKGhvc3QpO1xuXHQgIGlmIChwb3J0KSB7XG5cdCAgICBwb3J0ID0gcG9ydFswXTtcblx0ICAgIGlmIChwb3J0ICE9PSAnOicpIHtcblx0ICAgICAgdGhpcy5wb3J0ID0gcG9ydC5zdWJzdHIoMSk7XG5cdCAgICB9XG5cdCAgICBob3N0ID0gaG9zdC5zdWJzdHIoMCwgaG9zdC5sZW5ndGggLSBwb3J0Lmxlbmd0aCk7XG5cdCAgfVxuXHQgIGlmIChob3N0KSB0aGlzLmhvc3RuYW1lID0gaG9zdDtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSBcInN0cmluZ1wiO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc09iamVjdChhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc051bGwoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcblx0fVxuXHRmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcblx0ICByZXR1cm4gIGFyZyA9PSBudWxsO1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDQ0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNDRfXztcblxuLyoqKi8gfVxuLyoqKioqKi8gXSlcbn0pO1xuO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHJlYWN0LWNsaW1iLXNvY2lhbC5taW4uanNcbiAqKi8iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCA4NmM1OTI2OTdmODNhNWMwMDM5ZlxuICoqLyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcblxuaW1wb3J0IFdhbGxDb250YWluZXIgZnJvbSAnLi9jb21wb25lbnRzL3dhbGwvV2FsbENvbnRhaW5lcic7XG5pbXBvcnQgU2xpZGVzaG93Q29udGFpbmVyIGZyb20gJy4vY29tcG9uZW50cy9zbGlkZXNob3cvU2xpZGVzaG93Q29udGFpbmVyJztcblxuaW1wb3J0ICcuL3N0eWxlL21haW4uc2Nzcyc7XG5cbmlmICh3aW5kb3cpIHtcbiAgICB3aW5kb3cuQ2xpbWIgPSB3aW5kb3cuQ2xpbWIgfHwge307XG5cbiAgICBjb25zdCAkd2FsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2xpbWItd2FsbCcpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAkd2FsbHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY29uc3QgJGl0ZW0gPSAkd2FsbHNbaV07XG4gICAgICAgIGNvbnN0IGNvbGxlY3Rpb25JZCA9ICRpdGVtLmRhdGFzZXQuY29sbGVjdGlvbklkO1xuICAgICAgICBjb25zdCBsaW1pdCA9ICRpdGVtLmRhdGFzZXQubGltaXQ7XG4gICAgICAgIGNvbnN0IGRvbWFpbiA9ICRpdGVtLmRhdGFzZXQuZG9tYWluO1xuXG4gICAgICAgIFJlYWN0RE9NLnJlbmRlcihcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoV2FsbENvbnRhaW5lciwge2NvbGxlY3Rpb25JZCwgbGltaXQsIGRvbWFpbn0pLFxuICAgICAgICAgICAgJGl0ZW1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCAkc2xpZGVzaG93cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbGltYi1zbGlkZXNob3cnKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgJHNsaWRlc2hvd3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY29uc3QgJGl0ZW0gPSAkc2xpZGVzaG93c1tpXTtcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbklkID0gJGl0ZW0uZGF0YXNldC5jb2xsZWN0aW9uSWQ7XG4gICAgICAgIGNvbnN0IGRlbGF5ID0gcGFyc2VJbnQoJGl0ZW0uZGF0YXNldC5kZWxheSwgMCk7XG4gICAgICAgIGNvbnN0IGRvbWFpbiA9ICRpdGVtLmRhdGFzZXQuZG9tYWluO1xuXG4gICAgICAgIFJlYWN0RE9NLnJlbmRlcihcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2xpZGVzaG93Q29udGFpbmVyLCB7Y29sbGVjdGlvbklkLCBkZWxheSwgZG9tYWlufSksXG4gICAgICAgICAgICAkaXRlbVxuICAgICAgICApO1xuICAgIH1cbn1cblxuZXhwb3J0IHtXYWxsQ29udGFpbmVyfTtcbmV4cG9ydCB7V2FsbH0gZnJvbSAnLi9jb21wb25lbnRzL3dhbGwvV2FsbCc7XG5leHBvcnQge1RpbGV9IGZyb20gJy4vY29tcG9uZW50cy93YWxsL1RpbGUnO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9+L2VzbGludC1sb2FkZXIhLi9zcmMvaW5kZXguanNcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMV9fO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwge1wicm9vdFwiOlwiUmVhY3RcIixcImNvbW1vbmpzMlwiOlwicmVhY3RcIixcImNvbW1vbmpzXCI6XCJyZWFjdFwiLFwiYW1kXCI6XCJyZWFjdFwifVxuICoqIG1vZHVsZSBpZCA9IDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfY29tcG9uZW50czIgPSByZXF1aXJlKCcuL2NvbXBvbmVudHMnKTtcblxudmFyIF9jb21wb25lbnRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbXBvbmVudHMyKTtcblxudmFyIF9yZW9yZGVyS2V5cyA9IHJlcXVpcmUoJy4vcmVvcmRlcktleXMnKTtcblxudmFyIF9yZW9yZGVyS2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZW9yZGVyS2V5cyk7XG5cbnZhciBfY29tcG9uZW50cyA9IF9jb21wb25lbnRzM1snZGVmYXVsdCddKF9yZWFjdDJbJ2RlZmF1bHQnXSk7XG5cbnZhciBTcHJpbmcgPSBfY29tcG9uZW50cy5TcHJpbmc7XG52YXIgVHJhbnNpdGlvblNwcmluZyA9IF9jb21wb25lbnRzLlRyYW5zaXRpb25TcHJpbmc7XG52YXIgTW90aW9uID0gX2NvbXBvbmVudHMuTW90aW9uO1xudmFyIFN0YWdnZXJlZE1vdGlvbiA9IF9jb21wb25lbnRzLlN0YWdnZXJlZE1vdGlvbjtcbnZhciBUcmFuc2l0aW9uTW90aW9uID0gX2NvbXBvbmVudHMuVHJhbnNpdGlvbk1vdGlvbjtcbmV4cG9ydHMuU3ByaW5nID0gU3ByaW5nO1xuZXhwb3J0cy5UcmFuc2l0aW9uU3ByaW5nID0gVHJhbnNpdGlvblNwcmluZztcbmV4cG9ydHMuTW90aW9uID0gTW90aW9uO1xuZXhwb3J0cy5TdGFnZ2VyZWRNb3Rpb24gPSBTdGFnZ2VyZWRNb3Rpb247XG5leHBvcnRzLlRyYW5zaXRpb25Nb3Rpb24gPSBUcmFuc2l0aW9uTW90aW9uO1xuXG52YXIgX3NwcmluZzIgPSByZXF1aXJlKCcuL3NwcmluZycpO1xuXG52YXIgX3NwcmluZzMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zcHJpbmcyKTtcblxuZXhwb3J0cy5zcHJpbmcgPSBfc3ByaW5nM1snZGVmYXVsdCddO1xuXG52YXIgX3ByZXNldHMyID0gcmVxdWlyZSgnLi9wcmVzZXRzJyk7XG5cbnZhciBfcHJlc2V0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcmVzZXRzMik7XG5cbmV4cG9ydHMucHJlc2V0cyA9IF9wcmVzZXRzM1snZGVmYXVsdCddO1xudmFyIHV0aWxzID0ge1xuICByZW9yZGVyS2V5czogX3Jlb3JkZXJLZXlzMlsnZGVmYXVsdCddXG59O1xuZXhwb3J0cy51dGlscyA9IHV0aWxzO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0LW1vdGlvbi9saWIvcmVhY3QtbW90aW9uLmpzXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50LCBQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcblxuXG5jbGFzcyBBdXRob3IgZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgbGluazogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgcGljdHVyZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICAgIHVzZXJuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcbiAgICB9O1xuXG4gICAgcmVuZGVyKCkge1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJjbGltYl9fYXV0aG9yXCJcbiAgICAgICAgICAgICAgIGhyZWY9eyB0aGlzLnByb3BzLmxpbmsgfT5cblxuICAgICAgICAgICAgICAgIDxpbWcgaGVpZ2h0PVwiMzRcIlxuICAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCIzNFwiXG4gICAgICAgICAgICAgICAgICAgICBzcmM9eyB0aGlzLnByb3BzLnBpY3R1cmV9XG4gICAgICAgICAgICAgICAgICAgICBhbHQ9eyBgUHJvZmlsZSBwaWMgb2YgJHt0aGlzLnByb3BzLm5hbWV9YCB9Lz5cblxuICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJjbGltYl9fdGlsZV9fYXV0aG9yX191c2VybmFtZVwiPlxuICAgICAgICAgICAgICAgICAgICB7IHRoaXMucHJvcHMudXNlcm5hbWUgfVxuICAgICAgICAgICAgICAgIDwvaDQ+XG4gICAgICAgICAgICA8L2E+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBdXRob3I7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL34vZXNsaW50LWxvYWRlciEuL3NyYy9jb21wb25lbnRzL2NvbW1vbi9BdXRob3IuanN4XG4gKiovIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuXG5jbGFzcyBJbWFnZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8aW1nIGNsYXNzTmFtZT1cImNsaW1iX19pbWFnZVwiXG4gICAgICAgICAgICAgICAgIHNyYz17IHRoaXMucHJvcHMuc3JjIH0gZGF0YS13aWR0aD17IHRoaXMucHJvcHMud2lkdGggfSBkYXRhLWhlaWdodD17IHRoaXMucHJvcHMuaGVpZ2h0IH0vPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuSW1hZ2UucHJvcFR5cGVzID0ge1xuICAgIHNyYzogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHdpZHRoOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLFxuICAgIGhlaWdodDogUmVhY3QuUHJvcFR5cGVzLm51bWJlclxufTtcblxuZXhwb3J0IGRlZmF1bHQgSW1hZ2U7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL34vZXNsaW50LWxvYWRlciEuL3NyYy9jb21wb25lbnRzL2NvbW1vbi9JbWFnZS5qc3hcbiAqKi8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5cbmNsYXNzIE1lc3NhZ2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuXG4gICAgcmVuZGVyKCkge1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLnByb3BzLmJvZHlcbiAgICAgICAgICAgIC5yZXBsYWNlKC88YSBocmVmPVwiaHR0cDpcXC9cXC9waWMudHdpdHRlci5jb21cXC9bXj5dKj4oW148XSspPFxcL2E+L2csICcnKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjbGltYl9fbWVzc2FnZVwiXG4gICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiBtZXNzYWdlfX0+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbk1lc3NhZ2UucHJvcFR5cGVzID0ge1xuICAgIGJvZHk6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxufTtcblxuZXhwb3J0IGRlZmF1bHQgTWVzc2FnZTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vfi9lc2xpbnQtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvY29tbW9uL01lc3NhZ2UuanN4XG4gKiovIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBJbWFnZSBmcm9tICcuLy4uL2NvbW1vbi9JbWFnZSc7XG5pbXBvcnQgTWVzc2FnZSBmcm9tICcuLy4uL2NvbW1vbi9NZXNzYWdlJztcbmltcG9ydCBBdXRob3IgZnJvbSAnLi8uLi9jb21tb24vQXV0aG9yJztcblxuXG5jbGFzcyBUaWxlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICB9XG5cbiAgICBjcmVhdGVJbWFnZSgpIHtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5pbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3Qge3VybDogc3JjLCB3aWR0aCwgaGVpZ2h0fSA9IHRoaXMucHJvcHMuaW1hZ2U7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxJbWFnZSBzcmM9eyBzcmMgfVxuICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD17IHdpZHRoIH1cbiAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXsgaGVpZ2h0IH0vPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjcmVhdGVNZXNzYWdlKCkge1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPE1lc3NhZ2UgYm9keT17IHRoaXMucHJvcHMubWVzc2FnZSB9Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY3JlYXRlQ2xhc3NTdHJpbmcoKSB7XG5cbiAgICAgICAgbGV0IGNsYXNzU3RyaW5nID0gYGNsaW1iX190aWxlIGNsaW1iX190aWxlLS0ke3RoaXMucHJvcHMuc291cmNlX3R5cGV9YDtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5pbWFnZSkge1xuICAgICAgICAgICAgY2xhc3NTdHJpbmcgKz0gJyBjbGltYl9fdGlsZS0taGFzLW1lZGlhIGNsaW1iX190aWxlLS1oYXMtaW1hZ2UnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xhc3NTdHJpbmcgKz0gJyBjbGltYl9fdGlsZS0taGFzLW5vLWltYWdlJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZpZGVvX3VybCkge1xuICAgICAgICAgICAgY2xhc3NTdHJpbmcgKz0gJyBjbGltYl9fdGlsZS0taGFzLW1lZGlhIGNsaW1iX190aWxlLS1oYXMtdmlkZW8nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xhc3NTdHJpbmcgKz0gJyBjbGltYl9fdGlsZS0taGFzLW5vLXZpZGVvJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjbGFzc1N0cmluZztcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG5cbiAgICAgICAgY29uc3QgaW1hZ2UgPSB0aGlzLmNyZWF0ZUltYWdlKCk7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmNyZWF0ZU1lc3NhZ2UoKTtcbiAgICAgICAgY29uc3QgY2xhc3NTdHJpbmcgPSB0aGlzLmNyZWF0ZUNsYXNzU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IHthdXRob3J9ID0gdGhpcy5wcm9wcztcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9eyBjbGFzc1N0cmluZyB9XG4gICAgICAgICAgICAgICAgIHN0eWxlPXt0aGlzLnByb3BzLnN0eWxlfT5cblxuICAgICAgICAgICAgICAgIDxhIGhyZWY9eyB0aGlzLnByb3BzLmxpbmsgfT5cbiAgICAgICAgICAgICAgICAgICAgeyBpbWFnZSB9XG4gICAgICAgICAgICAgICAgPC9hPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjbGltYl9fdGlsZV9fY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICB7IG1lc3NhZ2UgfVxuXG4gICAgICAgICAgICAgICAgICAgIDxBdXRob3Igey4uLmF1dGhvcn0gLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuXG5UaWxlLnByb3BUeXBlcyA9IHtcblxuICAgIC8vIFJlcXVpcmVkIGF0dHJzXG4gICAgbGluazogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHNvdXJjZV90eXBlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgdGltZXN0YW1wOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgYXV0aG9yOiBSZWFjdC5Qcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICB1c2VybmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICBwaWN0dXJlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICAgIGxpbms6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxuICAgIH0pLFxuXG4gICAgLy8gT3B0aW9uYWwgYXR0cnNcbiAgICBtZXNzYWdlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIHZpZGVvX3NyYzogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICBpbWFnZTogUmVhY3QuUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgdXJsOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICAgIHdpZHRoOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgICAgIGhlaWdodDogUmVhY3QuUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkXG4gICAgfSlcblxufTtcblxuZXhwb3J0IGRlZmF1bHQgVGlsZTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vfi9lc2xpbnQtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvd2FsbC9UaWxlLmpzeFxuICoqLyIsImltcG9ydCBSZWFjdCwge0NvbXBvbmVudCwgUHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgVGlsZSBmcm9tICcuL1RpbGUnO1xuaW1wb3J0IHtUcmFuc2l0aW9uTW90aW9uLCBzcHJpbmd9IGZyb20gJ3JlYWN0LW1vdGlvbic7XG5cblxuY2xhc3MgV2FsbCBleHRlbmRzIENvbXBvbmVudCB7XG5cbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBpdGVtczogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIGdldFN0eWxlcygpIHtcbiAgICAgICAgY29uc3QgY29uZmlncyA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnByb3BzLml0ZW1zKS5tYXAoa2V5ID0+IHtcbiAgICAgICAgICAgIGNvbmZpZ3Nba2V5XSA9IHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiBzcHJpbmcoMSksXG4gICAgICAgICAgICAgICAgd2lkdGg6IHNwcmluZygzMCksXG4gICAgICAgICAgICAgICAgbWFyZ2luOiBzcHJpbmcoMSksXG4gICAgICAgICAgICAgICAgaXRlbTogdGhpcy5wcm9wcy5pdGVtc1trZXldXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNvbmZpZ3M7XG4gICAgfVxuXG4gICAgd2lsbEVudGVyKGtleSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3BhY2l0eTogc3ByaW5nKDApLFxuICAgICAgICAgICAgd2lkdGg6IHNwcmluZygwKSxcbiAgICAgICAgICAgIG1hcmdpbjogc3ByaW5nKDApLFxuICAgICAgICAgICAgaXRlbTogdGhpcy5wcm9wcy5pdGVtc1trZXldXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgd2lsbExlYXZlKGtleSwgc3R5bGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IHNwcmluZygwKSxcbiAgICAgICAgICAgIHdpZHRoOiBzcHJpbmcoMCksXG4gICAgICAgICAgICBtYXJnaW46IHNwcmluZygwKSxcbiAgICAgICAgICAgIGl0ZW06IHN0eWxlLml0ZW1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZW5kZXJUaWxlKGtleSwgaXRlbVZhbHVlcykge1xuXG4gICAgICAgIGNvbnN0IHtpdGVtLCAuLi5zdHlsZUNvbmZpZ30gPSBpdGVtVmFsdWVzO1xuICAgICAgICBjb25zdCB7Li4uaXRlbVByb3BzfSA9IGl0ZW07XG5cbiAgICAgICAgY29uc3Qgc3R5bGUgPSB7XG4gICAgICAgICAgICBvcGFjaXR5OiBzdHlsZUNvbmZpZy5vcGFjaXR5LFxuICAgICAgICAgICAgd2lkdGg6IGAke3N0eWxlQ29uZmlnLndpZHRofSVgLFxuICAgICAgICAgICAgbWFyZ2luTGVmdDogYCR7c3R5bGVDb25maWcubWFyZ2lufSVgLFxuICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IGAke3N0eWxlQ29uZmlnLm1hcmdpbn0lYFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8VGlsZSBrZXk9e2tleX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXtzdHlsZX1cbiAgICAgICAgICAgICAgICB7Li4uaXRlbVByb3BzIH0gLz5cbiAgICAgICAgKTtcblxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxUcmFuc2l0aW9uTW90aW9uXG4gICAgICAgICAgICAgICAgc3R5bGVzPXt0aGlzLmdldFN0eWxlcy5iaW5kKHRoaXMpKCl9XG4gICAgICAgICAgICAgICAgd2lsbEVudGVyPXt0aGlzLndpbGxFbnRlci5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgIHdpbGxMZWF2ZT17dGhpcy53aWxsTGVhdmUuYmluZCh0aGlzKX0+XG4gICAgICAgICAgICAgICAge3ZhbHVlcyA9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNsaW1iX193YWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7T2JqZWN0LmtleXModmFsdWVzKS5tYXAoa2V5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtVmFsdWVzID0gdmFsdWVzW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyVGlsZShrZXksIGl0ZW1WYWx1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDwvVHJhbnNpdGlvbk1vdGlvbj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFdhbGw7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL34vZXNsaW50LWxvYWRlciEuL3NyYy9jb21wb25lbnRzL3dhbGwvV2FsbC5qc3hcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxudmFyIF9yeExpdGUgPSByZXF1aXJlKCdyeC1saXRlJyk7XG5cbnZhciBfZmV0Y2hKc29ucCA9IHJlcXVpcmUoJ2ZldGNoLWpzb25wJyk7XG5cbnZhciBfZmV0Y2hKc29ucDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mZXRjaEpzb25wKTtcblxudmFyIF91cmwgPSByZXF1aXJlKCd1cmwnKTtcblxudmFyIGdldFN0cmVhbSA9IGZ1bmN0aW9uIGdldFN0cmVhbShjb2xsZWN0aW9uSWQpIHtcbiAgICB2YXIgaW50ZXJ2YWxTZWNvbmRzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gOCA6IGFyZ3VtZW50c1sxXTtcbiAgICB2YXIgZG9tYWluID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gJ2h0dHA6Ly9hcHAuY2xpbWIuc29jaWFsJyA6IGFyZ3VtZW50c1syXTtcblxuICAgIGlmICghY29sbGVjdGlvbklkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUGxlYXNlIHNwZWNpZnkgYSBjb2xsZWN0aW9uSWQnKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGludGVydmFsU2Vjb25kcyAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQb2xsaW5nIGludGVydmFsIHNob3VsZCBiZSBhIHBvc2l0aXZlIGludGVnZXIuIEEgJyArIHR5cGVvZiBpbnRlcnZhbFNlY29uZHMgKyAnIHdhcyBwcm92aWRlZC4nKTtcbiAgICB9XG5cbiAgICBpZiAoaW50ZXJ2YWxTZWNvbmRzIDw9IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQb2xsaW5nIGludGVydmFsIHNob3VsZCBiZSBhIHBvc2l0aXZlIGludGVnZXIuICcgKyBpbnRlcnZhbFNlY29uZHMgKyAnIHdhcyBzcGVjaWZpZWQuJyk7XG4gICAgfVxuXG4gICAgdmFyIHBvbGxSYXRlID0gaW50ZXJ2YWxTZWNvbmRzICogMTAwMDtcblxuICAgIHZhciBVUkwgPSAoMCwgX3VybC5yZXNvbHZlKShkb21haW4sICcvYXBpL3YxL2NvbGxlY3Rpb25zLycgKyBjb2xsZWN0aW9uSWQpO1xuXG4gICAgdmFyIHJlcXVlc3RTdHJlYW0gPSBfcnhMaXRlLk9ic2VydmFibGUuanVzdChVUkwpO1xuXG4gICAgdmFyIHVwZGF0ZVN0cmVhbSA9IF9yeExpdGUuT2JzZXJ2YWJsZS5pbnRlcnZhbChwb2xsUmF0ZSkuc3RhcnRXaXRoKG51bGwpO1xuXG4gICAgdmFyIHJlc3BvbnNlU3RyZWFtID0gdXBkYXRlU3RyZWFtLmNvbWJpbmVMYXRlc3QocmVxdWVzdFN0cmVhbSwgZnVuY3Rpb24gKHRpY2ssIHVybCkge1xuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH0pLmZsYXRNYXAoZnVuY3Rpb24gKGJhc2VVcmwpIHtcblxuICAgICAgICB2YXIgcmVxdWVzdFVybCA9ICcnICsgYmFzZVVybDtcblxuICAgICAgICByZXR1cm4gX3J4TGl0ZS5PYnNlcnZhYmxlLmZyb21Qcm9taXNlKCgwLCBfZmV0Y2hKc29ucDJbJ2RlZmF1bHQnXSkocmVxdWVzdFVybCkudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3AuanNvbigpO1xuICAgICAgICB9KSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzcG9uc2VTdHJlYW07XG59O1xuXG5leHBvcnRzWydkZWZhdWx0J10gPSB7XG4gICAgZ2V0U3RyZWFtOiBnZXRTdHJlYW1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NsaW1iLXNvY2lhbC9kaXN0L2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gW3N0aWZmbmVzcywgZGFtcGluZ11cblwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSB7XG4gIG5vV29iYmxlOiBbMTcwLCAyNl0sIC8vIHRoZSBkZWZhdWx0XG4gIGdlbnRsZTogWzEyMCwgMTRdLFxuICB3b2JibHk6IFsxODAsIDEyXSxcbiAgc3RpZmY6IFsyMTAsIDIwXVxufTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QtbW90aW9uL2xpYi9wcmVzZXRzLmpzXG4gKiogbW9kdWxlIGlkID0gOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxuKGZ1bmN0aW9uKCkge1xuICB2YXIgZ2V0TmFub1NlY29uZHMsIGhydGltZSwgbG9hZFRpbWU7XG5cbiAgaWYgKCh0eXBlb2YgcGVyZm9ybWFuY2UgIT09IFwidW5kZWZpbmVkXCIgJiYgcGVyZm9ybWFuY2UgIT09IG51bGwpICYmIHBlcmZvcm1hbmNlLm5vdykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfTtcbiAgfSBlbHNlIGlmICgodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2VzcyAhPT0gbnVsbCkgJiYgcHJvY2Vzcy5ocnRpbWUpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIChnZXROYW5vU2Vjb25kcygpIC0gbG9hZFRpbWUpIC8gMWU2O1xuICAgIH07XG4gICAgaHJ0aW1lID0gcHJvY2Vzcy5ocnRpbWU7XG4gICAgZ2V0TmFub1NlY29uZHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBocjtcbiAgICAgIGhyID0gaHJ0aW1lKCk7XG4gICAgICByZXR1cm4gaHJbMF0gKiAxZTkgKyBoclsxXTtcbiAgICB9O1xuICAgIGxvYWRUaW1lID0gZ2V0TmFub1NlY29uZHMoKTtcbiAgfSBlbHNlIGlmIChEYXRlLm5vdykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gRGF0ZS5ub3coKSAtIGxvYWRUaW1lO1xuICAgIH07XG4gICAgbG9hZFRpbWUgPSBEYXRlLm5vdygpO1xuICB9IGVsc2Uge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsb2FkVGltZTtcbiAgICB9O1xuICAgIGxvYWRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIH1cblxufSkuY2FsbCh0aGlzKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0LW1vdGlvbi9+L3BlcmZvcm1hbmNlLW5vdy9saWIvcGVyZm9ybWFuY2Utbm93LmpzXG4gKiogbW9kdWxlIGlkID0gMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XHJcblx0aWYoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcclxuXHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xyXG5cdFx0bW9kdWxlLnBhdGhzID0gW107XHJcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcclxuXHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xyXG5cdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XHJcblx0fVxyXG5cdHJldHVybiBtb2R1bGU7XHJcbn1cclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAod2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZHJhaW5RdWV1ZSwgMCk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcHJvY2Vzcy9icm93c2VyLmpzXG4gKiogbW9kdWxlIGlkID0gMTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImltcG9ydCBSZWFjdCwge0NvbXBvbmVudCwgUHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgTWVzc2FnZSBmcm9tICcuLi9jb21tb24vTWVzc2FnZSc7XG5pbXBvcnQgQXV0aG9yIGZyb20gJy4uL2NvbW1vbi9BdXRob3InO1xuXG5cbmNsYXNzIFBhbmVsIGV4dGVuZHMgQ29tcG9uZW50IHtcblxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIG1lc3NhZ2U6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgICAgYXV0aG9yOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWRcbiAgICB9O1xuXG4gICAgY3JlYXRlQXV0aG9yKCkge1xuICAgICAgICBjb25zdCB7YXV0aG9yfSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgcmV0dXJuKFxuICAgICAgICAgICAgPEF1dGhvciB7Li4uYXV0aG9yfSAvPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIGNyZWF0ZU1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybihcbiAgICAgICAgICAgIDxNZXNzYWdlIGJvZHk9e3RoaXMucHJvcHMubWVzc2FnZX0gLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG5cbiAgICAgICAgY29uc3QgYXV0aG9yID0gdGhpcy5jcmVhdGVBdXRob3IoKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuY3JlYXRlTWVzc2FnZSgpO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt0aGlzLnByb3BzLnN0eWxlfVxuICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjbGltYi1zbGlkZXNob3dfX3BhbmVsXCI+XG5cbiAgICAgICAgICAgICAgICB7YXV0aG9yfVxuICAgICAgICAgICAgICAgIHttZXNzYWdlfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQYW5lbDtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vfi9lc2xpbnQtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvc2xpZGVzaG93L1BhbmVsLmpzeFxuICoqLyIsImltcG9ydCBSZWFjdCwge0NvbXBvbmVudCwgUHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgU2xpZGUgZnJvbSAnLi9zbGlkZSc7XG5pbXBvcnQge1RyYW5zaXRpb25Nb3Rpb24sIHNwcmluZ30gZnJvbSAncmVhY3QtbW90aW9uJztcblxuXG5jbGFzcyBTbGlkZXNob3cgZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgIH1cblxuICAgIHN0YXRlID0ge1xuICAgICAgICBjdXJyZW50S2V5OiAnJ1xuICAgIH07XG5cbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBpdGVtczogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgICAgICBkZWxheTogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBjb25zdCB7ZGVsYXl9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKHRoaXMubmV4dFNsaWRlLmJpbmQodGhpcyksIGRlbGF5ICogMTAwMCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XG4gICAgfVxuXG4gICAgbmV4dFNsaWRlKCkge1xuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5wcm9wcy5pdGVtcyk7XG4gICAgICAgIGNvbnN0IHJhbmRvbUtleSA9IGtleXNba2V5cy5sZW5ndGggKiBNYXRoLnJhbmRvbSgpIDw8IDBdO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgY3VycmVudEtleTogcmFuZG9tS2V5XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldFN0eWxlcygpIHtcbiAgICAgICAgY29uc3QgY3VycmVudEtleSA9IHRoaXMuc3RhdGUuY3VycmVudEtleTtcbiAgICAgICAgY29uc3QgY29uZmlncyA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnByb3BzLml0ZW1zKS5tYXAoa2V5ID0+IHtcbiAgICAgICAgICAgIGNvbmZpZ3Nba2V5XSA9IHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiBzcHJpbmcoMCksXG4gICAgICAgICAgICAgICAgc2NhbGU6IHNwcmluZygwKSxcbiAgICAgICAgICAgICAgICB6SW5kZXg6IC01LFxuICAgICAgICAgICAgICAgIGl0ZW06IHRoaXMucHJvcHMuaXRlbXNba2V5XVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKGtleSA9PT0gY3VycmVudEtleSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnc1trZXldLCB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IHNwcmluZygxKSxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IHNwcmluZygxKSxcbiAgICAgICAgICAgICAgICAgICAgekluZGV4OiAxXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjb25maWdzO1xuICAgIH1cblxuICAgIHdpbGxFbnRlcihrZXkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IHNwcmluZygwKSxcbiAgICAgICAgICAgIHNjYWxlOiBzcHJpbmcoMCksXG4gICAgICAgICAgICB6SW5kZXg6IC01LFxuICAgICAgICAgICAgaXRlbTogdGhpcy5wcm9wcy5pdGVtc1trZXldXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgd2lsbExlYXZlKGtleSwgc3R5bGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IHNwcmluZygwKSxcbiAgICAgICAgICAgIHNjYWxlOiBzcHJpbmcoMCksXG4gICAgICAgICAgICB6SW5kZXg6IC01LFxuICAgICAgICAgICAgaXRlbTogc3R5bGUuaXRlbVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJlbmRlclNsaWRlKGtleSwgaXRlbVZhbHVlcykge1xuXG4gICAgICAgIGNvbnN0IHtpdGVtLCAuLi5zdHlsZUNvbmZpZ30gPSBpdGVtVmFsdWVzO1xuXG4gICAgICAgIGNvbnN0IHN0eWxlID0ge1xuICAgICAgICAgICAgb3BhY2l0eTogc3R5bGVDb25maWcub3BhY2l0eSxcbiAgICAgICAgICAgIHpJbmRleDogTWF0aC5mbG9vcihzdHlsZUNvbmZpZy56SW5kZXgpLFxuICAgICAgICAgICAgdHJhbnNmb3JtOiBgc2NhbGUoJHtzdHlsZUNvbmZpZy5zY2FsZX0pYFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8U2xpZGUga2V5PXtrZXl9XG4gICAgICAgICAgICAgICAgICAgaXNDdXJyZW50PXtrZXkgPT09IHRoaXMuc3RhdGUuY3VycmVudEtleX1cbiAgICAgICAgICAgICAgICAgICBpdGVtPXtpdGVtfVxuICAgICAgICAgICAgICAgICAgIHN0eWxlPXtzdHlsZX0gLz5cbiAgICAgICAgKTtcblxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxUcmFuc2l0aW9uTW90aW9uXG4gICAgICAgICAgICAgICAgc3R5bGVzPXt0aGlzLmdldFN0eWxlcy5iaW5kKHRoaXMpKCl9XG4gICAgICAgICAgICAgICAgd2lsbEVudGVyPXt0aGlzLndpbGxFbnRlci5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgIHdpbGxMZWF2ZT17dGhpcy53aWxsTGVhdmUuYmluZCh0aGlzKX0+XG4gICAgICAgICAgICAgICAge3ZhbHVlcyA9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNsaW1iX19zbGlkZXNob3dfX2NvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge09iamVjdC5rZXlzKHZhbHVlcykubWFwKGtleSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbVZhbHVlcyA9IHZhbHVlc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlclNsaWRlKGtleSwgaXRlbVZhbHVlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9UcmFuc2l0aW9uTW90aW9uPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2xpZGVzaG93O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9+L2VzbGludC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy9zbGlkZXNob3cvU2xpZGVzaG93LmpzeFxuICoqLyIsImltcG9ydCBSZWFjdCwge0NvbXBvbmVudCwgUHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xpbWIgZnJvbSAnY2xpbWItc29jaWFsJztcbmltcG9ydCBTbGlkZXNob3cgZnJvbSAnLi9TbGlkZXNob3cnO1xuXG5cbmNsYXNzIFNsaWRlc2hvd0NvbnRhaW5lciBleHRlbmRzIENvbXBvbmVudCB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgfVxuXG4gICAgc3RhdGUgPSB7XG4gICAgICAgIGl0ZW1zOiB7fVxuICAgIH07XG5cbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgICAgZG9tYWluOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICBkZWxheTogUHJvcFR5cGVzLm51bWJlclxuICAgIH07XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6ICc1NjFiYTYzNDQ1Mjg0ZTE3NDBlMDE2ZjcnLFxuICAgICAgICBkZWxheTogNSxcbiAgICAgICAgcmVmcmVzaDogOCxcbiAgICAgICAgZG9tYWluOiAnaHR0cDovL2FwcC5jbGltYi5zb2NpYWwnXG4gICAgfTtcblxuXG4gICAgaW5pdCgpIHtcblxuICAgICAgICBpZiAoIXRoaXMucHJvcHMuY29sbGVjdGlvbklkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjbGltYlxuICAgICAgICAgICAgLmdldFN0cmVhbShcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmNvbGxlY3Rpb25JZCxcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnJlZnJlc2gsXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5kb21haW5cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoaXRlbXMgPT4ge1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbWFwcGVkSXRlbXMgPSB7fTtcbiAgICAgICAgICAgICAgICBpdGVtcy5tYXAoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG1hcHBlZEl0ZW1zW2l0ZW0uaWRdID0gaXRlbTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtczogbWFwcGVkSXRlbXNcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxTbGlkZXNob3cgaXRlbXM9e3RoaXMuc3RhdGUuaXRlbXN9IGRlbGF5PXt0aGlzLnByb3BzLmRlbGF5fS8+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTbGlkZXNob3dDb250YWluZXI7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL34vZXNsaW50LWxvYWRlciEuL3NyYy9jb21wb25lbnRzL3NsaWRlc2hvdy9TbGlkZXNob3dDb250YWluZXIuanN4XG4gKiovIiwiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50LCBQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQYW5lbCBmcm9tICcuL1BhbmVsJztcbmltcG9ydCBJbWFnZSBmcm9tICcuLi9jb21tb24vSW1hZ2UnO1xuaW1wb3J0IHtNb3Rpb24sIHNwcmluZ30gZnJvbSAncmVhY3QtbW90aW9uJztcblxuY2xhc3MgU2xpZGUgZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgIH1cblxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIGl0ZW06IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICAgICAgaXNDdXJyZW50OiBQcm9wVHlwZXMuYm9vbFxuICAgIH07XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICBpc0N1cnJlbnQ6IGZhbHNlXG4gICAgfTtcblxuICAgIHN0YXRlID0ge1xuICAgICAgICBzaG91bGREaXNwbGF5UGFuZWw6IGZhbHNlXG4gICAgfTtcblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICAgIGlmIChuZXh0UHJvcHMuaXNDdXJyZW50KSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkRGlzcGxheVBhbmVsOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCA4NTApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc2hvdWxkRGlzcGxheVBhbmVsOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjcmVhdGVJbWFnZSgpIHtcblxuICAgICAgICBjb25zdCB7aW1hZ2V9ID0gdGhpcy5wcm9wcy5pdGVtO1xuXG4gICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3Qge3VybDogc3JjLCB3aWR0aCwgaGVpZ2h0fSA9IGltYWdlO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8SW1hZ2Ugc3JjPXsgc3JjIH1cbiAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9eyB3aWR0aCB9XG4gICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17IGhlaWdodCB9Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY3JlYXRlUGFuZWwoKSB7XG5cbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLml0ZW0uaW1hZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPFBhbmVsIGF1dGhvcj17dGhpcy5wcm9wcy5pdGVtLmF1dGhvcn0gbWVzc2FnZT17dGhpcy5wcm9wcy5pdGVtLm1lc3NhZ2V9IC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGFuZWxXaWR0aCA9IDMwMDtcblxuICAgICAgICBjb25zdCB2YWx1ZXMgPSB7XG4gICAgICAgICAgICB4OiB0aGlzLnN0YXRlLnNob3VsZERpc3BsYXlQYW5lbCA/IHNwcmluZygwKSA6IHNwcmluZyhwYW5lbFdpZHRoKVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZXMgPSB7XG4gICAgICAgICAgICB4OiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxNb3Rpb24gZGVmYXVsdFN0eWxlPXtkZWZhdWx0VmFsdWVzfVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17dmFsdWVzfT5cbiAgICAgICAgICAgICAgICB7aW50ZXJwb2xhdGVkVmFsdWVzID0+XG4gICAgICAgICAgICAgICAgICAgIDxQYW5lbCBhdXRob3I9e3RoaXMucHJvcHMuaXRlbS5hdXRob3J9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlPXt0aGlzLnByb3BzLml0ZW0ubWVzc2FnZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luTGVmdDogYC0ke2ludGVycG9sYXRlZFZhbHVlcy54fXB4YCwgd2lkdGg6IHBhbmVsV2lkdGh9fSAvPlxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgPC9Nb3Rpb24+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgY3JlYXRlQ2xhc3NTdHJpbmcoKSB7XG5cbiAgICAgICAgbGV0IGNsYXNzU3RyaW5nID0gYGNsaW1iLXNsaWRlc2hvd19fc2xpZGUgY2xpbWJfX3RpbGUtLSR7dGhpcy5wcm9wcy5pdGVtLnNvdXJjZV90eXBlfWA7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaXRlbS5pbWFnZSkge1xuICAgICAgICAgICAgY2xhc3NTdHJpbmcgKz0gJyBjbGltYi1zbGlkZXNob3dfX3NsaWRlLS1oYXMtbWVkaWEgY2xpbWItc2xpZGVzaG93X19zbGlkZS0taGFzLWltYWdlJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNsYXNzU3RyaW5nICs9ICcgY2xpbWItc2xpZGVzaG93X19zbGlkZS0taGFzLW5vLWltYWdlJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLml0ZW0udmlkZW9fdXJsKSB7XG4gICAgICAgICAgICBjbGFzc1N0cmluZyArPSAnIGNsaW1iLXNsaWRlc2hvd19fc2xpZGUtLWhhcy1tZWRpYSBjbGltYi1zbGlkZXNob3dfX3NsaWRlLS1oYXMtdmlkZW8nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xhc3NTdHJpbmcgKz0gJyBjbGltYi1zbGlkZXNob3dfX3NsaWRlLS1oYXMtbm8tdmlkZW8nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNsYXNzU3RyaW5nO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgaW1hZ2UgPSB0aGlzLmNyZWF0ZUltYWdlKCk7XG4gICAgICAgIGNvbnN0IHBhbmVsID0gdGhpcy5jcmVhdGVQYW5lbCgpO1xuICAgICAgICBjb25zdCBjbGFzc1N0cmluZyA9IHRoaXMuY3JlYXRlQ2xhc3NTdHJpbmcoKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9eyBjbGFzc1N0cmluZyB9XG4gICAgICAgICAgICAgICAgIHN0eWxlPXt0aGlzLnByb3BzLnN0eWxlfT5cbiAgICAgICAgICAgICAgICB7aW1hZ2V9XG4gICAgICAgICAgICAgICAge3BhbmVsfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG5cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNsaWRlO1xuXG5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vfi9lc2xpbnQtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvc2xpZGVzaG93L3NsaWRlLmpzeFxuICoqLyIsImltcG9ydCBSZWFjdCwge0NvbXBvbmVudH0gZnJvbSAncmVhY3QnO1xuXG5cbmNsYXNzIENsaW1iQmFkZ2UgZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gICAgcmVuZGVyKCkge1xuXG4gICAgICAgIGNvbnN0IGxvZ28gPSByZXF1aXJlKCcuLi8uLi9pbWcvY2xpbWJfbG9nby5zdmcnKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGEgaHJlZj1cImh0dHA6Ly9jbGltYi5zb2NpYWwvXCJcbiAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNsaW1iLXNvY2lhbC1iYWRnZVwiXG4gICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogbG9nb319PlxuICAgICAgICAgICAgPC9hPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2xpbWJCYWRnZTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vfi9lc2xpbnQtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvd2FsbC9DbGltYkJhZGdlLmpzeFxuICoqLyIsImltcG9ydCBSZWFjdCwge0NvbXBvbmVudCwgUHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xpbWIgZnJvbSAnY2xpbWItc29jaWFsJztcbmltcG9ydCBXYWxsIGZyb20gJy4vV2FsbCc7XG5pbXBvcnQgQmFkZ2UgZnJvbSAnLi9DbGltYkJhZGdlJztcblxuXG5jbGFzcyBXYWxsQ29udGFpbmVyIGV4dGVuZHMgQ29tcG9uZW50IHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICB9XG5cbiAgICBzdGF0ZSA9IHtcbiAgICAgICAgaXRlbXM6IHt9XG4gICAgfTtcblxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIGNvbGxlY3Rpb25JZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICBkb21haW46IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIGxpbWl0OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICAgIFByb3BUeXBlcy5udW1iZXIsXG4gICAgICAgICAgICBQcm9wVHlwZXMuc3RyaW5nXG4gICAgICAgIF0pXG4gICAgfTtcblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGNvbGxlY3Rpb25JZDogJzU2MWJhNjM0NDUyODRlMTc0MGUwMTZmNycsXG4gICAgICAgIGxpbWl0OiAzMCxcbiAgICAgICAgcmVmcmVzaDogOCxcbiAgICAgICAgZG9tYWluOiAnaHR0cDovL2FwcC5jbGltYi5zb2NpYWwnXG4gICAgfTtcblxuICAgIGluaXQoKSB7XG5cbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLmNvbGxlY3Rpb25JZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xpbWJcbiAgICAgICAgICAgIC5nZXRTdHJlYW0oXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jb2xsZWN0aW9uSWQsXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5yZWZyZXNoLFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZG9tYWluXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGl0ZW1zID0+IHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IG1heFNpemUgPSBwYXJzZUludCh0aGlzLnByb3BzLmxpbWl0LCAwKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IG1hcHBlZEl0ZW1zID0ge307XG4gICAgICAgICAgICAgICAgaXRlbXMuc3BsaWNlKDAsIG1heFNpemUpLm1hcChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbWFwcGVkSXRlbXNbaXRlbS5pZF0gPSBpdGVtO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBtYXBwZWRJdGVtc1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICBsZXQgY2I7XG4gICAgICAgIGlmICh3aW5kb3cuQ2xpbWIgJiYgd2luZG93LkNsaW1iLm9uVXBkYXRlKSB7XG4gICAgICAgICAgICBjYiA9IHdpbmRvdy5DbGltYi5vblVwZGF0ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIG5vb3BcbiAgICAgICAgICAgIGNiID0gKCkgPT4ge1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjYigpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPFdhbGwgaXRlbXM9e3RoaXMuc3RhdGUuaXRlbXN9Lz5cbiAgICAgICAgICAgICAgICA8QmFkZ2UgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgV2FsbENvbnRhaW5lcjtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vfi9lc2xpbnQtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvd2FsbC9XYWxsQ29udGFpbmVyLmpzeFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmNsaW1iX193YWxse3dpZHRoOjEwMCU7cGFkZGluZzowO21hcmdpbjowOy13ZWJraXQtanVzdGlmeS1jb250ZW50OmNlbnRlcjstbXMtZmxleC1wYWNrOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOy13ZWJraXQtZmxleC1kaXJlY3Rpb246cm93Oy1tcy1mbGV4LWRpcmVjdGlvbjpyb3c7ZmxleC1kaXJlY3Rpb246cm93Oy13ZWJraXQtZmxleC13cmFwOndyYXA7LW1zLWZsZXgtd3JhcDp3cmFwO2ZsZXgtd3JhcDp3cmFwO2ZvbnQtc2l6ZToxMDAlfS5jbGltYl9fdGlsZSwuY2xpbWJfX3dhbGx7ZGlzcGxheTotd2Via2l0LWZsZXg7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXh9LmNsaW1iX190aWxley13ZWJraXQtZmxleC1zaHJpbms6MDstbXMtZmxleC1uZWdhdGl2ZTowO2ZsZXgtc2hyaW5rOjA7aGVpZ2h0OjQyNXB4O2JveC1zaXppbmc6Ym9yZGVyLWJveDstd2Via2l0LWp1c3RpZnktY29udGVudDpmbGV4LWVuZDstbXMtZmxleC1wYWNrOmVuZDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmQ7LXdlYmtpdC1mbGV4LWRpcmVjdGlvbjpjb2x1bW47LW1zLWZsZXgtZGlyZWN0aW9uOmNvbHVtbjtmbGV4LWRpcmVjdGlvbjpjb2x1bW47bWFyZ2luLWJvdHRvbToyMHB4O292ZXJmbG93OmhpZGRlbjt0ZXh0LWFsaWduOmxlZnQ7Ym9yZGVyLXJhZGl1czo3cHg7YmFja2dyb3VuZC1jb2xvcjojZjZmNmY2Oy13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47YmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47LXdlYmtpdC1wZXJzcGVjdGl2ZToxMDAwcHg7cGVyc3BlY3RpdmU6MTAwMHB4fS5jbGltYl9fdGlsZV9fY29udGVudHt6LWluZGV4OjE7cGFkZGluZzoyNnB4O2JhY2tncm91bmQtY29sb3I6I2Y2ZjZmNn0uY2xpbWJfX3RpbGUtLWhhcy1uby1pbWFnZSAuY2xpbWJfX3RpbGVfX2NvbnRlbnR7aGVpZ2h0OjEwMCU7ZGlzcGxheTotd2Via2l0LWZsZXg7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LXdlYmtpdC1mbGV4LWRpcmVjdGlvbjpjb2x1bW47LW1zLWZsZXgtZGlyZWN0aW9uOmNvbHVtbjtmbGV4LWRpcmVjdGlvbjpjb2x1bW47LXdlYmtpdC1qdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjstbXMtZmxleC1wYWNrOmp1c3RpZnk7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47Ym94LXNpemluZzpib3JkZXItYm94fS5jbGltYl9faW1hZ2V7ZGlzcGxheTpibG9jazttYXgtd2lkdGg6MTAwJTt6LWluZGV4OjV9LmNsaW1iX190aWxlIC5jbGltYl9faW1hZ2V7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czo3cHg7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6N3B4fS5jbGltYi1zbGlkZXNob3cgLmNsaW1iX19pbWFnZXtib3gtc2hhZG93OjAgMCAxNHB4IDAgcmdiYSgwLDAsMCwuNzUpO2JvcmRlci1yYWRpdXM6N3B4fS5jbGltYl9fbWVzc2FnZXt6LWluZGV4OjF9LmNsaW1iX19tZXNzYWdlPmF7d2hpdGUtc3BhY2U6bm93cmFwO292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO21heC13aWR0aDoyNjBweDtkaXNwbGF5OmlubGluZS1ibG9jazt2ZXJ0aWNhbC1hbGlnbjpib3R0b219LmNsaW1iLXRpbGUgLmNsaW1iX19tZXNzYWdle21hcmdpbi1ib3R0b206MjRweH0uY2xpbWJfX3RpbGUtLWhhcy1uby1pbWFnZSAuY2xpbWJfX21lc3NhZ2V7Zm9udC1zaXplOjE4NSV9LmNsaW1iLXNsaWRlc2hvd19fc2xpZGUtLWhhcy1uby1pbWFnZSAuY2xpbWJfX21lc3NhZ2V7Zm9udC1zaXplOjIyMCV9LmNsaW1iX19hdXRob3J7ZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luOi0xMHB4fS5jbGltYl9fYXV0aG9yIGltZ3tib3JkZXItcmFkaXVzOjI1cHh9LmNsaW1iX19hdXRob3IgLmNsaW1iX190aWxlX19hdXRob3JfX3VzZXJuYW1le2Rpc3BsYXk6aW5saW5lLWJsb2NrO21hcmdpbjowIDAgMCAxMHB4O2xpbmUtaGVpZ2h0OjM0cHg7dmVydGljYWwtYWxpZ246dG9wfS5jbGltYi1zb2NpYWwtYmFkZ2V7cG9zaXRpb246Zml4ZWQ7Ym90dG9tOjIwcHg7cmlnaHQ6MjBweDt6LWluZGV4Ojk7YmFja2dyb3VuZC1jb2xvcjojYTljYWUyO3dpZHRoOjIwMHB4O2hlaWdodDo2NnB4O2JvcmRlci1yYWRpdXM6NXB4fS5jbGltYi1zb2NpYWwtYmFkZ2U+c3Bhbntwb3NpdGlvbjphYnNvbHV0ZSFpbXBvcnRhbnQ7dG9wOi05OTk5cHghaW1wb3J0YW50O2xlZnQ6LTk5OTlweCFpbXBvcnRhbnR9LmNsaW1iLXNsaWRlc2hvd3toZWlnaHQ6MTAwdmg7d2lkdGg6MTAwdnc7Zm9udC1zaXplOjE2MCV9LmNsaW1iX19zbGlkZXNob3dfX2NvbnRhaW5lcnt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3Bvc2l0aW9uOnJlbGF0aXZlfS5jbGltYi1zbGlkZXNob3dfX3NsaWRle3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7ZGlzcGxheTotd2Via2l0LWZsZXg7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LXdlYmtpdC1hbGlnbi1pdGVtczpjZW50ZXI7LW1zLWZsZXgtYWxpZ246Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjstd2Via2l0LWZsZXgtZGlyZWN0aW9uOnJvdzstbXMtZmxleC1kaXJlY3Rpb246cm93O2ZsZXgtZGlyZWN0aW9uOnJvdzstd2Via2l0LWp1c3RpZnktY29udGVudDpjZW50ZXI7LW1zLWZsZXgtcGFjazpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0uY2xpbWItc2xpZGVzaG93X19wYW5lbCwuY2xpbWItc2xpZGVzaG93X19zbGlkZXstd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuO2JhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuOy13ZWJraXQtcGVyc3BlY3RpdmU6MTAwMHB4O3BlcnNwZWN0aXZlOjEwMDBweH0uY2xpbWItc2xpZGVzaG93X19wYW5lbHtib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTppbmxpbmUtYmxvY2s7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZzozMHB4IDE1cHggNXB4O3dpZHRoOjUwJTtib3JkZXItcmFkaXVzOjNweDtiYWNrZ3JvdW5kLWNvbG9yOiNmNmY2ZjZ9LmNsaW1iLXNsaWRlc2hvd19fc2xpZGUtLWhhcy1uby1pbWFnZSAuY2xpbWItc2xpZGVzaG93X19wYW5lbHtwYWRkaW5nOjMwcHg7Ym9yZGVyLXJhZGl1czo3cHg7Ym94LXNoYWRvdzowIDAgMTRweCAwIHJnYmEoMCwwLDAsLjc1KX1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi9hdXRvcHJlZml4ZXItbG9hZGVyP2Jyb3dzZXJzPWxhc3QgMiB2ZXJzaW9uIS4vfi9zYXNzLWxvYWRlciEuL3NyYy9zdHlsZS9tYWluLnNjc3NcbiAqKiBtb2R1bGUgaWQgPSAxOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLypcclxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcclxuKi9cclxuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcclxuXHR2YXIgbGlzdCA9IFtdO1xyXG5cclxuXHQvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXHJcblx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xyXG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSB0aGlzW2ldO1xyXG5cdFx0XHRpZihpdGVtWzJdKSB7XHJcblx0XHRcdFx0cmVzdWx0LnB1c2goXCJAbWVkaWEgXCIgKyBpdGVtWzJdICsgXCJ7XCIgKyBpdGVtWzFdICsgXCJ9XCIpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW1bMV0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcIik7XHJcblx0fTtcclxuXHJcblx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcclxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XHJcblx0XHRpZih0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIilcclxuXHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xyXG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcclxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XHJcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcclxuXHRcdFx0XHRhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XHJcblx0XHR9XHJcblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBpdGVtID0gbW9kdWxlc1tpXTtcclxuXHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxyXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xyXG5cdFx0XHQvLyAgd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxyXG5cdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxyXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xyXG5cdFx0XHRcdGlmKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcclxuXHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xyXG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XHJcblx0XHRcdFx0XHRpdGVtWzJdID0gXCIoXCIgKyBpdGVtWzJdICsgXCIpIGFuZCAoXCIgKyBtZWRpYVF1ZXJ5ICsgXCIpXCI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblx0cmV0dXJuIGxpc3Q7XHJcbn07XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXG4gKiogbW9kdWxlIGlkID0gMjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoWydleHBvcnRzJywgJ21vZHVsZSddLCBmYWN0b3J5KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBmYWN0b3J5KGV4cG9ydHMsIG1vZHVsZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIG1vZCA9IHtcbiAgICAgIGV4cG9ydHM6IHt9XG4gICAgfTtcbiAgICBmYWN0b3J5KG1vZC5leHBvcnRzLCBtb2QpO1xuICAgIGdsb2JhbC5mZXRjaEpzb25wID0gbW9kLmV4cG9ydHM7XG4gIH1cbn0pKHRoaXMsIGZ1bmN0aW9uIChleHBvcnRzLCBtb2R1bGUpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICB0aW1lb3V0OiA1MDAwLFxuICAgIGpzb25wQ2FsbGJhY2s6ICdjYWxsYmFjaydcbiAgfTtcblxuICBmdW5jdGlvbiBnZW5lcmF0ZUNhbGxiYWNrRnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICdqc29ucF8nICsgRGF0ZS5ub3coKSArICdfJyArIE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMTAwMDAwKTtcbiAgfVxuXG4gIC8vIEtub3duIGlzc3VlOiBXaWxsIHRocm93ICdVbmNhdWdodCBSZWZlcmVuY2VFcnJvcjogY2FsbGJhY2tfKioqIGlzIG5vdCBkZWZpbmVkJyBlcnJvciBpZiByZXF1ZXN0IHRpbWVvdXRcbiAgZnVuY3Rpb24gY2xlYXJGdW5jdGlvbihmdW5jdGlvbk5hbWUpIHtcbiAgICAvLyBJRTggdGhyb3dzIGFuIGV4Y2VwdGlvbiB3aGVuIHlvdSB0cnkgdG8gZGVsZXRlIGEgcHJvcGVydHkgb24gd2luZG93XG4gICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTgyNDIyOC83NTEwODlcbiAgICB0cnkge1xuICAgICAgZGVsZXRlIHdpbmRvd1tmdW5jdGlvbk5hbWVdO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHdpbmRvd1tmdW5jdGlvbk5hbWVdID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZVNjcmlwdChzY3JpcHRJZCkge1xuICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzY3JpcHRJZCk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gIH1cblxuICB2YXIgZmV0Y2hKc29ucCA9IGZ1bmN0aW9uIGZldGNoSnNvbnAodXJsKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTtcblxuICAgIHZhciB0aW1lb3V0ID0gb3B0aW9ucy50aW1lb3V0ICE9IG51bGwgPyBvcHRpb25zLnRpbWVvdXQgOiBkZWZhdWx0T3B0aW9ucy50aW1lb3V0O1xuICAgIHZhciBqc29ucENhbGxiYWNrID0gb3B0aW9ucy5qc29ucENhbGxiYWNrICE9IG51bGwgPyBvcHRpb25zLmpzb25wQ2FsbGJhY2sgOiBkZWZhdWx0T3B0aW9ucy5qc29ucENhbGxiYWNrO1xuXG4gICAgdmFyIHRpbWVvdXRJZCA9IHVuZGVmaW5lZDtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgY2FsbGJhY2tGdW5jdGlvbiA9IGdlbmVyYXRlQ2FsbGJhY2tGdW5jdGlvbigpO1xuXG4gICAgICB3aW5kb3dbY2FsbGJhY2tGdW5jdGlvbl0gPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgLy8ga2VlcCBjb25zaXN0ZW50IHdpdGggZmV0Y2ggQVBJXG4gICAgICAgICAganNvbjogZnVuY3Rpb24ganNvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRpbWVvdXRJZCkgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG5cbiAgICAgICAgcmVtb3ZlU2NyaXB0KGpzb25wQ2FsbGJhY2sgKyAnXycgKyBjYWxsYmFja0Z1bmN0aW9uKTtcblxuICAgICAgICBjbGVhckZ1bmN0aW9uKGNhbGxiYWNrRnVuY3Rpb24pO1xuICAgICAgfTtcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIHVzZXIgc2V0IHRoZWlyIG93biBwYXJhbXMsIGFuZCBpZiBub3QgYWRkIGEgPyB0byBzdGFydCBhIGxpc3Qgb2YgcGFyYW1zXG4gICAgICB1cmwgKz0gdXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJic7XG5cbiAgICAgIHZhciBqc29ucFNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAganNvbnBTY3JpcHQuc2V0QXR0cmlidXRlKFwic3JjXCIsIHVybCArIGpzb25wQ2FsbGJhY2sgKyAnPScgKyBjYWxsYmFja0Z1bmN0aW9uKTtcbiAgICAgIGpzb25wU2NyaXB0LmlkID0ganNvbnBDYWxsYmFjayArICdfJyArIGNhbGxiYWNrRnVuY3Rpb247XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQoanNvbnBTY3JpcHQpO1xuXG4gICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignSlNPTlAgcmVxdWVzdCB0byAnICsgdXJsICsgJyB0aW1lZCBvdXQnKSk7XG5cbiAgICAgICAgY2xlYXJGdW5jdGlvbihjYWxsYmFja0Z1bmN0aW9uKTtcbiAgICAgICAgcmVtb3ZlU2NyaXB0KGpzb25wQ2FsbGJhY2sgKyAnXycgKyBjYWxsYmFja0Z1bmN0aW9uKTtcbiAgICAgIH0sIHRpbWVvdXQpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIGV4cG9ydCBhcyBnbG9iYWwgZnVuY3Rpb25cbiAgLypcbiAgbGV0IGxvY2FsO1xuICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBsb2NhbCA9IGdsb2JhbDtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBsb2NhbCA9IHNlbGY7XG4gIH0gZWxzZSB7XG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgIH1cbiAgfVxuICBcbiAgbG9jYWwuZmV0Y2hKc29ucCA9IGZldGNoSnNvbnA7XG4gICovXG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBmZXRjaEpzb25wO1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vZmV0Y2gtanNvbnAvYnVpbGQvZmV0Y2gtanNvbnAuanNcbiAqKiBtb2R1bGUgaWQgPSAyMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0c1snZGVmYXVsdCddID0gY29uZmlnQW5pbWF0aW9uO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciBfcGVyZm9ybWFuY2VOb3cgPSByZXF1aXJlKCdwZXJmb3JtYW5jZS1ub3cnKTtcblxudmFyIF9wZXJmb3JtYW5jZU5vdzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wZXJmb3JtYW5jZU5vdyk7XG5cbnZhciBfcmFmID0gcmVxdWlyZSgncmFmJyk7XG5cbnZhciBfcmFmMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JhZik7XG5cbmZ1bmN0aW9uIGNvbmZpZ0FuaW1hdGlvbigpIHtcbiAgdmFyIGNvbmZpZyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzBdO1xuICB2YXIgX2NvbmZpZyR0aW1lU3RlcCA9IGNvbmZpZy50aW1lU3RlcDtcbiAgdmFyIHRpbWVTdGVwID0gX2NvbmZpZyR0aW1lU3RlcCA9PT0gdW5kZWZpbmVkID8gMSAvIDYwICogMTAwMCA6IF9jb25maWckdGltZVN0ZXA7XG4gIHZhciBfY29uZmlnJHRpbWVTY2FsZSA9IGNvbmZpZy50aW1lU2NhbGU7XG4gIHZhciB0aW1lU2NhbGUgPSBfY29uZmlnJHRpbWVTY2FsZSA9PT0gdW5kZWZpbmVkID8gMSA6IF9jb25maWckdGltZVNjYWxlO1xuICB2YXIgX2NvbmZpZyRtYXhTdGVwcyA9IGNvbmZpZy5tYXhTdGVwcztcbiAgdmFyIG1heFN0ZXBzID0gX2NvbmZpZyRtYXhTdGVwcyA9PT0gdW5kZWZpbmVkID8gMTAgOiBfY29uZmlnJG1heFN0ZXBzO1xuICB2YXIgX2NvbmZpZyRyYWYgPSBjb25maWcucmFmO1xuICB2YXIgcmFmID0gX2NvbmZpZyRyYWYgPT09IHVuZGVmaW5lZCA/IF9yYWYyWydkZWZhdWx0J10gOiBfY29uZmlnJHJhZjtcbiAgdmFyIF9jb25maWckbm93ID0gY29uZmlnLm5vdztcbiAgdmFyIG5vdyA9IF9jb25maWckbm93ID09PSB1bmRlZmluZWQgPyBfcGVyZm9ybWFuY2VOb3cyWydkZWZhdWx0J10gOiBfY29uZmlnJG5vdztcblxuICB2YXIgYW5pbVJ1bm5pbmcgPSBbXTtcbiAgdmFyIHJ1bm5pbmcgPSBmYWxzZTtcbiAgdmFyIHByZXZUaW1lID0gMDtcbiAgdmFyIGFjY3VtdWxhdGVkVGltZSA9IDA7XG5cbiAgZnVuY3Rpb24gbG9vcCgpIHtcbiAgICB2YXIgY3VycmVudFRpbWUgPSBub3coKTtcbiAgICB2YXIgZnJhbWVUaW1lID0gY3VycmVudFRpbWUgLSBwcmV2VGltZTsgLy8gZGVsdGFcblxuICAgIHByZXZUaW1lID0gY3VycmVudFRpbWU7XG4gICAgYWNjdW11bGF0ZWRUaW1lICs9IGZyYW1lVGltZSAqIHRpbWVTY2FsZTtcblxuICAgIGlmIChhY2N1bXVsYXRlZFRpbWUgPiB0aW1lU3RlcCAqIG1heFN0ZXBzKSB7XG4gICAgICBhY2N1bXVsYXRlZFRpbWUgPSAwO1xuICAgIH1cblxuICAgIHZhciBmcmFtZU51bWJlciA9IE1hdGguY2VpbChhY2N1bXVsYXRlZFRpbWUgLyB0aW1lU3RlcCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbmltUnVubmluZy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIF9hbmltUnVubmluZyRpID0gYW5pbVJ1bm5pbmdbaV07XG4gICAgICB2YXIgYWN0aXZlID0gX2FuaW1SdW5uaW5nJGkuYWN0aXZlO1xuICAgICAgdmFyIGFuaW1hdGlvblN0ZXAgPSBfYW5pbVJ1bm5pbmckaS5hbmltYXRpb25TdGVwO1xuICAgICAgdmFyIHByZXZQcmV2U3RhdGUgPSBfYW5pbVJ1bm5pbmckaS5wcmV2U3RhdGU7XG4gICAgICB2YXIgcHJldk5leHRTdGF0ZSA9IGFuaW1SdW5uaW5nW2ldLm5leHRTdGF0ZTtcblxuICAgICAgaWYgKCFhY3RpdmUpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlZW1zIGxpa2UgYmVjYXVzZSB0aGUgVFMgc2V0cyBkZXN0VmFscyBhcyBlbnRlclZhbHMgZm9yIHRoZSBmaXJzdFxuICAgICAgLy8gdGljaywgd2UgbWlnaHQgcmVuZGVyIHRoYXQgdmFsdWUgdHdpY2UuIFdlIHJlbmRlciBpdCBvbmNlLCBjdXJyVmFsdWUgaXNcbiAgICAgIC8vIGVudGVyVmFsIGFuZCBkZXN0VmFsIGlzIGVudGVyVmFsLiBUaGUgbmV4dCB0aWNrIGlzIGZhc3RlciB0aGFuIDE2bXMsXG4gICAgICAvLyBzbyBhY2N1bXVsYXRlZFRpbWUgKHdoaWNoIHdvdWxkIGJlIGFib3V0IC0xNm1zIGZyb20gdGhlIHByZXZpb3VzIHRpY2spXG4gICAgICAvLyBpcyBuZWdhdGl2ZSAoLTE2bXMgKyBhbnkgbnVtYmVyIGxlc3MgdGhhbiAxNm1zIDwgMCkuIFNvIHdlIGp1c3QgcmVuZGVyXG4gICAgICAvLyBwYXJ0IHdheXMgdG93YXJkcyB0aGUgbmV4dFN0YXRlLCBidXQgdGhhdCdzIGVudGVyVmFsIHN0aWxsLiBXZSByZW5kZXJcbiAgICAgIC8vIHNheSA3NSUgYmV0d2VlbiBjdXJyVmFsdWUgKD09PSBlbnRlclZhbCkgYW5kIGRlc3RWYWx1ZSAoPT09IGVudGVyVmFsKS5cbiAgICAgIC8vIFNvIHdlIHJlbmRlciB0aGUgc2FtZSB2YWx1ZSBhIHNlY29uZCB0aW1lLlxuICAgICAgLy8gVGhlIHNvbHV0aW9uIGJlbG93IGlzIHRvIHJlY2FsY3VsYXRlIHRoZSBkZXN0aW5hdGlvbiBzdGF0ZSBldmVuIHdoZW5cbiAgICAgIC8vIHlvdSdyZSBtb3ZpbmcgcGFydGlhbGx5IHRvd2FyZHMgaXQuXG4gICAgICBpZiAoYWNjdW11bGF0ZWRUaW1lIDw9IDApIHtcbiAgICAgICAgYW5pbVJ1bm5pbmdbaV0ubmV4dFN0YXRlID0gYW5pbWF0aW9uU3RlcCh0aW1lU3RlcCAvIDEwMDAsIHByZXZQcmV2U3RhdGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBmcmFtZU51bWJlcjsgaisrKSB7XG4gICAgICAgICAgYW5pbVJ1bm5pbmdbaV0ubmV4dFN0YXRlID0gYW5pbWF0aW9uU3RlcCh0aW1lU3RlcCAvIDEwMDAsIHByZXZOZXh0U3RhdGUpO1xuICAgICAgICAgIHZhciBfcmVmID0gW3ByZXZOZXh0U3RhdGUsIGFuaW1SdW5uaW5nW2ldLm5leHRTdGF0ZV07XG4gICAgICAgICAgYW5pbVJ1bm5pbmdbaV0ucHJldlN0YXRlID0gX3JlZlswXTtcbiAgICAgICAgICBwcmV2TmV4dFN0YXRlID0gX3JlZlsxXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGFjY3VtdWxhdGVkVGltZSA9IGFjY3VtdWxhdGVkVGltZSAtIGZyYW1lTnVtYmVyICogdGltZVN0ZXA7XG5cbiAgICAvLyBSZW5kZXIgYW5kIGZpbHRlciBpbiBvbmUgaXRlcmF0aW9uLlxuICAgIHZhciBhbHBoYSA9IDEgKyBhY2N1bXVsYXRlZFRpbWUgLyB0aW1lU3RlcDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFuaW1SdW5uaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgX2FuaW1SdW5uaW5nJGkyID0gYW5pbVJ1bm5pbmdbaV07XG4gICAgICB2YXIgYW5pbWF0aW9uUmVuZGVyID0gX2FuaW1SdW5uaW5nJGkyLmFuaW1hdGlvblJlbmRlcjtcbiAgICAgIHZhciBuZXh0U3RhdGUgPSBfYW5pbVJ1bm5pbmckaTIubmV4dFN0YXRlO1xuICAgICAgdmFyIHByZXZTdGF0ZSA9IF9hbmltUnVubmluZyRpMi5wcmV2U3RhdGU7XG5cbiAgICAgIC8vIE1pZ2h0IG11dGF0ZSBhbmltUnVubmluZy4uLi4uLi4uXG4gICAgICBhbmltYXRpb25SZW5kZXIoYWxwaGEsIG5leHRTdGF0ZSwgcHJldlN0YXRlKTtcbiAgICB9XG5cbiAgICBhbmltUnVubmluZyA9IGFuaW1SdW5uaW5nLmZpbHRlcihmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICAgIHZhciBhY3RpdmUgPSBfcmVmMi5hY3RpdmU7XG4gICAgICByZXR1cm4gYWN0aXZlO1xuICAgIH0pO1xuXG4gICAgaWYgKGFuaW1SdW5uaW5nLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICByYWYobG9vcCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgaWYgKCFydW5uaW5nKSB7XG4gICAgICBydW5uaW5nID0gdHJ1ZTtcbiAgICAgIHByZXZUaW1lID0gbm93KCk7XG4gICAgICBhY2N1bXVsYXRlZFRpbWUgPSAwO1xuICAgICAgcmFmKGxvb3ApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiBzdGFydEFuaW1hdGlvbihzdGF0ZSwgYW5pbWF0aW9uU3RlcCwgYW5pbWF0aW9uUmVuZGVyKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbmltUnVubmluZy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHZhbCA9IGFuaW1SdW5uaW5nW2ldO1xuICAgICAgaWYgKHZhbC5hbmltYXRpb25TdGVwID09PSBhbmltYXRpb25TdGVwKSB7XG4gICAgICAgIHZhbC5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB2YWwucHJldlN0YXRlID0gc3RhdGU7XG4gICAgICAgIHN0YXJ0KCk7XG4gICAgICAgIHJldHVybiB2YWwuc3RvcDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbmV3QW5pbSA9IHtcbiAgICAgIGFuaW1hdGlvblN0ZXA6IGFuaW1hdGlvblN0ZXAsXG4gICAgICBhbmltYXRpb25SZW5kZXI6IGFuaW1hdGlvblJlbmRlcixcbiAgICAgIHByZXZTdGF0ZTogc3RhdGUsXG4gICAgICBuZXh0U3RhdGU6IHN0YXRlLFxuICAgICAgYWN0aXZlOiB0cnVlXG4gICAgfTtcblxuICAgIG5ld0FuaW0uc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBuZXdBbmltLmFjdGl2ZSA9IGZhbHNlO1xuICAgIH07XG4gICAgYW5pbVJ1bm5pbmcucHVzaChuZXdBbmltKTtcblxuICAgIHN0YXJ0KCk7XG5cbiAgICByZXR1cm4gbmV3QW5pbS5zdG9wO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWFjdC1tb3Rpb24vbGliL2FuaW1hdGlvbkxvb3AuanNcbiAqKiBtb2R1bGUgaWQgPSAyMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5leHBvcnRzWydkZWZhdWx0J10gPSBjb21wb25lbnRzO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciBfbm9WZWxvY2l0eSA9IHJlcXVpcmUoJy4vbm9WZWxvY2l0eScpO1xuXG52YXIgX25vVmVsb2NpdHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9WZWxvY2l0eSk7XG5cbnZhciBfaGFzUmVhY2hlZFN0eWxlID0gcmVxdWlyZSgnLi9oYXNSZWFjaGVkU3R5bGUnKTtcblxudmFyIF9oYXNSZWFjaGVkU3R5bGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGFzUmVhY2hlZFN0eWxlKTtcblxudmFyIF9tZXJnZURpZmYgPSByZXF1aXJlKCcuL21lcmdlRGlmZicpO1xuXG52YXIgX21lcmdlRGlmZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tZXJnZURpZmYpO1xuXG52YXIgX2FuaW1hdGlvbkxvb3AgPSByZXF1aXJlKCcuL2FuaW1hdGlvbkxvb3AnKTtcblxudmFyIF9hbmltYXRpb25Mb29wMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FuaW1hdGlvbkxvb3ApO1xuXG52YXIgX3plcm8gPSByZXF1aXJlKCcuL3plcm8nKTtcblxudmFyIF96ZXJvMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3plcm8pO1xuXG52YXIgX3VwZGF0ZVRyZWUgPSByZXF1aXJlKCcuL3VwZGF0ZVRyZWUnKTtcblxudmFyIF9kZXByZWNhdGVkU3ByaW5nczIgPSByZXF1aXJlKCcuL2RlcHJlY2F0ZWRTcHJpbmdzJyk7XG5cbnZhciBfZGVwcmVjYXRlZFNwcmluZ3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVwcmVjYXRlZFNwcmluZ3MyKTtcblxudmFyIF9zdHJpcFN0eWxlID0gcmVxdWlyZSgnLi9zdHJpcFN0eWxlJyk7XG5cbnZhciBfc3RyaXBTdHlsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdHJpcFN0eWxlKTtcblxudmFyIHN0YXJ0QW5pbWF0aW9uID0gX2FuaW1hdGlvbkxvb3AyWydkZWZhdWx0J10oKTtcblxuZnVuY3Rpb24gbWFwT2JqZWN0KGYsIG9iaikge1xuICB2YXIgcmV0ID0ge307XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgcmV0W2tleV0gPSBmKG9ialtrZXldLCBrZXkpO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGV2ZXJ5T2JqKGYsIG9iaikge1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmICghZihvYmpba2V5XSwga2V5KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gY29tcG9uZW50cyhSZWFjdCkge1xuICB2YXIgUHJvcFR5cGVzID0gUmVhY3QuUHJvcFR5cGVzO1xuXG4gIHZhciBNb3Rpb24gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6ICdNb3Rpb24nLFxuXG4gICAgcHJvcFR5cGVzOiB7XG4gICAgICAvLyBUT09EOiB3YXJuIGFnYWluc3QgcHV0dGluZyBhIGNvbmZpZyBpbiBoZXJlXG4gICAgICBkZWZhdWx0VmFsdWU6IGZ1bmN0aW9uIGRlZmF1bHRWYWx1ZShwcm9wLCBwcm9wTmFtZSkge1xuICAgICAgICBpZiAocHJvcFtwcm9wTmFtZV0pIHtcbiAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdTcHJpbmdcXCdzIGBkZWZhdWx0VmFsdWVgIGhhcyBiZWVuIGNoYW5nZWQgdG8gYGRlZmF1bHRTdHlsZWAuICcgKyAnSXRzIGZvcm1hdCByZWNlaXZlZCBhIGZldyAoZWFzeSB0byB1cGRhdGUhKSBjaGFuZ2VzIGFzIHdlbGwuJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBlbmRWYWx1ZTogZnVuY3Rpb24gZW5kVmFsdWUocHJvcCwgcHJvcE5hbWUpIHtcbiAgICAgICAgaWYgKHByb3BbcHJvcE5hbWVdKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignU3ByaW5nXFwncyBgZW5kVmFsdWVgIGhhcyBiZWVuIGNoYW5nZWQgdG8gYHN0eWxlYC4gSXRzIGZvcm1hdCAnICsgJ3JlY2VpdmVkIGEgZmV3IChlYXN5IHRvIHVwZGF0ZSEpIGNoYW5nZXMgYXMgd2VsbC4nKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRlZmF1bHRTdHlsZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgICAgIHN0eWxlOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgICBjaGlsZHJlbjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxuICAgIH0sXG5cbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgICAgdmFyIGRlZmF1bHRTdHlsZSA9IF9wcm9wcy5kZWZhdWx0U3R5bGU7XG4gICAgICB2YXIgc3R5bGUgPSBfcHJvcHMuc3R5bGU7XG5cbiAgICAgIHZhciBjdXJyZW50U3R5bGUgPSBkZWZhdWx0U3R5bGUgfHwgc3R5bGU7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjdXJyZW50U3R5bGU6IGN1cnJlbnRTdHlsZSxcbiAgICAgICAgY3VycmVudFZlbG9jaXR5OiBtYXBPYmplY3QoX3plcm8yWydkZWZhdWx0J10sIGN1cnJlbnRTdHlsZSlcbiAgICAgIH07XG4gICAgfSxcblxuICAgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHRoaXMuc3RhcnRBbmltYXRpbmcoKTtcbiAgICB9LFxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcygpIHtcbiAgICAgIHRoaXMuc3RhcnRBbmltYXRpbmcoKTtcbiAgICB9LFxuXG4gICAgYW5pbWF0aW9uU3RlcDogZnVuY3Rpb24gYW5pbWF0aW9uU3RlcCh0aW1lc3RlcCwgc3RhdGUpIHtcbiAgICAgIHZhciBjdXJyZW50U3R5bGUgPSBzdGF0ZS5jdXJyZW50U3R5bGU7XG4gICAgICB2YXIgY3VycmVudFZlbG9jaXR5ID0gc3RhdGUuY3VycmVudFZlbG9jaXR5O1xuICAgICAgdmFyIHN0eWxlID0gdGhpcy5wcm9wcy5zdHlsZTtcblxuICAgICAgdmFyIG5ld0N1cnJlbnRTdHlsZSA9IF91cGRhdGVUcmVlLnVwZGF0ZUN1cnJlbnRTdHlsZSh0aW1lc3RlcCwgY3VycmVudFN0eWxlLCBjdXJyZW50VmVsb2NpdHksIHN0eWxlKTtcbiAgICAgIHZhciBuZXdDdXJyZW50VmVsb2NpdHkgPSBfdXBkYXRlVHJlZS51cGRhdGVDdXJyZW50VmVsb2NpdHkodGltZXN0ZXAsIGN1cnJlbnRTdHlsZSwgY3VycmVudFZlbG9jaXR5LCBzdHlsZSk7XG5cbiAgICAgIC8vIFRPT0Q6IHRoaXMgaXNuJ3QgbmVjZXNzYXJ5IGFueW1vcmUuIEl0IHdhcyB1c2VkIG9ubHkgYWdhaW5zdCBlbmRWYWx1ZSBmdW5jXG4gICAgICBpZiAoX25vVmVsb2NpdHkyWydkZWZhdWx0J10oY3VycmVudFZlbG9jaXR5LCBuZXdDdXJyZW50U3R5bGUpICYmIF9ub1ZlbG9jaXR5MlsnZGVmYXVsdCddKG5ld0N1cnJlbnRWZWxvY2l0eSwgbmV3Q3VycmVudFN0eWxlKSkge1xuICAgICAgICAvLyBjaGVjayBleHBsYW5hdGlvbiBpbiBgTW90aW9uLmFuaW1hdGlvblJlbmRlcmBcbiAgICAgICAgdGhpcy5zdG9wQW5pbWF0aW9uKCk7IC8vIE5hc3R5IHNpZGUgZWZmZWN0cy4uLi5cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY3VycmVudFN0eWxlOiBuZXdDdXJyZW50U3R5bGUsXG4gICAgICAgIGN1cnJlbnRWZWxvY2l0eTogbmV3Q3VycmVudFZlbG9jaXR5XG4gICAgICB9O1xuICAgIH0sXG5cbiAgICBzdG9wQW5pbWF0aW9uOiBudWxsLFxuXG4gICAgLy8gdXNlZCBpbiBhbmltYXRpb25SZW5kZXJcbiAgICBoYXNVbm1vdW50ZWQ6IGZhbHNlLFxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdGhpcy5zdG9wQW5pbWF0aW9uKCk7XG4gICAgICB0aGlzLmhhc1VubW91bnRlZCA9IHRydWU7XG4gICAgfSxcblxuICAgIHN0YXJ0QW5pbWF0aW5nOiBmdW5jdGlvbiBzdGFydEFuaW1hdGluZygpIHtcbiAgICAgIC8vIElzIHNtYXJ0IGVub3VnaCB0byBub3Qgc3RhcnQgaXQgdHdpY2VcbiAgICAgIHRoaXMuc3RvcEFuaW1hdGlvbiA9IHN0YXJ0QW5pbWF0aW9uKHRoaXMuc3RhdGUsIHRoaXMuYW5pbWF0aW9uU3RlcCwgdGhpcy5hbmltYXRpb25SZW5kZXIpO1xuICAgIH0sXG5cbiAgICBhbmltYXRpb25SZW5kZXI6IGZ1bmN0aW9uIGFuaW1hdGlvblJlbmRlcihhbHBoYSwgbmV4dFN0YXRlLCBwcmV2U3RhdGUpIHtcbiAgICAgIC8vIGB0aGlzLmhhc1VubW91bnRlZGAgbWlnaHQgYmUgdHJ1ZSBpbiB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbjpcbiAgICAgIC8vIHVzZXIgZG9lcyBzb21lIGNoZWNrcyBpbiBgc3R5bGVgIGFuZCBjYWxscyBhbiBvd25lciBoYW5kbGVyXG4gICAgICAvLyBvd25lciBzZXRzIHN0YXRlIGluIHRoZSBjYWxsYmFjaywgdHJpZ2dlcmluZyBhIHJlLXJlbmRlclxuICAgICAgLy8gdW5tb3VudHMgTW90aW9uXG4gICAgICBpZiAoIXRoaXMuaGFzVW5tb3VudGVkKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGN1cnJlbnRTdHlsZTogX3VwZGF0ZVRyZWUuaW50ZXJwb2xhdGVWYWx1ZShhbHBoYSwgbmV4dFN0YXRlLmN1cnJlbnRTdHlsZSwgcHJldlN0YXRlLmN1cnJlbnRTdHlsZSksXG4gICAgICAgICAgY3VycmVudFZlbG9jaXR5OiBuZXh0U3RhdGUuY3VycmVudFZlbG9jaXR5XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBzdHJpcHBlZFN0eWxlID0gX3N0cmlwU3R5bGUyWydkZWZhdWx0J10odGhpcy5zdGF0ZS5jdXJyZW50U3R5bGUpO1xuICAgICAgdmFyIHJlbmRlcmVkQ2hpbGRyZW4gPSB0aGlzLnByb3BzLmNoaWxkcmVuKHN0cmlwcGVkU3R5bGUpO1xuICAgICAgcmV0dXJuIHJlbmRlcmVkQ2hpbGRyZW4gJiYgUmVhY3QuQ2hpbGRyZW4ub25seShyZW5kZXJlZENoaWxkcmVuKTtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBTdGFnZ2VyZWRNb3Rpb24gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6ICdTdGFnZ2VyZWRNb3Rpb24nLFxuXG4gICAgcHJvcFR5cGVzOiB7XG4gICAgICBkZWZhdWx0U3R5bGU6IGZ1bmN0aW9uIGRlZmF1bHRTdHlsZShwcm9wLCBwcm9wTmFtZSkge1xuICAgICAgICBpZiAocHJvcFtwcm9wTmFtZV0pIHtcbiAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdZb3UgZm9yZ290IHRoZSBcInNcIiBmb3IgYFN0YWdnZXJlZE1vdGlvbmBcXCdzIGBkZWZhdWx0U3R5bGVzYC4nKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHN0eWxlOiBmdW5jdGlvbiBzdHlsZShwcm9wLCBwcm9wTmFtZSkge1xuICAgICAgICBpZiAocHJvcFtwcm9wTmFtZV0pIHtcbiAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdZb3UgZm9yZ290IHRoZSBcInNcIiBmb3IgYFN0YWdnZXJlZE1vdGlvbmBcXCdzIGBzdHlsZXNgLicpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLy8gVE9PRDogd2FybiBhZ2FpbnN0IHB1dHRpbmcgY29uZmlncyBpbiBoZXJlXG4gICAgICBkZWZhdWx0U3R5bGVzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMub2JqZWN0KSxcbiAgICAgIHN0eWxlczogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICAgIGNoaWxkcmVuOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXG4gICAgfSxcblxuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgICAgdmFyIF9wcm9wczIgPSB0aGlzLnByb3BzO1xuICAgICAgdmFyIHN0eWxlcyA9IF9wcm9wczIuc3R5bGVzO1xuICAgICAgdmFyIGRlZmF1bHRTdHlsZXMgPSBfcHJvcHMyLmRlZmF1bHRTdHlsZXM7XG5cbiAgICAgIHZhciBjdXJyZW50U3R5bGVzID0gZGVmYXVsdFN0eWxlcyA/IGRlZmF1bHRTdHlsZXMgOiBzdHlsZXMoKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGN1cnJlbnRTdHlsZXM6IGN1cnJlbnRTdHlsZXMsXG4gICAgICAgIGN1cnJlbnRWZWxvY2l0aWVzOiBjdXJyZW50U3R5bGVzLm1hcChmdW5jdGlvbiAocykge1xuICAgICAgICAgIHJldHVybiBtYXBPYmplY3QoX3plcm8yWydkZWZhdWx0J10sIHMpO1xuICAgICAgICB9KVxuICAgICAgfTtcbiAgICB9LFxuXG4gICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdGhpcy5zdGFydEFuaW1hdGluZygpO1xuICAgIH0sXG5cbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKCkge1xuICAgICAgdGhpcy5zdGFydEFuaW1hdGluZygpO1xuICAgIH0sXG5cbiAgICBhbmltYXRpb25TdGVwOiBmdW5jdGlvbiBhbmltYXRpb25TdGVwKHRpbWVzdGVwLCBzdGF0ZSkge1xuICAgICAgdmFyIGN1cnJlbnRTdHlsZXMgPSBzdGF0ZS5jdXJyZW50U3R5bGVzO1xuICAgICAgdmFyIGN1cnJlbnRWZWxvY2l0aWVzID0gc3RhdGUuY3VycmVudFZlbG9jaXRpZXM7XG5cbiAgICAgIHZhciBzdHlsZXMgPSB0aGlzLnByb3BzLnN0eWxlcyhjdXJyZW50U3R5bGVzLm1hcChfc3RyaXBTdHlsZTJbJ2RlZmF1bHQnXSkpO1xuXG4gICAgICB2YXIgbmV3Q3VycmVudFN0eWxlcyA9IGN1cnJlbnRTdHlsZXMubWFwKGZ1bmN0aW9uIChjdXJyZW50U3R5bGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIF91cGRhdGVUcmVlLnVwZGF0ZUN1cnJlbnRTdHlsZSh0aW1lc3RlcCwgY3VycmVudFN0eWxlLCBjdXJyZW50VmVsb2NpdGllc1tpXSwgc3R5bGVzW2ldKTtcbiAgICAgIH0pO1xuICAgICAgdmFyIG5ld0N1cnJlbnRWZWxvY2l0aWVzID0gY3VycmVudFN0eWxlcy5tYXAoZnVuY3Rpb24gKGN1cnJlbnRTdHlsZSwgaSkge1xuICAgICAgICByZXR1cm4gX3VwZGF0ZVRyZWUudXBkYXRlQ3VycmVudFZlbG9jaXR5KHRpbWVzdGVwLCBjdXJyZW50U3R5bGUsIGN1cnJlbnRWZWxvY2l0aWVzW2ldLCBzdHlsZXNbaV0pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFRPRE86IGlzIHRoaXMgcmlnaHQ/XG4gICAgICBpZiAoY3VycmVudFZlbG9jaXRpZXMuZXZlcnkoZnVuY3Rpb24gKHYsIGspIHtcbiAgICAgICAgcmV0dXJuIF9ub1ZlbG9jaXR5MlsnZGVmYXVsdCddKHYsIGN1cnJlbnRTdHlsZXNba10pO1xuICAgICAgfSkgJiYgbmV3Q3VycmVudFZlbG9jaXRpZXMuZXZlcnkoZnVuY3Rpb24gKHYsIGspIHtcbiAgICAgICAgcmV0dXJuIF9ub1ZlbG9jaXR5MlsnZGVmYXVsdCddKHYsIG5ld0N1cnJlbnRTdHlsZXNba10pO1xuICAgICAgfSkpIHtcbiAgICAgICAgdGhpcy5zdG9wQW5pbWF0aW9uKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGN1cnJlbnRTdHlsZXM6IG5ld0N1cnJlbnRTdHlsZXMsXG4gICAgICAgIGN1cnJlbnRWZWxvY2l0aWVzOiBuZXdDdXJyZW50VmVsb2NpdGllc1xuICAgICAgfTtcbiAgICB9LFxuXG4gICAgc3RvcEFuaW1hdGlvbjogbnVsbCxcblxuICAgIC8vIHVzZWQgaW4gYW5pbWF0aW9uUmVuZGVyXG4gICAgaGFzVW5tb3VudGVkOiBmYWxzZSxcblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHRoaXMuc3RvcEFuaW1hdGlvbigpO1xuICAgICAgdGhpcy5oYXNVbm1vdW50ZWQgPSB0cnVlO1xuICAgIH0sXG5cbiAgICBzdGFydEFuaW1hdGluZzogZnVuY3Rpb24gc3RhcnRBbmltYXRpbmcoKSB7XG4gICAgICB0aGlzLnN0b3BBbmltYXRpb24gPSBzdGFydEFuaW1hdGlvbih0aGlzLnN0YXRlLCB0aGlzLmFuaW1hdGlvblN0ZXAsIHRoaXMuYW5pbWF0aW9uUmVuZGVyKTtcbiAgICB9LFxuXG4gICAgYW5pbWF0aW9uUmVuZGVyOiBmdW5jdGlvbiBhbmltYXRpb25SZW5kZXIoYWxwaGEsIG5leHRTdGF0ZSwgcHJldlN0YXRlKSB7XG4gICAgICAvLyBTZWUgY29tbWVudCBpbiBNb3Rpb24uXG4gICAgICBpZiAoIXRoaXMuaGFzVW5tb3VudGVkKSB7XG4gICAgICAgIHZhciBjdXJyZW50U3R5bGVzID0gbmV4dFN0YXRlLmN1cnJlbnRTdHlsZXMubWFwKGZ1bmN0aW9uIChzdHlsZSwgaSkge1xuICAgICAgICAgIHJldHVybiBfdXBkYXRlVHJlZS5pbnRlcnBvbGF0ZVZhbHVlKGFscGhhLCBzdHlsZSwgcHJldlN0YXRlLmN1cnJlbnRTdHlsZXNbaV0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgY3VycmVudFN0eWxlczogY3VycmVudFN0eWxlcyxcbiAgICAgICAgICBjdXJyZW50VmVsb2NpdGllczogbmV4dFN0YXRlLmN1cnJlbnRWZWxvY2l0aWVzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBzdHJpcHBlZFN0eWxlID0gdGhpcy5zdGF0ZS5jdXJyZW50U3R5bGVzLm1hcChfc3RyaXBTdHlsZTJbJ2RlZmF1bHQnXSk7XG4gICAgICB2YXIgcmVuZGVyZWRDaGlsZHJlbiA9IHRoaXMucHJvcHMuY2hpbGRyZW4oc3RyaXBwZWRTdHlsZSk7XG4gICAgICByZXR1cm4gcmVuZGVyZWRDaGlsZHJlbiAmJiBSZWFjdC5DaGlsZHJlbi5vbmx5KHJlbmRlcmVkQ2hpbGRyZW4pO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIFRyYW5zaXRpb25Nb3Rpb24gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6ICdUcmFuc2l0aW9uTW90aW9uJyxcblxuICAgIHByb3BUeXBlczoge1xuICAgICAgZGVmYXVsdFZhbHVlOiBmdW5jdGlvbiBkZWZhdWx0VmFsdWUocHJvcCwgcHJvcE5hbWUpIHtcbiAgICAgICAgaWYgKHByb3BbcHJvcE5hbWVdKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignVHJhbnNpdGlvblNwcmluZ1xcJ3MgYGRlZmF1bHRWYWx1ZWAgaGFzIGJlZW4gY2hhbmdlZCB0byAnICsgJ2BkZWZhdWx0U3R5bGVzYC4gSXRzIGZvcm1hdCByZWNlaXZlZCBhIGZldyAoZWFzeSB0byB1cGRhdGUhKSAnICsgJ2NoYW5nZXMgYXMgd2VsbC4nKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGVuZFZhbHVlOiBmdW5jdGlvbiBlbmRWYWx1ZShwcm9wLCBwcm9wTmFtZSkge1xuICAgICAgICBpZiAocHJvcFtwcm9wTmFtZV0pIHtcbiAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdUcmFuc2l0aW9uU3ByaW5nXFwncyBgZW5kVmFsdWVgIGhhcyBiZWVuIGNoYW5nZWQgdG8gYHN0eWxlc2AuICcgKyAnSXRzIGZvcm1hdCByZWNlaXZlZCBhIGZldyAoZWFzeSB0byB1cGRhdGUhKSBjaGFuZ2VzIGFzIHdlbGwuJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkZWZhdWx0U3R5bGU6IGZ1bmN0aW9uIGRlZmF1bHRTdHlsZShwcm9wLCBwcm9wTmFtZSkge1xuICAgICAgICBpZiAocHJvcFtwcm9wTmFtZV0pIHtcbiAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdZb3UgZm9yZ290IHRoZSBcInNcIiBmb3IgYFRyYW5zaXRpb25Nb3Rpb25gXFwncyBgZGVmYXVsdFN0eWxlc2AuJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzdHlsZTogZnVuY3Rpb24gc3R5bGUocHJvcCwgcHJvcE5hbWUpIHtcbiAgICAgICAgaWYgKHByb3BbcHJvcE5hbWVdKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignWW91IGZvcmdvdCB0aGUgXCJzXCIgZm9yIGBUcmFuc2l0aW9uTW90aW9uYFxcJ3MgYHN0eWxlc2AuJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvLyBUT09EOiB3YXJuIGFnYWluc3QgcHV0dGluZyBjb25maWdzIGluIGhlcmVcbiAgICAgIGRlZmF1bHRTdHlsZXM6IFByb3BUeXBlcy5vYmplY3RPZihQcm9wVHlwZXMuYW55KSxcbiAgICAgIHN0eWxlczogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmZ1bmMsIFByb3BUeXBlcy5vYmplY3RPZihQcm9wVHlwZXMuYW55LmlzUmVxdWlyZWQpXSkuaXNSZXF1aXJlZCxcbiAgICAgIHdpbGxMZWF2ZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmZ1bmNdKSxcbiAgICAgIC8vIFRPT0Q6IHdhcm4gYWdhaW5zdCBwdXR0aW5nIGNvbmZpZ3MgaW4gaGVyZVxuICAgICAgd2lsbEVudGVyOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuZnVuY10pLFxuICAgICAgY2hpbGRyZW46IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcbiAgICB9LFxuXG4gICAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB3aWxsRW50ZXI6IGZ1bmN0aW9uIHdpbGxFbnRlcihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICB3aWxsTGVhdmU6IGZ1bmN0aW9uIHdpbGxMZWF2ZSgpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LFxuXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgICB2YXIgX3Byb3BzMyA9IHRoaXMucHJvcHM7XG4gICAgICB2YXIgc3R5bGVzID0gX3Byb3BzMy5zdHlsZXM7XG4gICAgICB2YXIgZGVmYXVsdFN0eWxlcyA9IF9wcm9wczMuZGVmYXVsdFN0eWxlcztcblxuICAgICAgdmFyIGN1cnJlbnRTdHlsZXMgPSB1bmRlZmluZWQ7XG4gICAgICBpZiAoZGVmYXVsdFN0eWxlcyA9PSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3R5bGVzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgY3VycmVudFN0eWxlcyA9IHN0eWxlcygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRTdHlsZXMgPSBzdHlsZXM7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRTdHlsZXMgPSBkZWZhdWx0U3R5bGVzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY3VycmVudFN0eWxlczogY3VycmVudFN0eWxlcyxcbiAgICAgICAgY3VycmVudFZlbG9jaXRpZXM6IG1hcE9iamVjdChmdW5jdGlvbiAocykge1xuICAgICAgICAgIHJldHVybiBtYXBPYmplY3QoX3plcm8yWydkZWZhdWx0J10sIHMpO1xuICAgICAgICB9LCBjdXJyZW50U3R5bGVzKVxuICAgICAgfTtcbiAgICB9LFxuXG4gICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdGhpcy5zdGFydEFuaW1hdGluZygpO1xuICAgIH0sXG5cbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKCkge1xuICAgICAgdGhpcy5zdGFydEFuaW1hdGluZygpO1xuICAgIH0sXG5cbiAgICBhbmltYXRpb25TdGVwOiBmdW5jdGlvbiBhbmltYXRpb25TdGVwKHRpbWVzdGVwLCBzdGF0ZSkge1xuICAgICAgdmFyIGN1cnJlbnRTdHlsZXMgPSBzdGF0ZS5jdXJyZW50U3R5bGVzO1xuICAgICAgdmFyIGN1cnJlbnRWZWxvY2l0aWVzID0gc3RhdGUuY3VycmVudFZlbG9jaXRpZXM7XG4gICAgICB2YXIgX3Byb3BzNCA9IHRoaXMucHJvcHM7XG4gICAgICB2YXIgc3R5bGVzID0gX3Byb3BzNC5zdHlsZXM7XG4gICAgICB2YXIgd2lsbEVudGVyID0gX3Byb3BzNC53aWxsRW50ZXI7XG4gICAgICB2YXIgd2lsbExlYXZlID0gX3Byb3BzNC53aWxsTGVhdmU7XG5cbiAgICAgIGlmICh0eXBlb2Ygc3R5bGVzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHN0eWxlcyA9IHN0eWxlcyhjdXJyZW50U3R5bGVzKTtcbiAgICAgIH1cblxuICAgICAgLy8gVE9ETzogaHVoP1xuICAgICAgdmFyIG1lcmdlZFN0eWxlcyA9IHN0eWxlczsgLy8gc2V0IG1lcmdlZFN0eWxlcyB0byBzdHlsZXMgYXMgdGhlIGRlZmF1bHRcbiAgICAgIHZhciBoYXNOZXdLZXkgPSBmYWxzZTtcblxuICAgICAgbWVyZ2VkU3R5bGVzID0gX21lcmdlRGlmZjJbJ2RlZmF1bHQnXShjdXJyZW50U3R5bGVzLCBzdHlsZXMsXG4gICAgICAvLyBUT0RPOiBzdG9wIGFsbG9jYXRpbmcgbGlrZSBjcmF6eSBpbiB0aGlzIHdob2xlIGNvZGUgcGF0aFxuICAgICAgZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgcmVzID0gd2lsbExlYXZlKGtleSwgY3VycmVudFN0eWxlc1trZXldLCBzdHlsZXMsIGN1cnJlbnRTdHlsZXMsIGN1cnJlbnRWZWxvY2l0aWVzKTtcbiAgICAgICAgaWYgKHJlcyA9PSBudWxsKSB7XG4gICAgICAgICAgLy8gRm9yIGxlZ2FjeSByZWFzb24uIFdlIHdvbid0IGFsbG93IHJldHVybmluZyBudWxsIHNvb25cbiAgICAgICAgICAvLyBUT0RPOiByZW1vdmUsIGFmdGVyIG5leHQgcmVsZWFzZVxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9ub1ZlbG9jaXR5MlsnZGVmYXVsdCddKGN1cnJlbnRWZWxvY2l0aWVzW2tleV0sIGN1cnJlbnRTdHlsZXNba2V5XSkgJiYgX2hhc1JlYWNoZWRTdHlsZTJbJ2RlZmF1bHQnXShjdXJyZW50U3R5bGVzW2tleV0sIHJlcykpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfSk7XG5cbiAgICAgIE9iamVjdC5rZXlzKG1lcmdlZFN0eWxlcykuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuICFjdXJyZW50U3R5bGVzLmhhc093blByb3BlcnR5KGtleSk7XG4gICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIF9leHRlbmRzMiwgX2V4dGVuZHMzO1xuXG4gICAgICAgIGhhc05ld0tleSA9IHRydWU7XG4gICAgICAgIHZhciBlbnRlclN0eWxlID0gd2lsbEVudGVyKGtleSwgbWVyZ2VkU3R5bGVzW2tleV0sIHN0eWxlcywgY3VycmVudFN0eWxlcywgY3VycmVudFZlbG9jaXRpZXMpO1xuXG4gICAgICAgIC8vIFdlIGNhbiBtdXRhdGUgdGhpcyBoZXJlIGJlY2F1c2UgbWVyZ2VEaWZmIHJldHVybnMgYSBuZXcgT2JqXG4gICAgICAgIG1lcmdlZFN0eWxlc1trZXldID0gZW50ZXJTdHlsZTtcblxuICAgICAgICBjdXJyZW50U3R5bGVzID0gX2V4dGVuZHMoe30sIGN1cnJlbnRTdHlsZXMsIChfZXh0ZW5kczIgPSB7fSwgX2V4dGVuZHMyW2tleV0gPSBlbnRlclN0eWxlLCBfZXh0ZW5kczIpKTtcbiAgICAgICAgY3VycmVudFZlbG9jaXRpZXMgPSBfZXh0ZW5kcyh7fSwgY3VycmVudFZlbG9jaXRpZXMsIChfZXh0ZW5kczMgPSB7fSwgX2V4dGVuZHMzW2tleV0gPSBtYXBPYmplY3QoX3plcm8yWydkZWZhdWx0J10sIGVudGVyU3R5bGUpLCBfZXh0ZW5kczMpKTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgbmV3Q3VycmVudFN0eWxlcyA9IG1hcE9iamVjdChmdW5jdGlvbiAobWVyZ2VkU3R5bGUsIGtleSkge1xuICAgICAgICByZXR1cm4gX3VwZGF0ZVRyZWUudXBkYXRlQ3VycmVudFN0eWxlKHRpbWVzdGVwLCBjdXJyZW50U3R5bGVzW2tleV0sIGN1cnJlbnRWZWxvY2l0aWVzW2tleV0sIG1lcmdlZFN0eWxlKTtcbiAgICAgIH0sIG1lcmdlZFN0eWxlcyk7XG4gICAgICB2YXIgbmV3Q3VycmVudFZlbG9jaXRpZXMgPSBtYXBPYmplY3QoZnVuY3Rpb24gKG1lcmdlZFN0eWxlLCBrZXkpIHtcbiAgICAgICAgcmV0dXJuIF91cGRhdGVUcmVlLnVwZGF0ZUN1cnJlbnRWZWxvY2l0eSh0aW1lc3RlcCwgY3VycmVudFN0eWxlc1trZXldLCBjdXJyZW50VmVsb2NpdGllc1trZXldLCBtZXJnZWRTdHlsZSk7XG4gICAgICB9LCBtZXJnZWRTdHlsZXMpO1xuXG4gICAgICBpZiAoIWhhc05ld0tleSAmJiBldmVyeU9iaihmdW5jdGlvbiAodiwgaykge1xuICAgICAgICByZXR1cm4gX25vVmVsb2NpdHkyWydkZWZhdWx0J10odiwgY3VycmVudFN0eWxlc1trXSk7XG4gICAgICB9LCBjdXJyZW50VmVsb2NpdGllcykgJiYgZXZlcnlPYmooZnVuY3Rpb24gKHYsIGspIHtcbiAgICAgICAgcmV0dXJuIF9ub1ZlbG9jaXR5MlsnZGVmYXVsdCddKHYsIG5ld0N1cnJlbnRTdHlsZXNba10pO1xuICAgICAgfSwgbmV3Q3VycmVudFZlbG9jaXRpZXMpKSB7XG4gICAgICAgIC8vIGNoZWNrIGV4cGxhbmF0aW9uIGluIGBNb3Rpb24uYW5pbWF0aW9uUmVuZGVyYFxuICAgICAgICB0aGlzLnN0b3BBbmltYXRpb24oKTsgLy8gTmFzdHkgc2lkZSBlZmZlY3RzLi4uLlxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjdXJyZW50U3R5bGVzOiBuZXdDdXJyZW50U3R5bGVzLFxuICAgICAgICBjdXJyZW50VmVsb2NpdGllczogbmV3Q3VycmVudFZlbG9jaXRpZXNcbiAgICAgIH07XG4gICAgfSxcblxuICAgIHN0b3BBbmltYXRpb246IG51bGwsXG5cbiAgICAvLyB1c2VkIGluIGFuaW1hdGlvblJlbmRlclxuICAgIGhhc1VubW91bnRlZDogZmFsc2UsXG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0aGlzLnN0b3BBbmltYXRpb24oKTtcbiAgICAgIHRoaXMuaGFzVW5tb3VudGVkID0gdHJ1ZTtcbiAgICB9LFxuXG4gICAgc3RhcnRBbmltYXRpbmc6IGZ1bmN0aW9uIHN0YXJ0QW5pbWF0aW5nKCkge1xuICAgICAgdGhpcy5zdG9wQW5pbWF0aW9uID0gc3RhcnRBbmltYXRpb24odGhpcy5zdGF0ZSwgdGhpcy5hbmltYXRpb25TdGVwLCB0aGlzLmFuaW1hdGlvblJlbmRlcik7XG4gICAgfSxcblxuICAgIGFuaW1hdGlvblJlbmRlcjogZnVuY3Rpb24gYW5pbWF0aW9uUmVuZGVyKGFscGhhLCBuZXh0U3RhdGUsIHByZXZTdGF0ZSkge1xuICAgICAgLy8gU2VlIGNvbW1lbnQgaW4gTW90aW9uLlxuICAgICAgaWYgKCF0aGlzLmhhc1VubW91bnRlZCkge1xuICAgICAgICB2YXIgY3VycmVudFN0eWxlcyA9IG1hcE9iamVjdChmdW5jdGlvbiAoc3R5bGUsIGtleSkge1xuICAgICAgICAgIHJldHVybiBfdXBkYXRlVHJlZS5pbnRlcnBvbGF0ZVZhbHVlKGFscGhhLCBzdHlsZSwgcHJldlN0YXRlLmN1cnJlbnRTdHlsZXNba2V5XSk7XG4gICAgICAgIH0sIG5leHRTdGF0ZS5jdXJyZW50U3R5bGVzKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgY3VycmVudFN0eWxlczogY3VycmVudFN0eWxlcyxcbiAgICAgICAgICBjdXJyZW50VmVsb2NpdGllczogbmV4dFN0YXRlLmN1cnJlbnRWZWxvY2l0aWVzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBzdHJpcHBlZFN0eWxlID0gbWFwT2JqZWN0KF9zdHJpcFN0eWxlMlsnZGVmYXVsdCddLCB0aGlzLnN0YXRlLmN1cnJlbnRTdHlsZXMpO1xuICAgICAgdmFyIHJlbmRlcmVkQ2hpbGRyZW4gPSB0aGlzLnByb3BzLmNoaWxkcmVuKHN0cmlwcGVkU3R5bGUpO1xuICAgICAgcmV0dXJuIHJlbmRlcmVkQ2hpbGRyZW4gJiYgUmVhY3QuQ2hpbGRyZW4ub25seShyZW5kZXJlZENoaWxkcmVuKTtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBfZGVwcmVjYXRlZFNwcmluZ3MgPSBfZGVwcmVjYXRlZFNwcmluZ3MzWydkZWZhdWx0J10oUmVhY3QpO1xuXG4gIHZhciBTcHJpbmcgPSBfZGVwcmVjYXRlZFNwcmluZ3MuU3ByaW5nO1xuICB2YXIgVHJhbnNpdGlvblNwcmluZyA9IF9kZXByZWNhdGVkU3ByaW5ncy5UcmFuc2l0aW9uU3ByaW5nO1xuXG4gIHJldHVybiB7IFNwcmluZzogU3ByaW5nLCBUcmFuc2l0aW9uU3ByaW5nOiBUcmFuc2l0aW9uU3ByaW5nLCBNb3Rpb246IE1vdGlvbiwgU3RhZ2dlcmVkTW90aW9uOiBTdGFnZ2VyZWRNb3Rpb24sIFRyYW5zaXRpb25Nb3Rpb246IFRyYW5zaXRpb25Nb3Rpb24gfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QtbW90aW9uL2xpYi9jb21wb25lbnRzLmpzXG4gKiogbW9kdWxlIGlkID0gMjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGRlcHJlY2F0ZWRTcHJpbmdzO1xudmFyIGhhc1dhcm5lZEZvclNwcmluZyA9IHt9O1xudmFyIGhhc1dhcm5lZEZvclRyYW5zaXRpb25TcHJpbmcgPSB7fTtcblxuZnVuY3Rpb24gZGVwcmVjYXRlZFNwcmluZ3MoUmVhY3QpIHtcbiAgdmFyIFNwcmluZyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ1NwcmluZycsXG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICB2YXIgb3duZXJOYW1lID0gdGhpcy5fcmVhY3RJbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5fb3duZXIgJiYgdGhpcy5fcmVhY3RJbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5fb3duZXIuZ2V0TmFtZSgpO1xuICAgICAgICBpZiAoIWhhc1dhcm5lZEZvclNwcmluZ1tvd25lck5hbWVdKSB7XG4gICAgICAgICAgaGFzV2FybmVkRm9yU3ByaW5nW293bmVyTmFtZV0gPSB0cnVlO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NwcmluZyAodXNlZCBpbiAlc3JlbmRlcikgaGFzIG5vdyBiZWVuIHJlbmFtZWQgdG8gTW90aW9uLiAnICsgJ1BsZWFzZSBzZWUgdGhlIHJlbGVhc2Ugbm90ZSBmb3IgdGhlIHVwZ3JhZGUgcGF0aC4gVGhhbmsgeW91IScsIG93bmVyTmFtZSA/IG93bmVyTmFtZSArICdcXCdzICcgOiAnUmVhY3QuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBUcmFuc2l0aW9uU3ByaW5nID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnVHJhbnNpdGlvblNwcmluZycsXG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICB2YXIgb3duZXJOYW1lID0gdGhpcy5fcmVhY3RJbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5fb3duZXIgJiYgdGhpcy5fcmVhY3RJbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5fb3duZXIuZ2V0TmFtZSgpO1xuICAgICAgICBpZiAoIWhhc1dhcm5lZEZvclRyYW5zaXRpb25TcHJpbmdbb3duZXJOYW1lXSkge1xuICAgICAgICAgIGhhc1dhcm5lZEZvclRyYW5zaXRpb25TcHJpbmdbb3duZXJOYW1lXSA9IHRydWU7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignVHJhbnNpdGlvblNwcmluZyAodXNlZCBpbiAlc3JlbmRlcikgaGFzIG5vdyBiZWVuIHJlbmFtZWQgdG8gJyArICdUcmFuc2l0aW9uTW90aW9uLiBQbGVhc2Ugc2VlIHRoZSByZWxlYXNlIG5vdGUgZm9yIHRoZSB1cGdyYWRlICcgKyAncGF0aC4gVGhhbmsgeW91IScsIG93bmVyTmFtZSA/IG93bmVyTmFtZSArICdcXCdzICcgOiAnUmVhY3QuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiB7IFNwcmluZzogU3ByaW5nLCBUcmFuc2l0aW9uU3ByaW5nOiBUcmFuc2l0aW9uU3ByaW5nIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0LW1vdGlvbi9saWIvZGVwcmVjYXRlZFNwcmluZ3MuanNcbiAqKiBtb2R1bGUgaWQgPSAyNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IGhhc1JlYWNoZWRTdHlsZTtcblxuZnVuY3Rpb24gaGFzUmVhY2hlZFN0eWxlKGN1cnJlbnRTdHlsZSwgc3R5bGUpIHtcbiAgZm9yICh2YXIga2V5IGluIHN0eWxlKSB7XG4gICAgaWYgKCFzdHlsZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdmFyIGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRTdHlsZVtrZXldO1xuICAgIHZhciBkZXN0VmFsdWUgPSBzdHlsZVtrZXldO1xuICAgIGlmICghZGVzdFZhbHVlLmNvbmZpZykge1xuICAgICAgLy8gbm90IGEgc3ByaW5nIGNvbmZpZ1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChjdXJyZW50VmFsdWUuY29uZmlnICYmIGN1cnJlbnRWYWx1ZS52YWwgIT09IGRlc3RWYWx1ZS52YWwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCFjdXJyZW50VmFsdWUuY29uZmlnICYmIGN1cnJlbnRWYWx1ZSAhPT0gZGVzdFZhbHVlLnZhbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0LW1vdGlvbi9saWIvaGFzUmVhY2hlZFN0eWxlLmpzXG4gKiogbW9kdWxlIGlkID0gMjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHRoaXMgZnVuY3Rpb24gaXMgYWxsb2NhdGlvbi1sZXNzIHRoYW5rcyB0byBiYWJlbCwgd2hpY2ggdHJhbnNmb3JtcyB0aGUgdGFpbFxuLy8gY2FsbHMgaW50byBsb29wc1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1lcmdlRGlmZjtcbmZ1bmN0aW9uIG1lcmdlRGlmZkFycihfeCwgX3gyLCBfeDMsIF94NCwgX3g1LCBfeDYsIF94Nykge1xuICB2YXIgX2FnYWluID0gdHJ1ZTtcblxuICBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHtcbiAgICB2YXIgYXJyQSA9IF94LFxuICAgICAgICBhcnJCID0gX3gyLFxuICAgICAgICBjb2xsQiA9IF94MyxcbiAgICAgICAgaW5kZXhBID0gX3g0LFxuICAgICAgICBpbmRleEIgPSBfeDUsXG4gICAgICAgIG9uUmVtb3ZlID0gX3g2LFxuICAgICAgICBhY2N1bSA9IF94NztcbiAgICBlbmRBID0gZW5kQiA9IGtleUEgPSBrZXlCID0gZmlsbCA9IGZpbGwgPSB1bmRlZmluZWQ7XG4gICAgX2FnYWluID0gZmFsc2U7XG5cbiAgICB2YXIgZW5kQSA9IGluZGV4QSA9PT0gYXJyQS5sZW5ndGg7XG4gICAgdmFyIGVuZEIgPSBpbmRleEIgPT09IGFyckIubGVuZ3RoO1xuICAgIHZhciBrZXlBID0gYXJyQVtpbmRleEFdO1xuICAgIHZhciBrZXlCID0gYXJyQltpbmRleEJdO1xuICAgIGlmIChlbmRBICYmIGVuZEIpIHtcbiAgICAgIC8vIHJldHVybmluZyBudWxsIGhlcmUsIG90aGVyd2lzZSBsaW50IGNvbXBsYWlucyB0aGF0IHdlJ3JlIG5vdCBleHBlY3RpbmdcbiAgICAgIC8vIGEgcmV0dXJuIHZhbHVlIGluIHN1YnNlcXVlbnQgY2FsbHMuIFdlIGtub3cgd2hhdCB3ZSdyZSBkb2luZy5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmIChlbmRBKSB7XG4gICAgICBhY2N1bVtrZXlCXSA9IGNvbGxCW2tleUJdO1xuICAgICAgX3ggPSBhcnJBO1xuICAgICAgX3gyID0gYXJyQjtcbiAgICAgIF94MyA9IGNvbGxCO1xuICAgICAgX3g0ID0gaW5kZXhBO1xuICAgICAgX3g1ID0gaW5kZXhCICsgMTtcbiAgICAgIF94NiA9IG9uUmVtb3ZlO1xuICAgICAgX3g3ID0gYWNjdW07XG4gICAgICBfYWdhaW4gPSB0cnVlO1xuICAgICAgY29udGludWUgX2Z1bmN0aW9uO1xuICAgIH1cblxuICAgIGlmIChlbmRCKSB7XG4gICAgICB2YXIgZmlsbCA9IG9uUmVtb3ZlKGtleUEpO1xuICAgICAgaWYgKGZpbGwgIT0gbnVsbCkge1xuICAgICAgICBhY2N1bVtrZXlBXSA9IGZpbGw7XG4gICAgICB9XG4gICAgICBfeCA9IGFyckE7XG4gICAgICBfeDIgPSBhcnJCO1xuICAgICAgX3gzID0gY29sbEI7XG4gICAgICBfeDQgPSBpbmRleEEgKyAxO1xuICAgICAgX3g1ID0gaW5kZXhCO1xuICAgICAgX3g2ID0gb25SZW1vdmU7XG4gICAgICBfeDcgPSBhY2N1bTtcbiAgICAgIF9hZ2FpbiA9IHRydWU7XG4gICAgICBjb250aW51ZSBfZnVuY3Rpb247XG4gICAgfVxuXG4gICAgaWYgKGtleUEgPT09IGtleUIpIHtcbiAgICAgIGFjY3VtW2tleUFdID0gY29sbEJba2V5QV07XG4gICAgICBfeCA9IGFyckE7XG4gICAgICBfeDIgPSBhcnJCO1xuICAgICAgX3gzID0gY29sbEI7XG4gICAgICBfeDQgPSBpbmRleEEgKyAxO1xuICAgICAgX3g1ID0gaW5kZXhCICsgMTtcbiAgICAgIF94NiA9IG9uUmVtb3ZlO1xuICAgICAgX3g3ID0gYWNjdW07XG4gICAgICBfYWdhaW4gPSB0cnVlO1xuICAgICAgY29udGludWUgX2Z1bmN0aW9uO1xuICAgIH1cblxuICAgIGlmICghY29sbEIuaGFzT3duUHJvcGVydHkoa2V5QSkpIHtcbiAgICAgIHZhciBmaWxsID0gb25SZW1vdmUoa2V5QSk7XG4gICAgICBpZiAoZmlsbCAhPSBudWxsKSB7XG4gICAgICAgIGFjY3VtW2tleUFdID0gZmlsbDtcbiAgICAgIH1cbiAgICAgIF94ID0gYXJyQTtcbiAgICAgIF94MiA9IGFyckI7XG4gICAgICBfeDMgPSBjb2xsQjtcbiAgICAgIF94NCA9IGluZGV4QSArIDE7XG4gICAgICBfeDUgPSBpbmRleEI7XG4gICAgICBfeDYgPSBvblJlbW92ZTtcbiAgICAgIF94NyA9IGFjY3VtO1xuICAgICAgX2FnYWluID0gdHJ1ZTtcbiAgICAgIGNvbnRpbnVlIF9mdW5jdGlvbjtcbiAgICB9XG5cbiAgICBfeCA9IGFyckE7XG4gICAgX3gyID0gYXJyQjtcbiAgICBfeDMgPSBjb2xsQjtcbiAgICBfeDQgPSBpbmRleEEgKyAxO1xuICAgIF94NSA9IGluZGV4QjtcbiAgICBfeDYgPSBvblJlbW92ZTtcbiAgICBfeDcgPSBhY2N1bTtcbiAgICBfYWdhaW4gPSB0cnVlO1xuICAgIGNvbnRpbnVlIF9mdW5jdGlvbjtcbiAgfVxufVxuXG5mdW5jdGlvbiBtZXJnZURpZmYoYSwgYiwgb25SZW1vdmUpIHtcbiAgdmFyIHJldCA9IHt9O1xuICAvLyBpZiBhbnlvbmUgY2FuIG1ha2UgdGhpcyB3b3JrIHdpdGhvdXQgYWxsb2NhdGluZyB0aGUgYXJyYXlzIGhlcmUsIHdlJ2xsXG4gIC8vIGdpdmUgeW91IGEgbWVkYWxcbiAgbWVyZ2VEaWZmQXJyKE9iamVjdC5rZXlzKGEpLCBPYmplY3Qua2V5cyhiKSwgYiwgMCwgMCwgb25SZW1vdmUsIHJldCk7XG4gIHJldHVybiByZXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QtbW90aW9uL2xpYi9tZXJnZURpZmYuanNcbiAqKiBtb2R1bGUgaWQgPSAyNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gY3VycmVudFN0eWxlIGtlZXBzIHRoZSBpbmZvIGFib3V0IHdoZXRoZXIgYSBwcm9wIGlzIGNvbmZpZ3VyZWQgYXMgYSBzcHJpbmdcbi8vIG9yIGlmIGl0J3MganVzdCBhIHJhbmRvbSBwcm9wIHRoYXQgaGFwcGVucyB0byBiZSBwcmVzZW50IG9uIHRoZSBzdHlsZVxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG5vVmVsb2NpdHk7XG5cbmZ1bmN0aW9uIG5vVmVsb2NpdHkoY3VycmVudFZlbG9jaXR5LCBjdXJyZW50U3R5bGUpIHtcbiAgZm9yICh2YXIga2V5IGluIGN1cnJlbnRWZWxvY2l0eSkge1xuICAgIGlmICghY3VycmVudFZlbG9jaXR5Lmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoY3VycmVudFN0eWxlW2tleV0uY29uZmlnICYmIGN1cnJlbnRWZWxvY2l0eVtrZXldICE9PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0LW1vdGlvbi9saWIvbm9WZWxvY2l0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gcmVvcmRlcktleXM7XG5cbmZ1bmN0aW9uIHJlb3JkZXJLZXlzKG9iaiwgZikge1xuICB2YXIgbmV3S2V5cyA9IGYoT2JqZWN0LmtleXMob2JqKSk7XG4gIHZhciByZXQgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IG5ld0tleXNbaV07XG4gICAgcmV0W2tleV0gPSBvYmpba2V5XTtcbiAgfVxuXG4gIHJldHVybiByZXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QtbW90aW9uL2xpYi9yZW9yZGVyS2V5cy5qc1xuICoqIG1vZHVsZSBpZCA9IDI4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzWydkZWZhdWx0J10gPSBzcHJpbmc7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxudmFyIF9wcmVzZXRzID0gcmVxdWlyZSgnLi9wcmVzZXRzJyk7XG5cbnZhciBfcHJlc2V0czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcmVzZXRzKTtcblxuLy8gaW5zdGVhZCBvZiBleHBvc2luZyB7dmFsOiBibGEsIGNvbmZpZzogYmxhfSwgdXNlIGEgaGVscGVyXG5cbmZ1bmN0aW9uIHNwcmluZyh2YWwpIHtcbiAgdmFyIGNvbmZpZyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IF9wcmVzZXRzMlsnZGVmYXVsdCddLm5vV29iYmxlIDogYXJndW1lbnRzWzFdO1xuXG4gIHJldHVybiB7IHZhbDogdmFsLCBjb25maWc6IGNvbmZpZyB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWFjdC1tb3Rpb24vbGliL3NwcmluZy5qc1xuICoqIG1vZHVsZSBpZCA9IDI5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gc3RlcHBlcjtcbnZhciBlcnJvck1hcmdpbiA9IDAuMDAwMTtcblxuZnVuY3Rpb24gc3RlcHBlcihmcmFtZVJhdGUsIHgsIHYsIGRlc3RYLCBrLCBiKSB7XG4gIC8vIFNwcmluZyBzdGlmZm5lc3MsIGluIGtnIC8gc14yXG5cbiAgLy8gZm9yIGFuaW1hdGlvbnMsIGRlc3RYIGlzIHJlYWxseSBzcHJpbmcgbGVuZ3RoIChzcHJpbmcgYXQgcmVzdCkuIGluaXRpYWxcbiAgLy8gcG9zaXRpb24gaXMgY29uc2lkZXJlZCBhcyB0aGUgc3RyZXRjaGVkL2NvbXByZXNzZWQgcG9zaXRpb24gb2YgYSBzcHJpbmdcbiAgdmFyIEZzcHJpbmcgPSAtayAqICh4IC0gZGVzdFgpO1xuXG4gIC8vIERhbXBpbmcsIGluIGtnIC8gc1xuICB2YXIgRmRhbXBlciA9IC1iICogdjtcblxuICAvLyB1c3VhbGx5IHdlIHB1dCBtYXNzIGhlcmUsIGJ1dCBmb3IgYW5pbWF0aW9uIHB1cnBvc2VzLCBzcGVjaWZ5aW5nIG1hc3MgaXMgYVxuICAvLyBiaXQgcmVkdW5kYW50LiB5b3UgY291bGQgc2ltcGx5IGFkanVzdCBrIGFuZCBiIGFjY29yZGluZ2x5XG4gIC8vIGxldCBhID0gKEZzcHJpbmcgKyBGZGFtcGVyKSAvIG1hc3M7XG4gIHZhciBhID0gRnNwcmluZyArIEZkYW1wZXI7XG5cbiAgdmFyIG5ld1YgPSB2ICsgYSAqIGZyYW1lUmF0ZTtcbiAgdmFyIG5ld1ggPSB4ICsgbmV3ViAqIGZyYW1lUmF0ZTtcblxuICBpZiAoTWF0aC5hYnMobmV3ViAtIHYpIDwgZXJyb3JNYXJnaW4gJiYgTWF0aC5hYnMobmV3WCAtIHgpIDwgZXJyb3JNYXJnaW4pIHtcbiAgICByZXR1cm4gW2Rlc3RYLCAwXTtcbiAgfVxuXG4gIHJldHVybiBbbmV3WCwgbmV3Vl07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QtbW90aW9uL2xpYi9zdGVwcGVyLmpzXG4gKiogbW9kdWxlIGlkID0gMzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHR1cm4ge3g6IHt2YWw6IDEsIGNvbmZpZzogWzEsIDJdfSwgeTogMn0gaW50byB7eDogMSwgeTogMn1cblwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBzdHJpcFN0eWxlO1xuXG5mdW5jdGlvbiBzdHJpcFN0eWxlKHN0eWxlKSB7XG4gIHZhciByZXQgPSB7fTtcbiAgZm9yICh2YXIga2V5IGluIHN0eWxlKSB7XG4gICAgaWYgKCFzdHlsZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgcmV0W2tleV0gPSBzdHlsZVtrZXldLnZhbCA9PSBudWxsID8gc3R5bGVba2V5XSA6IHN0eWxlW2tleV0udmFsO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QtbW90aW9uL2xpYi9zdHJpcFN0eWxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuaW50ZXJwb2xhdGVWYWx1ZSA9IGludGVycG9sYXRlVmFsdWU7XG5leHBvcnRzLnVwZGF0ZUN1cnJlbnRTdHlsZSA9IHVwZGF0ZUN1cnJlbnRTdHlsZTtcbmV4cG9ydHMudXBkYXRlQ3VycmVudFZlbG9jaXR5ID0gdXBkYXRlQ3VycmVudFZlbG9jaXR5O1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciBfc3RlcHBlciA9IHJlcXVpcmUoJy4vc3RlcHBlcicpO1xuXG52YXIgX3N0ZXBwZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RlcHBlcik7XG5cbi8vIFRPRE86IHJlZmFjdG9yIGNvbW1vbiBsb2dpYyB3aXRoIHVwZGF0ZUN1cnJWYWx1ZSBhbmQgdXBkYXRlQ3VyclZlbG9jaXR5XG5cbmZ1bmN0aW9uIGludGVycG9sYXRlVmFsdWUoYWxwaGEsIG5leHRTdHlsZSwgcHJldlN0eWxlKSB7XG4gIC8vIG1pZ2h0IGJlIHVzZWQgYnkgYSBUcmFuc2l0aW9uTW90aW9uLCB3aGVyZSBwcmV2U3R5bGUgbWlnaHQgbm90IGV4aXN0IGFueW1vcmVcbiAgaWYgKCFwcmV2U3R5bGUpIHtcbiAgICByZXR1cm4gbmV4dFN0eWxlO1xuICB9XG5cbiAgdmFyIHJldCA9IHt9O1xuICBmb3IgKHZhciBrZXkgaW4gbmV4dFN0eWxlKSB7XG4gICAgaWYgKCFuZXh0U3R5bGUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKCFuZXh0U3R5bGVba2V5XS5jb25maWcpIHtcbiAgICAgIHJldFtrZXldID0gbmV4dFN0eWxlW2tleV07XG4gICAgICAvLyBub3QgYSBzcHJpbmcgY29uZmlnLCBub3Qgc29tZXRoaW5nIHdlIHdhbnQgdG8gaW50ZXJwb2xhdGVcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB2YXIgcHJldlZhbHVlID0gcHJldlN0eWxlW2tleV0uY29uZmlnID8gcHJldlN0eWxlW2tleV0udmFsIDogcHJldlN0eWxlW2tleV07XG4gICAgcmV0W2tleV0gPSB7XG4gICAgICB2YWw6IG5leHRTdHlsZVtrZXldLnZhbCAqIGFscGhhICsgcHJldlZhbHVlICogKDEgLSBhbHBoYSksXG4gICAgICBjb25maWc6IG5leHRTdHlsZVtrZXldLmNvbmZpZ1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gcmV0O1xufVxuXG4vLyBUT0RPOiByZWZhY3RvciBjb21tb24gbG9naWMgd2l0aCB1cGRhdGVDdXJyZW50VmVsb2NpdHlcblxuZnVuY3Rpb24gdXBkYXRlQ3VycmVudFN0eWxlKGZyYW1lUmF0ZSwgY3VycmVudFN0eWxlLCBjdXJyZW50VmVsb2NpdHksIHN0eWxlKSB7XG4gIHZhciByZXQgPSB7fTtcbiAgZm9yICh2YXIga2V5IGluIHN0eWxlKSB7XG4gICAgaWYgKCFzdHlsZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKCFzdHlsZVtrZXldLmNvbmZpZykge1xuICAgICAgcmV0W2tleV0gPSBzdHlsZVtrZXldO1xuICAgICAgLy8gbm90IGEgc3ByaW5nIGNvbmZpZywgbm90IHNvbWV0aGluZyB3ZSB3YW50IHRvIGludGVycG9sYXRlXG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdmFyIF9zdHlsZSRrZXkkY29uZmlnID0gc3R5bGVba2V5XS5jb25maWc7XG4gICAgdmFyIGsgPSBfc3R5bGUka2V5JGNvbmZpZ1swXTtcbiAgICB2YXIgYiA9IF9zdHlsZSRrZXkkY29uZmlnWzFdO1xuXG4gICAgdmFyIHZhbCA9IF9zdGVwcGVyMlsnZGVmYXVsdCddKGZyYW1lUmF0ZSxcbiAgICAvLyBtaWdodCBoYXZlIGJlZW4gYSBub24tc3ByaW5nZWQgcHJvcCB0aGF0IGp1c3QgYmVjYW1lIG9uZVxuICAgIGN1cnJlbnRTdHlsZVtrZXldLnZhbCA9PSBudWxsID8gY3VycmVudFN0eWxlW2tleV0gOiBjdXJyZW50U3R5bGVba2V5XS52YWwsIGN1cnJlbnRWZWxvY2l0eVtrZXldLCBzdHlsZVtrZXldLnZhbCwgaywgYilbMF07XG4gICAgcmV0W2tleV0gPSB7XG4gICAgICB2YWw6IHZhbCxcbiAgICAgIGNvbmZpZzogc3R5bGVba2V5XS5jb25maWdcbiAgICB9O1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUN1cnJlbnRWZWxvY2l0eShmcmFtZVJhdGUsIGN1cnJlbnRTdHlsZSwgY3VycmVudFZlbG9jaXR5LCBzdHlsZSkge1xuICB2YXIgcmV0ID0ge307XG4gIGZvciAodmFyIGtleSBpbiBzdHlsZSkge1xuICAgIGlmICghc3R5bGUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmICghc3R5bGVba2V5XS5jb25maWcpIHtcbiAgICAgIC8vIG5vdCBhIHNwcmluZyBjb25maWcsIG5vdCBzb21ldGhpbmcgd2Ugd2FudCB0byBpbnRlcnBvbGF0ZVxuICAgICAgcmV0W2tleV0gPSAwO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHZhciBfc3R5bGUka2V5JGNvbmZpZzIgPSBzdHlsZVtrZXldLmNvbmZpZztcbiAgICB2YXIgayA9IF9zdHlsZSRrZXkkY29uZmlnMlswXTtcbiAgICB2YXIgYiA9IF9zdHlsZSRrZXkkY29uZmlnMlsxXTtcblxuICAgIHZhciB2YWwgPSBfc3RlcHBlcjJbJ2RlZmF1bHQnXShmcmFtZVJhdGUsXG4gICAgLy8gbWlnaHQgaGF2ZSBiZWVuIGEgbm9uLXNwcmluZ2VkIHByb3AgdGhhdCBqdXN0IGJlY2FtZSBvbmVcbiAgICBjdXJyZW50U3R5bGVba2V5XS52YWwgPT0gbnVsbCA/IGN1cnJlbnRTdHlsZVtrZXldIDogY3VycmVudFN0eWxlW2tleV0udmFsLCBjdXJyZW50VmVsb2NpdHlba2V5XSwgc3R5bGVba2V5XS52YWwsIGssIGIpWzFdO1xuICAgIHJldFtrZXldID0gdmFsO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QtbW90aW9uL2xpYi91cGRhdGVUcmVlLmpzXG4gKiogbW9kdWxlIGlkID0gMzJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHVzZWQgYnkgdGhlIHRyZWUtd2Fsa2luZyB1cGRhdGVzIGFuZCBzcHJpbmdzLiBBdm9pZHMgc29tZSBhbGxvY2F0aW9uc1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHplcm87XG5cbmZ1bmN0aW9uIHplcm8oKSB7XG4gIHJldHVybiAwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0LW1vdGlvbi9saWIvemVyby5qc1xuICoqIG1vZHVsZSBpZCA9IDMzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgbm93ID0gcmVxdWlyZSgncGVyZm9ybWFuY2Utbm93JylcbiAgLCBnbG9iYWwgPSB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyA/IHt9IDogd2luZG93XG4gICwgdmVuZG9ycyA9IFsnbW96JywgJ3dlYmtpdCddXG4gICwgc3VmZml4ID0gJ0FuaW1hdGlvbkZyYW1lJ1xuICAsIHJhZiA9IGdsb2JhbFsncmVxdWVzdCcgKyBzdWZmaXhdXG4gICwgY2FmID0gZ2xvYmFsWydjYW5jZWwnICsgc3VmZml4XSB8fCBnbG9iYWxbJ2NhbmNlbFJlcXVlc3QnICsgc3VmZml4XVxuXG5mb3IodmFyIGkgPSAwOyBpIDwgdmVuZG9ycy5sZW5ndGggJiYgIXJhZjsgaSsrKSB7XG4gIHJhZiA9IGdsb2JhbFt2ZW5kb3JzW2ldICsgJ1JlcXVlc3QnICsgc3VmZml4XVxuICBjYWYgPSBnbG9iYWxbdmVuZG9yc1tpXSArICdDYW5jZWwnICsgc3VmZml4XVxuICAgICAgfHwgZ2xvYmFsW3ZlbmRvcnNbaV0gKyAnQ2FuY2VsUmVxdWVzdCcgKyBzdWZmaXhdXG59XG5cbi8vIFNvbWUgdmVyc2lvbnMgb2YgRkYgaGF2ZSByQUYgYnV0IG5vdCBjQUZcbmlmKCFyYWYgfHwgIWNhZikge1xuICB2YXIgbGFzdCA9IDBcbiAgICAsIGlkID0gMFxuICAgICwgcXVldWUgPSBbXVxuICAgICwgZnJhbWVEdXJhdGlvbiA9IDEwMDAgLyA2MFxuXG4gIHJhZiA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgaWYocXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICB2YXIgX25vdyA9IG5vdygpXG4gICAgICAgICwgbmV4dCA9IE1hdGgubWF4KDAsIGZyYW1lRHVyYXRpb24gLSAoX25vdyAtIGxhc3QpKVxuICAgICAgbGFzdCA9IG5leHQgKyBfbm93XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY3AgPSBxdWV1ZS5zbGljZSgwKVxuICAgICAgICAvLyBDbGVhciBxdWV1ZSBoZXJlIHRvIHByZXZlbnRcbiAgICAgICAgLy8gY2FsbGJhY2tzIGZyb20gYXBwZW5kaW5nIGxpc3RlbmVyc1xuICAgICAgICAvLyB0byB0aGUgY3VycmVudCBmcmFtZSdzIHF1ZXVlXG4gICAgICAgIHF1ZXVlLmxlbmd0aCA9IDBcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGNwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYoIWNwW2ldLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICBjcFtpXS5jYWxsYmFjayhsYXN0KVxuICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHRocm93IGUgfSwgMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIE1hdGgucm91bmQobmV4dCkpXG4gICAgfVxuICAgIHF1ZXVlLnB1c2goe1xuICAgICAgaGFuZGxlOiArK2lkLFxuICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgY2FuY2VsbGVkOiBmYWxzZVxuICAgIH0pXG4gICAgcmV0dXJuIGlkXG4gIH1cblxuICBjYWYgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmKHF1ZXVlW2ldLmhhbmRsZSA9PT0gaGFuZGxlKSB7XG4gICAgICAgIHF1ZXVlW2ldLmNhbmNlbGxlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbikge1xuICAvLyBXcmFwIGluIGEgbmV3IGZ1bmN0aW9uIHRvIHByZXZlbnRcbiAgLy8gYGNhbmNlbGAgcG90ZW50aWFsbHkgYmVpbmcgYXNzaWduZWRcbiAgLy8gdG8gdGhlIG5hdGl2ZSByQUYgZnVuY3Rpb25cbiAgcmV0dXJuIHJhZi5jYWxsKGdsb2JhbCwgZm4pXG59XG5tb2R1bGUuZXhwb3J0cy5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgY2FmLmFwcGx5KGdsb2JhbCwgYXJndW1lbnRzKVxufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QtbW90aW9uL34vcmFmL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0LCBBbGwgcmlnaHRzIHJlc2VydmVkLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuOyhmdW5jdGlvbiAodW5kZWZpbmVkKSB7XG5cbiAgdmFyIG9iamVjdFR5cGVzID0ge1xuICAgICdmdW5jdGlvbic6IHRydWUsXG4gICAgJ29iamVjdCc6IHRydWVcbiAgfTtcblxuICBmdW5jdGlvbiBjaGVja0dsb2JhbCh2YWx1ZSkge1xuICAgIHJldHVybiAodmFsdWUgJiYgdmFsdWUuT2JqZWN0ID09PSBPYmplY3QpID8gdmFsdWUgOiBudWxsO1xuICB9XG5cbiAgdmFyIGZyZWVFeHBvcnRzID0gKG9iamVjdFR5cGVzW3R5cGVvZiBleHBvcnRzXSAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlKSA/IGV4cG9ydHMgOiBudWxsO1xuICB2YXIgZnJlZU1vZHVsZSA9IChvYmplY3RUeXBlc1t0eXBlb2YgbW9kdWxlXSAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSkgPyBtb2R1bGUgOiBudWxsO1xuICB2YXIgZnJlZUdsb2JhbCA9IGNoZWNrR2xvYmFsKGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUgJiYgdHlwZW9mIGdsb2JhbCA9PT0gJ29iamVjdCcgJiYgZ2xvYmFsKTtcbiAgdmFyIGZyZWVTZWxmID0gY2hlY2tHbG9iYWwob2JqZWN0VHlwZXNbdHlwZW9mIHNlbGZdICYmIHNlbGYpO1xuICB2YXIgZnJlZVdpbmRvdyA9IGNoZWNrR2xvYmFsKG9iamVjdFR5cGVzW3R5cGVvZiB3aW5kb3ddICYmIHdpbmRvdyk7XG4gIHZhciBtb2R1bGVFeHBvcnRzID0gKGZyZWVNb2R1bGUgJiYgZnJlZU1vZHVsZS5leHBvcnRzID09PSBmcmVlRXhwb3J0cykgPyBmcmVlRXhwb3J0cyA6IG51bGw7XG4gIHZhciB0aGlzR2xvYmFsID0gY2hlY2tHbG9iYWwob2JqZWN0VHlwZXNbdHlwZW9mIHRoaXNdICYmIHRoaXMpO1xuICB2YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgKChmcmVlV2luZG93ICE9PSAodGhpc0dsb2JhbCAmJiB0aGlzR2xvYmFsLndpbmRvdykpICYmIGZyZWVXaW5kb3cpIHx8IGZyZWVTZWxmIHx8IHRoaXNHbG9iYWwgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuICB2YXIgUnggPSB7XG4gICAgaW50ZXJuYWxzOiB7fSxcbiAgICBjb25maWc6IHtcbiAgICAgIFByb21pc2U6IHJvb3QuUHJvbWlzZVxuICAgIH0sXG4gICAgaGVscGVyczogeyB9XG4gIH07XG5cbiAgLy8gRGVmYXVsdHNcbiAgdmFyIG5vb3AgPSBSeC5oZWxwZXJzLm5vb3AgPSBmdW5jdGlvbiAoKSB7IH0sXG4gICAgaWRlbnRpdHkgPSBSeC5oZWxwZXJzLmlkZW50aXR5ID0gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0sXG4gICAgZGVmYXVsdE5vdyA9IFJ4LmhlbHBlcnMuZGVmYXVsdE5vdyA9IERhdGUubm93LFxuICAgIGRlZmF1bHRDb21wYXJlciA9IFJ4LmhlbHBlcnMuZGVmYXVsdENvbXBhcmVyID0gZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGlzRXF1YWwoeCwgeSk7IH0sXG4gICAgZGVmYXVsdFN1YkNvbXBhcmVyID0gUnguaGVscGVycy5kZWZhdWx0U3ViQ29tcGFyZXIgPSBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCA+IHkgPyAxIDogKHggPCB5ID8gLTEgOiAwKTsgfSxcbiAgICBkZWZhdWx0S2V5U2VyaWFsaXplciA9IFJ4LmhlbHBlcnMuZGVmYXVsdEtleVNlcmlhbGl6ZXIgPSBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC50b1N0cmluZygpOyB9LFxuICAgIGRlZmF1bHRFcnJvciA9IFJ4LmhlbHBlcnMuZGVmYXVsdEVycm9yID0gZnVuY3Rpb24gKGVycikgeyB0aHJvdyBlcnI7IH0sXG4gICAgaXNQcm9taXNlID0gUnguaGVscGVycy5pc1Byb21pc2UgPSBmdW5jdGlvbiAocCkgeyByZXR1cm4gISFwICYmIHR5cGVvZiBwLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgcC50aGVuID09PSAnZnVuY3Rpb24nOyB9LFxuICAgIGlzRnVuY3Rpb24gPSBSeC5oZWxwZXJzLmlzRnVuY3Rpb24gPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgICB2YXIgaXNGbiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbicgfHwgZmFsc2U7XG4gICAgICB9O1xuXG4gICAgICAvLyBmYWxsYmFjayBmb3Igb2xkZXIgdmVyc2lvbnMgb2YgQ2hyb21lIGFuZCBTYWZhcmlcbiAgICAgIGlmIChpc0ZuKC94LykpIHtcbiAgICAgICAgaXNGbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpc0ZuO1xuICAgIH0oKSk7XG5cbiAgICBmdW5jdGlvbiBjbG9uZUFycmF5KGFycikge1xuICAgICAgdmFyIGxlbiA9IGFyci5sZW5ndGgsIGEgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhW2ldID0gYXJyW2ldOyB9XG4gICAgICByZXR1cm4gYTtcbiAgICB9XG5cbiAgdmFyIGVycm9yT2JqID0ge2U6IHt9fTtcbiAgXG4gIGZ1bmN0aW9uIHRyeUNhdGNoZXJHZW4odHJ5Q2F0Y2hUYXJnZXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gdHJ5Q2F0Y2hlcigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB0cnlDYXRjaFRhcmdldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBlcnJvck9iai5lID0gZTtcbiAgICAgICAgcmV0dXJuIGVycm9yT2JqO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICB2YXIgdHJ5Q2F0Y2ggPSBSeC5pbnRlcm5hbHMudHJ5Q2F0Y2ggPSBmdW5jdGlvbiB0cnlDYXRjaChmbikge1xuICAgIGlmICghaXNGdW5jdGlvbihmbikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignZm4gbXVzdCBiZSBhIGZ1bmN0aW9uJyk7IH1cbiAgICByZXR1cm4gdHJ5Q2F0Y2hlckdlbihmbik7XG4gIH07XG5cbiAgZnVuY3Rpb24gdGhyb3dlcihlKSB7XG4gICAgdGhyb3cgZTtcbiAgfVxuXG4gIFJ4LmNvbmZpZy5sb25nU3RhY2tTdXBwb3J0ID0gZmFsc2U7XG4gIHZhciBoYXNTdGFja3MgPSBmYWxzZSwgc3RhY2tzID0gdHJ5Q2F0Y2goZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgRXJyb3IoKTsgfSkoKTtcbiAgaGFzU3RhY2tzID0gISFzdGFja3MuZSAmJiAhIXN0YWNrcy5lLnN0YWNrO1xuXG4gIC8vIEFsbCBjb2RlIGFmdGVyIHRoaXMgcG9pbnQgd2lsbCBiZSBmaWx0ZXJlZCBmcm9tIHN0YWNrIHRyYWNlcyByZXBvcnRlZCBieSBSeEpTXG4gIHZhciByU3RhcnRpbmdMaW5lID0gY2FwdHVyZUxpbmUoKSwgckZpbGVOYW1lO1xuXG4gIHZhciBTVEFDS19KVU1QX1NFUEFSQVRPUiA9ICdGcm9tIHByZXZpb3VzIGV2ZW50Oic7XG5cbiAgZnVuY3Rpb24gbWFrZVN0YWNrVHJhY2VMb25nKGVycm9yLCBvYnNlcnZhYmxlKSB7XG4gICAgLy8gSWYgcG9zc2libGUsIHRyYW5zZm9ybSB0aGUgZXJyb3Igc3RhY2sgdHJhY2UgYnkgcmVtb3ZpbmcgTm9kZSBhbmQgUnhKU1xuICAgIC8vIGNydWZ0LCB0aGVuIGNvbmNhdGVuYXRpbmcgd2l0aCB0aGUgc3RhY2sgdHJhY2Ugb2YgYG9ic2VydmFibGVgLlxuICAgIGlmIChoYXNTdGFja3MgJiZcbiAgICAgICAgb2JzZXJ2YWJsZS5zdGFjayAmJlxuICAgICAgICB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGVycm9yICE9PSBudWxsICYmXG4gICAgICAgIGVycm9yLnN0YWNrICYmXG4gICAgICAgIGVycm9yLnN0YWNrLmluZGV4T2YoU1RBQ0tfSlVNUF9TRVBBUkFUT1IpID09PSAtMVxuICAgICkge1xuICAgICAgdmFyIHN0YWNrcyA9IFtdO1xuICAgICAgZm9yICh2YXIgbyA9IG9ic2VydmFibGU7ICEhbzsgbyA9IG8uc291cmNlKSB7XG4gICAgICAgIGlmIChvLnN0YWNrKSB7XG4gICAgICAgICAgc3RhY2tzLnVuc2hpZnQoby5zdGFjayk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN0YWNrcy51bnNoaWZ0KGVycm9yLnN0YWNrKTtcblxuICAgICAgdmFyIGNvbmNhdGVkU3RhY2tzID0gc3RhY2tzLmpvaW4oJ1xcbicgKyBTVEFDS19KVU1QX1NFUEFSQVRPUiArICdcXG4nKTtcbiAgICAgIGVycm9yLnN0YWNrID0gZmlsdGVyU3RhY2tTdHJpbmcoY29uY2F0ZWRTdGFja3MpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbHRlclN0YWNrU3RyaW5nKHN0YWNrU3RyaW5nKSB7XG4gICAgdmFyIGxpbmVzID0gc3RhY2tTdHJpbmcuc3BsaXQoJ1xcbicpLCBkZXNpcmVkTGluZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbGluZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciBsaW5lID0gbGluZXNbaV07XG5cbiAgICAgIGlmICghaXNJbnRlcm5hbEZyYW1lKGxpbmUpICYmICFpc05vZGVGcmFtZShsaW5lKSAmJiBsaW5lKSB7XG4gICAgICAgIGRlc2lyZWRMaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGVzaXJlZExpbmVzLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNJbnRlcm5hbEZyYW1lKHN0YWNrTGluZSkge1xuICAgIHZhciBmaWxlTmFtZUFuZExpbmVOdW1iZXIgPSBnZXRGaWxlTmFtZUFuZExpbmVOdW1iZXIoc3RhY2tMaW5lKTtcbiAgICBpZiAoIWZpbGVOYW1lQW5kTGluZU51bWJlcikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgZmlsZU5hbWUgPSBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMF0sIGxpbmVOdW1iZXIgPSBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMV07XG5cbiAgICByZXR1cm4gZmlsZU5hbWUgPT09IHJGaWxlTmFtZSAmJlxuICAgICAgbGluZU51bWJlciA+PSByU3RhcnRpbmdMaW5lICYmXG4gICAgICBsaW5lTnVtYmVyIDw9IHJFbmRpbmdMaW5lO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNOb2RlRnJhbWUoc3RhY2tMaW5lKSB7XG4gICAgcmV0dXJuIHN0YWNrTGluZS5pbmRleE9mKCcobW9kdWxlLmpzOicpICE9PSAtMSB8fFxuICAgICAgc3RhY2tMaW5lLmluZGV4T2YoJyhub2RlLmpzOicpICE9PSAtMTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhcHR1cmVMaW5lKCkge1xuICAgIGlmICghaGFzU3RhY2tzKSB7IHJldHVybjsgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHZhciBsaW5lcyA9IGUuc3RhY2suc3BsaXQoJ1xcbicpO1xuICAgICAgdmFyIGZpcnN0TGluZSA9IGxpbmVzWzBdLmluZGV4T2YoJ0AnKSA+IDAgPyBsaW5lc1sxXSA6IGxpbmVzWzJdO1xuICAgICAgdmFyIGZpbGVOYW1lQW5kTGluZU51bWJlciA9IGdldEZpbGVOYW1lQW5kTGluZU51bWJlcihmaXJzdExpbmUpO1xuICAgICAgaWYgKCFmaWxlTmFtZUFuZExpbmVOdW1iZXIpIHsgcmV0dXJuOyB9XG5cbiAgICAgIHJGaWxlTmFtZSA9IGZpbGVOYW1lQW5kTGluZU51bWJlclswXTtcbiAgICAgIHJldHVybiBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMV07XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmlsZU5hbWVBbmRMaW5lTnVtYmVyKHN0YWNrTGluZSkge1xuICAgIC8vIE5hbWVkIGZ1bmN0aW9uczogJ2F0IGZ1bmN0aW9uTmFtZSAoZmlsZW5hbWU6bGluZU51bWJlcjpjb2x1bW5OdW1iZXIpJ1xuICAgIHZhciBhdHRlbXB0MSA9IC9hdCAuKyBcXCgoLispOihcXGQrKTooPzpcXGQrKVxcKSQvLmV4ZWMoc3RhY2tMaW5lKTtcbiAgICBpZiAoYXR0ZW1wdDEpIHsgcmV0dXJuIFthdHRlbXB0MVsxXSwgTnVtYmVyKGF0dGVtcHQxWzJdKV07IH1cblxuICAgIC8vIEFub255bW91cyBmdW5jdGlvbnM6ICdhdCBmaWxlbmFtZTpsaW5lTnVtYmVyOmNvbHVtbk51bWJlcidcbiAgICB2YXIgYXR0ZW1wdDIgPSAvYXQgKFteIF0rKTooXFxkKyk6KD86XFxkKykkLy5leGVjKHN0YWNrTGluZSk7XG4gICAgaWYgKGF0dGVtcHQyKSB7IHJldHVybiBbYXR0ZW1wdDJbMV0sIE51bWJlcihhdHRlbXB0MlsyXSldOyB9XG5cbiAgICAvLyBGaXJlZm94IHN0eWxlOiAnZnVuY3Rpb25AZmlsZW5hbWU6bGluZU51bWJlciBvciBAZmlsZW5hbWU6bGluZU51bWJlcidcbiAgICB2YXIgYXR0ZW1wdDMgPSAvLipAKC4rKTooXFxkKykkLy5leGVjKHN0YWNrTGluZSk7XG4gICAgaWYgKGF0dGVtcHQzKSB7IHJldHVybiBbYXR0ZW1wdDNbMV0sIE51bWJlcihhdHRlbXB0M1syXSldOyB9XG4gIH1cblxuICB2YXIgRW1wdHlFcnJvciA9IFJ4LkVtcHR5RXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSAnU2VxdWVuY2UgY29udGFpbnMgbm8gZWxlbWVudHMuJztcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICB9O1xuICBFbXB0eUVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbiAgRW1wdHlFcnJvci5wcm90b3R5cGUubmFtZSA9ICdFbXB0eUVycm9yJztcblxuICB2YXIgT2JqZWN0RGlzcG9zZWRFcnJvciA9IFJ4Lk9iamVjdERpc3Bvc2VkRXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSAnT2JqZWN0IGhhcyBiZWVuIGRpc3Bvc2VkJztcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICB9O1xuICBPYmplY3REaXNwb3NlZEVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbiAgT2JqZWN0RGlzcG9zZWRFcnJvci5wcm90b3R5cGUubmFtZSA9ICdPYmplY3REaXNwb3NlZEVycm9yJztcblxuICB2YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IgPSBSeC5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSAnQXJndW1lbnQgb3V0IG9mIHJhbmdlJztcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICB9O1xuICBBcmd1bWVudE91dE9mUmFuZ2VFcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG4gIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLnByb3RvdHlwZS5uYW1lID0gJ0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yJztcblxuICB2YXIgTm90U3VwcG9ydGVkRXJyb3IgPSBSeC5Ob3RTdXBwb3J0ZWRFcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZSB8fCAnVGhpcyBvcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZCc7XG4gICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgfTtcbiAgTm90U3VwcG9ydGVkRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuICBOb3RTdXBwb3J0ZWRFcnJvci5wcm90b3R5cGUubmFtZSA9ICdOb3RTdXBwb3J0ZWRFcnJvcic7XG5cbiAgdmFyIE5vdEltcGxlbWVudGVkRXJyb3IgPSBSeC5Ob3RJbXBsZW1lbnRlZEVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdUaGlzIG9wZXJhdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQnO1xuICAgIEVycm9yLmNhbGwodGhpcyk7XG4gIH07XG4gIE5vdEltcGxlbWVudGVkRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuICBOb3RJbXBsZW1lbnRlZEVycm9yLnByb3RvdHlwZS5uYW1lID0gJ05vdEltcGxlbWVudGVkRXJyb3InO1xuXG4gIHZhciBub3RJbXBsZW1lbnRlZCA9IFJ4LmhlbHBlcnMubm90SW1wbGVtZW50ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfTtcblxuICB2YXIgbm90U3VwcG9ydGVkID0gUnguaGVscGVycy5ub3RTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhyb3cgbmV3IE5vdFN1cHBvcnRlZEVycm9yKCk7XG4gIH07XG5cbiAgLy8gU2hpbSBpbiBpdGVyYXRvciBzdXBwb3J0XG4gIHZhciAkaXRlcmF0b3IkID0gKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLml0ZXJhdG9yKSB8fFxuICAgICdfZXM2c2hpbV9pdGVyYXRvcl8nO1xuICAvLyBCdWcgZm9yIG1vemlsbGEgdmVyc2lvblxuICBpZiAocm9vdC5TZXQgJiYgdHlwZW9mIG5ldyByb290LlNldCgpWydAQGl0ZXJhdG9yJ10gPT09ICdmdW5jdGlvbicpIHtcbiAgICAkaXRlcmF0b3IkID0gJ0BAaXRlcmF0b3InO1xuICB9XG5cbiAgdmFyIGRvbmVFbnVtZXJhdG9yID0gUnguZG9uZUVudW1lcmF0b3IgPSB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmRlZmluZWQgfTtcblxuICB2YXIgaXNJdGVyYWJsZSA9IFJ4LmhlbHBlcnMuaXNJdGVyYWJsZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIG8gJiYgb1skaXRlcmF0b3IkXSAhPT0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIHZhciBpc0FycmF5TGlrZSA9IFJ4LmhlbHBlcnMuaXNBcnJheUxpa2UgPSBmdW5jdGlvbiAobykge1xuICAgIHJldHVybiBvICYmIG8ubGVuZ3RoICE9PSB1bmRlZmluZWQ7XG4gIH07XG5cbiAgUnguaGVscGVycy5pdGVyYXRvciA9ICRpdGVyYXRvciQ7XG5cbiAgdmFyIGJpbmRDYWxsYmFjayA9IFJ4LmludGVybmFscy5iaW5kQ2FsbGJhY2sgPSBmdW5jdGlvbiAoZnVuYywgdGhpc0FyZywgYXJnQ291bnQpIHtcbiAgICBpZiAodHlwZW9mIHRoaXNBcmcgPT09ICd1bmRlZmluZWQnKSB7IHJldHVybiBmdW5jOyB9XG4gICAgc3dpdGNoKGFyZ0NvdW50KSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcpXG4gICAgICAgIH07XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZyk7XG4gICAgICAgIH07XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH07XG4gICAgICBjYXNlIDM6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0FyZywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8qKiBVc2VkIHRvIGRldGVybWluZSBpZiB2YWx1ZXMgYXJlIG9mIHRoZSBsYW5ndWFnZSB0eXBlIE9iamVjdCAqL1xuICB2YXIgZG9udEVudW1zID0gWyd0b1N0cmluZycsXG4gICAgJ3RvTG9jYWxlU3RyaW5nJyxcbiAgICAndmFsdWVPZicsXG4gICAgJ2hhc093blByb3BlcnR5JyxcbiAgICAnaXNQcm90b3R5cGVPZicsXG4gICAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJyxcbiAgICAnY29uc3RydWN0b3InXSxcbiAgZG9udEVudW1zTGVuZ3RoID0gZG9udEVudW1zLmxlbmd0aDtcblxudmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcbiAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG4gICAgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcbiAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcbiAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcbiAgICBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcbiAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcbiAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcbiAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcbiAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcbiAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcbiAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXG52YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuICAgIGZsb2F0MzJUYWcgPSAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsXG4gICAgaW50OFRhZyA9ICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgIGludDE2VGFnID0gJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgIHVpbnQ4VGFnID0gJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgIHVpbnQ4Q2xhbXBlZFRhZyA9ICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICB1aW50MzJUYWcgPSAnW29iamVjdCBVaW50MzJBcnJheV0nO1xuXG52YXIgdHlwZWRBcnJheVRhZ3MgPSB7fTtcbnR5cGVkQXJyYXlUYWdzW2Zsb2F0MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbZmxvYXQ2NFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQxNlRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50MTZUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQzMlRhZ10gPSB0cnVlO1xudHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPVxudHlwZWRBcnJheVRhZ3NbYXJyYXlCdWZmZXJUYWddID0gdHlwZWRBcnJheVRhZ3NbYm9vbFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZGF0ZVRhZ10gPSB0eXBlZEFycmF5VGFnc1tlcnJvclRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPSB0eXBlZEFycmF5VGFnc1ttYXBUYWddID1cbnR5cGVkQXJyYXlUYWdzW251bWJlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tvYmplY3RUYWddID1cbnR5cGVkQXJyYXlUYWdzW3JlZ2V4cFRhZ10gPSB0eXBlZEFycmF5VGFnc1tzZXRUYWddID1cbnR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPSB0eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlLFxuICAgIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHksXG4gICAgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZyxcbiAgICBNQVhfU0FGRV9JTlRFR0VSID0gTWF0aC5wb3coMiwgNTMpIC0gMTtcblxudmFyIGtleXMgPSBPYmplY3Qua2V5cyB8fCAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxcbiAgICAgICAgaGFzRG9udEVudW1CdWcgPSAhKHsgdG9TdHJpbmc6IG51bGwgfSkucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyksXG4gICAgICAgIGRvbnRFbnVtcyA9IFtcbiAgICAgICAgICAndG9TdHJpbmcnLFxuICAgICAgICAgICd0b0xvY2FsZVN0cmluZycsXG4gICAgICAgICAgJ3ZhbHVlT2YnLFxuICAgICAgICAgICdoYXNPd25Qcm9wZXJ0eScsXG4gICAgICAgICAgJ2lzUHJvdG90eXBlT2YnLFxuICAgICAgICAgICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsXG4gICAgICAgICAgJ2NvbnN0cnVjdG9yJ1xuICAgICAgICBdLFxuICAgICAgICBkb250RW51bXNMZW5ndGggPSBkb250RW51bXMubGVuZ3RoO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnICYmICh0eXBlb2Ygb2JqICE9PSAnZnVuY3Rpb24nIHx8IG9iaiA9PT0gbnVsbCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmtleXMgY2FsbGVkIG9uIG5vbi1vYmplY3QnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlc3VsdCA9IFtdLCBwcm9wLCBpO1xuXG4gICAgICBmb3IgKHByb3AgaW4gb2JqKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIHtcbiAgICAgICAgICByZXN1bHQucHVzaChwcm9wKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaGFzRG9udEVudW1CdWcpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGRvbnRFbnVtc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqLCBkb250RW51bXNbaV0pKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChkb250RW51bXNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9KCkpO1xuXG5mdW5jdGlvbiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICB2YXIgb2JqUHJvcHMgPSBrZXlzKG9iamVjdCksXG4gICAgICBvYmpMZW5ndGggPSBvYmpQcm9wcy5sZW5ndGgsXG4gICAgICBvdGhQcm9wcyA9IGtleXMob3RoZXIpLFxuICAgICAgb3RoTGVuZ3RoID0gb3RoUHJvcHMubGVuZ3RoO1xuXG4gIGlmIChvYmpMZW5ndGggIT09IG90aExlbmd0aCAmJiAhaXNMb29zZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgaW5kZXggPSBvYmpMZW5ndGgsIGtleTtcbiAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgaWYgKCEoaXNMb29zZSA/IGtleSBpbiBvdGhlciA6IGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsIGtleSkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHZhciBza2lwQ3RvciA9IGlzTG9vc2U7XG4gIHdoaWxlICgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7XG4gICAga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgIHZhciBvYmpWYWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2tleV0sXG4gICAgICAgIHJlc3VsdDtcblxuICAgIGlmICghKHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gZXF1YWxGdW5jKG9ialZhbHVlLCBvdGhWYWx1ZSwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIDogcmVzdWx0KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBza2lwQ3RvciB8fCAoc2tpcEN0b3IgPSBrZXkgPT09ICdjb25zdHJ1Y3RvcicpO1xuICB9XG4gIGlmICghc2tpcEN0b3IpIHtcbiAgICB2YXIgb2JqQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcixcbiAgICAgICAgb3RoQ3RvciA9IG90aGVyLmNvbnN0cnVjdG9yO1xuXG4gICAgaWYgKG9iakN0b3IgIT09IG90aEN0b3IgJiZcbiAgICAgICAgKCdjb25zdHJ1Y3RvcicgaW4gb2JqZWN0ICYmICdjb25zdHJ1Y3RvcicgaW4gb3RoZXIpICYmXG4gICAgICAgICEodHlwZW9mIG9iakN0b3IgPT09ICdmdW5jdGlvbicgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiZcbiAgICAgICAgICB0eXBlb2Ygb3RoQ3RvciA9PT0gJ2Z1bmN0aW9uJyAmJiBvdGhDdG9yIGluc3RhbmNlb2Ygb3RoQ3RvcikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgdGFnKSB7XG4gIHN3aXRjaCAodGFnKSB7XG4gICAgY2FzZSBib29sVGFnOlxuICAgIGNhc2UgZGF0ZVRhZzpcbiAgICAgIHJldHVybiArb2JqZWN0ID09PSArb3RoZXI7XG5cbiAgICBjYXNlIGVycm9yVGFnOlxuICAgICAgcmV0dXJuIG9iamVjdC5uYW1lID09PSBvdGhlci5uYW1lICYmIG9iamVjdC5tZXNzYWdlID09PSBvdGhlci5tZXNzYWdlO1xuXG4gICAgY2FzZSBudW1iZXJUYWc6XG4gICAgICByZXR1cm4gKG9iamVjdCAhPT0gK29iamVjdCkgP1xuICAgICAgICBvdGhlciAhPT0gK290aGVyIDpcbiAgICAgICAgb2JqZWN0ID09PSArb3RoZXI7XG5cbiAgICBjYXNlIHJlZ2V4cFRhZzpcbiAgICBjYXNlIHN0cmluZ1RhZzpcbiAgICAgIHJldHVybiBvYmplY3QgPT09IChvdGhlciArICcnKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbnZhciBpc09iamVjdCA9IFJ4LmludGVybmFscy5pc09iamVjdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PT0gJ29iamVjdCcgfHwgdHlwZSA9PT0gJ2Z1bmN0aW9uJyk7XG59O1xuXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jztcbn1cblxuZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxudmFyIGlzSG9zdE9iamVjdCA9IChmdW5jdGlvbigpIHtcbiAgdHJ5IHtcbiAgICBPYmplY3QoeyAndG9TdHJpbmcnOiAwIH0gKyAnJyk7XG4gIH0gY2F0Y2goZSkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHsgcmV0dXJuIGZhbHNlOyB9O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUudG9TdHJpbmcgIT09ICdmdW5jdGlvbicgJiYgdHlwZW9mICh2YWx1ZSArICcnKSA9PT0gJ3N0cmluZyc7XG4gIH07XG59KCkpO1xuXG5mdW5jdGlvbiBpc1R5cGVkQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhIXR5cGVkQXJyYXlUYWdzW29ialRvU3RyaW5nLmNhbGwodmFsdWUpXTtcbn1cblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09IGFycmF5VGFnO1xufTtcblxuZnVuY3Rpb24gYXJyYXlTb21lIChhcnJheSwgcHJlZGljYXRlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGVxdWFsQXJyYXlzKGFycmF5LCBvdGhlciwgZXF1YWxGdW5jLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGFyckxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgIG90aExlbmd0aCA9IG90aGVyLmxlbmd0aDtcblxuICBpZiAoYXJyTGVuZ3RoICE9PSBvdGhMZW5ndGggJiYgIShpc0xvb3NlICYmIG90aExlbmd0aCA+IGFyckxlbmd0aCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gSWdub3JlIG5vbi1pbmRleCBwcm9wZXJ0aWVzLlxuICB3aGlsZSAoKytpbmRleCA8IGFyckxlbmd0aCkge1xuICAgIHZhciBhcnJWYWx1ZSA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltpbmRleF0sXG4gICAgICAgIHJlc3VsdDtcblxuICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICBpZiAoaXNMb29zZSkge1xuICAgICAgaWYgKCFhcnJheVNvbWUob3RoZXIsIGZ1bmN0aW9uKG90aFZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcbiAgICAgICAgICB9KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghKGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBiYXNlSXNFcXVhbERlZXAob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICB2YXIgb2JqSXNBcnIgPSBpc0FycmF5KG9iamVjdCksXG4gICAgICBvdGhJc0FyciA9IGlzQXJyYXkob3RoZXIpLFxuICAgICAgb2JqVGFnID0gYXJyYXlUYWcsXG4gICAgICBvdGhUYWcgPSBhcnJheVRhZztcblxuICBpZiAoIW9iaklzQXJyKSB7XG4gICAgb2JqVGFnID0gb2JqVG9TdHJpbmcuY2FsbChvYmplY3QpO1xuICAgIGlmIChvYmpUYWcgPT09IGFyZ3NUYWcpIHtcbiAgICAgIG9ialRhZyA9IG9iamVjdFRhZztcbiAgICB9IGVsc2UgaWYgKG9ialRhZyAhPT0gb2JqZWN0VGFnKSB7XG4gICAgICBvYmpJc0FyciA9IGlzVHlwZWRBcnJheShvYmplY3QpO1xuICAgIH1cbiAgfVxuICBpZiAoIW90aElzQXJyKSB7XG4gICAgb3RoVGFnID0gb2JqVG9TdHJpbmcuY2FsbChvdGhlcik7XG4gICAgaWYgKG90aFRhZyA9PT0gYXJnc1RhZykge1xuICAgICAgb3RoVGFnID0gb2JqZWN0VGFnO1xuICAgIH1cbiAgfVxuICB2YXIgb2JqSXNPYmogPSBvYmpUYWcgPT09IG9iamVjdFRhZyAmJiAhaXNIb3N0T2JqZWN0KG9iamVjdCksXG4gICAgICBvdGhJc09iaiA9IG90aFRhZyA9PT0gb2JqZWN0VGFnICYmICFpc0hvc3RPYmplY3Qob3RoZXIpLFxuICAgICAgaXNTYW1lVGFnID0gb2JqVGFnID09PSBvdGhUYWc7XG5cbiAgaWYgKGlzU2FtZVRhZyAmJiAhKG9iaklzQXJyIHx8IG9iaklzT2JqKSkge1xuICAgIHJldHVybiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIG9ialRhZyk7XG4gIH1cbiAgaWYgKCFpc0xvb3NlKSB7XG4gICAgdmFyIG9iaklzV3JhcHBlZCA9IG9iaklzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCAnX193cmFwcGVkX18nKSxcbiAgICAgICAgb3RoSXNXcmFwcGVkID0gb3RoSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwgJ19fd3JhcHBlZF9fJyk7XG5cbiAgICBpZiAob2JqSXNXcmFwcGVkIHx8IG90aElzV3JhcHBlZCkge1xuICAgICAgcmV0dXJuIGVxdWFsRnVuYyhvYmpJc1dyYXBwZWQgPyBvYmplY3QudmFsdWUoKSA6IG9iamVjdCwgb3RoSXNXcmFwcGVkID8gb3RoZXIudmFsdWUoKSA6IG90aGVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG4gICAgfVxuICB9XG4gIGlmICghaXNTYW1lVGFnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgLy8gRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gZGV0ZWN0aW5nIGNpcmN1bGFyIHJlZmVyZW5jZXMgc2VlIGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jSk8uXG4gIHN0YWNrQSB8fCAoc3RhY2tBID0gW10pO1xuICBzdGFja0IgfHwgKHN0YWNrQiA9IFtdKTtcblxuICB2YXIgbGVuZ3RoID0gc3RhY2tBLmxlbmd0aDtcbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgaWYgKHN0YWNrQVtsZW5ndGhdID09PSBvYmplY3QpIHtcbiAgICAgIHJldHVybiBzdGFja0JbbGVuZ3RoXSA9PT0gb3RoZXI7XG4gICAgfVxuICB9XG4gIC8vIEFkZCBgb2JqZWN0YCBhbmQgYG90aGVyYCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gIHN0YWNrQS5wdXNoKG9iamVjdCk7XG4gIHN0YWNrQi5wdXNoKG90aGVyKTtcblxuICB2YXIgcmVzdWx0ID0gKG9iaklzQXJyID8gZXF1YWxBcnJheXMgOiBlcXVhbE9iamVjdHMpKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuXG4gIHN0YWNrQS5wb3AoKTtcbiAgc3RhY2tCLnBvcCgpO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgaWYgKHZhbHVlID09PSBvdGhlcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICh2YWx1ZSA9PSBudWxsIHx8IG90aGVyID09IG51bGwgfHwgKCFpc09iamVjdCh2YWx1ZSkgJiYgIWlzT2JqZWN0TGlrZShvdGhlcikpKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXI7XG4gIH1cbiAgcmV0dXJuIGJhc2VJc0VxdWFsRGVlcCh2YWx1ZSwgb3RoZXIsIGJhc2VJc0VxdWFsLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG59XG5cbnZhciBpc0VxdWFsID0gUnguaW50ZXJuYWxzLmlzRXF1YWwgPSBmdW5jdGlvbiAodmFsdWUsIG90aGVyKSB7XG4gIHJldHVybiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIpO1xufTtcblxuICB2YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICAgICAgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cbiAgdmFyIGluaGVyaXRzID0gUnguaW50ZXJuYWxzLmluaGVyaXRzID0gZnVuY3Rpb24gKGNoaWxkLCBwYXJlbnQpIHtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9XG4gICAgX18ucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTtcbiAgICBjaGlsZC5wcm90b3R5cGUgPSBuZXcgX18oKTtcbiAgfTtcblxuICB2YXIgYWRkUHJvcGVydGllcyA9IFJ4LmludGVybmFscy5hZGRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKG9iaikge1xuICAgIGZvcih2YXIgc291cmNlcyA9IFtdLCBpID0gMSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IHNvdXJjZXMucHVzaChhcmd1bWVudHNbaV0pOyB9XG4gICAgZm9yICh2YXIgaWR4ID0gMCwgbG4gPSBzb3VyY2VzLmxlbmd0aDsgaWR4IDwgbG47IGlkeCsrKSB7XG4gICAgICB2YXIgc291cmNlID0gc291cmNlc1tpZHhdO1xuICAgICAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICAgICAgb2JqW3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBSeCBVdGlsc1xuICB2YXIgYWRkUmVmID0gUnguaW50ZXJuYWxzLmFkZFJlZiA9IGZ1bmN0aW9uICh4cywgcikge1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShyLmdldERpc3Bvc2FibGUoKSwgeHMuc3Vic2NyaWJlKG9ic2VydmVyKSk7XG4gICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gYXJyYXlJbml0aWFsaXplKGNvdW50LCBmYWN0b3J5KSB7XG4gICAgdmFyIGEgPSBuZXcgQXJyYXkoY291bnQpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgYVtpXSA9IGZhY3RvcnkoKTtcbiAgICB9XG4gICAgcmV0dXJuIGE7XG4gIH1cblxuICAvKipcbiAgICogUmVwcmVzZW50cyBhIGdyb3VwIG9mIGRpc3Bvc2FibGUgcmVzb3VyY2VzIHRoYXQgYXJlIGRpc3Bvc2VkIHRvZ2V0aGVyLlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIHZhciBDb21wb3NpdGVEaXNwb3NhYmxlID0gUnguQ29tcG9zaXRlRGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IFtdLCBpLCBsZW47XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgYXJncyA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB9XG4gICAgdGhpcy5kaXNwb3NhYmxlcyA9IGFyZ3M7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgdGhpcy5sZW5ndGggPSBhcmdzLmxlbmd0aDtcbiAgfTtcblxuICB2YXIgQ29tcG9zaXRlRGlzcG9zYWJsZVByb3RvdHlwZSA9IENvbXBvc2l0ZURpc3Bvc2FibGUucHJvdG90eXBlO1xuXG4gIC8qKlxuICAgKiBBZGRzIGEgZGlzcG9zYWJsZSB0byB0aGUgQ29tcG9zaXRlRGlzcG9zYWJsZSBvciBkaXNwb3NlcyB0aGUgZGlzcG9zYWJsZSBpZiB0aGUgQ29tcG9zaXRlRGlzcG9zYWJsZSBpcyBkaXNwb3NlZC5cbiAgICogQHBhcmFtIHtNaXhlZH0gaXRlbSBEaXNwb3NhYmxlIHRvIGFkZC5cbiAgICovXG4gIENvbXBvc2l0ZURpc3Bvc2FibGVQcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpZiAodGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICBpdGVtLmRpc3Bvc2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNwb3NhYmxlcy5wdXNoKGl0ZW0pO1xuICAgICAgdGhpcy5sZW5ndGgrKztcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYW5kIGRpc3Bvc2VzIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGEgZGlzcG9zYWJsZSBmcm9tIHRoZSBDb21wb3NpdGVEaXNwb3NhYmxlLlxuICAgKiBAcGFyYW0ge01peGVkfSBpdGVtIERpc3Bvc2FibGUgdG8gcmVtb3ZlLlxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiBmb3VuZDsgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKi9cbiAgQ29tcG9zaXRlRGlzcG9zYWJsZVByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIHZhciBzaG91bGREaXNwb3NlID0gZmFsc2U7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHZhciBpZHggPSB0aGlzLmRpc3Bvc2FibGVzLmluZGV4T2YoaXRlbSk7XG4gICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICBzaG91bGREaXNwb3NlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kaXNwb3NhYmxlcy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgdGhpcy5sZW5ndGgtLTtcbiAgICAgICAgaXRlbS5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaG91bGREaXNwb3NlO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgRGlzcG9zZXMgYWxsIGRpc3Bvc2FibGVzIGluIHRoZSBncm91cCBhbmQgcmVtb3ZlcyB0aGVtIGZyb20gdGhlIGdyb3VwLlxuICAgKi9cbiAgQ29tcG9zaXRlRGlzcG9zYWJsZVByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgdmFyIGxlbiA9IHRoaXMuZGlzcG9zYWJsZXMubGVuZ3RoLCBjdXJyZW50RGlzcG9zYWJsZXMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBjdXJyZW50RGlzcG9zYWJsZXNbaV0gPSB0aGlzLmRpc3Bvc2FibGVzW2ldOyB9XG4gICAgICB0aGlzLmRpc3Bvc2FibGVzID0gW107XG4gICAgICB0aGlzLmxlbmd0aCA9IDA7XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjdXJyZW50RGlzcG9zYWJsZXNbaV0uZGlzcG9zZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUHJvdmlkZXMgYSBzZXQgb2Ygc3RhdGljIG1ldGhvZHMgZm9yIGNyZWF0aW5nIERpc3Bvc2FibGVzLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkaXNwb3NlIEFjdGlvbiB0byBydW4gZHVyaW5nIHRoZSBmaXJzdCBjYWxsIHRvIGRpc3Bvc2UuIFRoZSBhY3Rpb24gaXMgZ3VhcmFudGVlZCB0byBiZSBydW4gYXQgbW9zdCBvbmNlLlxuICAgKi9cbiAgdmFyIERpc3Bvc2FibGUgPSBSeC5EaXNwb3NhYmxlID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgIHRoaXMuYWN0aW9uID0gYWN0aW9uIHx8IG5vb3A7XG4gIH07XG5cbiAgLyoqIFBlcmZvcm1zIHRoZSB0YXNrIG9mIGNsZWFuaW5nIHVwIHJlc291cmNlcy4gKi9cbiAgRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgdGhpcy5hY3Rpb24oKTtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZGlzcG9zYWJsZSBvYmplY3QgdGhhdCBpbnZva2VzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIHdoZW4gZGlzcG9zZWQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGRpc3Bvc2UgQWN0aW9uIHRvIHJ1biBkdXJpbmcgdGhlIGZpcnN0IGNhbGwgdG8gZGlzcG9zZS4gVGhlIGFjdGlvbiBpcyBndWFyYW50ZWVkIHRvIGJlIHJ1biBhdCBtb3N0IG9uY2UuXG4gICAqIEByZXR1cm4ge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB0aGF0IHJ1bnMgdGhlIGdpdmVuIGFjdGlvbiB1cG9uIGRpc3Bvc2FsLlxuICAgKi9cbiAgdmFyIGRpc3Bvc2FibGVDcmVhdGUgPSBEaXNwb3NhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIG5ldyBEaXNwb3NhYmxlKGFjdGlvbik7IH07XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGRpc3Bvc2FibGUgdGhhdCBkb2VzIG5vdGhpbmcgd2hlbiBkaXNwb3NlZC5cbiAgICovXG4gIHZhciBkaXNwb3NhYmxlRW1wdHkgPSBEaXNwb3NhYmxlLmVtcHR5ID0geyBkaXNwb3NlOiBub29wIH07XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlcyB3aGV0aGVyIHRoZSBnaXZlbiBvYmplY3QgaXMgYSBkaXNwb3NhYmxlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBPYmplY3QgdG8gdGVzdCB3aGV0aGVyIGl0IGhhcyBhIGRpc3Bvc2UgbWV0aG9kXG4gICAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGEgZGlzcG9zYWJsZSBvYmplY3QsIGVsc2UgZmFsc2UuXG4gICAqL1xuICB2YXIgaXNEaXNwb3NhYmxlID0gRGlzcG9zYWJsZS5pc0Rpc3Bvc2FibGUgPSBmdW5jdGlvbiAoZCkge1xuICAgIHJldHVybiBkICYmIGlzRnVuY3Rpb24oZC5kaXNwb3NlKTtcbiAgfTtcblxuICB2YXIgY2hlY2tEaXNwb3NlZCA9IERpc3Bvc2FibGUuY2hlY2tEaXNwb3NlZCA9IGZ1bmN0aW9uIChkaXNwb3NhYmxlKSB7XG4gICAgaWYgKGRpc3Bvc2FibGUuaXNEaXNwb3NlZCkgeyB0aHJvdyBuZXcgT2JqZWN0RGlzcG9zZWRFcnJvcigpOyB9XG4gIH07XG5cbiAgdmFyIGRpc3Bvc2FibGVGaXh1cCA9IERpc3Bvc2FibGUuX2ZpeHVwID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgIHJldHVybiBpc0Rpc3Bvc2FibGUocmVzdWx0KSA/IHJlc3VsdCA6IGRpc3Bvc2FibGVFbXB0eTtcbiAgfTtcblxuICAvLyBTaW5nbGUgYXNzaWdubWVudFxuICB2YXIgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUgPSBSeC5TaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB0aGlzLmN1cnJlbnQgPSBudWxsO1xuICB9O1xuICBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZS5wcm90b3R5cGUuZ2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50O1xuICB9O1xuICBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZS5wcm90b3R5cGUuc2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmN1cnJlbnQpIHsgdGhyb3cgbmV3IEVycm9yKCdEaXNwb3NhYmxlIGhhcyBhbHJlYWR5IGJlZW4gYXNzaWduZWQnKTsgfVxuICAgIHZhciBzaG91bGREaXNwb3NlID0gdGhpcy5pc0Rpc3Bvc2VkO1xuICAgICFzaG91bGREaXNwb3NlICYmICh0aGlzLmN1cnJlbnQgPSB2YWx1ZSk7XG4gICAgc2hvdWxkRGlzcG9zZSAmJiB2YWx1ZSAmJiB2YWx1ZS5kaXNwb3NlKCk7XG4gIH07XG4gIFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgdmFyIG9sZCA9IHRoaXMuY3VycmVudDtcbiAgICAgIHRoaXMuY3VycmVudCA9IG51bGw7XG4gICAgICBvbGQgJiYgb2xkLmRpc3Bvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gTXVsdGlwbGUgYXNzaWdubWVudCBkaXNwb3NhYmxlXG4gIHZhciBTZXJpYWxEaXNwb3NhYmxlID0gUnguU2VyaWFsRGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB0aGlzLmN1cnJlbnQgPSBudWxsO1xuICB9O1xuICBTZXJpYWxEaXNwb3NhYmxlLnByb3RvdHlwZS5nZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnQ7XG4gIH07XG4gIFNlcmlhbERpc3Bvc2FibGUucHJvdG90eXBlLnNldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgc2hvdWxkRGlzcG9zZSA9IHRoaXMuaXNEaXNwb3NlZDtcbiAgICBpZiAoIXNob3VsZERpc3Bvc2UpIHtcbiAgICAgIHZhciBvbGQgPSB0aGlzLmN1cnJlbnQ7XG4gICAgICB0aGlzLmN1cnJlbnQgPSB2YWx1ZTtcbiAgICB9XG4gICAgb2xkICYmIG9sZC5kaXNwb3NlKCk7XG4gICAgc2hvdWxkRGlzcG9zZSAmJiB2YWx1ZSAmJiB2YWx1ZS5kaXNwb3NlKCk7XG4gIH07XG4gIFNlcmlhbERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICB2YXIgb2xkID0gdGhpcy5jdXJyZW50O1xuICAgICAgdGhpcy5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgb2xkICYmIG9sZC5kaXNwb3NlKCk7XG4gIH07XG5cbiAgdmFyIEJpbmFyeURpc3Bvc2FibGUgPSBSeC5CaW5hcnlEaXNwb3NhYmxlID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICB0aGlzLl9maXJzdCA9IGZpcnN0O1xuICAgIHRoaXMuX3NlY29uZCA9IHNlY29uZDtcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgfTtcblxuICBCaW5hcnlEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgdmFyIG9sZDEgPSB0aGlzLl9maXJzdDtcbiAgICAgIHRoaXMuX2ZpcnN0ID0gbnVsbDtcbiAgICAgIG9sZDEgJiYgb2xkMS5kaXNwb3NlKCk7XG4gICAgICB2YXIgb2xkMiA9IHRoaXMuX3NlY29uZDtcbiAgICAgIHRoaXMuX3NlY29uZCA9IG51bGw7XG4gICAgICBvbGQyICYmIG9sZDIuZGlzcG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgTkFyeURpc3Bvc2FibGUgPSBSeC5OQXJ5RGlzcG9zYWJsZSA9IGZ1bmN0aW9uIChkaXNwb3NhYmxlcykge1xuICAgIHRoaXMuX2Rpc3Bvc2FibGVzID0gZGlzcG9zYWJsZXM7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gIH07XG5cbiAgTkFyeURpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5fZGlzcG9zYWJsZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdGhpcy5fZGlzcG9zYWJsZXNbaV0uZGlzcG9zZSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5fZGlzcG9zYWJsZXMubGVuZ3RoID0gMDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgYSBkaXNwb3NhYmxlIHJlc291cmNlIHRoYXQgb25seSBkaXNwb3NlcyBpdHMgdW5kZXJseWluZyBkaXNwb3NhYmxlIHJlc291cmNlIHdoZW4gYWxsIGRlcGVuZGVudCBkaXNwb3NhYmxlIG9iamVjdHMgaGF2ZSBiZWVuIGRpc3Bvc2VkLlxuICAgKi9cbiAgdmFyIFJlZkNvdW50RGlzcG9zYWJsZSA9IFJ4LlJlZkNvdW50RGlzcG9zYWJsZSA9IChmdW5jdGlvbiAoKSB7XG5cbiAgICBmdW5jdGlvbiBJbm5lckRpc3Bvc2FibGUoZGlzcG9zYWJsZSkge1xuICAgICAgdGhpcy5kaXNwb3NhYmxlID0gZGlzcG9zYWJsZTtcbiAgICAgIHRoaXMuZGlzcG9zYWJsZS5jb3VudCsrO1xuICAgICAgdGhpcy5pc0lubmVyRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBJbm5lckRpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuZGlzcG9zYWJsZS5pc0Rpc3Bvc2VkICYmICF0aGlzLmlzSW5uZXJEaXNwb3NlZCkge1xuICAgICAgICB0aGlzLmlzSW5uZXJEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZS5jb3VudC0tO1xuICAgICAgICBpZiAodGhpcy5kaXNwb3NhYmxlLmNvdW50ID09PSAwICYmIHRoaXMuZGlzcG9zYWJsZS5pc1ByaW1hcnlEaXNwb3NlZCkge1xuICAgICAgICAgIHRoaXMuZGlzcG9zYWJsZS5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmRpc3Bvc2FibGUudW5kZXJseWluZ0Rpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBSZWZDb3VudERpc3Bvc2FibGUgd2l0aCB0aGUgc3BlY2lmaWVkIGRpc3Bvc2FibGUuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtEaXNwb3NhYmxlfSBkaXNwb3NhYmxlIFVuZGVybHlpbmcgZGlzcG9zYWJsZS5cbiAgICAgICovXG4gICAgZnVuY3Rpb24gUmVmQ291bnREaXNwb3NhYmxlKGRpc3Bvc2FibGUpIHtcbiAgICAgIHRoaXMudW5kZXJseWluZ0Rpc3Bvc2FibGUgPSBkaXNwb3NhYmxlO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmlzUHJpbWFyeURpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlcyB0aGUgdW5kZXJseWluZyBkaXNwb3NhYmxlIG9ubHkgd2hlbiBhbGwgZGVwZW5kZW50IGRpc3Bvc2FibGVzIGhhdmUgYmVlbiBkaXNwb3NlZFxuICAgICAqL1xuICAgIFJlZkNvdW50RGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkICYmICF0aGlzLmlzUHJpbWFyeURpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMuaXNQcmltYXJ5RGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5jb3VudCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy51bmRlcmx5aW5nRGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGRlcGVuZGVudCBkaXNwb3NhYmxlIHRoYXQgd2hlbiBkaXNwb3NlZCBkZWNyZWFzZXMgdGhlIHJlZmNvdW50IG9uIHRoZSB1bmRlcmx5aW5nIGRpc3Bvc2FibGUuXG4gICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IEEgZGVwZW5kZW50IGRpc3Bvc2FibGUgY29udHJpYnV0aW5nIHRvIHRoZSByZWZlcmVuY2UgY291bnQgdGhhdCBtYW5hZ2VzIHRoZSB1bmRlcmx5aW5nIGRpc3Bvc2FibGUncyBsaWZldGltZS5cbiAgICAgKi9cbiAgICBSZWZDb3VudERpc3Bvc2FibGUucHJvdG90eXBlLmdldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc0Rpc3Bvc2VkID8gZGlzcG9zYWJsZUVtcHR5IDogbmV3IElubmVyRGlzcG9zYWJsZSh0aGlzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlZkNvdW50RGlzcG9zYWJsZTtcbiAgfSkoKTtcblxuICB2YXIgU2NoZWR1bGVkSXRlbSA9IFJ4LmludGVybmFscy5TY2hlZHVsZWRJdGVtID0gZnVuY3Rpb24gKHNjaGVkdWxlciwgc3RhdGUsIGFjdGlvbiwgZHVlVGltZSwgY29tcGFyZXIpIHtcbiAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5hY3Rpb24gPSBhY3Rpb247XG4gICAgdGhpcy5kdWVUaW1lID0gZHVlVGltZTtcbiAgICB0aGlzLmNvbXBhcmVyID0gY29tcGFyZXIgfHwgZGVmYXVsdFN1YkNvbXBhcmVyO1xuICAgIHRoaXMuZGlzcG9zYWJsZSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICB9O1xuXG4gIFNjaGVkdWxlZEl0ZW0ucHJvdG90eXBlLmludm9rZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmRpc3Bvc2FibGUuc2V0RGlzcG9zYWJsZSh0aGlzLmludm9rZUNvcmUoKSk7XG4gIH07XG5cbiAgU2NoZWR1bGVkSXRlbS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuY29tcGFyZXIodGhpcy5kdWVUaW1lLCBvdGhlci5kdWVUaW1lKTtcbiAgfTtcblxuICBTY2hlZHVsZWRJdGVtLnByb3RvdHlwZS5pc0NhbmNlbGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwb3NhYmxlLmlzRGlzcG9zZWQ7XG4gIH07XG5cbiAgU2NoZWR1bGVkSXRlbS5wcm90b3R5cGUuaW52b2tlQ29yZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZGlzcG9zYWJsZUZpeHVwKHRoaXMuYWN0aW9uKHRoaXMuc2NoZWR1bGVyLCB0aGlzLnN0YXRlKSk7XG4gIH07XG5cbiAgLyoqIFByb3ZpZGVzIGEgc2V0IG9mIHN0YXRpYyBwcm9wZXJ0aWVzIHRvIGFjY2VzcyBjb21tb25seSB1c2VkIHNjaGVkdWxlcnMuICovXG4gIHZhciBTY2hlZHVsZXIgPSBSeC5TY2hlZHVsZXIgPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgZnVuY3Rpb24gU2NoZWR1bGVyKCkgeyB9XG5cbiAgICAvKiogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBnaXZlbiBvYmplY3QgaXMgYSBzY2hlZHVsZXIgKi9cbiAgICBTY2hlZHVsZXIuaXNTY2hlZHVsZXIgPSBmdW5jdGlvbiAocykge1xuICAgICAgcmV0dXJuIHMgaW5zdGFuY2VvZiBTY2hlZHVsZXI7XG4gICAgfTtcblxuICAgIHZhciBzY2hlZHVsZXJQcm90byA9IFNjaGVkdWxlci5wcm90b3R5cGU7XG5cbiAgICAvKipcbiAgICogU2NoZWR1bGVzIGFuIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICogQHBhcmFtIHN0YXRlIFN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb24gQWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAqL1xuICAgIHNjaGVkdWxlclByb3RvLnNjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gICAgfTtcblxuICAvKipcbiAgICogU2NoZWR1bGVzIGFuIGFjdGlvbiB0byBiZSBleGVjdXRlZCBhZnRlciBkdWVUaW1lLlxuICAgKiBAcGFyYW0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjdGlvbiBBY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkdWVUaW1lIFJlbGF0aXZlIHRpbWUgYWZ0ZXIgd2hpY2ggdG8gZXhlY3V0ZSB0aGUgYWN0aW9uLlxuICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAqL1xuICAgIHNjaGVkdWxlclByb3RvLnNjaGVkdWxlRnV0dXJlID0gZnVuY3Rpb24gKHN0YXRlLCBkdWVUaW1lLCBhY3Rpb24pIHtcbiAgICAgIHZhciBkdCA9IGR1ZVRpbWU7XG4gICAgICBkdCBpbnN0YW5jZW9mIERhdGUgJiYgKGR0ID0gZHQgLSB0aGlzLm5vdygpKTtcbiAgICAgIGR0ID0gU2NoZWR1bGVyLm5vcm1hbGl6ZShkdCk7XG5cbiAgICAgIGlmIChkdCA9PT0gMCkgeyByZXR1cm4gdGhpcy5zY2hlZHVsZShzdGF0ZSwgYWN0aW9uKTsgfVxuXG4gICAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVGdXR1cmUoc3RhdGUsIGR0LCBhY3Rpb24pO1xuICAgIH07XG5cbiAgICBzY2hlZHVsZXJQcm90by5fc2NoZWR1bGVGdXR1cmUgPSBmdW5jdGlvbiAoc3RhdGUsIGR1ZVRpbWUsIGFjdGlvbikge1xuICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgICB9O1xuXG4gICAgLyoqIEdldHMgdGhlIGN1cnJlbnQgdGltZSBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsIG1hY2hpbmUncyBzeXN0ZW0gY2xvY2suICovXG4gICAgU2NoZWR1bGVyLm5vdyA9IGRlZmF1bHROb3c7XG5cbiAgICAvKiogR2V0cyB0aGUgY3VycmVudCB0aW1lIGFjY29yZGluZyB0byB0aGUgbG9jYWwgbWFjaGluZSdzIHN5c3RlbSBjbG9jay4gKi9cbiAgICBTY2hlZHVsZXIucHJvdG90eXBlLm5vdyA9IGRlZmF1bHROb3c7XG5cbiAgICAvKipcbiAgICAgKiBOb3JtYWxpemVzIHRoZSBzcGVjaWZpZWQgVGltZVNwYW4gdmFsdWUgdG8gYSBwb3NpdGl2ZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdGltZVNwYW4gVGhlIHRpbWUgc3BhbiB2YWx1ZSB0byBub3JtYWxpemUuXG4gICAgICogQHJldHVybnMge051bWJlcn0gVGhlIHNwZWNpZmllZCBUaW1lU3BhbiB2YWx1ZSBpZiBpdCBpcyB6ZXJvIG9yIHBvc2l0aXZlOyBvdGhlcndpc2UsIDBcbiAgICAgKi9cbiAgICBTY2hlZHVsZXIubm9ybWFsaXplID0gZnVuY3Rpb24gKHRpbWVTcGFuKSB7XG4gICAgICB0aW1lU3BhbiA8IDAgJiYgKHRpbWVTcGFuID0gMCk7XG4gICAgICByZXR1cm4gdGltZVNwYW47XG4gICAgfTtcblxuICAgIHJldHVybiBTY2hlZHVsZXI7XG4gIH0oKSk7XG5cbiAgdmFyIG5vcm1hbGl6ZVRpbWUgPSBTY2hlZHVsZXIubm9ybWFsaXplLCBpc1NjaGVkdWxlciA9IFNjaGVkdWxlci5pc1NjaGVkdWxlcjtcblxuICAoZnVuY3Rpb24gKHNjaGVkdWxlclByb3RvKSB7XG5cbiAgICBmdW5jdGlvbiBpbnZva2VSZWNJbW1lZGlhdGUoc2NoZWR1bGVyLCBwYWlyKSB7XG4gICAgICB2YXIgc3RhdGUgPSBwYWlyWzBdLCBhY3Rpb24gPSBwYWlyWzFdLCBncm91cCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG4gICAgICBhY3Rpb24oc3RhdGUsIGlubmVyQWN0aW9uKTtcbiAgICAgIHJldHVybiBncm91cDtcblxuICAgICAgZnVuY3Rpb24gaW5uZXJBY3Rpb24oc3RhdGUyKSB7XG4gICAgICAgIHZhciBpc0FkZGVkID0gZmFsc2UsIGlzRG9uZSA9IGZhbHNlO1xuXG4gICAgICAgIHZhciBkID0gc2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlMiwgc2NoZWR1bGVXb3JrKTtcbiAgICAgICAgaWYgKCFpc0RvbmUpIHtcbiAgICAgICAgICBncm91cC5hZGQoZCk7XG4gICAgICAgICAgaXNBZGRlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzY2hlZHVsZVdvcmsoXywgc3RhdGUzKSB7XG4gICAgICAgICAgaWYgKGlzQWRkZWQpIHtcbiAgICAgICAgICAgIGdyb3VwLnJlbW92ZShkKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXNEb25lID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWN0aW9uKHN0YXRlMywgaW5uZXJBY3Rpb24pO1xuICAgICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnZva2VSZWNEYXRlKHNjaGVkdWxlciwgcGFpcikge1xuICAgICAgdmFyIHN0YXRlID0gcGFpclswXSwgYWN0aW9uID0gcGFpclsxXSwgZ3JvdXAgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuICAgICAgYWN0aW9uKHN0YXRlLCBpbm5lckFjdGlvbik7XG4gICAgICByZXR1cm4gZ3JvdXA7XG5cbiAgICAgIGZ1bmN0aW9uIGlubmVyQWN0aW9uKHN0YXRlMiwgZHVlVGltZTEpIHtcbiAgICAgICAgdmFyIGlzQWRkZWQgPSBmYWxzZSwgaXNEb25lID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIGQgPSBzY2hlZHVsZXIuc2NoZWR1bGVGdXR1cmUoc3RhdGUyLCBkdWVUaW1lMSwgc2NoZWR1bGVXb3JrKTtcbiAgICAgICAgaWYgKCFpc0RvbmUpIHtcbiAgICAgICAgICBncm91cC5hZGQoZCk7XG4gICAgICAgICAgaXNBZGRlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzY2hlZHVsZVdvcmsoXywgc3RhdGUzKSB7XG4gICAgICAgICAgaWYgKGlzQWRkZWQpIHtcbiAgICAgICAgICAgIGdyb3VwLnJlbW92ZShkKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXNEb25lID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWN0aW9uKHN0YXRlMywgaW5uZXJBY3Rpb24pO1xuICAgICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYW4gYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIHJlY3Vyc2l2ZWx5LlxuICAgICAqIEBwYXJhbSB7TWl4ZWR9IHN0YXRlIFN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjdGlvbiBBY3Rpb24gdG8gZXhlY3V0ZSByZWN1cnNpdmVseS4gVGhlIGxhc3QgcGFyYW1ldGVyIHBhc3NlZCB0byB0aGUgYWN0aW9uIGlzIHVzZWQgdG8gdHJpZ2dlciByZWN1cnNpdmUgc2NoZWR1bGluZyBvZiB0aGUgYWN0aW9uLCBwYXNzaW5nIGluIHJlY3Vyc2l2ZSBpbnZvY2F0aW9uIHN0YXRlLlxuICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBUaGUgZGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCBhY3Rpb24gKGJlc3QgZWZmb3J0KS5cbiAgICAgKi9cbiAgICBzY2hlZHVsZXJQcm90by5zY2hlZHVsZVJlY3Vyc2l2ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZShbc3RhdGUsIGFjdGlvbl0sIGludm9rZVJlY0ltbWVkaWF0ZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhbiBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgcmVjdXJzaXZlbHkgYWZ0ZXIgYSBzcGVjaWZpZWQgcmVsYXRpdmUgb3IgYWJzb2x1dGUgZHVlIHRpbWUuXG4gICAgICogQHBhcmFtIHtNaXhlZH0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBleGVjdXRlIHJlY3Vyc2l2ZWx5LiBUaGUgbGFzdCBwYXJhbWV0ZXIgcGFzc2VkIHRvIHRoZSBhY3Rpb24gaXMgdXNlZCB0byB0cmlnZ2VyIHJlY3Vyc2l2ZSBzY2hlZHVsaW5nIG9mIHRoZSBhY3Rpb24sIHBhc3NpbmcgaW4gdGhlIHJlY3Vyc2l2ZSBkdWUgdGltZSBhbmQgaW52b2NhdGlvbiBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlciB8IERhdGV9IGR1ZVRpbWUgUmVsYXRpdmUgb3IgYWJzb2x1dGUgdGltZSBhZnRlciB3aGljaCB0byBleGVjdXRlIHRoZSBhY3Rpb24gZm9yIHRoZSBmaXJzdCB0aW1lLlxuICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBUaGUgZGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCBhY3Rpb24gKGJlc3QgZWZmb3J0KS5cbiAgICAgKi9cbiAgICBzY2hlZHVsZXJQcm90by5zY2hlZHVsZVJlY3Vyc2l2ZUZ1dHVyZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZUZ1dHVyZShbc3RhdGUsIGFjdGlvbl0sIGR1ZVRpbWUsIGludm9rZVJlY0RhdGUpO1xuICAgIH07XG5cbiAgfShTY2hlZHVsZXIucHJvdG90eXBlKSk7XG5cbiAgKGZ1bmN0aW9uIChzY2hlZHVsZXJQcm90bykge1xuXG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGEgcGVyaW9kaWMgcGllY2Ugb2Ygd29yayBieSBkeW5hbWljYWxseSBkaXNjb3ZlcmluZyB0aGUgc2NoZWR1bGVyJ3MgY2FwYWJpbGl0aWVzLiBUaGUgcGVyaW9kaWMgdGFzayB3aWxsIGJlIHNjaGVkdWxlZCB1c2luZyB3aW5kb3cuc2V0SW50ZXJ2YWwgZm9yIHRoZSBiYXNlIGltcGxlbWVudGF0aW9uLlxuICAgICAqIEBwYXJhbSB7TWl4ZWR9IHN0YXRlIEluaXRpYWwgc3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdXBvbiB0aGUgZmlyc3QgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwZXJpb2QgUGVyaW9kIGZvciBydW5uaW5nIHRoZSB3b3JrIHBlcmlvZGljYWxseS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb24gQWN0aW9uIHRvIGJlIGV4ZWN1dGVkLCBwb3RlbnRpYWxseSB1cGRhdGluZyB0aGUgc3RhdGUuXG4gICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIHJlY3VycmluZyBhY3Rpb24gKGJlc3QgZWZmb3J0KS5cbiAgICAgKi9cbiAgICBzY2hlZHVsZXJQcm90by5zY2hlZHVsZVBlcmlvZGljID0gZnVuY3Rpb24oc3RhdGUsIHBlcmlvZCwgYWN0aW9uKSB7XG4gICAgICBpZiAodHlwZW9mIHJvb3Quc2V0SW50ZXJ2YWwgPT09ICd1bmRlZmluZWQnKSB7IHRocm93IG5ldyBOb3RTdXBwb3J0ZWRFcnJvcigpOyB9XG4gICAgICBwZXJpb2QgPSBub3JtYWxpemVUaW1lKHBlcmlvZCk7XG4gICAgICB2YXIgcyA9IHN0YXRlLCBpZCA9IHJvb3Quc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBzID0gYWN0aW9uKHMpOyB9LCBwZXJpb2QpO1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVDcmVhdGUoZnVuY3Rpb24gKCkgeyByb290LmNsZWFySW50ZXJ2YWwoaWQpOyB9KTtcbiAgICB9O1xuXG4gIH0oU2NoZWR1bGVyLnByb3RvdHlwZSkpO1xuXG4gIC8qKiBHZXRzIGEgc2NoZWR1bGVyIHRoYXQgc2NoZWR1bGVzIHdvcmsgaW1tZWRpYXRlbHkgb24gdGhlIGN1cnJlbnQgdGhyZWFkLiAqL1xuICAgdmFyIEltbWVkaWF0ZVNjaGVkdWxlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSW1tZWRpYXRlU2NoZWR1bGVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEltbWVkaWF0ZVNjaGVkdWxlcigpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEltbWVkaWF0ZVNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVGaXh1cChhY3Rpb24odGhpcywgc3RhdGUpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEltbWVkaWF0ZVNjaGVkdWxlcjtcbiAgfShTY2hlZHVsZXIpKTtcblxuICB2YXIgaW1tZWRpYXRlU2NoZWR1bGVyID0gU2NoZWR1bGVyLmltbWVkaWF0ZSA9IG5ldyBJbW1lZGlhdGVTY2hlZHVsZXIoKTtcblxuICAvKipcbiAgICogR2V0cyBhIHNjaGVkdWxlciB0aGF0IHNjaGVkdWxlcyB3b3JrIGFzIHNvb24gYXMgcG9zc2libGUgb24gdGhlIGN1cnJlbnQgdGhyZWFkLlxuICAgKi9cbiAgdmFyIEN1cnJlbnRUaHJlYWRTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIHZhciBxdWV1ZTtcblxuICAgIGZ1bmN0aW9uIHJ1blRyYW1wb2xpbmUgKCkge1xuICAgICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIGl0ZW0gPSBxdWV1ZS5kZXF1ZXVlKCk7XG4gICAgICAgICFpdGVtLmlzQ2FuY2VsbGVkKCkgJiYgaXRlbS5pbnZva2UoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpbmhlcml0cyhDdXJyZW50VGhyZWFkU2NoZWR1bGVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEN1cnJlbnRUaHJlYWRTY2hlZHVsZXIoKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBDdXJyZW50VGhyZWFkU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICB2YXIgc2kgPSBuZXcgU2NoZWR1bGVkSXRlbSh0aGlzLCBzdGF0ZSwgYWN0aW9uLCB0aGlzLm5vdygpKTtcblxuICAgICAgaWYgKCFxdWV1ZSkge1xuICAgICAgICBxdWV1ZSA9IG5ldyBQcmlvcml0eVF1ZXVlKDQpO1xuICAgICAgICBxdWV1ZS5lbnF1ZXVlKHNpKTtcblxuICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2gocnVuVHJhbXBvbGluZSkoKTtcbiAgICAgICAgcXVldWUgPSBudWxsO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyB0aHJvd2VyKHJlc3VsdC5lKTsgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWUuZW5xdWV1ZShzaSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2kuZGlzcG9zYWJsZTtcbiAgICB9O1xuXG4gICAgQ3VycmVudFRocmVhZFNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGVSZXF1aXJlZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICFxdWV1ZTsgfTtcblxuICAgIHJldHVybiBDdXJyZW50VGhyZWFkU2NoZWR1bGVyO1xuICB9KFNjaGVkdWxlcikpO1xuXG4gIHZhciBjdXJyZW50VGhyZWFkU2NoZWR1bGVyID0gU2NoZWR1bGVyLmN1cnJlbnRUaHJlYWQgPSBuZXcgQ3VycmVudFRocmVhZFNjaGVkdWxlcigpO1xuXG4gIHZhciBTY2hlZHVsZVBlcmlvZGljUmVjdXJzaXZlID0gUnguaW50ZXJuYWxzLlNjaGVkdWxlUGVyaW9kaWNSZWN1cnNpdmUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVRpY2soc2VsZikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIHRpY2soY29tbWFuZCwgcmVjdXJzZSkge1xuICAgICAgICByZWN1cnNlKDAsIHNlbGYuX3BlcmlvZCk7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRyeUNhdGNoKHNlbGYuX2FjdGlvbikoc2VsZi5fc3RhdGUpO1xuICAgICAgICBpZiAoc3RhdGUgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgc2VsZi5fY2FuY2VsLmRpc3Bvc2UoKTtcbiAgICAgICAgICB0aHJvd2VyKHN0YXRlLmUpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuX3N0YXRlID0gc3RhdGU7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNjaGVkdWxlUGVyaW9kaWNSZWN1cnNpdmUoc2NoZWR1bGVyLCBzdGF0ZSwgcGVyaW9kLCBhY3Rpb24pIHtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLl9wZXJpb2QgPSBwZXJpb2Q7XG4gICAgICB0aGlzLl9hY3Rpb24gPSBhY3Rpb247XG4gICAgfVxuXG4gICAgU2NoZWR1bGVQZXJpb2RpY1JlY3Vyc2l2ZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgdGhpcy5fY2FuY2VsID0gZDtcbiAgICAgIGQuc2V0RGlzcG9zYWJsZSh0aGlzLl9zY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUoMCwgdGhpcy5fcGVyaW9kLCBjcmVhdGVUaWNrKHRoaXMpKSk7XG5cbiAgICAgIHJldHVybiBkO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2NoZWR1bGVQZXJpb2RpY1JlY3Vyc2l2ZTtcbiAgfSgpKTtcblxuICB2YXIgc2NoZWR1bGVNZXRob2QsIGNsZWFyTWV0aG9kO1xuXG4gIHZhciBsb2NhbFRpbWVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbG9jYWxTZXRUaW1lb3V0LCBsb2NhbENsZWFyVGltZW91dCA9IG5vb3A7XG4gICAgaWYgKCEhcm9vdC5zZXRUaW1lb3V0KSB7XG4gICAgICBsb2NhbFNldFRpbWVvdXQgPSByb290LnNldFRpbWVvdXQ7XG4gICAgICBsb2NhbENsZWFyVGltZW91dCA9IHJvb3QuY2xlYXJUaW1lb3V0O1xuICAgIH0gZWxzZSBpZiAoISFyb290LldTY3JpcHQpIHtcbiAgICAgIGxvY2FsU2V0VGltZW91dCA9IGZ1bmN0aW9uIChmbiwgdGltZSkge1xuICAgICAgICByb290LldTY3JpcHQuU2xlZXAodGltZSk7XG4gICAgICAgIGZuKCk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgTm90U3VwcG9ydGVkRXJyb3IoKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc2V0VGltZW91dDogbG9jYWxTZXRUaW1lb3V0LFxuICAgICAgY2xlYXJUaW1lb3V0OiBsb2NhbENsZWFyVGltZW91dFxuICAgIH07XG4gIH0oKSk7XG4gIHZhciBsb2NhbFNldFRpbWVvdXQgPSBsb2NhbFRpbWVyLnNldFRpbWVvdXQsXG4gICAgbG9jYWxDbGVhclRpbWVvdXQgPSBsb2NhbFRpbWVyLmNsZWFyVGltZW91dDtcblxuICAoZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIG5leHRIYW5kbGUgPSAxLCB0YXNrc0J5SGFuZGxlID0ge30sIGN1cnJlbnRseVJ1bm5pbmcgPSBmYWxzZTtcblxuICAgIGNsZWFyTWV0aG9kID0gZnVuY3Rpb24gKGhhbmRsZSkge1xuICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcnVuVGFzayhoYW5kbGUpIHtcbiAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nKSB7XG4gICAgICAgIGxvY2FsU2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJ1blRhc2soaGFuZGxlKTsgfSwgMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGFzaykoKTtcbiAgICAgICAgICBjbGVhck1ldGhvZChoYW5kbGUpO1xuICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyB0aHJvd2VyKHJlc3VsdC5lKTsgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHJlTmF0aXZlID0gbmV3IFJlZ0V4cCgnXicgK1xuICAgICAgU3RyaW5nKHRvU3RyaW5nKVxuICAgICAgICAucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKVxuICAgICAgICAucmVwbGFjZSgvdG9TdHJpbmd8IGZvciBbXlxcXV0rL2csICcuKj8nKSArICckJ1xuICAgICk7XG5cbiAgICB2YXIgc2V0SW1tZWRpYXRlID0gdHlwZW9mIChzZXRJbW1lZGlhdGUgPSBmcmVlR2xvYmFsICYmIG1vZHVsZUV4cG9ydHMgJiYgZnJlZUdsb2JhbC5zZXRJbW1lZGlhdGUpID09ICdmdW5jdGlvbicgJiZcbiAgICAgICFyZU5hdGl2ZS50ZXN0KHNldEltbWVkaWF0ZSkgJiYgc2V0SW1tZWRpYXRlO1xuXG4gICAgZnVuY3Rpb24gcG9zdE1lc3NhZ2VTdXBwb3J0ZWQgKCkge1xuICAgICAgLy8gRW5zdXJlIG5vdCBpbiBhIHdvcmtlclxuICAgICAgaWYgKCFyb290LnBvc3RNZXNzYWdlIHx8IHJvb3QuaW1wb3J0U2NyaXB0cykgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAgIHZhciBpc0FzeW5jID0gZmFsc2UsIG9sZEhhbmRsZXIgPSByb290Lm9ubWVzc2FnZTtcbiAgICAgIC8vIFRlc3QgZm9yIGFzeW5jXG4gICAgICByb290Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpIHsgaXNBc3luYyA9IHRydWU7IH07XG4gICAgICByb290LnBvc3RNZXNzYWdlKCcnLCAnKicpO1xuICAgICAgcm9vdC5vbm1lc3NhZ2UgPSBvbGRIYW5kbGVyO1xuXG4gICAgICByZXR1cm4gaXNBc3luYztcbiAgICB9XG5cbiAgICAvLyBVc2UgaW4gb3JkZXIsIHNldEltbWVkaWF0ZSwgbmV4dFRpY2ssIHBvc3RNZXNzYWdlLCBNZXNzYWdlQ2hhbm5lbCwgc2NyaXB0IHJlYWR5c3RhdGVjaGFuZ2VkLCBzZXRUaW1lb3V0XG4gICAgaWYgKGlzRnVuY3Rpb24oc2V0SW1tZWRpYXRlKSkge1xuICAgICAgc2NoZWR1bGVNZXRob2QgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIHZhciBpZCA9IG5leHRIYW5kbGUrKztcbiAgICAgICAgdGFza3NCeUhhbmRsZVtpZF0gPSBhY3Rpb247XG4gICAgICAgIHNldEltbWVkaWF0ZShmdW5jdGlvbiAoKSB7IHJ1blRhc2soaWQpOyB9KTtcblxuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHt9LnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJykge1xuICAgICAgc2NoZWR1bGVNZXRob2QgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIHZhciBpZCA9IG5leHRIYW5kbGUrKztcbiAgICAgICAgdGFza3NCeUhhbmRsZVtpZF0gPSBhY3Rpb247XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5UYXNrKGlkKTsgfSk7XG5cbiAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHBvc3RNZXNzYWdlU3VwcG9ydGVkKCkpIHtcbiAgICAgIHZhciBNU0dfUFJFRklYID0gJ21zLnJ4LnNjaGVkdWxlJyArIE1hdGgucmFuZG9tKCk7XG5cbiAgICAgIHZhciBvbkdsb2JhbFBvc3RNZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIE9ubHkgaWYgd2UncmUgYSBtYXRjaCB0byBhdm9pZCBhbnkgb3RoZXIgZ2xvYmFsIGV2ZW50c1xuICAgICAgICBpZiAodHlwZW9mIGV2ZW50LmRhdGEgPT09ICdzdHJpbmcnICYmIGV2ZW50LmRhdGEuc3Vic3RyaW5nKDAsIE1TR19QUkVGSVgubGVuZ3RoKSA9PT0gTVNHX1BSRUZJWCkge1xuICAgICAgICAgIHJ1blRhc2soZXZlbnQuZGF0YS5zdWJzdHJpbmcoTVNHX1BSRUZJWC5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcm9vdC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25HbG9iYWxQb3N0TWVzc2FnZSwgZmFsc2UpO1xuXG4gICAgICBzY2hlZHVsZU1ldGhvZCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgdmFyIGlkID0gbmV4dEhhbmRsZSsrO1xuICAgICAgICB0YXNrc0J5SGFuZGxlW2lkXSA9IGFjdGlvbjtcbiAgICAgICAgcm9vdC5wb3N0TWVzc2FnZShNU0dfUFJFRklYICsgY3VycmVudElkLCAnKicpO1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoISFyb290Lk1lc3NhZ2VDaGFubmVsKSB7XG4gICAgICB2YXIgY2hhbm5lbCA9IG5ldyByb290Lk1lc3NhZ2VDaGFubmVsKCk7XG5cbiAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsgcnVuVGFzayhlLmRhdGEpOyB9O1xuXG4gICAgICBzY2hlZHVsZU1ldGhvZCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgdmFyIGlkID0gbmV4dEhhbmRsZSsrO1xuICAgICAgICB0YXNrc0J5SGFuZGxlW2lkXSA9IGFjdGlvbjtcbiAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShpZCk7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICgnZG9jdW1lbnQnIGluIHJvb3QgJiYgJ29ucmVhZHlzdGF0ZWNoYW5nZScgaW4gcm9vdC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSkge1xuXG4gICAgICBzY2hlZHVsZU1ldGhvZCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgdmFyIHNjcmlwdEVsZW1lbnQgPSByb290LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICB2YXIgaWQgPSBuZXh0SGFuZGxlKys7XG4gICAgICAgIHRhc2tzQnlIYW5kbGVbaWRdID0gYWN0aW9uO1xuXG4gICAgICAgIHNjcmlwdEVsZW1lbnQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJ1blRhc2soaWQpO1xuICAgICAgICAgIHNjcmlwdEVsZW1lbnQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICBzY3JpcHRFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0RWxlbWVudCk7XG4gICAgICAgICAgc2NyaXB0RWxlbWVudCA9IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHJvb3QuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHNjcmlwdEVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9O1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHNjaGVkdWxlTWV0aG9kID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICB2YXIgaWQgPSBuZXh0SGFuZGxlKys7XG4gICAgICAgIHRhc2tzQnlIYW5kbGVbaWRdID0gYWN0aW9uO1xuICAgICAgICBsb2NhbFNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJ1blRhc2soaWQpO1xuICAgICAgICB9LCAwKTtcblxuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9O1xuICAgIH1cbiAgfSgpKTtcblxuICAvKipcbiAgICogR2V0cyBhIHNjaGVkdWxlciB0aGF0IHNjaGVkdWxlcyB3b3JrIHZpYSBhIHRpbWVkIGNhbGxiYWNrIGJhc2VkIHVwb24gcGxhdGZvcm0uXG4gICAqL1xuICAgdmFyIERlZmF1bHRTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgICBpbmhlcml0cyhEZWZhdWx0U2NoZWR1bGVyLCBfX3N1cGVyX18pO1xuICAgICBmdW5jdGlvbiBEZWZhdWx0U2NoZWR1bGVyKCkge1xuICAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICB9XG5cbiAgICAgZnVuY3Rpb24gc2NoZWR1bGVBY3Rpb24oZGlzcG9zYWJsZSwgYWN0aW9uLCBzY2hlZHVsZXIsIHN0YXRlKSB7XG4gICAgICAgcmV0dXJuIGZ1bmN0aW9uIHNjaGVkdWxlKCkge1xuICAgICAgICAgZGlzcG9zYWJsZS5zZXREaXNwb3NhYmxlKERpc3Bvc2FibGUuX2ZpeHVwKGFjdGlvbihzY2hlZHVsZXIsIHN0YXRlKSkpO1xuICAgICAgIH07XG4gICAgIH1cblxuICAgICBmdW5jdGlvbiBDbGVhckRpc3Bvc2FibGUoaWQpIHtcbiAgICAgICB0aGlzLl9pZCA9IGlkO1xuICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICB9XG5cbiAgICAgQ2xlYXJEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgY2xlYXJNZXRob2QodGhpcy5faWQpO1xuICAgICAgIH1cbiAgICAgfTtcblxuICAgICBmdW5jdGlvbiBMb2NhbENsZWFyRGlzcG9zYWJsZShpZCkge1xuICAgICAgIHRoaXMuX2lkID0gaWQ7XG4gICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgIH1cblxuICAgICBMb2NhbENsZWFyRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgIGxvY2FsQ2xlYXJUaW1lb3V0KHRoaXMuX2lkKTtcbiAgICAgICB9XG4gICAgIH07XG5cbiAgICBEZWZhdWx0U2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICB2YXIgZGlzcG9zYWJsZSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLFxuICAgICAgICAgIGlkID0gc2NoZWR1bGVNZXRob2Qoc2NoZWR1bGVBY3Rpb24oZGlzcG9zYWJsZSwgYWN0aW9uLCB0aGlzLCBzdGF0ZSkpO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKGRpc3Bvc2FibGUsIG5ldyBDbGVhckRpc3Bvc2FibGUoaWQpKTtcbiAgICB9O1xuXG4gICAgRGVmYXVsdFNjaGVkdWxlci5wcm90b3R5cGUuX3NjaGVkdWxlRnV0dXJlID0gZnVuY3Rpb24gKHN0YXRlLCBkdWVUaW1lLCBhY3Rpb24pIHtcbiAgICAgIGlmIChkdWVUaW1lID09PSAwKSB7IHJldHVybiB0aGlzLnNjaGVkdWxlKHN0YXRlLCBhY3Rpb24pOyB9XG4gICAgICB2YXIgZGlzcG9zYWJsZSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLFxuICAgICAgICAgIGlkID0gbG9jYWxTZXRUaW1lb3V0KHNjaGVkdWxlQWN0aW9uKGRpc3Bvc2FibGUsIGFjdGlvbiwgdGhpcywgc3RhdGUpLCBkdWVUaW1lKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShkaXNwb3NhYmxlLCBuZXcgTG9jYWxDbGVhckRpc3Bvc2FibGUoaWQpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIERlZmF1bHRTY2hlZHVsZXI7XG4gIH0oU2NoZWR1bGVyKSk7XG5cbiAgdmFyIGRlZmF1bHRTY2hlZHVsZXIgPSBTY2hlZHVsZXJbJ2RlZmF1bHQnXSA9IFNjaGVkdWxlci5hc3luYyA9IG5ldyBEZWZhdWx0U2NoZWR1bGVyKCk7XG5cbiAgZnVuY3Rpb24gSW5kZXhlZEl0ZW0oaWQsIHZhbHVlKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgfVxuXG4gIEluZGV4ZWRJdGVtLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICB2YXIgYyA9IHRoaXMudmFsdWUuY29tcGFyZVRvKG90aGVyLnZhbHVlKTtcbiAgICBjID09PSAwICYmIChjID0gdGhpcy5pZCAtIG90aGVyLmlkKTtcbiAgICByZXR1cm4gYztcbiAgfTtcblxuICB2YXIgUHJpb3JpdHlRdWV1ZSA9IFJ4LmludGVybmFscy5Qcmlvcml0eVF1ZXVlID0gZnVuY3Rpb24gKGNhcGFjaXR5KSB7XG4gICAgdGhpcy5pdGVtcyA9IG5ldyBBcnJheShjYXBhY2l0eSk7XG4gICAgdGhpcy5sZW5ndGggPSAwO1xuICB9O1xuXG4gIHZhciBwcmlvcml0eVByb3RvID0gUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGU7XG4gIHByaW9yaXR5UHJvdG8uaXNIaWdoZXJQcmlvcml0eSA9IGZ1bmN0aW9uIChsZWZ0LCByaWdodCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1zW2xlZnRdLmNvbXBhcmVUbyh0aGlzLml0ZW1zW3JpZ2h0XSkgPCAwO1xuICB9O1xuXG4gIHByaW9yaXR5UHJvdG8ucGVyY29sYXRlID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgaWYgKGluZGV4ID49IHRoaXMubGVuZ3RoIHx8IGluZGV4IDwgMCkgeyByZXR1cm47IH1cbiAgICB2YXIgcGFyZW50ID0gaW5kZXggLSAxID4+IDE7XG4gICAgaWYgKHBhcmVudCA8IDAgfHwgcGFyZW50ID09PSBpbmRleCkgeyByZXR1cm47IH1cbiAgICBpZiAodGhpcy5pc0hpZ2hlclByaW9yaXR5KGluZGV4LCBwYXJlbnQpKSB7XG4gICAgICB2YXIgdGVtcCA9IHRoaXMuaXRlbXNbaW5kZXhdO1xuICAgICAgdGhpcy5pdGVtc1tpbmRleF0gPSB0aGlzLml0ZW1zW3BhcmVudF07XG4gICAgICB0aGlzLml0ZW1zW3BhcmVudF0gPSB0ZW1wO1xuICAgICAgdGhpcy5wZXJjb2xhdGUocGFyZW50KTtcbiAgICB9XG4gIH07XG5cbiAgcHJpb3JpdHlQcm90by5oZWFwaWZ5ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgK2luZGV4IHx8IChpbmRleCA9IDApO1xuICAgIGlmIChpbmRleCA+PSB0aGlzLmxlbmd0aCB8fCBpbmRleCA8IDApIHsgcmV0dXJuOyB9XG4gICAgdmFyIGxlZnQgPSAyICogaW5kZXggKyAxLFxuICAgICAgICByaWdodCA9IDIgKiBpbmRleCArIDIsXG4gICAgICAgIGZpcnN0ID0gaW5kZXg7XG4gICAgaWYgKGxlZnQgPCB0aGlzLmxlbmd0aCAmJiB0aGlzLmlzSGlnaGVyUHJpb3JpdHkobGVmdCwgZmlyc3QpKSB7XG4gICAgICBmaXJzdCA9IGxlZnQ7XG4gICAgfVxuICAgIGlmIChyaWdodCA8IHRoaXMubGVuZ3RoICYmIHRoaXMuaXNIaWdoZXJQcmlvcml0eShyaWdodCwgZmlyc3QpKSB7XG4gICAgICBmaXJzdCA9IHJpZ2h0O1xuICAgIH1cbiAgICBpZiAoZmlyc3QgIT09IGluZGV4KSB7XG4gICAgICB2YXIgdGVtcCA9IHRoaXMuaXRlbXNbaW5kZXhdO1xuICAgICAgdGhpcy5pdGVtc1tpbmRleF0gPSB0aGlzLml0ZW1zW2ZpcnN0XTtcbiAgICAgIHRoaXMuaXRlbXNbZmlyc3RdID0gdGVtcDtcbiAgICAgIHRoaXMuaGVhcGlmeShmaXJzdCk7XG4gICAgfVxuICB9O1xuXG4gIHByaW9yaXR5UHJvdG8ucGVlayA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuaXRlbXNbMF0udmFsdWU7IH07XG5cbiAgcHJpb3JpdHlQcm90by5yZW1vdmVBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIHRoaXMuaXRlbXNbaW5kZXhdID0gdGhpcy5pdGVtc1stLXRoaXMubGVuZ3RoXTtcbiAgICB0aGlzLml0ZW1zW3RoaXMubGVuZ3RoXSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmhlYXBpZnkoKTtcbiAgfTtcblxuICBwcmlvcml0eVByb3RvLmRlcXVldWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlc3VsdCA9IHRoaXMucGVlaygpO1xuICAgIHRoaXMucmVtb3ZlQXQoMCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBwcmlvcml0eVByb3RvLmVucXVldWUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIHZhciBpbmRleCA9IHRoaXMubGVuZ3RoKys7XG4gICAgdGhpcy5pdGVtc1tpbmRleF0gPSBuZXcgSW5kZXhlZEl0ZW0oUHJpb3JpdHlRdWV1ZS5jb3VudCsrLCBpdGVtKTtcbiAgICB0aGlzLnBlcmNvbGF0ZShpbmRleCk7XG4gIH07XG5cbiAgcHJpb3JpdHlQcm90by5yZW1vdmUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuaXRlbXNbaV0udmFsdWUgPT09IGl0ZW0pIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBdChpKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbiAgUHJpb3JpdHlRdWV1ZS5jb3VudCA9IDA7XG5cbiAgLyoqXG4gICAqICBSZXByZXNlbnRzIGEgbm90aWZpY2F0aW9uIHRvIGFuIG9ic2VydmVyLlxuICAgKi9cbiAgdmFyIE5vdGlmaWNhdGlvbiA9IFJ4Lk5vdGlmaWNhdGlvbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTm90aWZpY2F0aW9uKCkge1xuXG4gICAgfVxuXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0ID0gZnVuY3Rpb24gKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gICAgfTtcblxuICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdE9ic2VydmVyID0gZnVuY3Rpb24gKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEludm9rZXMgdGhlIGRlbGVnYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG5vdGlmaWNhdGlvbiBvciB0aGUgb2JzZXJ2ZXIncyBtZXRob2QgY29ycmVzcG9uZGluZyB0byB0aGUgbm90aWZpY2F0aW9uIGFuZCByZXR1cm5zIHRoZSBwcm9kdWNlZCByZXN1bHQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbiB8IE9ic2VydmVyfSBvYnNlcnZlck9yT25OZXh0IEZ1bmN0aW9uIHRvIGludm9rZSBmb3IgYW4gT25OZXh0IG5vdGlmaWNhdGlvbiBvciBPYnNlcnZlciB0byBpbnZva2UgdGhlIG5vdGlmaWNhdGlvbiBvbi4uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25FcnJvciBGdW5jdGlvbiB0byBpbnZva2UgZm9yIGFuIE9uRXJyb3Igbm90aWZpY2F0aW9uLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uQ29tcGxldGVkIEZ1bmN0aW9uIHRvIGludm9rZSBmb3IgYW4gT25Db21wbGV0ZWQgbm90aWZpY2F0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBbnl9IFJlc3VsdCBwcm9kdWNlZCBieSB0aGUgb2JzZXJ2YXRpb24uXG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS5hY2NlcHQgPSBmdW5jdGlvbiAob2JzZXJ2ZXJPck9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICAgIHJldHVybiBvYnNlcnZlck9yT25OZXh0ICYmIHR5cGVvZiBvYnNlcnZlck9yT25OZXh0ID09PSAnb2JqZWN0JyA/XG4gICAgICAgIHRoaXMuX2FjY2VwdE9ic2VydmVyKG9ic2VydmVyT3JPbk5leHQpIDpcbiAgICAgICAgdGhpcy5fYWNjZXB0KG9ic2VydmVyT3JPbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggYSBzaW5nbGUgbm90aWZpY2F0aW9uLlxuICAgICAqXG4gICAgICogQG1lbWJlck9mIE5vdGlmaWNhdGlvbnNcbiAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHNlbmQgb3V0IHRoZSBub3RpZmljYXRpb24gY2FsbHMgb24uXG4gICAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc3VyZmFjZXMgdGhlIGJlaGF2aW9yIG9mIHRoZSBub3RpZmljYXRpb24gdXBvbiBzdWJzY3JpcHRpb24uXG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS50b09ic2VydmFibGUgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBpbW1lZGlhdGVTY2hlZHVsZXIpO1xuICAgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoc2VsZiwgZnVuY3Rpb24gKF8sIG5vdGlmaWNhdGlvbikge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbi5fYWNjZXB0T2JzZXJ2ZXIobyk7XG4gICAgICAgICAgbm90aWZpY2F0aW9uLmtpbmQgPT09ICdOJyAmJiBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBOb3RpZmljYXRpb247XG4gIH0pKCk7XG5cbiAgdmFyIE9uTmV4dE5vdGlmaWNhdGlvbiA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoT25OZXh0Tm90aWZpY2F0aW9uLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE9uTmV4dE5vdGlmaWNhdGlvbih2YWx1ZSkge1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgdGhpcy5raW5kID0gJ04nO1xuICAgIH1cblxuICAgIE9uTmV4dE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdCA9IGZ1bmN0aW9uIChvbk5leHQpIHtcbiAgICAgIHJldHVybiBvbk5leHQodGhpcy52YWx1ZSk7XG4gICAgfTtcblxuICAgIE9uTmV4dE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdE9ic2VydmVyID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBvLm9uTmV4dCh0aGlzLnZhbHVlKTtcbiAgICB9O1xuXG4gICAgT25OZXh0Tm90aWZpY2F0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAnT25OZXh0KCcgKyB0aGlzLnZhbHVlICsgJyknO1xuICAgIH07XG5cbiAgICByZXR1cm4gT25OZXh0Tm90aWZpY2F0aW9uO1xuICB9KE5vdGlmaWNhdGlvbikpO1xuXG4gIHZhciBPbkVycm9yTm90aWZpY2F0aW9uID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhPbkVycm9yTm90aWZpY2F0aW9uLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE9uRXJyb3JOb3RpZmljYXRpb24oZXJyb3IpIHtcbiAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICAgIHRoaXMua2luZCA9ICdFJztcbiAgICB9XG5cbiAgICBPbkVycm9yTm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0ID0gZnVuY3Rpb24gKG9uTmV4dCwgb25FcnJvcikge1xuICAgICAgcmV0dXJuIG9uRXJyb3IodGhpcy5lcnJvcik7XG4gICAgfTtcblxuICAgIE9uRXJyb3JOb3RpZmljYXRpb24ucHJvdG90eXBlLl9hY2NlcHRPYnNlcnZlciA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gby5vbkVycm9yKHRoaXMuZXJyb3IpO1xuICAgIH07XG5cbiAgICBPbkVycm9yTm90aWZpY2F0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAnT25FcnJvcignICsgdGhpcy5lcnJvciArICcpJztcbiAgICB9O1xuXG4gICAgcmV0dXJuIE9uRXJyb3JOb3RpZmljYXRpb247XG4gIH0oTm90aWZpY2F0aW9uKSk7XG5cbiAgdmFyIE9uQ29tcGxldGVkTm90aWZpY2F0aW9uID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbiwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbigpIHtcbiAgICAgIHRoaXMua2luZCA9ICdDJztcbiAgICB9XG5cbiAgICBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdCA9IGZ1bmN0aW9uIChvbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSB7XG4gICAgICByZXR1cm4gb25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgT25Db21wbGV0ZWROb3RpZmljYXRpb24ucHJvdG90eXBlLl9hY2NlcHRPYnNlcnZlciA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gJ09uQ29tcGxldGVkKCknO1xuICAgIH07XG5cbiAgICByZXR1cm4gT25Db21wbGV0ZWROb3RpZmljYXRpb247XG4gIH0oTm90aWZpY2F0aW9uKSk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgcmVwcmVzZW50cyBhbiBPbk5leHQgbm90aWZpY2F0aW9uIHRvIGFuIG9ic2VydmVyLlxuICAgKiBAcGFyYW0ge0FueX0gdmFsdWUgVGhlIHZhbHVlIGNvbnRhaW5lZCBpbiB0aGUgbm90aWZpY2F0aW9uLlxuICAgKiBAcmV0dXJucyB7Tm90aWZpY2F0aW9ufSBUaGUgT25OZXh0IG5vdGlmaWNhdGlvbiBjb250YWluaW5nIHRoZSB2YWx1ZS5cbiAgICovXG4gIHZhciBub3RpZmljYXRpb25DcmVhdGVPbk5leHQgPSBOb3RpZmljYXRpb24uY3JlYXRlT25OZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIG5ldyBPbk5leHROb3RpZmljYXRpb24odmFsdWUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgYW4gT25FcnJvciBub3RpZmljYXRpb24gdG8gYW4gb2JzZXJ2ZXIuXG4gICAqIEBwYXJhbSB7QW55fSBlcnJvciBUaGUgZXhjZXB0aW9uIGNvbnRhaW5lZCBpbiB0aGUgbm90aWZpY2F0aW9uLlxuICAgKiBAcmV0dXJucyB7Tm90aWZpY2F0aW9ufSBUaGUgT25FcnJvciBub3RpZmljYXRpb24gY29udGFpbmluZyB0aGUgZXhjZXB0aW9uLlxuICAgKi9cbiAgdmFyIG5vdGlmaWNhdGlvbkNyZWF0ZU9uRXJyb3IgPSBOb3RpZmljYXRpb24uY3JlYXRlT25FcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgIHJldHVybiBuZXcgT25FcnJvck5vdGlmaWNhdGlvbihlcnJvcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgcmVwcmVzZW50cyBhbiBPbkNvbXBsZXRlZCBub3RpZmljYXRpb24gdG8gYW4gb2JzZXJ2ZXIuXG4gICAqIEByZXR1cm5zIHtOb3RpZmljYXRpb259IFRoZSBPbkNvbXBsZXRlZCBub3RpZmljYXRpb24uXG4gICAqL1xuICB2YXIgbm90aWZpY2F0aW9uQ3JlYXRlT25Db21wbGV0ZWQgPSBOb3RpZmljYXRpb24uY3JlYXRlT25Db21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbigpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdXBwb3J0cyBwdXNoLXN0eWxlIGl0ZXJhdGlvbiBvdmVyIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqL1xuICB2YXIgT2JzZXJ2ZXIgPSBSeC5PYnNlcnZlciA9IGZ1bmN0aW9uICgpIHsgfTtcblxuICAvKipcbiAgICogIENyZWF0ZXMgYW4gb2JzZXJ2ZXIgZnJvbSB0aGUgc3BlY2lmaWVkIE9uTmV4dCwgYWxvbmcgd2l0aCBvcHRpb25hbCBPbkVycm9yLCBhbmQgT25Db21wbGV0ZWQgYWN0aW9ucy5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uTmV4dF0gT2JzZXJ2ZXIncyBPbk5leHQgYWN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25FcnJvcl0gT2JzZXJ2ZXIncyBPbkVycm9yIGFjdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uQ29tcGxldGVkXSBPYnNlcnZlcidzIE9uQ29tcGxldGVkIGFjdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICogQHJldHVybnMge09ic2VydmVyfSBUaGUgb2JzZXJ2ZXIgb2JqZWN0IGltcGxlbWVudGVkIHVzaW5nIHRoZSBnaXZlbiBhY3Rpb25zLlxuICAgKi9cbiAgdmFyIG9ic2VydmVyQ3JlYXRlID0gT2JzZXJ2ZXIuY3JlYXRlID0gZnVuY3Rpb24gKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICBvbk5leHQgfHwgKG9uTmV4dCA9IG5vb3ApO1xuICAgIG9uRXJyb3IgfHwgKG9uRXJyb3IgPSBkZWZhdWx0RXJyb3IpO1xuICAgIG9uQ29tcGxldGVkIHx8IChvbkNvbXBsZXRlZCA9IG5vb3ApO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2ZXIob25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgT2JzZXJ2ZXIgY2xhc3MuXG4gICAqIFRoaXMgYmFzZSBjbGFzcyBlbmZvcmNlcyB0aGUgZ3JhbW1hciBvZiBvYnNlcnZlcnMgd2hlcmUgT25FcnJvciBhbmQgT25Db21wbGV0ZWQgYXJlIHRlcm1pbmFsIG1lc3NhZ2VzLlxuICAgKi9cbiAgdmFyIEFic3RyYWN0T2JzZXJ2ZXIgPSBSeC5pbnRlcm5hbHMuQWJzdHJhY3RPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQWJzdHJhY3RPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgb2JzZXJ2ZXIgaW4gYSBub24tc3RvcHBlZCBzdGF0ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBYnN0cmFjdE9ic2VydmVyKCkge1xuICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBNdXN0IGJlIGltcGxlbWVudGVkIGJ5IG90aGVyIG9ic2VydmVyc1xuICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBub3RJbXBsZW1lbnRlZDtcbiAgICBBYnN0cmFjdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IG5vdEltcGxlbWVudGVkO1xuICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IG5vdEltcGxlbWVudGVkO1xuXG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgdGhlIG9ic2VydmVyIG9mIGEgbmV3IGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuICAgICAqIEBwYXJhbSB7QW55fSB2YWx1ZSBOZXh0IGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuICAgICAqL1xuICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLm9uTmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgIXRoaXMuaXNTdG9wcGVkICYmIHRoaXMubmV4dCh2YWx1ZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIHRoZSBvYnNlcnZlciB0aGF0IGFuIGV4Y2VwdGlvbiBoYXMgb2NjdXJyZWQuXG4gICAgICogQHBhcmFtIHtBbnl9IGVycm9yIFRoZSBlcnJvciB0aGF0IGhhcyBvY2N1cnJlZC5cbiAgICAgKi9cbiAgICBBYnN0cmFjdE9ic2VydmVyLnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIHRoZSBvYnNlcnZlciBvZiB0aGUgZW5kIG9mIHRoZSBzZXF1ZW5jZS5cbiAgICAgKi9cbiAgICBBYnN0cmFjdE9ic2VydmVyLnByb3RvdHlwZS5vbkNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlcyB0aGUgb2JzZXJ2ZXIsIGNhdXNpbmcgaXQgdG8gdHJhbnNpdGlvbiB0byB0aGUgc3RvcHBlZCBzdGF0ZS5cbiAgICAgKi9cbiAgICBBYnN0cmFjdE9ic2VydmVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkgeyB0aGlzLmlzU3RvcHBlZCA9IHRydWU7IH07XG5cbiAgICBBYnN0cmFjdE9ic2VydmVyLnByb3RvdHlwZS5mYWlsID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmVycm9yKGUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICByZXR1cm4gQWJzdHJhY3RPYnNlcnZlcjtcbiAgfShPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBDbGFzcyB0byBjcmVhdGUgYW4gT2JzZXJ2ZXIgaW5zdGFuY2UgZnJvbSBkZWxlZ2F0ZS1iYXNlZCBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIG9uKiBtZXRob2RzLlxuICAgKi9cbiAgdmFyIEFub255bW91c09ic2VydmVyID0gUnguQW5vbnltb3VzT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEFub255bW91c09ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYnNlcnZlciBmcm9tIHRoZSBzcGVjaWZpZWQgT25OZXh0LCBPbkVycm9yLCBhbmQgT25Db21wbGV0ZWQgYWN0aW9ucy5cbiAgICAgKiBAcGFyYW0ge0FueX0gb25OZXh0IE9ic2VydmVyJ3MgT25OZXh0IGFjdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FueX0gb25FcnJvciBPYnNlcnZlcidzIE9uRXJyb3IgYWN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgICAqIEBwYXJhbSB7QW55fSBvbkNvbXBsZXRlZCBPYnNlcnZlcidzIE9uQ29tcGxldGVkIGFjdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBbm9ueW1vdXNPYnNlcnZlcihvbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuX29uTmV4dCA9IG9uTmV4dDtcbiAgICAgIHRoaXMuX29uRXJyb3IgPSBvbkVycm9yO1xuICAgICAgdGhpcy5fb25Db21wbGV0ZWQgPSBvbkNvbXBsZXRlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxscyB0aGUgb25OZXh0IGFjdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FueX0gdmFsdWUgTmV4dCBlbGVtZW50IGluIHRoZSBzZXF1ZW5jZS5cbiAgICAgKi9cbiAgICBBbm9ueW1vdXNPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5fb25OZXh0KHZhbHVlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2FsbHMgdGhlIG9uRXJyb3IgYWN0aW9uLlxuICAgICAqIEBwYXJhbSB7QW55fSBlcnJvciBUaGUgZXJyb3IgdGhhdCBoYXMgb2NjdXJyZWQuXG4gICAgICovXG4gICAgQW5vbnltb3VzT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICB0aGlzLl9vbkVycm9yKGVycm9yKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogIENhbGxzIHRoZSBvbkNvbXBsZXRlZCBhY3Rpb24uXG4gICAgICovXG4gICAgQW5vbnltb3VzT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX29uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBBbm9ueW1vdXNPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgdmFyIG9ic2VydmFibGVQcm90bztcblxuICAvKipcbiAgICogUmVwcmVzZW50cyBhIHB1c2gtc3R5bGUgY29sbGVjdGlvbi5cbiAgICovXG4gIHZhciBPYnNlcnZhYmxlID0gUnguT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoKSB7XG5cbiAgICBmdW5jdGlvbiBtYWtlU3Vic2NyaWJlKHNlbGYsIHN1YnNjcmliZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHZhciBvbGRPbkVycm9yID0gby5vbkVycm9yO1xuICAgICAgICBvLm9uRXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIG1ha2VTdGFja1RyYWNlTG9uZyhlLCBzZWxmKTtcbiAgICAgICAgICBvbGRPbkVycm9yLmNhbGwobywgZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHN1YnNjcmliZS5jYWxsKHNlbGYsIG8pO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBPYnNlcnZhYmxlKCkge1xuICAgICAgaWYgKFJ4LmNvbmZpZy5sb25nU3RhY2tTdXBwb3J0ICYmIGhhc1N0YWNrcykge1xuICAgICAgICB2YXIgb2xkU3Vic2NyaWJlID0gdGhpcy5fc3Vic2NyaWJlO1xuICAgICAgICB2YXIgZSA9IHRyeUNhdGNoKHRocm93ZXIpKG5ldyBFcnJvcigpKS5lO1xuICAgICAgICB0aGlzLnN0YWNrID0gZS5zdGFjay5zdWJzdHJpbmcoZS5zdGFjay5pbmRleE9mKCdcXG4nKSArIDEpO1xuICAgICAgICB0aGlzLl9zdWJzY3JpYmUgPSBtYWtlU3Vic2NyaWJlKHRoaXMsIG9sZFN1YnNjcmliZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgb2JzZXJ2YWJsZVByb3RvID0gT2JzZXJ2YWJsZS5wcm90b3R5cGU7XG5cbiAgICAvKipcbiAgICAqIERldGVybWluZXMgd2hldGhlciB0aGUgZ2l2ZW4gb2JqZWN0IGlzIGFuIE9ic2VydmFibGVcbiAgICAqIEBwYXJhbSB7QW55fSBBbiBvYmplY3QgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgaXQgaXMgYW4gT2JzZXJ2YWJsZVxuICAgICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgYW4gT2JzZXJ2YWJsZSwgZWxzZSBmYWxzZS5cbiAgICAqL1xuICAgIE9ic2VydmFibGUuaXNPYnNlcnZhYmxlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBvICYmIGlzRnVuY3Rpb24oby5zdWJzY3JpYmUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiAgU3Vic2NyaWJlcyBhbiBvIHRvIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgICAqICBAcGFyYW0ge01peGVkfSBbb09yT25OZXh0XSBUaGUgb2JqZWN0IHRoYXQgaXMgdG8gcmVjZWl2ZSBub3RpZmljYXRpb25zIG9yIGFuIGFjdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gW29uRXJyb3JdIEFjdGlvbiB0byBpbnZva2UgdXBvbiBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gW29uQ29tcGxldGVkXSBBY3Rpb24gdG8gaW52b2tlIHVwb24gZ3JhY2VmdWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogIEByZXR1cm5zIHtEaXBvc2FibGV9IEEgZGlzcG9zYWJsZSBoYW5kbGluZyB0aGUgc3Vic2NyaXB0aW9ucyBhbmQgdW5zdWJzY3JpcHRpb25zLlxuICAgICAqL1xuICAgIG9ic2VydmFibGVQcm90by5zdWJzY3JpYmUgPSBvYnNlcnZhYmxlUHJvdG8uZm9yRWFjaCA9IGZ1bmN0aW9uIChvT3JPbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaWJlKHR5cGVvZiBvT3JPbk5leHQgPT09ICdvYmplY3QnID9cbiAgICAgICAgb09yT25OZXh0IDpcbiAgICAgICAgb2JzZXJ2ZXJDcmVhdGUob09yT25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmVzIHRvIHRoZSBuZXh0IHZhbHVlIGluIHRoZSBzZXF1ZW5jZSB3aXRoIGFuIG9wdGlvbmFsIFwidGhpc1wiIGFyZ3VtZW50LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uTmV4dCBUaGUgZnVuY3Rpb24gdG8gaW52b2tlIG9uIGVhY2ggZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gQSBkaXNwb3NhYmxlIGhhbmRsaW5nIHRoZSBzdWJzY3JpcHRpb25zIGFuZCB1bnN1YnNjcmlwdGlvbnMuXG4gICAgICovXG4gICAgb2JzZXJ2YWJsZVByb3RvLnN1YnNjcmliZU9uTmV4dCA9IGZ1bmN0aW9uIChvbk5leHQsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUob2JzZXJ2ZXJDcmVhdGUodHlwZW9mIHRoaXNBcmcgIT09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24oeCkgeyBvbk5leHQuY2FsbCh0aGlzQXJnLCB4KTsgfSA6IG9uTmV4dCkpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmVzIHRvIGFuIGV4Y2VwdGlvbmFsIGNvbmRpdGlvbiBpbiB0aGUgc2VxdWVuY2Ugd2l0aCBhbiBvcHRpb25hbCBcInRoaXNcIiBhcmd1bWVudC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkVycm9yIFRoZSBmdW5jdGlvbiB0byBpbnZva2UgdXBvbiBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gQSBkaXNwb3NhYmxlIGhhbmRsaW5nIHRoZSBzdWJzY3JpcHRpb25zIGFuZCB1bnN1YnNjcmlwdGlvbnMuXG4gICAgICovXG4gICAgb2JzZXJ2YWJsZVByb3RvLnN1YnNjcmliZU9uRXJyb3IgPSBmdW5jdGlvbiAob25FcnJvciwgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZShvYnNlcnZlckNyZWF0ZShudWxsLCB0eXBlb2YgdGhpc0FyZyAhPT0gJ3VuZGVmaW5lZCcgPyBmdW5jdGlvbihlKSB7IG9uRXJyb3IuY2FsbCh0aGlzQXJnLCBlKTsgfSA6IG9uRXJyb3IpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlcyB0byB0aGUgbmV4dCB2YWx1ZSBpbiB0aGUgc2VxdWVuY2Ugd2l0aCBhbiBvcHRpb25hbCBcInRoaXNcIiBhcmd1bWVudC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkNvbXBsZXRlZCBUaGUgZnVuY3Rpb24gdG8gaW52b2tlIHVwb24gZ3JhY2VmdWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IEEgZGlzcG9zYWJsZSBoYW5kbGluZyB0aGUgc3Vic2NyaXB0aW9ucyBhbmQgdW5zdWJzY3JpcHRpb25zLlxuICAgICAqL1xuICAgIG9ic2VydmFibGVQcm90by5zdWJzY3JpYmVPbkNvbXBsZXRlZCA9IGZ1bmN0aW9uIChvbkNvbXBsZXRlZCwgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZShvYnNlcnZlckNyZWF0ZShudWxsLCBudWxsLCB0eXBlb2YgdGhpc0FyZyAhPT0gJ3VuZGVmaW5lZCcgPyBmdW5jdGlvbigpIHsgb25Db21wbGV0ZWQuY2FsbCh0aGlzQXJnKTsgfSA6IG9uQ29tcGxldGVkKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBPYnNlcnZhYmxlO1xuICB9KSgpO1xuXG4gIHZhciBTY2hlZHVsZWRPYnNlcnZlciA9IFJ4LmludGVybmFscy5TY2hlZHVsZWRPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2NoZWR1bGVkT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBTY2hlZHVsZWRPYnNlcnZlcihzY2hlZHVsZXIsIG9ic2VydmVyKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgICAgdGhpcy5pc0FjcXVpcmVkID0gZmFsc2U7XG4gICAgICB0aGlzLmhhc0ZhdWx0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICAgIHRoaXMuZGlzcG9zYWJsZSA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW5xdWV1ZU5leHQob2JzZXJ2ZXIsIHgpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgb2JzZXJ2ZXIub25OZXh0KHgpOyB9OyB9XG4gICAgZnVuY3Rpb24gZW5xdWV1ZUVycm9yKG9ic2VydmVyLCBlKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IG9ic2VydmVyLm9uRXJyb3IoZSk7IH07IH1cbiAgICBmdW5jdGlvbiBlbnF1ZXVlQ29tcGxldGVkKG9ic2VydmVyKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IG9ic2VydmVyLm9uQ29tcGxldGVkKCk7IH07IH1cblxuICAgIFNjaGVkdWxlZE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMucXVldWUucHVzaChlbnF1ZXVlTmV4dCh0aGlzLm9ic2VydmVyLCB4KSk7XG4gICAgfTtcblxuICAgIFNjaGVkdWxlZE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLnF1ZXVlLnB1c2goZW5xdWV1ZUVycm9yKHRoaXMub2JzZXJ2ZXIsIGUpKTtcbiAgICB9O1xuXG4gICAgU2NoZWR1bGVkT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMucXVldWUucHVzaChlbnF1ZXVlQ29tcGxldGVkKHRoaXMub2JzZXJ2ZXIpKTtcbiAgICB9O1xuXG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzdGF0ZSwgcmVjdXJzZSkge1xuICAgICAgdmFyIHdvcms7XG4gICAgICBpZiAoc3RhdGUucXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICB3b3JrID0gc3RhdGUucXVldWUuc2hpZnQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLmlzQWNxdWlyZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHdvcmspKCk7XG4gICAgICBpZiAocmVzID09PSBlcnJvck9iaikge1xuICAgICAgICBzdGF0ZS5xdWV1ZSA9IFtdO1xuICAgICAgICBzdGF0ZS5oYXNGYXVsdGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRocm93ZXIocmVzLmUpO1xuICAgICAgfVxuICAgICAgcmVjdXJzZShzdGF0ZSk7XG4gICAgfVxuXG4gICAgU2NoZWR1bGVkT2JzZXJ2ZXIucHJvdG90eXBlLmVuc3VyZUFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpc093bmVyID0gZmFsc2U7XG4gICAgICBpZiAoIXRoaXMuaGFzRmF1bHRlZCAmJiB0aGlzLnF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaXNPd25lciA9ICF0aGlzLmlzQWNxdWlyZWQ7XG4gICAgICAgIHRoaXMuaXNBY3F1aXJlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpc093bmVyICYmXG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZS5zZXREaXNwb3NhYmxlKHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKHRoaXMsIHNjaGVkdWxlTWV0aG9kKSk7XG4gICAgfTtcblxuICAgIFNjaGVkdWxlZE9ic2VydmVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgX19zdXBlcl9fLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmRpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2NoZWR1bGVkT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIHZhciBPYnNlcnZhYmxlQmFzZSA9IFJ4Lk9ic2VydmFibGVCYXNlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhPYnNlcnZhYmxlQmFzZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIGZpeFN1YnNjcmliZXIoc3Vic2NyaWJlcikge1xuICAgICAgcmV0dXJuIHN1YnNjcmliZXIgJiYgaXNGdW5jdGlvbihzdWJzY3JpYmVyLmRpc3Bvc2UpID8gc3Vic2NyaWJlciA6XG4gICAgICAgIGlzRnVuY3Rpb24oc3Vic2NyaWJlcikgPyBkaXNwb3NhYmxlQ3JlYXRlKHN1YnNjcmliZXIpIDogZGlzcG9zYWJsZUVtcHR5O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldERpc3Bvc2FibGUocywgc3RhdGUpIHtcbiAgICAgIHZhciBhZG8gPSBzdGF0ZVswXSwgc2VsZiA9IHN0YXRlWzFdO1xuICAgICAgdmFyIHN1YiA9IHRyeUNhdGNoKHNlbGYuc3Vic2NyaWJlQ29yZSkuY2FsbChzZWxmLCBhZG8pO1xuICAgICAgaWYgKHN1YiA9PT0gZXJyb3JPYmogJiYgIWFkby5mYWlsKGVycm9yT2JqLmUpKSB7IHRocm93ZXIoZXJyb3JPYmouZSk7IH1cbiAgICAgIGFkby5zZXREaXNwb3NhYmxlKGZpeFN1YnNjcmliZXIoc3ViKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZUJhc2UoKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBPYnNlcnZhYmxlQmFzZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgYWRvID0gbmV3IEF1dG9EZXRhY2hPYnNlcnZlcihvKSwgc3RhdGUgPSBbYWRvLCB0aGlzXTtcblxuICAgICAgaWYgKGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGVSZXF1aXJlZCgpKSB7XG4gICAgICAgIGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGUoc3RhdGUsIHNldERpc3Bvc2FibGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0RGlzcG9zYWJsZShudWxsLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWRvO1xuICAgIH07XG5cbiAgICBPYnNlcnZhYmxlQmFzZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IG5vdEltcGxlbWVudGVkO1xuXG4gICAgcmV0dXJuIE9ic2VydmFibGVCYXNlO1xuICB9KE9ic2VydmFibGUpKTtcblxudmFyIEZsYXRNYXBPYnNlcnZhYmxlID0gUnguRmxhdE1hcE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cbiAgICBpbmhlcml0cyhGbGF0TWFwT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIEZsYXRNYXBPYnNlcnZhYmxlKHNvdXJjZSwgc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gaXNGdW5jdGlvbihyZXN1bHRTZWxlY3RvcikgPyByZXN1bHRTZWxlY3RvciA6IG51bGw7XG4gICAgICB0aGlzLnNlbGVjdG9yID0gYmluZENhbGxiYWNrKGlzRnVuY3Rpb24oc2VsZWN0b3IpID8gc2VsZWN0b3IgOiBmdW5jdGlvbigpIHsgcmV0dXJuIHNlbGVjdG9yOyB9LCB0aGlzQXJnLCAzKTtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRmxhdE1hcE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKG8sIHRoaXMuc2VsZWN0b3IsIHRoaXMucmVzdWx0U2VsZWN0b3IsIHRoaXMpKTtcbiAgICB9O1xuXG4gICAgaW5oZXJpdHMoSW5uZXJPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihvYnNlcnZlciwgc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCBzb3VyY2UpIHtcbiAgICAgIHRoaXMuaSA9IDA7XG4gICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMubyA9IG9ic2VydmVyO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLl93cmFwUmVzdWx0ID0gZnVuY3Rpb24ocmVzdWx0LCB4LCBpKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXN1bHRTZWxlY3RvciA/XG4gICAgICAgIHJlc3VsdC5tYXAoZnVuY3Rpb24oeSwgaTIpIHsgcmV0dXJuIHRoaXMucmVzdWx0U2VsZWN0b3IoeCwgeSwgaSwgaTIpOyB9LCB0aGlzKSA6XG4gICAgICAgIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHZhciBpID0gdGhpcy5pKys7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5zZWxlY3RvcikoeCwgaSwgdGhpcy5zb3VyY2UpO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuXG4gICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuICAgICAgKGlzQXJyYXlMaWtlKHJlc3VsdCkgfHwgaXNJdGVyYWJsZShyZXN1bHQpKSAmJiAocmVzdWx0ID0gT2JzZXJ2YWJsZS5mcm9tKHJlc3VsdCkpO1xuICAgICAgdGhpcy5vLm9uTmV4dCh0aGlzLl93cmFwUmVzdWx0KHJlc3VsdCwgeCwgaSkpO1xuICAgIH07XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uKGUpIHsgdGhpcy5vLm9uRXJyb3IoZSk7IH07XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbigpIHsgdGhpcy5vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gRmxhdE1hcE9ic2VydmFibGU7XG5cbn0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRW51bWVyYWJsZSA9IFJ4LmludGVybmFscy5FbnVtZXJhYmxlID0gZnVuY3Rpb24gKCkgeyB9O1xuXG4gIGZ1bmN0aW9uIElzRGlzcG9zZWREaXNwb3NhYmxlKHN0YXRlKSB7XG4gICAgdGhpcy5fcyA9IHN0YXRlO1xuICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICB9XG5cbiAgSXNEaXNwb3NlZERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICB0aGlzLl9zLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICB2YXIgQ29uY2F0RW51bWVyYWJsZU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ29uY2F0RW51bWVyYWJsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ29uY2F0RW51bWVyYWJsZU9ic2VydmFibGUoc291cmNlcykge1xuICAgICAgdGhpcy5zb3VyY2VzID0gc291cmNlcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHN0YXRlLCByZWN1cnNlKSB7XG4gICAgICBpZiAoc3RhdGUuaXNEaXNwb3NlZCkgeyByZXR1cm47IH1cbiAgICAgIHZhciBjdXJyZW50SXRlbSA9IHRyeUNhdGNoKHN0YXRlLmUubmV4dCkuY2FsbChzdGF0ZS5lKTtcbiAgICAgIGlmIChjdXJyZW50SXRlbSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHN0YXRlLm8ub25FcnJvcihjdXJyZW50SXRlbS5lKTsgfVxuICAgICAgaWYgKGN1cnJlbnRJdGVtLmRvbmUpIHsgcmV0dXJuIHN0YXRlLm8ub25Db21wbGV0ZWQoKTsgfVxuXG4gICAgICAvLyBDaGVjayBpZiBwcm9taXNlXG4gICAgICB2YXIgY3VycmVudFZhbHVlID0gY3VycmVudEl0ZW0udmFsdWU7XG4gICAgICBpc1Byb21pc2UoY3VycmVudFZhbHVlKSAmJiAoY3VycmVudFZhbHVlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGN1cnJlbnRWYWx1ZSkpO1xuXG4gICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgc3RhdGUuc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUoZCk7XG4gICAgICBkLnNldERpc3Bvc2FibGUoY3VycmVudFZhbHVlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihzdGF0ZSwgcmVjdXJzZSkpKTtcbiAgICB9XG5cbiAgICBDb25jYXRFbnVtZXJhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcbiAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgaXNEaXNwb3NlZDogZmFsc2UsXG4gICAgICAgIG86IG8sXG4gICAgICAgIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uLFxuICAgICAgICBlOiB0aGlzLnNvdXJjZXNbJGl0ZXJhdG9yJF0oKVxuICAgICAgfTtcblxuICAgICAgdmFyIGNhbmNlbGFibGUgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKHN0YXRlLCBzY2hlZHVsZU1ldGhvZCk7XG4gICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKFtzdWJzY3JpcHRpb24sIGNhbmNlbGFibGUsIG5ldyBJc0Rpc3Bvc2VkRGlzcG9zYWJsZShzdGF0ZSldKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihzdGF0ZSwgcmVjdXJzZSkge1xuICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgIHRoaXMuX3JlY3Vyc2UgPSByZWN1cnNlO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX3N0YXRlLm8ub25OZXh0KHgpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fc3RhdGUuby5vbkVycm9yKGUpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fcmVjdXJzZSh0aGlzLl9zdGF0ZSk7IH07XG5cbiAgICByZXR1cm4gQ29uY2F0RW51bWVyYWJsZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICBFbnVtZXJhYmxlLnByb3RvdHlwZS5jb25jYXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBDb25jYXRFbnVtZXJhYmxlT2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICB2YXIgQ2F0Y2hFcnJvck9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgZnVuY3Rpb24gQ2F0Y2hFcnJvck9ic2VydmFibGUoc291cmNlcykge1xuICAgICAgdGhpcy5zb3VyY2VzID0gc291cmNlcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKENhdGNoRXJyb3JPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIGlmIChzdGF0ZS5pc0Rpc3Bvc2VkKSB7IHJldHVybjsgfVxuICAgICAgdmFyIGN1cnJlbnRJdGVtID0gdHJ5Q2F0Y2goc3RhdGUuZS5uZXh0KS5jYWxsKHN0YXRlLmUpO1xuICAgICAgaWYgKGN1cnJlbnRJdGVtID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKGN1cnJlbnRJdGVtLmUpOyB9XG4gICAgICBpZiAoY3VycmVudEl0ZW0uZG9uZSkgeyByZXR1cm4gc3RhdGUubGFzdEVycm9yICE9PSBudWxsID8gc3RhdGUuby5vbkVycm9yKHN0YXRlLmxhc3RFcnJvcikgOiBzdGF0ZS5vLm9uQ29tcGxldGVkKCk7IH1cblxuICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRJdGVtLnZhbHVlO1xuICAgICAgaXNQcm9taXNlKGN1cnJlbnRWYWx1ZSkgJiYgKGN1cnJlbnRWYWx1ZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShjdXJyZW50VmFsdWUpKTtcblxuICAgICAgdmFyIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIHN0YXRlLnN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKGQpO1xuICAgICAgZC5zZXREaXNwb3NhYmxlKGN1cnJlbnRWYWx1ZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIoc3RhdGUsIHJlY3Vyc2UpKSk7XG4gICAgfVxuXG4gICAgQ2F0Y2hFcnJvck9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIGlzRGlzcG9zZWQ6IGZhbHNlLFxuICAgICAgICBlOiB0aGlzLnNvdXJjZXNbJGl0ZXJhdG9yJF0oKSxcbiAgICAgICAgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24sXG4gICAgICAgIGxhc3RFcnJvcjogbnVsbCxcbiAgICAgICAgbzogb1xuICAgICAgfTtcblxuICAgICAgdmFyIGNhbmNlbGFibGUgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKHN0YXRlLCBzY2hlZHVsZU1ldGhvZCk7XG4gICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKFtzdWJzY3JpcHRpb24sIGNhbmNlbGFibGUsIG5ldyBJc0Rpc3Bvc2VkRGlzcG9zYWJsZShzdGF0ZSldKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihzdGF0ZSwgcmVjdXJzZSkge1xuICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgIHRoaXMuX3JlY3Vyc2UgPSByZWN1cnNlO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX3N0YXRlLm8ub25OZXh0KHgpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fc3RhdGUubGFzdEVycm9yID0gZTsgdGhpcy5fcmVjdXJzZSh0aGlzLl9zdGF0ZSk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9zdGF0ZS5vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gQ2F0Y2hFcnJvck9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICBFbnVtZXJhYmxlLnByb3RvdHlwZS5jYXRjaEVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgQ2F0Y2hFcnJvck9ic2VydmFibGUodGhpcyk7XG4gIH07XG5cbiAgRW51bWVyYWJsZS5wcm90b3R5cGUuY2F0Y2hFcnJvcldoZW4gPSBmdW5jdGlvbiAobm90aWZpY2F0aW9uSGFuZGxlcikge1xuICAgIHZhciBzb3VyY2VzID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBleGNlcHRpb25zID0gbmV3IFN1YmplY3QoKSxcbiAgICAgICAgbm90aWZpZXIgPSBuZXcgU3ViamVjdCgpLFxuICAgICAgICBoYW5kbGVkID0gbm90aWZpY2F0aW9uSGFuZGxlcihleGNlcHRpb25zKSxcbiAgICAgICAgbm90aWZpY2F0aW9uRGlzcG9zYWJsZSA9IGhhbmRsZWQuc3Vic2NyaWJlKG5vdGlmaWVyKTtcblxuICAgICAgdmFyIGUgPSBzb3VyY2VzWyRpdGVyYXRvciRdKCk7XG5cbiAgICAgIHZhciBzdGF0ZSA9IHsgaXNEaXNwb3NlZDogZmFsc2UgfSxcbiAgICAgICAgbGFzdEVycm9yLFxuICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuICAgICAgdmFyIGNhbmNlbGFibGUgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKG51bGwsIGZ1bmN0aW9uIChfLCBzZWxmKSB7XG4gICAgICAgIGlmIChzdGF0ZS5pc0Rpc3Bvc2VkKSB7IHJldHVybjsgfVxuICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSB0cnlDYXRjaChlLm5leHQpLmNhbGwoZSk7XG4gICAgICAgIGlmIChjdXJyZW50SXRlbSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihjdXJyZW50SXRlbS5lKTsgfVxuXG4gICAgICAgIGlmIChjdXJyZW50SXRlbS5kb25lKSB7XG4gICAgICAgICAgaWYgKGxhc3RFcnJvcikge1xuICAgICAgICAgICAgby5vbkVycm9yKGxhc3RFcnJvcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgcHJvbWlzZVxuICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gY3VycmVudEl0ZW0udmFsdWU7XG4gICAgICAgIGlzUHJvbWlzZShjdXJyZW50VmFsdWUpICYmIChjdXJyZW50VmFsdWUgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoY3VycmVudFZhbHVlKSk7XG5cbiAgICAgICAgdmFyIG91dGVyID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIHZhciBpbm5lciA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShuZXcgQmluYXJ5RGlzcG9zYWJsZShpbm5lciwgb3V0ZXIpKTtcbiAgICAgICAgb3V0ZXIuc2V0RGlzcG9zYWJsZShjdXJyZW50VmFsdWUuc3Vic2NyaWJlKFxuICAgICAgICAgIGZ1bmN0aW9uKHgpIHsgby5vbk5leHQoeCk7IH0sXG4gICAgICAgICAgZnVuY3Rpb24gKGV4bikge1xuICAgICAgICAgICAgaW5uZXIuc2V0RGlzcG9zYWJsZShub3RpZmllci5zdWJzY3JpYmUoc2VsZiwgZnVuY3Rpb24oZXgpIHtcbiAgICAgICAgICAgICAgby5vbkVycm9yKGV4KTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIGV4Y2VwdGlvbnMub25OZXh0KGV4bik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmdW5jdGlvbigpIHsgby5vbkNvbXBsZXRlZCgpOyB9KSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShbbm90aWZpY2F0aW9uRGlzcG9zYWJsZSwgc3Vic2NyaXB0aW9uLCBjYW5jZWxhYmxlLCBuZXcgSXNEaXNwb3NlZERpc3Bvc2FibGUoc3RhdGUpXSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIFJlcGVhdEVudW1lcmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFJlcGVhdEVudW1lcmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUmVwZWF0RW51bWVyYWJsZSh2LCBjKSB7XG4gICAgICB0aGlzLnYgPSB2O1xuICAgICAgdGhpcy5jID0gYyA9PSBudWxsID8gLTEgOiBjO1xuICAgIH1cblxuICAgIFJlcGVhdEVudW1lcmFibGUucHJvdG90eXBlWyRpdGVyYXRvciRdID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG5ldyBSZXBlYXRFbnVtZXJhdG9yKHRoaXMpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBSZXBlYXRFbnVtZXJhdG9yKHApIHtcbiAgICAgIHRoaXMudiA9IHAudjtcbiAgICAgIHRoaXMubCA9IHAuYztcbiAgICB9XG5cbiAgICBSZXBlYXRFbnVtZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMubCA9PT0gMCkgeyByZXR1cm4gZG9uZUVudW1lcmF0b3I7IH1cbiAgICAgIGlmICh0aGlzLmwgPiAwKSB7IHRoaXMubC0tOyB9XG4gICAgICByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IHRoaXMudiB9O1xuICAgIH07XG5cbiAgICByZXR1cm4gUmVwZWF0RW51bWVyYWJsZTtcbiAgfShFbnVtZXJhYmxlKSk7XG5cbiAgdmFyIGVudW1lcmFibGVSZXBlYXQgPSBFbnVtZXJhYmxlLnJlcGVhdCA9IGZ1bmN0aW9uICh2YWx1ZSwgcmVwZWF0Q291bnQpIHtcbiAgICByZXR1cm4gbmV3IFJlcGVhdEVudW1lcmFibGUodmFsdWUsIHJlcGVhdENvdW50KTtcbiAgfTtcblxuICB2YXIgT2ZFbnVtZXJhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE9mRW51bWVyYWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBPZkVudW1lcmFibGUocywgZm4sIHRoaXNBcmcpIHtcbiAgICAgIHRoaXMucyA9IHM7XG4gICAgICB0aGlzLmZuID0gZm4gPyBiaW5kQ2FsbGJhY2soZm4sIHRoaXNBcmcsIDMpIDogbnVsbDtcbiAgICB9XG4gICAgT2ZFbnVtZXJhYmxlLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBuZXcgT2ZFbnVtZXJhdG9yKHRoaXMpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBPZkVudW1lcmF0b3IocCkge1xuICAgICAgdGhpcy5pID0gLTE7XG4gICAgICB0aGlzLnMgPSBwLnM7XG4gICAgICB0aGlzLmwgPSB0aGlzLnMubGVuZ3RoO1xuICAgICAgdGhpcy5mbiA9IHAuZm47XG4gICAgfVxuXG4gICAgT2ZFbnVtZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICByZXR1cm4gKyt0aGlzLmkgPCB0aGlzLmwgP1xuICAgICAgIHsgZG9uZTogZmFsc2UsIHZhbHVlOiAhdGhpcy5mbiA/IHRoaXMuc1t0aGlzLmldIDogdGhpcy5mbih0aGlzLnNbdGhpcy5pXSwgdGhpcy5pLCB0aGlzLnMpIH0gOlxuICAgICAgIGRvbmVFbnVtZXJhdG9yO1xuICAgIH07XG5cbiAgICByZXR1cm4gT2ZFbnVtZXJhYmxlO1xuICB9KEVudW1lcmFibGUpKTtcblxuICB2YXIgZW51bWVyYWJsZU9mID0gRW51bWVyYWJsZS5vZiA9IGZ1bmN0aW9uIChzb3VyY2UsIHNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIG5ldyBPZkVudW1lcmFibGUoc291cmNlLCBzZWxlY3RvciwgdGhpc0FyZyk7XG4gIH07XG5cbiAgdmFyIFRvQXJyYXlPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRvQXJyYXlPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRvQXJyYXlPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUb0FycmF5T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIobykpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKG8pIHtcbiAgICAgIHRoaXMubyA9IG87XG4gICAgICB0aGlzLmEgPSBbXTtcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuYS5wdXNoKHgpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5vLm9uRXJyb3IoZSk7ICB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5vLm9uTmV4dCh0aGlzLmEpOyB0aGlzLm8ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBUb0FycmF5T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAqIENyZWF0ZXMgYW4gYXJyYXkgZnJvbSBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgZWxlbWVudCB3aXRoIGEgbGlzdCBjb250YWluaW5nIGFsbCB0aGUgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBUb0FycmF5T2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogIENyZWF0ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBmcm9tIGEgc3BlY2lmaWVkIHN1YnNjcmliZSBtZXRob2QgaW1wbGVtZW50YXRpb24uXG4gICAqIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5jcmVhdGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IH0gKTtcbiAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgcmV0dXJuIFJ4LkRpc3Bvc2FibGUuZW1wdHk7IH0gKTtcbiAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgfSApO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdWJzY3JpYmUgSW1wbGVtZW50YXRpb24gb2YgdGhlIHJlc3VsdGluZyBvYnNlcnZhYmxlIHNlcXVlbmNlJ3Mgc3Vic2NyaWJlIG1ldGhvZCwgcmV0dXJuaW5nIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIHdyYXBwZWQgaW4gYSBEaXNwb3NhYmxlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgc3BlY2lmaWVkIGltcGxlbWVudGF0aW9uIGZvciB0aGUgU3Vic2NyaWJlIG1ldGhvZC5cbiAgICovXG4gIE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHN1YnNjcmliZSwgcGFyZW50KSB7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKHN1YnNjcmliZSwgcGFyZW50KTtcbiAgfTtcblxuICB2YXIgRGVmZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGVmZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRGVmZXIoZmFjdG9yeSkge1xuICAgICAgdGhpcy5fZiA9IGZhY3Rvcnk7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEZWZlci5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZikoKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBvYnNlcnZhYmxlVGhyb3cocmVzdWx0LmUpLnN1YnNjcmliZShvKTt9XG4gICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuICAgICAgcmV0dXJuIHJlc3VsdC5zdWJzY3JpYmUobyk7XG4gICAgfTtcblxuICAgIHJldHVybiBEZWZlcjtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaW52b2tlcyB0aGUgc3BlY2lmaWVkIGZhY3RvcnkgZnVuY3Rpb24gd2hlbmV2ZXIgYSBuZXcgb2JzZXJ2ZXIgc3Vic2NyaWJlcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmRlZmVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIFJ4Lk9ic2VydmFibGUuZnJvbUFycmF5KFsxLDIsM10pOyB9KTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb2JzZXJ2YWJsZUZhY3RvcnkgT2JzZXJ2YWJsZSBmYWN0b3J5IGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBvYnNlcnZlciB0aGF0IHN1YnNjcmliZXMgdG8gdGhlIHJlc3VsdGluZyBzZXF1ZW5jZSBvciBQcm9taXNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBvYnNlcnZlcnMgdHJpZ2dlciBhbiBpbnZvY2F0aW9uIG9mIHRoZSBnaXZlbiBvYnNlcnZhYmxlIGZhY3RvcnkgZnVuY3Rpb24uXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZURlZmVyID0gT2JzZXJ2YWJsZS5kZWZlciA9IGZ1bmN0aW9uIChvYnNlcnZhYmxlRmFjdG9yeSkge1xuICAgIHJldHVybiBuZXcgRGVmZXIob2JzZXJ2YWJsZUZhY3RvcnkpO1xuICB9O1xuXG4gIHZhciBFbXB0eU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRW1wdHlPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRW1wdHlPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgc2luayA9IG5ldyBFbXB0eVNpbmsob2JzZXJ2ZXIsIHRoaXMuc2NoZWR1bGVyKTtcbiAgICAgIHJldHVybiBzaW5rLnJ1bigpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBFbXB0eVNpbmsob2JzZXJ2ZXIsIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVJdGVtKHMsIHN0YXRlKSB7XG4gICAgICBzdGF0ZS5vbkNvbXBsZXRlZCgpO1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICB9XG5cbiAgICBFbXB0eVNpbmsucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBzdGF0ZSA9IHRoaXMub2JzZXJ2ZXI7XG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZXIgPT09IGltbWVkaWF0ZVNjaGVkdWxlciA/XG4gICAgICAgIHNjaGVkdWxlSXRlbShudWxsLCBzdGF0ZSkgOlxuICAgICAgICB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShzdGF0ZSwgc2NoZWR1bGVJdGVtKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEVtcHR5T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBFTVBUWV9PQlNFUlZBQkxFID0gbmV3IEVtcHR5T2JzZXJ2YWJsZShpbW1lZGlhdGVTY2hlZHVsZXIpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBlbXB0eSBvYnNlcnZhYmxlIHNlcXVlbmNlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBzZW5kIG91dCB0aGUgc2luZ2xlIE9uQ29tcGxldGVkIG1lc3NhZ2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5lbXB0eSgpO1xuICAgKiAgdmFyIHJlcyA9IFJ4Lk9ic2VydmFibGUuZW1wdHkoUnguU2NoZWR1bGVyLnRpbWVvdXQpO1xuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHNlbmQgdGhlIHRlcm1pbmF0aW9uIGNhbGwgb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggbm8gZWxlbWVudHMuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZUVtcHR5ID0gT2JzZXJ2YWJsZS5lbXB0eSA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBpbW1lZGlhdGVTY2hlZHVsZXIpO1xuICAgIHJldHVybiBzY2hlZHVsZXIgPT09IGltbWVkaWF0ZVNjaGVkdWxlciA/IEVNUFRZX09CU0VSVkFCTEUgOiBuZXcgRW1wdHlPYnNlcnZhYmxlKHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIEZyb21PYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEZyb21PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZyb21PYnNlcnZhYmxlKGl0ZXJhYmxlLCBmbiwgc2NoZWR1bGVyKSB7XG4gICAgICB0aGlzLl9pdGVyYWJsZSA9IGl0ZXJhYmxlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNjaGVkdWxlTWV0aG9kKG8sIGl0LCBmbikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxvb3BSZWN1cnNpdmUoaSwgcmVjdXJzZSkge1xuICAgICAgICB2YXIgbmV4dCA9IHRyeUNhdGNoKGl0Lm5leHQpLmNhbGwoaXQpO1xuICAgICAgICBpZiAobmV4dCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihuZXh0LmUpOyB9XG4gICAgICAgIGlmIChuZXh0LmRvbmUpIHsgcmV0dXJuIG8ub25Db21wbGV0ZWQoKTsgfVxuXG4gICAgICAgIHZhciByZXN1bHQgPSBuZXh0LnZhbHVlO1xuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuICAgICAgICAgIHJlc3VsdCA9IHRyeUNhdGNoKGZuKShyZXN1bHQsIGkpO1xuICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICAgIH1cblxuICAgICAgICBvLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICByZWN1cnNlKGkgKyAxKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgRnJvbU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGxpc3QgPSBPYmplY3QodGhpcy5faXRlcmFibGUpLFxuICAgICAgICAgIGl0ID0gZ2V0SXRlcmFibGUobGlzdCk7XG5cbiAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUoMCwgY3JlYXRlU2NoZWR1bGVNZXRob2QobywgaXQsIHRoaXMuX2ZuKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBGcm9tT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBtYXhTYWZlSW50ZWdlciA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG5cbiAgZnVuY3Rpb24gU3RyaW5nSXRlcmFibGUocykge1xuICAgIHRoaXMuX3MgPSBzO1xuICB9XG5cbiAgU3RyaW5nSXRlcmFibGUucHJvdG90eXBlWyRpdGVyYXRvciRdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgU3RyaW5nSXRlcmF0b3IodGhpcy5fcyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gU3RyaW5nSXRlcmF0b3Iocykge1xuICAgIHRoaXMuX3MgPSBzO1xuICAgIHRoaXMuX2wgPSBzLmxlbmd0aDtcbiAgICB0aGlzLl9pID0gMDtcbiAgfVxuXG4gIFN0cmluZ0l0ZXJhdG9yLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBTdHJpbmdJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5faSA8IHRoaXMuX2wgPyB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogdGhpcy5fcy5jaGFyQXQodGhpcy5faSsrKSB9IDogZG9uZUVudW1lcmF0b3I7XG4gIH07XG5cbiAgZnVuY3Rpb24gQXJyYXlJdGVyYWJsZShhKSB7XG4gICAgdGhpcy5fYSA9IGE7XG4gIH1cblxuICBBcnJheUl0ZXJhYmxlLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IEFycmF5SXRlcmF0b3IodGhpcy5fYSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gQXJyYXlJdGVyYXRvcihhKSB7XG4gICAgdGhpcy5fYSA9IGE7XG4gICAgdGhpcy5fbCA9IHRvTGVuZ3RoKGEpO1xuICAgIHRoaXMuX2kgPSAwO1xuICB9XG5cbiAgQXJyYXlJdGVyYXRvci5wcm90b3R5cGVbJGl0ZXJhdG9yJF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgQXJyYXlJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5faSA8IHRoaXMuX2wgPyB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogdGhpcy5fYVt0aGlzLl9pKytdIH0gOiBkb25lRW51bWVyYXRvcjtcbiAgfTtcblxuICBmdW5jdGlvbiBudW1iZXJJc0Zpbml0ZSh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIHJvb3QuaXNGaW5pdGUodmFsdWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNOYW4obikge1xuICAgIHJldHVybiBuICE9PSBuO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SXRlcmFibGUobykge1xuICAgIHZhciBpID0gb1skaXRlcmF0b3IkXSwgaXQ7XG4gICAgaWYgKCFpICYmIHR5cGVvZiBvID09PSAnc3RyaW5nJykge1xuICAgICAgaXQgPSBuZXcgU3RyaW5nSXRlcmFibGUobyk7XG4gICAgICByZXR1cm4gaXRbJGl0ZXJhdG9yJF0oKTtcbiAgICB9XG4gICAgaWYgKCFpICYmIG8ubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGl0ID0gbmV3IEFycmF5SXRlcmFibGUobyk7XG4gICAgICByZXR1cm4gaXRbJGl0ZXJhdG9yJF0oKTtcbiAgICB9XG4gICAgaWYgKCFpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdCBpcyBub3QgaXRlcmFibGUnKTsgfVxuICAgIHJldHVybiBvWyRpdGVyYXRvciRdKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzaWduKHZhbHVlKSB7XG4gICAgdmFyIG51bWJlciA9ICt2YWx1ZTtcbiAgICBpZiAobnVtYmVyID09PSAwKSB7IHJldHVybiBudW1iZXI7IH1cbiAgICBpZiAoaXNOYU4obnVtYmVyKSkgeyByZXR1cm4gbnVtYmVyOyB9XG4gICAgcmV0dXJuIG51bWJlciA8IDAgPyAtMSA6IDE7XG4gIH1cblxuICBmdW5jdGlvbiB0b0xlbmd0aChvKSB7XG4gICAgdmFyIGxlbiA9ICtvLmxlbmd0aDtcbiAgICBpZiAoaXNOYU4obGVuKSkgeyByZXR1cm4gMDsgfVxuICAgIGlmIChsZW4gPT09IDAgfHwgIW51bWJlcklzRmluaXRlKGxlbikpIHsgcmV0dXJuIGxlbjsgfVxuICAgIGxlbiA9IHNpZ24obGVuKSAqIE1hdGguZmxvb3IoTWF0aC5hYnMobGVuKSk7XG4gICAgaWYgKGxlbiA8PSAwKSB7IHJldHVybiAwOyB9XG4gICAgaWYgKGxlbiA+IG1heFNhZmVJbnRlZ2VyKSB7IHJldHVybiBtYXhTYWZlSW50ZWdlcjsgfVxuICAgIHJldHVybiBsZW47XG4gIH1cblxuICAvKipcbiAgKiBUaGlzIG1ldGhvZCBjcmVhdGVzIGEgbmV3IE9ic2VydmFibGUgc2VxdWVuY2UgZnJvbSBhbiBhcnJheS1saWtlIG9yIGl0ZXJhYmxlIG9iamVjdC5cbiAgKiBAcGFyYW0ge0FueX0gYXJyYXlMaWtlIEFuIGFycmF5LWxpa2Ugb3IgaXRlcmFibGUgb2JqZWN0IHRvIGNvbnZlcnQgdG8gYW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbbWFwRm5dIE1hcCBmdW5jdGlvbiB0byBjYWxsIG9uIGV2ZXJ5IGVsZW1lbnQgb2YgdGhlIGFycmF5LlxuICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gVGhlIGNvbnRleHQgdG8gdXNlIGNhbGxpbmcgdGhlIG1hcEZuIGlmIHByb3ZpZGVkLlxuICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBPcHRpb25hbCBzY2hlZHVsZXIgdG8gdXNlIGZvciBzY2hlZHVsaW5nLiAgSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byBTY2hlZHVsZXIuY3VycmVudFRocmVhZC5cbiAgKi9cbiAgdmFyIG9ic2VydmFibGVGcm9tID0gT2JzZXJ2YWJsZS5mcm9tID0gZnVuY3Rpb24gKGl0ZXJhYmxlLCBtYXBGbiwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG4gICAgaWYgKGl0ZXJhYmxlID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaXRlcmFibGUgY2Fubm90IGJlIG51bGwuJylcbiAgICB9XG4gICAgaWYgKG1hcEZuICYmICFpc0Z1bmN0aW9uKG1hcEZuKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdtYXBGbiB3aGVuIHByb3ZpZGVkIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgIH1cbiAgICBpZiAobWFwRm4pIHtcbiAgICAgIHZhciBtYXBwZXIgPSBiaW5kQ2FsbGJhY2sobWFwRm4sIHRoaXNBcmcsIDIpO1xuICAgIH1cbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IEZyb21PYnNlcnZhYmxlKGl0ZXJhYmxlLCBtYXBwZXIsIHNjaGVkdWxlcik7XG4gIH1cblxuICB2YXIgRnJvbUFycmF5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhGcm9tQXJyYXlPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZyb21BcnJheU9ic2VydmFibGUoYXJncywgc2NoZWR1bGVyKSB7XG4gICAgICB0aGlzLl9hcmdzID0gYXJncztcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKG8sIGFyZ3MpIHtcbiAgICAgIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBsb29wUmVjdXJzaXZlIChpLCByZWN1cnNlKSB7XG4gICAgICAgIGlmIChpIDwgbGVuKSB7XG4gICAgICAgICAgby5vbk5leHQoYXJnc1tpXSk7XG4gICAgICAgICAgcmVjdXJzZShpICsgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIEZyb21BcnJheU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZSgwLCBzY2hlZHVsZU1ldGhvZChvLCB0aGlzLl9hcmdzKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBGcm9tQXJyYXlPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogIENvbnZlcnRzIGFuIGFycmF5IHRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UsIHVzaW5nIGFuIG9wdGlvbmFsIHNjaGVkdWxlciB0byBlbnVtZXJhdGUgdGhlIGFycmF5LlxuICAqIEBkZXByZWNhdGVkIHVzZSBPYnNlcnZhYmxlLmZyb20gb3IgT2JzZXJ2YWJsZS5vZlxuICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSBlbnVtZXJhdGlvbiBvZiB0aGUgaW5wdXQgc2VxdWVuY2Ugb24uXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGFyZSBwdWxsZWQgZnJvbSB0aGUgZ2l2ZW4gZW51bWVyYWJsZSBzZXF1ZW5jZS5cbiAgKi9cbiAgdmFyIG9ic2VydmFibGVGcm9tQXJyYXkgPSBPYnNlcnZhYmxlLmZyb21BcnJheSA9IGZ1bmN0aW9uIChhcnJheSwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gY3VycmVudFRocmVhZFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBGcm9tQXJyYXlPYnNlcnZhYmxlKGFycmF5LCBzY2hlZHVsZXIpXG4gIH07XG5cbiAgdmFyIE5ldmVyT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhOZXZlck9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gTmV2ZXJPYnNlcnZhYmxlKCkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTmV2ZXJPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgIH07XG5cbiAgICByZXR1cm4gTmV2ZXJPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIE5FVkVSX09CU0VSVkFCTEUgPSBuZXcgTmV2ZXJPYnNlcnZhYmxlKCk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBub24tdGVybWluYXRpbmcgb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgd2hpY2ggY2FuIGJlIHVzZWQgdG8gZGVub3RlIGFuIGluZmluaXRlIGR1cmF0aW9uIChlLmcuIHdoZW4gdXNpbmcgcmVhY3RpdmUgam9pbnMpLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBvYnNlcnZlcnMgd2lsbCBuZXZlciBnZXQgY2FsbGVkLlxuICAgKi9cbiAgdmFyIG9ic2VydmFibGVOZXZlciA9IE9ic2VydmFibGUubmV2ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIE5FVkVSX09CU0VSVkFCTEU7XG4gIH07XG5cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZU9mIChzY2hlZHVsZXIsIGFycmF5KSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gY3VycmVudFRocmVhZFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBGcm9tQXJyYXlPYnNlcnZhYmxlKGFycmF5LCBzY2hlZHVsZXIpO1xuICB9XG5cbiAgLyoqXG4gICogIFRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBuZXcgT2JzZXJ2YWJsZSBpbnN0YW5jZSB3aXRoIGEgdmFyaWFibGUgbnVtYmVyIG9mIGFyZ3VtZW50cywgcmVnYXJkbGVzcyBvZiBudW1iZXIgb3IgdHlwZSBvZiB0aGUgYXJndW1lbnRzLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBlbGVtZW50cyBhcmUgcHVsbGVkIGZyb20gdGhlIGdpdmVuIGFyZ3VtZW50cy5cbiAgKi9cbiAgT2JzZXJ2YWJsZS5vZiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgcmV0dXJuIG5ldyBGcm9tQXJyYXlPYnNlcnZhYmxlKGFyZ3MsIGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICB9O1xuXG4gIC8qKlxuICAqICBUaGlzIG1ldGhvZCBjcmVhdGVzIGEgbmV3IE9ic2VydmFibGUgaW5zdGFuY2Ugd2l0aCBhIHZhcmlhYmxlIG51bWJlciBvZiBhcmd1bWVudHMsIHJlZ2FyZGxlc3Mgb2YgbnVtYmVyIG9yIHR5cGUgb2YgdGhlIGFyZ3VtZW50cy5cbiAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIEEgc2NoZWR1bGVyIHRvIHVzZSBmb3Igc2NoZWR1bGluZyB0aGUgYXJndW1lbnRzLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBlbGVtZW50cyBhcmUgcHVsbGVkIGZyb20gdGhlIGdpdmVuIGFyZ3VtZW50cy5cbiAgKi9cbiAgT2JzZXJ2YWJsZS5vZldpdGhTY2hlZHVsZXIgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0gMSk7XG4gICAgZm9yKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldOyB9XG4gICAgcmV0dXJuIG5ldyBGcm9tQXJyYXlPYnNlcnZhYmxlKGFyZ3MsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFBhaXJzT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhQYWlyc09ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUGFpcnNPYnNlcnZhYmxlKG8sIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9rZXlzID0gT2JqZWN0LmtleXMobyk7XG4gICAgICB0aGlzLl9zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChvLCBvYmosIGtleXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBsb29wUmVjdXJzaXZlKGksIHJlY3Vyc2UpIHtcbiAgICAgICAgaWYgKGkgPCBrZXlzLmxlbmd0aCkge1xuICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIG8ub25OZXh0KFtrZXksIG9ialtrZXldXSk7XG4gICAgICAgICAgcmVjdXJzZShpICsgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIFBhaXJzT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKDAsIHNjaGVkdWxlTWV0aG9kKG8sIHRoaXMuX28sIHRoaXMuX2tleXMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBhaXJzT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGFuIG9iamVjdCBpbnRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2YgW2tleSwgdmFsdWVdIHBhaXJzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB0byBydW4gdGhlIGVudW1lcmF0aW9uIG9mIHRoZSBpbnB1dCBzZXF1ZW5jZSBvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2YgW2tleSwgdmFsdWVdIHBhaXJzIGZyb20gdGhlIG9iamVjdC5cbiAgICovXG4gIE9ic2VydmFibGUucGFpcnMgPSBmdW5jdGlvbiAob2JqLCBzY2hlZHVsZXIpIHtcbiAgICBzY2hlZHVsZXIgfHwgKHNjaGVkdWxlciA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgUGFpcnNPYnNlcnZhYmxlKG9iaiwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICAgIHZhciBSYW5nZU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUmFuZ2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFJhbmdlT2JzZXJ2YWJsZShzdGFydCwgY291bnQsIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgICAgdGhpcy5yYW5nZUNvdW50ID0gY291bnQ7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvb3BSZWN1cnNpdmUoc3RhcnQsIGNvdW50LCBvKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gbG9vcCAoaSwgcmVjdXJzZSkge1xuICAgICAgICBpZiAoaSA8IGNvdW50KSB7XG4gICAgICAgICAgby5vbk5leHQoc3RhcnQgKyBpKTtcbiAgICAgICAgICByZWN1cnNlKGkgKyAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgUmFuZ2VPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShcbiAgICAgICAgMCxcbiAgICAgICAgbG9vcFJlY3Vyc2l2ZSh0aGlzLnN0YXJ0LCB0aGlzLnJhbmdlQ291bnQsIG8pXG4gICAgICApO1xuICAgIH07XG5cbiAgICByZXR1cm4gUmFuZ2VPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogIEdlbmVyYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIGludGVncmFsIG51bWJlcnMgd2l0aGluIGEgc3BlY2lmaWVkIHJhbmdlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBzZW5kIG91dCBvYnNlcnZlciBtZXNzYWdlcy5cbiAgKiBAcGFyYW0ge051bWJlcn0gc3RhcnQgVGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBpbnRlZ2VyIGluIHRoZSBzZXF1ZW5jZS5cbiAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgVGhlIG51bWJlciBvZiBzZXF1ZW50aWFsIGludGVnZXJzIHRvIGdlbmVyYXRlLlxuICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSBnZW5lcmF0b3IgbG9vcCBvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gU2NoZWR1bGVyLmN1cnJlbnRUaHJlYWQuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyBhIHJhbmdlIG9mIHNlcXVlbnRpYWwgaW50ZWdyYWwgbnVtYmVycy5cbiAgKi9cbiAgT2JzZXJ2YWJsZS5yYW5nZSA9IGZ1bmN0aW9uIChzdGFydCwgY291bnQsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgUmFuZ2VPYnNlcnZhYmxlKHN0YXJ0LCBjb3VudCwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgUmVwZWF0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhSZXBlYXRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFJlcGVhdE9ic2VydmFibGUodmFsdWUsIHJlcGVhdENvdW50LCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHRoaXMucmVwZWF0Q291bnQgPSByZXBlYXRDb3VudCA9PSBudWxsID8gLTEgOiByZXBlYXRDb3VudDtcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgUmVwZWF0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgdmFyIHNpbmsgPSBuZXcgUmVwZWF0U2luayhvYnNlcnZlciwgdGhpcyk7XG4gICAgICByZXR1cm4gc2luay5ydW4oKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlcGVhdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICBmdW5jdGlvbiBSZXBlYXRTaW5rKG9ic2VydmVyLCBwYXJlbnQpIHtcbiAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gIH1cblxuICBSZXBlYXRTaW5rLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9ic2VydmVyID0gdGhpcy5vYnNlcnZlciwgdmFsdWUgPSB0aGlzLnBhcmVudC52YWx1ZTtcbiAgICBmdW5jdGlvbiBsb29wUmVjdXJzaXZlKGksIHJlY3Vyc2UpIHtcbiAgICAgIGlmIChpID09PSAtMSB8fCBpID4gMCkge1xuICAgICAgICBvYnNlcnZlci5vbk5leHQodmFsdWUpO1xuICAgICAgICBpID4gMCAmJiBpLS07XG4gICAgICB9XG4gICAgICBpZiAoaSA9PT0gMCkgeyByZXR1cm4gb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTsgfVxuICAgICAgcmVjdXJzZShpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wYXJlbnQuc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKHRoaXMucGFyZW50LnJlcGVhdENvdW50LCBsb29wUmVjdXJzaXZlKTtcbiAgfTtcblxuICAvKipcbiAgICogIEdlbmVyYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgcmVwZWF0cyB0aGUgZ2l2ZW4gZWxlbWVudCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcywgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gc2VuZCBvdXQgb2JzZXJ2ZXIgbWVzc2FnZXMuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlIEVsZW1lbnQgdG8gcmVwZWF0LlxuICAgKiBAcGFyYW0ge051bWJlcn0gcmVwZWF0Q291bnQgW09wdGlvbmFdIE51bWJlciBvZiB0aW1lcyB0byByZXBlYXQgdGhlIGVsZW1lbnQuIElmIG5vdCBzcGVjaWZpZWQsIHJlcGVhdHMgaW5kZWZpbml0ZWx5LlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBydW4gdGhlIHByb2R1Y2VyIGxvb3Agb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci5pbW1lZGlhdGUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgcmVwZWF0cyB0aGUgZ2l2ZW4gZWxlbWVudCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAgICovXG4gIE9ic2VydmFibGUucmVwZWF0ID0gZnVuY3Rpb24gKHZhbHVlLCByZXBlYXRDb3VudCwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gY3VycmVudFRocmVhZFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBSZXBlYXRPYnNlcnZhYmxlKHZhbHVlLCByZXBlYXRDb3VudCwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgSnVzdE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSnVzdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gSnVzdE9ic2VydmFibGUodmFsdWUsIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEp1c3RPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBzdGF0ZSA9IFt0aGlzLl92YWx1ZSwgb107XG4gICAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVyID09PSBpbW1lZGlhdGVTY2hlZHVsZXIgP1xuICAgICAgICBzY2hlZHVsZUl0ZW0obnVsbCwgc3RhdGUpIDpcbiAgICAgICAgdGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlLCBzY2hlZHVsZUl0ZW0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZUl0ZW0ocywgc3RhdGUpIHtcbiAgICAgIHZhciB2YWx1ZSA9IHN0YXRlWzBdLCBvYnNlcnZlciA9IHN0YXRlWzFdO1xuICAgICAgb2JzZXJ2ZXIub25OZXh0KHZhbHVlKTtcbiAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgIH1cblxuICAgIHJldHVybiBKdXN0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgYSBzaW5nbGUgZWxlbWVudCwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gc2VuZCBvdXQgb2JzZXJ2ZXIgbWVzc2FnZXMuXG4gICAqICBUaGVyZSBpcyBhbiBhbGlhcyBjYWxsZWQgJ2p1c3QnIG9yIGJyb3dzZXJzIDxJRTkuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlIFNpbmdsZSBlbGVtZW50IGluIHRoZSByZXN1bHRpbmcgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IHNjaGVkdWxlciBTY2hlZHVsZXIgdG8gc2VuZCB0aGUgc2luZ2xlIGVsZW1lbnQgb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci5pbW1lZGlhdGUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHNpbmdsZSBzcGVjaWZpZWQgZWxlbWVudC5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlUmV0dXJuID0gT2JzZXJ2YWJsZVsncmV0dXJuJ10gPSBPYnNlcnZhYmxlLmp1c3QgPSBmdW5jdGlvbiAodmFsdWUsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGltbWVkaWF0ZVNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBKdXN0T2JzZXJ2YWJsZSh2YWx1ZSwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgVGhyb3dPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRocm93T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUaHJvd09ic2VydmFibGUoZXJyb3IsIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5fZXJyb3IgPSBlcnJvcjtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRocm93T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3RhdGUgPSBbdGhpcy5fZXJyb3IsIG9dO1xuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlciA9PT0gaW1tZWRpYXRlU2NoZWR1bGVyID9cbiAgICAgICAgc2NoZWR1bGVJdGVtKG51bGwsIHN0YXRlKSA6XG4gICAgICAgIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZShzdGF0ZSwgc2NoZWR1bGVJdGVtKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVJdGVtKHMsIHN0YXRlKSB7XG4gICAgICB2YXIgZSA9IHN0YXRlWzBdLCBvID0gc3RhdGVbMV07XG4gICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgIH1cblxuICAgIHJldHVybiBUaHJvd09ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHRlcm1pbmF0ZXMgd2l0aCBhbiBleGNlcHRpb24sIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHNlbmQgb3V0IHRoZSBzaW5nbGUgb25FcnJvciBtZXNzYWdlLlxuICAgKiAgVGhlcmUgaXMgYW4gYWxpYXMgdG8gdGhpcyBtZXRob2QgY2FsbGVkICd0aHJvd0Vycm9yJyBmb3IgYnJvd3NlcnMgPElFOS5cbiAgICogQHBhcmFtIHtNaXhlZH0gZXJyb3IgQW4gb2JqZWN0IHVzZWQgZm9yIHRoZSBzZXF1ZW5jZSdzIHRlcm1pbmF0aW9uLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBzZW5kIHRoZSBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBjYWxsIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBTY2hlZHVsZXIuaW1tZWRpYXRlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCB0ZXJtaW5hdGVzIGV4Y2VwdGlvbmFsbHkgd2l0aCB0aGUgc3BlY2lmaWVkIGV4Y2VwdGlvbiBvYmplY3QuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZVRocm93ID0gT2JzZXJ2YWJsZVsndGhyb3cnXSA9IGZ1bmN0aW9uIChlcnJvciwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gaW1tZWRpYXRlU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFRocm93T2JzZXJ2YWJsZShlcnJvciwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgQ2F0Y2hPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDYXRjaE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ2F0Y2hPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIENhdGNoT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZDEgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSwgc3Vic2NyaXB0aW9uID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcbiAgICAgIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKGQxKTtcbiAgICAgIGQxLnNldERpc3Bvc2FibGUodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBDYXRjaE9ic2VydmVyKG8sIHN1YnNjcmlwdGlvbiwgdGhpcy5fZm4pKSk7XG4gICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ2F0Y2hPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIENhdGNoT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ2F0Y2hPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDYXRjaE9ic2VydmVyKG8sIHMsIGZuKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIENhdGNoT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9vLm9uTmV4dCh4KTsgfTtcbiAgICBDYXRjaE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG4gICAgQ2F0Y2hPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuX2ZuKShlKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuXG4gICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgdGhpcy5fcy5zZXREaXNwb3NhYmxlKGQpO1xuICAgICAgZC5zZXREaXNwb3NhYmxlKHJlc3VsdC5zdWJzY3JpYmUodGhpcy5fbykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ2F0Y2hPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIENvbnRpbnVlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGVybWluYXRlZCBieSBhbiBleGNlcHRpb24gd2l0aCB0aGUgbmV4dCBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge01peGVkfSBoYW5kbGVyT3JTZWNvbmQgRXhjZXB0aW9uIGhhbmRsZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgZ2l2ZW4gdGhlIGVycm9yIHRoYXQgb2NjdXJyZWQgaW4gdGhlIGZpcnN0IHNlcXVlbmNlLCBvciBhIHNlY29uZCBvYnNlcnZhYmxlIHNlcXVlbmNlIHVzZWQgdG8gcHJvZHVjZSByZXN1bHRzIHdoZW4gYW4gZXJyb3Igb2NjdXJyZWQgaW4gdGhlIGZpcnN0IHNlcXVlbmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSBmaXJzdCBzZXF1ZW5jZSdzIGVsZW1lbnRzLCBmb2xsb3dlZCBieSB0aGUgZWxlbWVudHMgb2YgdGhlIGhhbmRsZXIgc2VxdWVuY2UgaW4gY2FzZSBhbiBleGNlcHRpb24gb2NjdXJyZWQuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG9bJ2NhdGNoJ10gPSBmdW5jdGlvbiAoaGFuZGxlck9yU2Vjb25kKSB7XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24oaGFuZGxlck9yU2Vjb25kKSA/IG5ldyBDYXRjaE9ic2VydmFibGUodGhpcywgaGFuZGxlck9yU2Vjb25kKSA6IG9ic2VydmFibGVDYXRjaChbdGhpcywgaGFuZGxlck9yU2Vjb25kXSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbnRpbnVlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGVybWluYXRlZCBieSBhbiBleGNlcHRpb24gd2l0aCB0aGUgbmV4dCBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0FycmF5IHwgQXJndW1lbnRzfSBhcmdzIEFyZ3VtZW50cyBvciBhbiBhcnJheSB0byB1c2UgYXMgdGhlIG5leHQgc2VxdWVuY2UgaWYgYW4gZXJyb3Igb2NjdXJzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGVsZW1lbnRzIGZyb20gY29uc2VjdXRpdmUgc291cmNlIHNlcXVlbmNlcyB1bnRpbCBhIHNvdXJjZSBzZXF1ZW5jZSB0ZXJtaW5hdGVzIHN1Y2Nlc3NmdWxseS5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlQ2F0Y2ggPSBPYnNlcnZhYmxlWydjYXRjaCddID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpdGVtcztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG4gICAgICBpdGVtcyA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICBpdGVtcyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGl0ZW1zW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgfVxuICAgIHJldHVybiBlbnVtZXJhYmxlT2YoaXRlbXMpLmNhdGNoRXJyb3IoKTtcbiAgfTtcblxuICAvKipcbiAgICogTWVyZ2VzIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSB1c2luZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2hlbmV2ZXIgYW55IG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBvciBQcm9taXNlcyBwcm9kdWNlcyBhbiBlbGVtZW50LlxuICAgKiBUaGlzIGNhbiBiZSBpbiB0aGUgZm9ybSBvZiBhbiBhcmd1bWVudCBsaXN0IG9mIG9ic2VydmFibGVzIG9yIGFuIGFycmF5LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAxIC0gb2JzID0gb2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0KG9iczEsIG9iczIsIG9iczMsIGZ1bmN0aW9uIChvMSwgbzIsIG8zKSB7IHJldHVybiBvMSArIG8yICsgbzM7IH0pO1xuICAgKiAyIC0gb2JzID0gb2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0KFtvYnMxLCBvYnMyLCBvYnMzXSwgZnVuY3Rpb24gKG8xLCBvMiwgbzMpIHsgcmV0dXJuIG8xICsgbzIgKyBvMzsgfSk7XG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBjb21iaW5pbmcgZWxlbWVudHMgb2YgdGhlIHNvdXJjZXMgdXNpbmcgdGhlIHNwZWNpZmllZCByZXN1bHQgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uY29tYmluZUxhdGVzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcbiAgICAgIGFyZ3NbMF0udW5zaGlmdCh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gY29tYmluZUxhdGVzdC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfTtcblxuICBmdW5jdGlvbiBmYWxzZUZhY3RvcnkoKSB7IHJldHVybiBmYWxzZTsgfVxuICBmdW5jdGlvbiBhcmd1bWVudHNUb0FycmF5KCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gYXJncztcbiAgfVxuXG4gIHZhciBDb21iaW5lTGF0ZXN0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb21iaW5lTGF0ZXN0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb21iaW5lTGF0ZXN0T2JzZXJ2YWJsZShwYXJhbXMsIGNiKSB7XG4gICAgICB0aGlzLl9wYXJhbXMgPSBwYXJhbXM7XG4gICAgICB0aGlzLl9jYiA9IGNiO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQ29tYmluZUxhdGVzdE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvYnNlcnZlcikge1xuICAgICAgdmFyIGxlbiA9IHRoaXMuX3BhcmFtcy5sZW5ndGgsXG4gICAgICAgICAgc3Vic2NyaXB0aW9ucyA9IG5ldyBBcnJheShsZW4pO1xuXG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIGhhc1ZhbHVlOiBhcnJheUluaXRpYWxpemUobGVuLCBmYWxzZUZhY3RvcnkpLFxuICAgICAgICBoYXNWYWx1ZUFsbDogZmFsc2UsXG4gICAgICAgIGlzRG9uZTogYXJyYXlJbml0aWFsaXplKGxlbiwgZmFsc2VGYWN0b3J5KSxcbiAgICAgICAgdmFsdWVzOiBuZXcgQXJyYXkobGVuKVxuICAgICAgfTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5fcGFyYW1zW2ldLCBzYWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uc1tpXSA9IHNhZDtcbiAgICAgICAgaXNQcm9taXNlKHNvdXJjZSkgJiYgKHNvdXJjZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShzb3VyY2UpKTtcbiAgICAgICAgc2FkLnNldERpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShuZXcgQ29tYmluZUxhdGVzdE9ic2VydmVyKG9ic2VydmVyLCBpLCB0aGlzLl9jYiwgc3RhdGUpKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgTkFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9ucyk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb21iaW5lTGF0ZXN0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBDb21iaW5lTGF0ZXN0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvbWJpbmVMYXRlc3RPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb21iaW5lTGF0ZXN0T2JzZXJ2ZXIobywgaSwgY2IsIHN0YXRlKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2kgPSBpO1xuICAgICAgdGhpcy5fY2IgPSBjYjtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3RUaGVTYW1lKGkpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoeCwgaikge1xuICAgICAgICByZXR1cm4gaiAhPT0gaTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgQ29tYmluZUxhdGVzdE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX3N0YXRlLnZhbHVlc1t0aGlzLl9pXSA9IHg7XG4gICAgICB0aGlzLl9zdGF0ZS5oYXNWYWx1ZVt0aGlzLl9pXSA9IHRydWU7XG4gICAgICBpZiAodGhpcy5fc3RhdGUuaGFzVmFsdWVBbGwgfHwgKHRoaXMuX3N0YXRlLmhhc1ZhbHVlQWxsID0gdGhpcy5fc3RhdGUuaGFzVmFsdWUuZXZlcnkoaWRlbnRpdHkpKSkge1xuICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fY2IpLmFwcGx5KG51bGwsIHRoaXMuX3N0YXRlLnZhbHVlcyk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHJlcyk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3N0YXRlLmlzRG9uZS5maWx0ZXIobm90VGhlU2FtZSh0aGlzLl9pKSkuZXZlcnkoaWRlbnRpdHkpKSB7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ29tYmluZUxhdGVzdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIENvbWJpbmVMYXRlc3RPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fc3RhdGUuaXNEb25lW3RoaXMuX2ldID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3N0YXRlLmlzRG9uZS5ldmVyeShpZGVudGl0eSkgJiYgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29tYmluZUxhdGVzdE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgKiBNZXJnZXMgdGhlIHNwZWNpZmllZCBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IHVzaW5nIHRoZSBzZWxlY3RvciBmdW5jdGlvbiB3aGVuZXZlciBhbnkgb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2VzIG9yIFByb21pc2VzIHByb2R1Y2VzIGFuIGVsZW1lbnQuXG4gICpcbiAgKiBAZXhhbXBsZVxuICAqIDEgLSBvYnMgPSBSeC5PYnNlcnZhYmxlLmNvbWJpbmVMYXRlc3Qob2JzMSwgb2JzMiwgb2JzMywgZnVuY3Rpb24gKG8xLCBvMiwgbzMpIHsgcmV0dXJuIG8xICsgbzIgKyBvMzsgfSk7XG4gICogMiAtIG9icyA9IFJ4Lk9ic2VydmFibGUuY29tYmluZUxhdGVzdChbb2JzMSwgb2JzMiwgb2JzM10sIGZ1bmN0aW9uIChvMSwgbzIsIG8zKSB7IHJldHVybiBvMSArIG8yICsgbzM7IH0pO1xuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBjb21iaW5pbmcgZWxlbWVudHMgb2YgdGhlIHNvdXJjZXMgdXNpbmcgdGhlIHNwZWNpZmllZCByZXN1bHQgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICovXG4gIHZhciBjb21iaW5lTGF0ZXN0ID0gT2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSBpc0Z1bmN0aW9uKGFyZ3NbbGVuIC0gMV0pID8gYXJncy5wb3AoKSA6IGFyZ3VtZW50c1RvQXJyYXk7XG4gICAgQXJyYXkuaXNBcnJheShhcmdzWzBdKSAmJiAoYXJncyA9IGFyZ3NbMF0pO1xuICAgIHJldHVybiBuZXcgQ29tYmluZUxhdGVzdE9ic2VydmFibGUoYXJncywgcmVzdWx0U2VsZWN0b3IpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDb25jYXRlbmF0ZXMgYWxsIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcy4gIFRoaXMgdGFrZXMgaW4gZWl0aGVyIGFuIGFycmF5IG9yIHZhcmlhYmxlIGFyZ3VtZW50cyB0byBjb25jYXRlbmF0ZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgZWFjaCBnaXZlbiBzZXF1ZW5jZSwgaW4gc2VxdWVudGlhbCBvcmRlci5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5jb25jYXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZm9yKHZhciBhcmdzID0gW10sIGkgPSAwLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cbiAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgcmV0dXJuIG9ic2VydmFibGVDb25jYXQuYXBwbHkobnVsbCwgYXJncyk7XG4gIH07XG5cbiAgdmFyIENvbmNhdE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvbmNhdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENvbmNhdE9ic2VydmVyKHMsIGZuKSB7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBDb25jYXRPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX3Muby5vbk5leHQoeCk7IH07XG4gICAgQ29uY2F0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fcy5vLm9uRXJyb3IoZSk7IH07XG4gICAgQ29uY2F0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fcy5pKys7IHRoaXMuX2ZuKHRoaXMuX3MpOyB9O1xuXG4gICAgcmV0dXJuIENvbmNhdE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICB2YXIgQ29uY2F0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb25jYXRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENvbmNhdE9ic2VydmFibGUoc291cmNlcykge1xuICAgICAgdGhpcy5fc291cmNlcyA9IHNvdXJjZXM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZVJlY3Vyc2l2ZSAoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIGlmIChzdGF0ZS5kaXNwb3NhYmxlLmlzRGlzcG9zZWQpIHsgcmV0dXJuOyB9XG4gICAgICBpZiAoc3RhdGUuaSA9PT0gc3RhdGUuc291cmNlcy5sZW5ndGgpIHsgcmV0dXJuIHN0YXRlLm8ub25Db21wbGV0ZWQoKTsgfVxuXG4gICAgICAvLyBDaGVjayBpZiBwcm9taXNlXG4gICAgICB2YXIgY3VycmVudFZhbHVlID0gc3RhdGUuc291cmNlc1tzdGF0ZS5pXTtcbiAgICAgIGlzUHJvbWlzZShjdXJyZW50VmFsdWUpICYmIChjdXJyZW50VmFsdWUgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoY3VycmVudFZhbHVlKSk7XG5cbiAgICAgIHZhciBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICBzdGF0ZS5zdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgIGQuc2V0RGlzcG9zYWJsZShjdXJyZW50VmFsdWUuc3Vic2NyaWJlKG5ldyBDb25jYXRPYnNlcnZlcihzdGF0ZSwgcmVjdXJzZSkpKTtcbiAgICB9XG5cbiAgICBDb25jYXRPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgICB2YXIgZGlzcG9zYWJsZSA9IGRpc3Bvc2FibGVDcmVhdGUobm9vcCk7XG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIG86IG8sXG4gICAgICAgIGk6IDAsXG4gICAgICAgIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uLFxuICAgICAgICBkaXNwb3NhYmxlOiBkaXNwb3NhYmxlLFxuICAgICAgICBzb3VyY2VzOiB0aGlzLl9zb3VyY2VzXG4gICAgICB9O1xuXG4gICAgICB2YXIgY2FuY2VsYWJsZSA9IGltbWVkaWF0ZVNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShzdGF0ZSwgc2NoZWR1bGVSZWN1cnNpdmUpO1xuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShbc3Vic2NyaXB0aW9uLCBkaXNwb3NhYmxlLCBjYW5jZWxhYmxlXSk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb25jYXRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqIENvbmNhdGVuYXRlcyBhbGwgdGhlIG9ic2VydmFibGUgc2VxdWVuY2VzLlxuICAgKiBAcGFyYW0ge0FycmF5IHwgQXJndW1lbnRzfSBhcmdzIEFyZ3VtZW50cyBvciBhbiBhcnJheSB0byBjb25jYXQgdG8gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGVhY2ggZ2l2ZW4gc2VxdWVuY2UsIGluIHNlcXVlbnRpYWwgb3JkZXIuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZUNvbmNhdCA9IE9ic2VydmFibGUuY29uY2F0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IENvbmNhdE9ic2VydmFibGUoYXJncyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbmNhdGVuYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIG9ic2VydmFibGUgc2VxdWVuY2VzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBlYWNoIG9ic2VydmVkIGlubmVyIHNlcXVlbmNlLCBpbiBzZXF1ZW50aWFsIG9yZGVyLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmNvbmNhdEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5tZXJnZSgxKTtcbiAgfTtcblxuICB2YXIgTWVyZ2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNZXJnZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBNZXJnZU9ic2VydmFibGUoc291cmNlLCBtYXhDb25jdXJyZW50KSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMubWF4Q29uY3VycmVudCA9IG1heENvbmN1cnJlbnQ7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBNZXJnZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvYnNlcnZlcikge1xuICAgICAgdmFyIGcgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuICAgICAgZy5hZGQodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBNZXJnZU9ic2VydmVyKG9ic2VydmVyLCB0aGlzLm1heENvbmN1cnJlbnQsIGcpKSk7XG4gICAgICByZXR1cm4gZztcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1lcmdlT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIE1lcmdlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGZ1bmN0aW9uIE1lcmdlT2JzZXJ2ZXIobywgbWF4LCBnKSB7XG4gICAgICB0aGlzLm8gPSBvO1xuICAgICAgdGhpcy5tYXggPSBtYXg7XG4gICAgICB0aGlzLmcgPSBnO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICB0aGlzLnEgPSBbXTtcbiAgICAgIHRoaXMuYWN0aXZlQ291bnQgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoTWVyZ2VPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIE1lcmdlT2JzZXJ2ZXIucHJvdG90eXBlLmhhbmRsZVN1YnNjcmliZSA9IGZ1bmN0aW9uICh4cykge1xuICAgICAgdmFyIHNhZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgdGhpcy5nLmFkZChzYWQpO1xuICAgICAgaXNQcm9taXNlKHhzKSAmJiAoeHMgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoeHMpKTtcbiAgICAgIHNhZC5zZXREaXNwb3NhYmxlKHhzLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcih0aGlzLCBzYWQpKSk7XG4gICAgfTtcblxuICAgIE1lcmdlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoaW5uZXJTb3VyY2UpIHtcbiAgICAgIGlmKHRoaXMuYWN0aXZlQ291bnQgPCB0aGlzLm1heCkge1xuICAgICAgICB0aGlzLmFjdGl2ZUNvdW50Kys7XG4gICAgICAgIHRoaXMuaGFuZGxlU3Vic2NyaWJlKGlubmVyU291cmNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucS5wdXNoKGlubmVyU291cmNlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5vLm9uRXJyb3IoZSk7IH07XG4gICAgTWVyZ2VPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLmRvbmUgPSB0cnVlOyB0aGlzLmFjdGl2ZUNvdW50ID09PSAwICYmIHRoaXMuby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihwYXJlbnQsIHNhZCkge1xuICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICB0aGlzLnNhZCA9IHNhZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5wYXJlbnQuby5vbk5leHQoeCk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLnBhcmVudC5vLm9uRXJyb3IoZSk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5wYXJlbnQuZy5yZW1vdmUodGhpcy5zYWQpO1xuICAgICAgaWYgKHRoaXMucGFyZW50LnEubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLnBhcmVudC5oYW5kbGVTdWJzY3JpYmUodGhpcy5wYXJlbnQucS5zaGlmdCgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGFyZW50LmFjdGl2ZUNvdW50LS07XG4gICAgICAgIHRoaXMucGFyZW50LmRvbmUgJiYgdGhpcy5wYXJlbnQuYWN0aXZlQ291bnQgPT09IDAgJiYgdGhpcy5wYXJlbnQuby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gTWVyZ2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogTWVyZ2VzIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2Ygb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLCBsaW1pdGluZyB0aGUgbnVtYmVyIG9mIGNvbmN1cnJlbnQgc3Vic2NyaXB0aW9ucyB0byBpbm5lciBzZXF1ZW5jZXMuXG4gICogT3IgbWVyZ2VzIHR3byBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIGEgc2luZ2xlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHBhcmFtIHtNaXhlZH0gW21heENvbmN1cnJlbnRPck90aGVyXSBNYXhpbXVtIG51bWJlciBvZiBpbm5lciBvYnNlcnZhYmxlIHNlcXVlbmNlcyBiZWluZyBzdWJzY3JpYmVkIHRvIGNvbmN1cnJlbnRseSBvciB0aGUgc2Vjb25kIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgbWVyZ2VzIHRoZSBlbGVtZW50cyBvZiB0aGUgaW5uZXIgc2VxdWVuY2VzLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubWVyZ2UgPSBmdW5jdGlvbiAobWF4Q29uY3VycmVudE9yT3RoZXIpIHtcbiAgICByZXR1cm4gdHlwZW9mIG1heENvbmN1cnJlbnRPck90aGVyICE9PSAnbnVtYmVyJyA/XG4gICAgICBvYnNlcnZhYmxlTWVyZ2UodGhpcywgbWF4Q29uY3VycmVudE9yT3RoZXIpIDpcbiAgICAgIG5ldyBNZXJnZU9ic2VydmFibGUodGhpcywgbWF4Q29uY3VycmVudE9yT3RoZXIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNZXJnZXMgYWxsIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIGEgc2luZ2xlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIFRoZSBzY2hlZHVsZXIgaXMgb3B0aW9uYWwgYW5kIGlmIG5vdCBzcGVjaWZpZWQsIHRoZSBpbW1lZGlhdGUgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IG1lcmdlcyB0aGUgZWxlbWVudHMgb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2VzLlxuICAgKi9cbiAgdmFyIG9ic2VydmFibGVNZXJnZSA9IE9ic2VydmFibGUubWVyZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNjaGVkdWxlciwgc291cmNlcyA9IFtdLCBpLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmICghYXJndW1lbnRzWzBdKSB7XG4gICAgICBzY2hlZHVsZXIgPSBpbW1lZGlhdGVTY2hlZHVsZXI7XG4gICAgICBmb3IoaSA9IDE7IGkgPCBsZW47IGkrKykgeyBzb3VyY2VzLnB1c2goYXJndW1lbnRzW2ldKTsgfVxuICAgIH0gZWxzZSBpZiAoaXNTY2hlZHVsZXIoYXJndW1lbnRzWzBdKSkge1xuICAgICAgc2NoZWR1bGVyID0gYXJndW1lbnRzWzBdO1xuICAgICAgZm9yKGkgPSAxOyBpIDwgbGVuOyBpKyspIHsgc291cmNlcy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVyID0gaW1tZWRpYXRlU2NoZWR1bGVyO1xuICAgICAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgc291cmNlcy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc291cmNlc1swXSkpIHtcbiAgICAgIHNvdXJjZXMgPSBzb3VyY2VzWzBdO1xuICAgIH1cbiAgICByZXR1cm4gb2JzZXJ2YWJsZU9mKHNjaGVkdWxlciwgc291cmNlcykubWVyZ2VBbGwoKTtcbiAgfTtcblxuICB2YXIgQ29tcG9zaXRlRXJyb3IgPSBSeC5Db21wb3NpdGVFcnJvciA9IGZ1bmN0aW9uKGVycm9ycykge1xuICAgIHRoaXMuaW5uZXJFcnJvcnMgPSBlcnJvcnM7XG4gICAgdGhpcy5tZXNzYWdlID0gJ1RoaXMgY29udGFpbnMgbXVsdGlwbGUgZXJyb3JzLiBDaGVjayB0aGUgaW5uZXJFcnJvcnMnO1xuICAgIEVycm9yLmNhbGwodGhpcyk7XG4gIH07XG4gIENvbXBvc2l0ZUVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbiAgQ29tcG9zaXRlRXJyb3IucHJvdG90eXBlLm5hbWUgPSAnQ29tcG9zaXRlRXJyb3InO1xuXG4gIHZhciBNZXJnZURlbGF5RXJyb3JPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE1lcmdlRGVsYXlFcnJvck9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gTWVyZ2VEZWxheUVycm9yT2JzZXJ2YWJsZShzb3VyY2UpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTWVyZ2VEZWxheUVycm9yT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZ3JvdXAgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpLFxuICAgICAgICBtID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksXG4gICAgICAgIHN0YXRlID0geyBpc1N0b3BwZWQ6IGZhbHNlLCBlcnJvcnM6IFtdLCBvOiBvIH07XG5cbiAgICAgIGdyb3VwLmFkZChtKTtcbiAgICAgIG0uc2V0RGlzcG9zYWJsZSh0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IE1lcmdlRGVsYXlFcnJvck9ic2VydmVyKGdyb3VwLCBzdGF0ZSkpKTtcblxuICAgICAgcmV0dXJuIGdyb3VwO1xuICAgIH07XG5cbiAgICByZXR1cm4gTWVyZ2VEZWxheUVycm9yT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBNZXJnZURlbGF5RXJyb3JPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNZXJnZURlbGF5RXJyb3JPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBNZXJnZURlbGF5RXJyb3JPYnNlcnZlcihncm91cCwgc3RhdGUpIHtcbiAgICAgIHRoaXMuX2dyb3VwID0gZ3JvdXA7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0Q29tcGxldGlvbihvLCBlcnJvcnMpIHtcbiAgICAgIGlmIChlcnJvcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3JzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBvLm9uRXJyb3IoZXJyb3JzWzBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG8ub25FcnJvcihuZXcgQ29tcG9zaXRlRXJyb3IoZXJyb3JzKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIGlubmVyID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICB0aGlzLl9ncm91cC5hZGQoaW5uZXIpO1xuXG4gICAgICAvLyBDaGVjayBmb3IgcHJvbWlzZXMgc3VwcG9ydFxuICAgICAgaXNQcm9taXNlKHgpICYmICh4ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHgpKTtcbiAgICAgIGlubmVyLnNldERpc3Bvc2FibGUoeC5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIoaW5uZXIsIHRoaXMuX2dyb3VwLCB0aGlzLl9zdGF0ZSkpKTtcbiAgICB9O1xuXG4gICAgTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX3N0YXRlLmVycm9ycy5wdXNoKGUpO1xuICAgICAgdGhpcy5fc3RhdGUuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2dyb3VwLmxlbmd0aCA9PT0gMSAmJiBzZXRDb21wbGV0aW9uKHRoaXMuX3N0YXRlLm8sIHRoaXMuX3N0YXRlLmVycm9ycyk7XG4gICAgfTtcblxuICAgIE1lcmdlRGVsYXlFcnJvck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9zdGF0ZS5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fZ3JvdXAubGVuZ3RoID09PSAxICYmIHNldENvbXBsZXRpb24odGhpcy5fc3RhdGUubywgdGhpcy5fc3RhdGUuZXJyb3JzKTtcbiAgICB9O1xuXG4gICAgaW5oZXJpdHMoSW5uZXJPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKGlubmVyLCBncm91cCwgc3RhdGUpIHtcbiAgICAgIHRoaXMuX2lubmVyID0gaW5uZXI7XG4gICAgICB0aGlzLl9ncm91cCA9IGdyb3VwO1xuICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9zdGF0ZS5vLm9uTmV4dCh4KTsgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9zdGF0ZS5lcnJvcnMucHVzaChlKTtcbiAgICAgIHRoaXMuX2dyb3VwLnJlbW92ZSh0aGlzLl9pbm5lcik7XG4gICAgICB0aGlzLl9zdGF0ZS5pc1N0b3BwZWQgJiYgdGhpcy5fZ3JvdXAubGVuZ3RoID09PSAxICYmIHNldENvbXBsZXRpb24odGhpcy5fc3RhdGUubywgdGhpcy5fc3RhdGUuZXJyb3JzKTtcbiAgICB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX2dyb3VwLnJlbW92ZSh0aGlzLl9pbm5lcik7XG4gICAgICB0aGlzLl9zdGF0ZS5pc1N0b3BwZWQgJiYgdGhpcy5fZ3JvdXAubGVuZ3RoID09PSAxICYmIHNldENvbXBsZXRpb24odGhpcy5fc3RhdGUubywgdGhpcy5fc3RhdGUuZXJyb3JzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1lcmdlRGVsYXlFcnJvck9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgKiBGbGF0dGVucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgT2JzZXJ2YWJsZXMgaW50byBvbmUgT2JzZXJ2YWJsZSwgaW4gYSB3YXkgdGhhdCBhbGxvd3MgYW4gT2JzZXJ2ZXIgdG9cbiAgKiByZWNlaXZlIGFsbCBzdWNjZXNzZnVsbHkgZW1pdHRlZCBpdGVtcyBmcm9tIGFsbCBvZiB0aGUgc291cmNlIE9ic2VydmFibGVzIHdpdGhvdXQgYmVpbmcgaW50ZXJydXB0ZWQgYnlcbiAgKiBhbiBlcnJvciBub3RpZmljYXRpb24gZnJvbSBvbmUgb2YgdGhlbS5cbiAgKlxuICAqIFRoaXMgYmVoYXZlcyBsaWtlIE9ic2VydmFibGUucHJvdG90eXBlLm1lcmdlQWxsIGV4Y2VwdCB0aGF0IGlmIGFueSBvZiB0aGUgbWVyZ2VkIE9ic2VydmFibGVzIG5vdGlmeSBvZiBhblxuICAqIGVycm9yIHZpYSB0aGUgT2JzZXJ2ZXIncyBvbkVycm9yLCBtZXJnZURlbGF5RXJyb3Igd2lsbCByZWZyYWluIGZyb20gcHJvcGFnYXRpbmcgdGhhdFxuICAqIGVycm9yIG5vdGlmaWNhdGlvbiB1bnRpbCBhbGwgb2YgdGhlIG1lcmdlZCBPYnNlcnZhYmxlcyBoYXZlIGZpbmlzaGVkIGVtaXR0aW5nIGl0ZW1zLlxuICAqIEBwYXJhbSB7QXJyYXkgfCBBcmd1bWVudHN9IGFyZ3MgQXJndW1lbnRzIG9yIGFuIGFycmF5IHRvIG1lcmdlLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYWxsIG9mIHRoZSBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBPYnNlcnZhYmxlcyBlbWl0dGVkIGJ5IHRoZSBPYnNlcnZhYmxlXG4gICovXG4gIE9ic2VydmFibGUubWVyZ2VEZWxheUVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3M7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgYXJncyA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIH1cbiAgICB2YXIgc291cmNlID0gb2JzZXJ2YWJsZU9mKG51bGwsIGFyZ3MpO1xuICAgIHJldHVybiBuZXcgTWVyZ2VEZWxheUVycm9yT2JzZXJ2YWJsZShzb3VyY2UpO1xuICB9O1xuXG4gIHZhciBNZXJnZUFsbE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE1lcmdlQWxsT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIE1lcmdlQWxsT2JzZXJ2YWJsZShzb3VyY2UpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTWVyZ2VBbGxPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBnID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKSwgbSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgZy5hZGQobSk7XG4gICAgICBtLnNldERpc3Bvc2FibGUodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBNZXJnZUFsbE9ic2VydmVyKG8sIGcpKSk7XG4gICAgICByZXR1cm4gZztcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1lcmdlQWxsT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBNZXJnZUFsbE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBmdW5jdGlvbiBNZXJnZUFsbE9ic2VydmVyKG8sIGcpIHtcbiAgICAgIHRoaXMubyA9IG87XG4gICAgICB0aGlzLmcgPSBnO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhNZXJnZUFsbE9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgTWVyZ2VBbGxPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKGlubmVyU291cmNlKSB7XG4gICAgICB2YXIgc2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICB0aGlzLmcuYWRkKHNhZCk7XG4gICAgICBpc1Byb21pc2UoaW5uZXJTb3VyY2UpICYmIChpbm5lclNvdXJjZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShpbm5lclNvdXJjZSkpO1xuICAgICAgc2FkLnNldERpc3Bvc2FibGUoaW5uZXJTb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKHRoaXMsIHNhZCkpKTtcbiAgICB9O1xuXG4gICAgTWVyZ2VBbGxPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIE1lcmdlQWxsT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgICB0aGlzLmcubGVuZ3RoID09PSAxICYmIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKHBhcmVudCwgc2FkKSB7XG4gICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgIHRoaXMuc2FkID0gc2FkO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoSW5uZXJPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5wYXJlbnQuby5vbk5leHQoeCk7XG4gICAgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLnBhcmVudC5vLm9uRXJyb3IoZSk7XG4gICAgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnBhcmVudC5nLnJlbW92ZSh0aGlzLnNhZCk7XG4gICAgICB0aGlzLnBhcmVudC5kb25lICYmIHRoaXMucGFyZW50LmcubGVuZ3RoID09PSAxICYmIHRoaXMucGFyZW50Lm8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1lcmdlQWxsT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAqIE1lcmdlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBtZXJnZXMgdGhlIGVsZW1lbnRzIG9mIHRoZSBpbm5lciBzZXF1ZW5jZXMuXG4gICovXG4gIG9ic2VydmFibGVQcm90by5tZXJnZUFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IE1lcmdlQWxsT2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICB2YXIgU2tpcFVudGlsT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwVW50aWxPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gU2tpcFVudGlsT2JzZXJ2YWJsZShzb3VyY2UsIG90aGVyKSB7XG4gICAgICB0aGlzLl9zID0gc291cmNlO1xuICAgICAgdGhpcy5fbyA9IGlzUHJvbWlzZShvdGhlcikgPyBvYnNlcnZhYmxlRnJvbVByb21pc2Uob3RoZXIpIDogb3RoZXI7XG4gICAgICB0aGlzLl9vcGVuID0gZmFsc2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTa2lwVW50aWxPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGxlZnRTdWJzY3JpcHRpb24gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIGxlZnRTdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZSh0aGlzLl9zLnN1YnNjcmliZShuZXcgU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIobywgdGhpcykpKTtcblxuICAgICAgaXNQcm9taXNlKHRoaXMuX28pICYmICh0aGlzLl9vID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHRoaXMuX28pKTtcblxuICAgICAgdmFyIHJpZ2h0U3Vic2NyaXB0aW9uID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICByaWdodFN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKHRoaXMuX28uc3Vic2NyaWJlKG5ldyBTa2lwVW50aWxPdGhlck9ic2VydmVyKG8sIHRoaXMsIHJpZ2h0U3Vic2NyaXB0aW9uKSkpO1xuXG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUobGVmdFN1YnNjcmlwdGlvbiwgcmlnaHRTdWJzY3JpcHRpb24pO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcFVudGlsT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTa2lwVW50aWxTb3VyY2VPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwVW50aWxTb3VyY2VPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTa2lwVW50aWxTb3VyY2VPYnNlcnZlcihvLCBwKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fcC5fb3BlbiAmJiB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICB9O1xuXG4gICAgU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGVycik7XG4gICAgfTtcblxuICAgIFNraXBVbnRpbFNvdXJjZU9ic2VydmVyLnByb3RvdHlwZS5vbkNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3AuX29wZW4gJiYgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcFVudGlsU291cmNlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIHZhciBTa2lwVW50aWxPdGhlck9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBVbnRpbE90aGVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcFVudGlsT3RoZXJPYnNlcnZlcihvLCBwLCByKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgdGhpcy5fciA9IHI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTa2lwVW50aWxPdGhlck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fcC5fb3BlbiA9IHRydWU7XG4gICAgICB0aGlzLl9yLmRpc3Bvc2UoKTtcbiAgICB9O1xuXG4gICAgU2tpcFVudGlsT3RoZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZXJyKTtcbiAgICB9O1xuXG4gICAgU2tpcFVudGlsT3RoZXJPYnNlcnZlci5wcm90b3R5cGUub25Db21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9yLmRpc3Bvc2UoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBVbnRpbE90aGVyT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB2YWx1ZXMgZnJvbSB0aGUgc291cmNlIG9ic2VydmFibGUgc2VxdWVuY2Ugb25seSBhZnRlciB0aGUgb3RoZXIgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBwcm9kdWNlcyBhIHZhbHVlLlxuICAgKiBAcGFyYW0ge09ic2VydmFibGUgfCBQcm9taXNlfSBvdGhlciBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvciBQcm9taXNlIHRoYXQgdHJpZ2dlcnMgcHJvcGFnYXRpb24gb2YgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZSBzdGFydGluZyBmcm9tIHRoZSBwb2ludCB0aGUgb3RoZXIgc2VxdWVuY2UgdHJpZ2dlcmVkIHByb3BhZ2F0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNraXBVbnRpbCA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIHJldHVybiBuZXcgU2tpcFVudGlsT2JzZXJ2YWJsZSh0aGlzLCBvdGhlcik7XG4gIH07XG5cbiAgdmFyIFN3aXRjaE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU3dpdGNoT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTd2l0Y2hPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTd2l0Y2hPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBpbm5lciA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksIHMgPSB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFN3aXRjaE9ic2VydmVyKG8sIGlubmVyKSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUocywgaW5uZXIpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhTd2l0Y2hPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG4gICAgZnVuY3Rpb24gU3dpdGNoT2JzZXJ2ZXIobywgaW5uZXIpIHtcbiAgICAgIHRoaXMubyA9IG87XG4gICAgICB0aGlzLmlubmVyID0gaW5uZXI7XG4gICAgICB0aGlzLnN0b3BwZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMubGF0ZXN0ID0gMDtcbiAgICAgIHRoaXMuaGFzTGF0ZXN0ID0gZmFsc2U7XG4gICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU3dpdGNoT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoaW5uZXJTb3VyY2UpIHtcbiAgICAgIHZhciBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksIGlkID0gKyt0aGlzLmxhdGVzdDtcbiAgICAgIHRoaXMuaGFzTGF0ZXN0ID0gdHJ1ZTtcbiAgICAgIHRoaXMuaW5uZXIuc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgIGlzUHJvbWlzZShpbm5lclNvdXJjZSkgJiYgKGlubmVyU291cmNlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGlubmVyU291cmNlKSk7XG4gICAgICBkLnNldERpc3Bvc2FibGUoaW5uZXJTb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKHRoaXMsIGlkKSkpO1xuICAgIH07XG5cbiAgICBTd2l0Y2hPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFN3aXRjaE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgIXRoaXMuaGFzTGF0ZXN0ICYmIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKHBhcmVudCwgaWQpIHtcbiAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMucGFyZW50LmxhdGVzdCA9PT0gdGhpcy5pZCAmJiB0aGlzLnBhcmVudC5vLm9uTmV4dCh4KTtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5wYXJlbnQubGF0ZXN0ID09PSB0aGlzLmlkICYmIHRoaXMucGFyZW50Lm8ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMucGFyZW50LmxhdGVzdCA9PT0gdGhpcy5pZCkge1xuICAgICAgICB0aGlzLnBhcmVudC5oYXNMYXRlc3QgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wYXJlbnQuc3RvcHBlZCAmJiB0aGlzLnBhcmVudC5vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBTd2l0Y2hPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogVHJhbnNmb3JtcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBwcm9kdWNpbmcgdmFsdWVzIG9ubHkgZnJvbSB0aGUgbW9zdCByZWNlbnQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBhdCBhbnkgcG9pbnQgaW4gdGltZSBwcm9kdWNlcyB0aGUgZWxlbWVudHMgb2YgdGhlIG1vc3QgcmVjZW50IGlubmVyIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBoYXMgYmVlbiByZWNlaXZlZC5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvWydzd2l0Y2gnXSA9IG9ic2VydmFibGVQcm90by5zd2l0Y2hMYXRlc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBTd2l0Y2hPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIHZhciBUYWtlVW50aWxPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VVbnRpbE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBUYWtlVW50aWxPYnNlcnZhYmxlKHNvdXJjZSwgb3RoZXIpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5vdGhlciA9IGlzUHJvbWlzZShvdGhlcikgPyBvYnNlcnZhYmxlRnJvbVByb21pc2Uob3RoZXIpIDogb3RoZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUYWtlVW50aWxPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKFxuICAgICAgICB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobyksXG4gICAgICAgIHRoaXMub3RoZXIuc3Vic2NyaWJlKG5ldyBUYWtlVW50aWxPYnNlcnZlcihvKSlcbiAgICAgICk7XG4gICAgfTtcblxuICAgIHJldHVybiBUYWtlVW50aWxPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFRha2VVbnRpbE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VVbnRpbE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRha2VVbnRpbE9ic2VydmVyKG8pIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFrZVVudGlsT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIFRha2VVbnRpbE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlcnIpO1xuICAgIH07XG5cbiAgICBUYWtlVW50aWxPYnNlcnZlci5wcm90b3R5cGUub25Db21wbGV0ZWQgPSBub29wO1xuXG4gICAgcmV0dXJuIFRha2VVbnRpbE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHVudGlsIHRoZSBvdGhlciBvYnNlcnZhYmxlIHNlcXVlbmNlIHByb2R1Y2VzIGEgdmFsdWUuXG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZSB8IFByb21pc2V9IG90aGVyIE9ic2VydmFibGUgc2VxdWVuY2Ugb3IgUHJvbWlzZSB0aGF0IHRlcm1pbmF0ZXMgcHJvcGFnYXRpb24gb2YgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZSB1cCB0byB0aGUgcG9pbnQgdGhlIG90aGVyIHNlcXVlbmNlIGludGVycnVwdGVkIGZ1cnRoZXIgcHJvcGFnYXRpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGFrZVVudGlsID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgcmV0dXJuIG5ldyBUYWtlVW50aWxPYnNlcnZhYmxlKHRoaXMsIG90aGVyKTtcbiAgfTtcblxuICBmdW5jdGlvbiBmYWxzZUZhY3RvcnkoKSB7IHJldHVybiBmYWxzZTsgfVxuICBmdW5jdGlvbiBhcmd1bWVudHNUb0FycmF5KCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gYXJncztcbiAgfVxuXG4gIHZhciBXaXRoTGF0ZXN0RnJvbU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoV2l0aExhdGVzdEZyb21PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFdpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZShzb3VyY2UsIHNvdXJjZXMsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICB0aGlzLl9zID0gc291cmNlO1xuICAgICAgdGhpcy5fc3MgPSBzb3VyY2VzO1xuICAgICAgdGhpcy5fY2IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFdpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgbGVuID0gdGhpcy5fc3MubGVuZ3RoO1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBoYXNWYWx1ZTogYXJyYXlJbml0aWFsaXplKGxlbiwgZmFsc2VGYWN0b3J5KSxcbiAgICAgICAgaGFzVmFsdWVBbGw6IGZhbHNlLFxuICAgICAgICB2YWx1ZXM6IG5ldyBBcnJheShsZW4pXG4gICAgICB9O1xuXG4gICAgICB2YXIgbiA9IHRoaXMuX3NzLmxlbmd0aCwgc3Vic2NyaXB0aW9ucyA9IG5ldyBBcnJheShuICsgMSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICB2YXIgb3RoZXIgPSB0aGlzLl9zc1tpXSwgc2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIGlzUHJvbWlzZShvdGhlcikgJiYgKG90aGVyID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKG90aGVyKSk7XG4gICAgICAgIHNhZC5zZXREaXNwb3NhYmxlKG90aGVyLnN1YnNjcmliZShuZXcgV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyKG8sIGksIHN0YXRlKSkpO1xuICAgICAgICBzdWJzY3JpcHRpb25zW2ldID0gc2FkO1xuICAgICAgfVxuXG4gICAgICB2YXIgb3V0ZXJTYWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIG91dGVyU2FkLnNldERpc3Bvc2FibGUodGhpcy5fcy5zdWJzY3JpYmUobmV3IFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIobywgdGhpcy5fY2IsIHN0YXRlKSkpO1xuICAgICAgc3Vic2NyaXB0aW9uc1tuXSA9IG91dGVyU2FkO1xuXG4gICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gV2l0aExhdGVzdEZyb21PYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFdpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFdpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlcihvLCBpLCBzdGF0ZSkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9pID0gaTtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBXaXRoTGF0ZXN0RnJvbU90aGVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fc3RhdGUudmFsdWVzW3RoaXMuX2ldID0geDtcbiAgICAgIHRoaXMuX3N0YXRlLmhhc1ZhbHVlW3RoaXMuX2ldID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3N0YXRlLmhhc1ZhbHVlQWxsID0gdGhpcy5fc3RhdGUuaGFzVmFsdWUuZXZlcnkoaWRlbnRpdHkpO1xuICAgIH07XG5cbiAgICBXaXRoTGF0ZXN0RnJvbU90aGVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBub29wO1xuXG4gICAgcmV0dXJuIFdpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgdmFyIFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gV2l0aExhdGVzdEZyb21Tb3VyY2VPYnNlcnZlcihvLCBjYiwgc3RhdGUpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fY2IgPSBjYjtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBXaXRoTGF0ZXN0RnJvbVNvdXJjZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBhbGxWYWx1ZXMgPSBbeF0uY29uY2F0KHRoaXMuX3N0YXRlLnZhbHVlcyk7XG4gICAgICBpZiAoIXRoaXMuX3N0YXRlLmhhc1ZhbHVlQWxsKSB7IHJldHVybjsgfVxuICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX2NiKS5hcHBseShudWxsLCBhbGxWYWx1ZXMpO1xuICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgIHRoaXMuX28ub25OZXh0KHJlcyk7XG4gICAgfTtcblxuICAgIFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgV2l0aExhdGVzdEZyb21Tb3VyY2VPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gV2l0aExhdGVzdEZyb21Tb3VyY2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIE1lcmdlcyB0aGUgc3BlY2lmaWVkIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgdXNpbmcgdGhlIHNlbGVjdG9yIGZ1bmN0aW9uIG9ubHkgd2hlbiB0aGUgKGZpcnN0KSBzb3VyY2Ugb2JzZXJ2YWJsZSBzZXF1ZW5jZSBwcm9kdWNlcyBhbiBlbGVtZW50LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgY29tYmluaW5nIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2VzIHVzaW5nIHRoZSBzcGVjaWZpZWQgcmVzdWx0IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLndpdGhMYXRlc3RGcm9tID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7IHRocm93IG5ldyBFcnJvcignaW52YWxpZCBhcmd1bWVudHMnKTsgfVxuXG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIHZhciByZXN1bHRTZWxlY3RvciA9IGlzRnVuY3Rpb24oYXJnc1tsZW4gLSAxXSkgPyBhcmdzLnBvcCgpIDogYXJndW1lbnRzVG9BcnJheTtcbiAgICBBcnJheS5pc0FycmF5KGFyZ3NbMF0pICYmIChhcmdzID0gYXJnc1swXSk7XG5cbiAgICByZXR1cm4gbmV3IFdpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZSh0aGlzLCBhcmdzLCByZXN1bHRTZWxlY3Rvcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gZmFsc2VGYWN0b3J5KCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgZnVuY3Rpb24gZW1wdHlBcnJheUZhY3RvcnkoKSB7IHJldHVybiBbXTsgfVxuXG4gIHZhciBaaXBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFppcE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gWmlwT2JzZXJ2YWJsZShzb3VyY2VzLCByZXN1bHRTZWxlY3Rvcikge1xuICAgICAgdGhpcy5fcyA9IHNvdXJjZXM7XG4gICAgICB0aGlzLl9jYiA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgWmlwT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG9ic2VydmVyKSB7XG4gICAgICB2YXIgbiA9IHRoaXMuX3MubGVuZ3RoLFxuICAgICAgICAgIHN1YnNjcmlwdGlvbnMgPSBuZXcgQXJyYXkobiksXG4gICAgICAgICAgZG9uZSA9IGFycmF5SW5pdGlhbGl6ZShuLCBmYWxzZUZhY3RvcnkpLFxuICAgICAgICAgIHEgPSBhcnJheUluaXRpYWxpemUobiwgZW1wdHlBcnJheUZhY3RvcnkpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5fc1tpXSwgc2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIHN1YnNjcmlwdGlvbnNbaV0gPSBzYWQ7XG4gICAgICAgIGlzUHJvbWlzZShzb3VyY2UpICYmIChzb3VyY2UgPSBvYnNlcnZhYmxlRnJvbVByb21pc2Uoc291cmNlKSk7XG4gICAgICAgIHNhZC5zZXREaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUobmV3IFppcE9ic2VydmVyKG9ic2VydmVyLCBpLCB0aGlzLCBxLCBkb25lKSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWmlwT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBaaXBPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoWmlwT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gWmlwT2JzZXJ2ZXIobywgaSwgcCwgcSwgZCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9pID0gaTtcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgdGhpcy5fcSA9IHE7XG4gICAgICB0aGlzLl9kID0gZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5vdEVtcHR5KHgpIHsgcmV0dXJuIHgubGVuZ3RoID4gMDsgfVxuICAgIGZ1bmN0aW9uIHNoaWZ0RWFjaCh4KSB7IHJldHVybiB4LnNoaWZ0KCk7IH1cbiAgICBmdW5jdGlvbiBub3RUaGVTYW1lKGkpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoeCwgaikge1xuICAgICAgICByZXR1cm4gaiAhPT0gaTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgWmlwT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fcVt0aGlzLl9pXS5wdXNoKHgpO1xuICAgICAgaWYgKHRoaXMuX3EuZXZlcnkobm90RW1wdHkpKSB7XG4gICAgICAgIHZhciBxdWV1ZWRWYWx1ZXMgPSB0aGlzLl9xLm1hcChzaGlmdEVhY2gpO1xuICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fcC5fY2IpLmFwcGx5KG51bGwsIHF1ZXVlZFZhbHVlcyk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHJlcyk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2QuZmlsdGVyKG5vdFRoZVNhbWUodGhpcy5faSkpLmV2ZXJ5KGlkZW50aXR5KSkge1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFppcE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFppcE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9kW3RoaXMuX2ldID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2QuZXZlcnkoaWRlbnRpdHkpICYmIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFppcE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogTWVyZ2VzIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSB1c2luZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2hlbmV2ZXIgYWxsIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBvciBhbiBhcnJheSBoYXZlIHByb2R1Y2VkIGFuIGVsZW1lbnQgYXQgYSBjb3JyZXNwb25kaW5nIGluZGV4LlxuICAgKiBUaGUgbGFzdCBlbGVtZW50IGluIHRoZSBhcmd1bWVudHMgbXVzdCBiZSBhIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBzZXJpZXMgb2YgZWxlbWVudHMgYXQgY29ycmVzcG9uZGluZyBpbmRleGVzIGluIHRoZSBhcmdzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgY29tYmluaW5nIGVsZW1lbnRzIG9mIHRoZSBhcmdzIHVzaW5nIHRoZSBzcGVjaWZpZWQgcmVzdWx0IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnppcCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgeyB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgYXJndW1lbnRzJyk7IH1cblxuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSBpc0Z1bmN0aW9uKGFyZ3NbbGVuIC0gMV0pID8gYXJncy5wb3AoKSA6IGFyZ3VtZW50c1RvQXJyYXk7XG4gICAgQXJyYXkuaXNBcnJheShhcmdzWzBdKSAmJiAoYXJncyA9IGFyZ3NbMF0pO1xuXG4gICAgdmFyIHBhcmVudCA9IHRoaXM7XG4gICAgYXJncy51bnNoaWZ0KHBhcmVudCk7XG5cbiAgICByZXR1cm4gbmV3IFppcE9ic2VydmFibGUoYXJncywgcmVzdWx0U2VsZWN0b3IpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNZXJnZXMgdGhlIHNwZWNpZmllZCBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IHVzaW5nIHRoZSBzZWxlY3RvciBmdW5jdGlvbiB3aGVuZXZlciBhbGwgb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2VzIGhhdmUgcHJvZHVjZWQgYW4gZWxlbWVudCBhdCBhIGNvcnJlc3BvbmRpbmcgaW5kZXguXG4gICAqIEBwYXJhbSBhcmd1bWVudHMgT2JzZXJ2YWJsZSBzb3VyY2VzLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXN1bHRTZWxlY3RvciBGdW5jdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggc2VyaWVzIG9mIGVsZW1lbnRzIGF0IGNvcnJlc3BvbmRpbmcgaW5kZXhlcyBpbiB0aGUgc291cmNlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgcmVzdWx0IG9mIGNvbWJpbmluZyBlbGVtZW50cyBvZiB0aGUgc291cmNlcyB1c2luZyB0aGUgc3BlY2lmaWVkIHJlc3VsdCBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIE9ic2VydmFibGUuemlwID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmdzWzBdKSkge1xuICAgICAgYXJncyA9IGlzRnVuY3Rpb24oYXJnc1sxXSkgPyBhcmdzWzBdLmNvbmNhdChhcmdzWzFdKSA6IGFyZ3NbMF07XG4gICAgfVxuICAgIHZhciBmaXJzdCA9IGFyZ3Muc2hpZnQoKTtcbiAgICByZXR1cm4gZmlyc3QuemlwLmFwcGx5KGZpcnN0LCBhcmdzKTtcbiAgfTtcblxuZnVuY3Rpb24gZmFsc2VGYWN0b3J5KCkgeyByZXR1cm4gZmFsc2U7IH1cbmZ1bmN0aW9uIGVtcHR5QXJyYXlGYWN0b3J5KCkgeyByZXR1cm4gW107IH1cbmZ1bmN0aW9uIGFyZ3VtZW50c1RvQXJyYXkoKSB7XG4gIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gIHJldHVybiBhcmdzO1xufVxuXG52YXIgWmlwSXRlcmFibGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICBpbmhlcml0cyhaaXBJdGVyYWJsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gIGZ1bmN0aW9uIFppcEl0ZXJhYmxlT2JzZXJ2YWJsZShzb3VyY2VzLCBjYikge1xuICAgIHRoaXMuc291cmNlcyA9IHNvdXJjZXM7XG4gICAgdGhpcy5fY2IgPSBjYjtcbiAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgfVxuXG4gIFppcEl0ZXJhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgdmFyIHNvdXJjZXMgPSB0aGlzLnNvdXJjZXMsIGxlbiA9IHNvdXJjZXMubGVuZ3RoLCBzdWJzY3JpcHRpb25zID0gbmV3IEFycmF5KGxlbik7XG5cbiAgICB2YXIgc3RhdGUgPSB7XG4gICAgICBxOiBhcnJheUluaXRpYWxpemUobGVuLCBlbXB0eUFycmF5RmFjdG9yeSksXG4gICAgICBkb25lOiBhcnJheUluaXRpYWxpemUobGVuLCBmYWxzZUZhY3RvcnkpLFxuICAgICAgY2I6IHRoaXMuX2NiLFxuICAgICAgbzogb1xuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAoZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNbaV0sIHNhZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICAoaXNBcnJheUxpa2Uoc291cmNlKSB8fCBpc0l0ZXJhYmxlKHNvdXJjZSkpICYmIChzb3VyY2UgPSBvYnNlcnZhYmxlRnJvbShzb3VyY2UpKTtcblxuICAgICAgICBzdWJzY3JpcHRpb25zW2ldID0gc2FkO1xuICAgICAgICBzYWQuc2V0RGlzcG9zYWJsZShzb3VyY2Uuc3Vic2NyaWJlKG5ldyBaaXBJdGVyYWJsZU9ic2VydmVyKHN0YXRlLCBpKSkpO1xuICAgICAgfShpKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb25zKTtcbiAgfTtcblxuICByZXR1cm4gWmlwSXRlcmFibGVPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlQmFzZSkpO1xuXG52YXIgWmlwSXRlcmFibGVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gIGluaGVyaXRzKFppcEl0ZXJhYmxlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gIGZ1bmN0aW9uIFppcEl0ZXJhYmxlT2JzZXJ2ZXIocywgaSkge1xuICAgIHRoaXMuX3MgPSBzO1xuICAgIHRoaXMuX2kgPSBpO1xuICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gbm90RW1wdHkoeCkgeyByZXR1cm4geC5sZW5ndGggPiAwOyB9XG4gIGZ1bmN0aW9uIHNoaWZ0RWFjaCh4KSB7IHJldHVybiB4LnNoaWZ0KCk7IH1cbiAgZnVuY3Rpb24gbm90VGhlU2FtZShpKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh4LCBqKSB7XG4gICAgICByZXR1cm4gaiAhPT0gaTtcbiAgICB9O1xuICB9XG5cbiAgWmlwSXRlcmFibGVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgdGhpcy5fcy5xW3RoaXMuX2ldLnB1c2goeCk7XG4gICAgaWYgKHRoaXMuX3MucS5ldmVyeShub3RFbXB0eSkpIHtcbiAgICAgIHZhciBxdWV1ZWRWYWx1ZXMgPSB0aGlzLl9zLnEubWFwKHNoaWZ0RWFjaCksXG4gICAgICAgICAgcmVzID0gdHJ5Q2F0Y2godGhpcy5fcy5jYikuYXBwbHkobnVsbCwgcXVldWVkVmFsdWVzKTtcbiAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9zLm8ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgIHRoaXMuX3Muby5vbk5leHQocmVzKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX3MuZG9uZS5maWx0ZXIobm90VGhlU2FtZSh0aGlzLl9pKSkuZXZlcnkoaWRlbnRpdHkpKSB7XG4gICAgICB0aGlzLl9zLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9XG4gIH07XG5cbiAgWmlwSXRlcmFibGVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9zLm8ub25FcnJvcihlKTsgfTtcblxuICBaaXBJdGVyYWJsZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fcy5kb25lW3RoaXMuX2ldID0gdHJ1ZTtcbiAgICB0aGlzLl9zLmRvbmUuZXZlcnkoaWRlbnRpdHkpICYmIHRoaXMuX3Muby5vbkNvbXBsZXRlZCgpO1xuICB9O1xuXG4gIHJldHVybiBaaXBJdGVyYWJsZU9ic2VydmVyO1xufShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbi8qKlxuICogTWVyZ2VzIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSB1c2luZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2hlbmV2ZXIgYWxsIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBvciBhbiBhcnJheSBoYXZlIHByb2R1Y2VkIGFuIGVsZW1lbnQgYXQgYSBjb3JyZXNwb25kaW5nIGluZGV4LlxuICogVGhlIGxhc3QgZWxlbWVudCBpbiB0aGUgYXJndW1lbnRzIG11c3QgYmUgYSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggc2VyaWVzIG9mIGVsZW1lbnRzIGF0IGNvcnJlc3BvbmRpbmcgaW5kZXhlcyBpbiB0aGUgYXJncy5cbiAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBjb21iaW5pbmcgZWxlbWVudHMgb2YgdGhlIGFyZ3MgdXNpbmcgdGhlIHNwZWNpZmllZCByZXN1bHQgc2VsZWN0b3IgZnVuY3Rpb24uXG4gKi9cbm9ic2VydmFibGVQcm90by56aXBJdGVyYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHsgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGFyZ3VtZW50cycpOyB9XG5cbiAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgdmFyIHJlc3VsdFNlbGVjdG9yID0gaXNGdW5jdGlvbihhcmdzW2xlbiAtIDFdKSA/IGFyZ3MucG9wKCkgOiBhcmd1bWVudHNUb0FycmF5O1xuXG4gIHZhciBwYXJlbnQgPSB0aGlzO1xuICBhcmdzLnVuc2hpZnQocGFyZW50KTtcbiAgcmV0dXJuIG5ldyBaaXBJdGVyYWJsZU9ic2VydmFibGUoYXJncywgcmVzdWx0U2VsZWN0b3IpO1xufTtcblxuICBmdW5jdGlvbiBhc09ic2VydmFibGUoc291cmNlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHN1YnNjcmliZShvKSB7IHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG8pOyB9O1xuICB9XG5cbiAgLyoqXG4gICAqICBIaWRlcyB0aGUgaWRlbnRpdHkgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBoaWRlcyB0aGUgaWRlbnRpdHkgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5hc09ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGFzT2JzZXJ2YWJsZSh0aGlzKSwgdGhpcyk7XG4gIH07XG5cbiAgdmFyIERlbWF0ZXJpYWxpemVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhEZW1hdGVyaWFsaXplT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBEZW1hdGVyaWFsaXplT2JzZXJ2YWJsZShzb3VyY2UpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRGVtYXRlcmlhbGl6ZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgRGVtYXRlcmlhbGl6ZU9ic2VydmVyKG8pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIERlbWF0ZXJpYWxpemVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIERlbWF0ZXJpYWxpemVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGVtYXRlcmlhbGl6ZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gRGVtYXRlcmlhbGl6ZU9ic2VydmVyKG8pIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRGVtYXRlcmlhbGl6ZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgeC5hY2NlcHQodGhpcy5fbyk7IH07XG4gICAgRGVtYXRlcmlhbGl6ZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBEZW1hdGVyaWFsaXplT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIERlbWF0ZXJpYWxpemVPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIERlbWF0ZXJpYWxpemVzIHRoZSBleHBsaWNpdCBub3RpZmljYXRpb24gdmFsdWVzIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYXMgaW1wbGljaXQgbm90aWZpY2F0aW9ucy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgZXhoaWJpdGluZyB0aGUgYmVoYXZpb3IgY29ycmVzcG9uZGluZyB0byB0aGUgc291cmNlIHNlcXVlbmNlJ3Mgbm90aWZpY2F0aW9uIHZhbHVlcy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5kZW1hdGVyaWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgRGVtYXRlcmlhbGl6ZU9ic2VydmFibGUodGhpcyk7XG4gIH07XG5cbiAgdmFyIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZhYmxlKHNvdXJjZSwga2V5Rm4sIGNvbXBhcmVyKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMua2V5Rm4gPSBrZXlGbjtcbiAgICAgIHRoaXMuY29tcGFyZXIgPSBjb21wYXJlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyKG8sIHRoaXMua2V5Rm4sIHRoaXMuY29tcGFyZXIpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlcihvLCBrZXlGbiwgY29tcGFyZXIpIHtcbiAgICAgIHRoaXMubyA9IG87XG4gICAgICB0aGlzLmtleUZuID0ga2V5Rm47XG4gICAgICB0aGlzLmNvbXBhcmVyID0gY29tcGFyZXI7XG4gICAgICB0aGlzLmhhc0N1cnJlbnRLZXkgPSBmYWxzZTtcbiAgICAgIHRoaXMuY3VycmVudEtleSA9IG51bGw7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBrZXkgPSB4LCBjb21wYXJlckVxdWFscztcbiAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMua2V5Rm4pKSB7XG4gICAgICAgIGtleSA9IHRyeUNhdGNoKHRoaXMua2V5Rm4pKHgpO1xuICAgICAgICBpZiAoa2V5ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5vLm9uRXJyb3Ioa2V5LmUpOyB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oYXNDdXJyZW50S2V5KSB7XG4gICAgICAgIGNvbXBhcmVyRXF1YWxzID0gdHJ5Q2F0Y2godGhpcy5jb21wYXJlcikodGhpcy5jdXJyZW50S2V5LCBrZXkpO1xuICAgICAgICBpZiAoY29tcGFyZXJFcXVhbHMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLm8ub25FcnJvcihjb21wYXJlckVxdWFscy5lKTsgfVxuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmhhc0N1cnJlbnRLZXkgfHwgIWNvbXBhcmVyRXF1YWxzKSB7XG4gICAgICAgIHRoaXMuaGFzQ3VycmVudEtleSA9IHRydWU7XG4gICAgICAgIHRoaXMuY3VycmVudEtleSA9IGtleTtcbiAgICAgICAgdGhpcy5vLm9uTmV4dCh4KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24oZSkge1xuICAgICAgdGhpcy5vLm9uRXJyb3IoZSk7XG4gICAgfTtcbiAgICBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAqICBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyBvbmx5IGRpc3RpbmN0IGNvbnRpZ3VvdXMgZWxlbWVudHMgYWNjb3JkaW5nIHRvIHRoZSBrZXlGbiBhbmQgdGhlIGNvbXBhcmVyLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IFtrZXlGbl0gQSBmdW5jdGlvbiB0byBjb21wdXRlIHRoZSBjb21wYXJpc29uIGtleSBmb3IgZWFjaCBlbGVtZW50LiBJZiBub3QgcHJvdmlkZWQsIGl0IHByb2plY3RzIHRoZSB2YWx1ZS5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY29tcGFyZXJdIEVxdWFsaXR5IGNvbXBhcmVyIGZvciBjb21wdXRlZCBrZXkgdmFsdWVzLiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIGFuIGVxdWFsaXR5IGNvbXBhcmVyIGZ1bmN0aW9uLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9ubHkgY29udGFpbmluZyB0aGUgZGlzdGluY3QgY29udGlndW91cyBlbGVtZW50cywgYmFzZWQgb24gYSBjb21wdXRlZCBrZXkgdmFsdWUsIGZyb20gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmRpc3RpbmN0VW50aWxDaGFuZ2VkID0gZnVuY3Rpb24gKGtleUZuLCBjb21wYXJlcikge1xuICAgIGNvbXBhcmVyIHx8IChjb21wYXJlciA9IGRlZmF1bHRDb21wYXJlcik7XG4gICAgcmV0dXJuIG5ldyBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmFibGUodGhpcywga2V5Rm4sIGNvbXBhcmVyKTtcbiAgfTtcblxuICB2YXIgVGFwT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUYXBPYnNlcnZhYmxlLF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGFwT2JzZXJ2YWJsZShzb3VyY2UsIG9ic2VydmVyT3JPbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX29OID0gb2JzZXJ2ZXJPck9uTmV4dDtcbiAgICAgIHRoaXMuX29FID0gb25FcnJvcjtcbiAgICAgIHRoaXMuX29DID0gb25Db21wbGV0ZWQ7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUYXBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihvLCB0aGlzKSk7XG4gICAgfTtcblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIobywgcCkge1xuICAgICAgdGhpcy5vID0gbztcbiAgICAgIHRoaXMudCA9ICFwLl9vTiB8fCBpc0Z1bmN0aW9uKHAuX29OKSA/XG4gICAgICAgIG9ic2VydmVyQ3JlYXRlKHAuX29OIHx8IG5vb3AsIHAuX29FIHx8IG5vb3AsIHAuX29DIHx8IG5vb3ApIDpcbiAgICAgICAgcC5fb047XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oeCkge1xuICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMudC5vbk5leHQpLmNhbGwodGhpcy50LCB4KTtcbiAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHRoaXMuby5vbkVycm9yKHJlcy5lKTsgfVxuICAgICAgdGhpcy5vLm9uTmV4dCh4KTtcbiAgICB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24oZXJyKSB7XG4gICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy50Lm9uRXJyb3IpLmNhbGwodGhpcy50LCBlcnIpO1xuICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuby5vbkVycm9yKHJlcy5lKTsgfVxuICAgICAgdGhpcy5vLm9uRXJyb3IoZXJyKTtcbiAgICB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMudC5vbkNvbXBsZXRlZCkuY2FsbCh0aGlzLnQpO1xuICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuby5vbkVycm9yKHJlcy5lKTsgfVxuICAgICAgdGhpcy5vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBUYXBPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogIEludm9rZXMgYW4gYWN0aW9uIGZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UgYW5kIGludm9rZXMgYW4gYWN0aW9uIHVwb24gZ3JhY2VmdWwgb3IgZXhjZXB0aW9uYWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIGZvciBkZWJ1Z2dpbmcsIGxvZ2dpbmcsIGV0Yy4gb2YgcXVlcnkgYmVoYXZpb3IgYnkgaW50ZXJjZXB0aW5nIHRoZSBtZXNzYWdlIHN0cmVhbSB0byBydW4gYXJiaXRyYXJ5IGFjdGlvbnMgZm9yIG1lc3NhZ2VzIG9uIHRoZSBwaXBlbGluZS5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9uIHwgT2JzZXJ2ZXJ9IG9ic2VydmVyT3JPbk5leHQgQWN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBlbGVtZW50IGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIG9yIGFuIG8uXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gW29uRXJyb3JdICBBY3Rpb24gdG8gaW52b2tlIHVwb24gZXhjZXB0aW9uYWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuIFVzZWQgaWYgb25seSB0aGUgb2JzZXJ2ZXJPck9uTmV4dCBwYXJhbWV0ZXIgaXMgYWxzbyBhIGZ1bmN0aW9uLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkNvbXBsZXRlZF0gIEFjdGlvbiB0byBpbnZva2UgdXBvbiBncmFjZWZ1bCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS4gVXNlZCBpZiBvbmx5IHRoZSBvYnNlcnZlck9yT25OZXh0IHBhcmFtZXRlciBpcyBhbHNvIGEgZnVuY3Rpb24uXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aCB0aGUgc2lkZS1lZmZlY3RpbmcgYmVoYXZpb3IgYXBwbGllZC5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvWydkbyddID0gb2JzZXJ2YWJsZVByb3RvLnRhcCA9IG9ic2VydmFibGVQcm90by5kb0FjdGlvbiA9IGZ1bmN0aW9uIChvYnNlcnZlck9yT25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkge1xuICAgIHJldHVybiBuZXcgVGFwT2JzZXJ2YWJsZSh0aGlzLCBvYnNlcnZlck9yT25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCk7XG4gIH07XG5cbiAgLyoqXG4gICogIEludm9rZXMgYW4gYWN0aW9uIGZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIGZvciBkZWJ1Z2dpbmcsIGxvZ2dpbmcsIGV0Yy4gb2YgcXVlcnkgYmVoYXZpb3IgYnkgaW50ZXJjZXB0aW5nIHRoZSBtZXNzYWdlIHN0cmVhbSB0byBydW4gYXJiaXRyYXJ5IGFjdGlvbnMgZm9yIG1lc3NhZ2VzIG9uIHRoZSBwaXBlbGluZS5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbk5leHQgQWN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBlbGVtZW50IGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgc291cmNlIHNlcXVlbmNlIHdpdGggdGhlIHNpZGUtZWZmZWN0aW5nIGJlaGF2aW9yIGFwcGxpZWQuXG4gICovXG4gIG9ic2VydmFibGVQcm90by5kb09uTmV4dCA9IG9ic2VydmFibGVQcm90by50YXBPbk5leHQgPSBmdW5jdGlvbiAob25OZXh0LCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIHRoaXMudGFwKHR5cGVvZiB0aGlzQXJnICE9PSAndW5kZWZpbmVkJyA/IGZ1bmN0aW9uICh4KSB7IG9uTmV4dC5jYWxsKHRoaXNBcmcsIHgpOyB9IDogb25OZXh0KTtcbiAgfTtcblxuICAvKipcbiAgKiAgSW52b2tlcyBhbiBhY3Rpb24gdXBvbiBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiAgVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgZm9yIGRlYnVnZ2luZywgbG9nZ2luZywgZXRjLiBvZiBxdWVyeSBiZWhhdmlvciBieSBpbnRlcmNlcHRpbmcgdGhlIG1lc3NhZ2Ugc3RyZWFtIHRvIHJ1biBhcmJpdHJhcnkgYWN0aW9ucyBmb3IgbWVzc2FnZXMgb24gdGhlIHBpcGVsaW5lLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uRXJyb3IgQWN0aW9uIHRvIGludm9rZSB1cG9uIGV4Y2VwdGlvbmFsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgc291cmNlIHNlcXVlbmNlIHdpdGggdGhlIHNpZGUtZWZmZWN0aW5nIGJlaGF2aW9yIGFwcGxpZWQuXG4gICovXG4gIG9ic2VydmFibGVQcm90by5kb09uRXJyb3IgPSBvYnNlcnZhYmxlUHJvdG8udGFwT25FcnJvciA9IGZ1bmN0aW9uIChvbkVycm9yLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIHRoaXMudGFwKG5vb3AsIHR5cGVvZiB0aGlzQXJnICE9PSAndW5kZWZpbmVkJyA/IGZ1bmN0aW9uIChlKSB7IG9uRXJyb3IuY2FsbCh0aGlzQXJnLCBlKTsgfSA6IG9uRXJyb3IpO1xuICB9O1xuXG4gIC8qKlxuICAqICBJbnZva2VzIGFuIGFjdGlvbiB1cG9uIGdyYWNlZnVsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqICBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBmb3IgZGVidWdnaW5nLCBsb2dnaW5nLCBldGMuIG9mIHF1ZXJ5IGJlaGF2aW9yIGJ5IGludGVyY2VwdGluZyB0aGUgbWVzc2FnZSBzdHJlYW0gdG8gcnVuIGFyYml0cmFyeSBhY3Rpb25zIGZvciBtZXNzYWdlcyBvbiB0aGUgcGlwZWxpbmUuXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gb25Db21wbGV0ZWQgQWN0aW9uIHRvIGludm9rZSB1cG9uIGdyYWNlZnVsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgc291cmNlIHNlcXVlbmNlIHdpdGggdGhlIHNpZGUtZWZmZWN0aW5nIGJlaGF2aW9yIGFwcGxpZWQuXG4gICovXG4gIG9ic2VydmFibGVQcm90by5kb09uQ29tcGxldGVkID0gb2JzZXJ2YWJsZVByb3RvLnRhcE9uQ29tcGxldGVkID0gZnVuY3Rpb24gKG9uQ29tcGxldGVkLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIHRoaXMudGFwKG5vb3AsIG51bGwsIHR5cGVvZiB0aGlzQXJnICE9PSAndW5kZWZpbmVkJyA/IGZ1bmN0aW9uICgpIHsgb25Db21wbGV0ZWQuY2FsbCh0aGlzQXJnKTsgfSA6IG9uQ29tcGxldGVkKTtcbiAgfTtcblxuICB2YXIgRmluYWxseU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEZpbmFsbHlPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZpbmFsbHlPYnNlcnZhYmxlKHNvdXJjZSwgZm4sIHRoaXNBcmcpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBiaW5kQ2FsbGJhY2soZm4sIHRoaXNBcmcsIDApO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRmluYWxseU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGQgPSB0cnlDYXRjaCh0aGlzLnNvdXJjZS5zdWJzY3JpYmUpLmNhbGwodGhpcy5zb3VyY2UsIG8pO1xuICAgICAgaWYgKGQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHRoaXMuX2ZuKCk7XG4gICAgICAgIHRocm93ZXIoZC5lKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBGaW5hbGx5RGlzcG9zYWJsZShkLCB0aGlzLl9mbik7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEZpbmFsbHlEaXNwb3NhYmxlKHMsIGZuKSB7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICB9XG4gICAgRmluYWxseURpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fcy5kaXNwb3NlKS5jYWxsKHRoaXMuX3MpO1xuICAgICAgICB0aGlzLl9mbigpO1xuICAgICAgICByZXMgPT09IGVycm9yT2JqICYmIHRocm93ZXIocmVzLmUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gRmluYWxseU9ic2VydmFibGU7XG5cbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgSW52b2tlcyBhIHNwZWNpZmllZCBhY3Rpb24gYWZ0ZXIgdGhlIHNvdXJjZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRlcm1pbmF0ZXMgZ3JhY2VmdWxseSBvciBleGNlcHRpb25hbGx5LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmaW5hbGx5QWN0aW9uIEFjdGlvbiB0byBpbnZva2UgYWZ0ZXIgdGhlIHNvdXJjZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRlcm1pbmF0ZXMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBTb3VyY2Ugc2VxdWVuY2Ugd2l0aCB0aGUgYWN0aW9uLWludm9raW5nIHRlcm1pbmF0aW9uIGJlaGF2aW9yIGFwcGxpZWQuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG9bJ2ZpbmFsbHknXSA9IGZ1bmN0aW9uIChhY3Rpb24sIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gbmV3IEZpbmFsbHlPYnNlcnZhYmxlKHRoaXMsIGFjdGlvbiwgdGhpc0FyZyk7XG4gIH07XG5cbiAgdmFyIElnbm9yZUVsZW1lbnRzT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhJZ25vcmVFbGVtZW50c09ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBJZ25vcmVFbGVtZW50c09ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIElnbm9yZUVsZW1lbnRzT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKG8pKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihvKSB7XG4gICAgICB0aGlzLm8gPSBvO1xuICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUub25OZXh0ID0gbm9vcDtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgaWYoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vLm9uRXJyb3IoZXJyKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm9uQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24oKSB7IHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTsgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5mYWlsID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIHJldHVybiBJZ25vcmVFbGVtZW50c09ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogIElnbm9yZXMgYWxsIGVsZW1lbnRzIGluIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgbGVhdmluZyBvbmx5IHRoZSB0ZXJtaW5hdGlvbiBtZXNzYWdlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIGVtcHR5IG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzaWduYWxzIHRlcm1pbmF0aW9uLCBzdWNjZXNzZnVsIG9yIGV4Y2VwdGlvbmFsLCBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmlnbm9yZUVsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgSWdub3JlRWxlbWVudHNPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIHZhciBNYXRlcmlhbGl6ZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE1hdGVyaWFsaXplT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBNYXRlcmlhbGl6ZU9ic2VydmFibGUoc291cmNlLCBmbikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBNYXRlcmlhbGl6ZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgTWF0ZXJpYWxpemVPYnNlcnZlcihvKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBNYXRlcmlhbGl6ZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgTWF0ZXJpYWxpemVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTWF0ZXJpYWxpemVPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIE1hdGVyaWFsaXplT2JzZXJ2ZXIobykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBNYXRlcmlhbGl6ZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5fby5vbk5leHQobm90aWZpY2F0aW9uQ3JlYXRlT25OZXh0KHgpKSB9O1xuICAgIE1hdGVyaWFsaXplT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbk5leHQobm90aWZpY2F0aW9uQ3JlYXRlT25FcnJvcihlKSk7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcbiAgICBNYXRlcmlhbGl6ZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25OZXh0KG5vdGlmaWNhdGlvbkNyZWF0ZU9uQ29tcGxldGVkKCkpOyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gTWF0ZXJpYWxpemVPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBNYXRlcmlhbGl6ZXMgdGhlIGltcGxpY2l0IG5vdGlmaWNhdGlvbnMgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhcyBleHBsaWNpdCBub3RpZmljYXRpb24gdmFsdWVzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSBtYXRlcmlhbGl6ZWQgbm90aWZpY2F0aW9uIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubWF0ZXJpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBNYXRlcmlhbGl6ZU9ic2VydmFibGUodGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBSZXBlYXRzIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGEgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy4gSWYgdGhlIHJlcGVhdCBjb3VudCBpcyBub3Qgc3BlY2lmaWVkLCB0aGUgc2VxdWVuY2UgcmVwZWF0cyBpbmRlZmluaXRlbHkuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbcmVwZWF0Q291bnRdICBOdW1iZXIgb2YgdGltZXMgdG8gcmVwZWF0IHRoZSBzZXF1ZW5jZS4gSWYgbm90IHByb3ZpZGVkLCByZXBlYXRzIHRoZSBzZXF1ZW5jZSBpbmRlZmluaXRlbHkuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBwcm9kdWNpbmcgdGhlIGVsZW1lbnRzIG9mIHRoZSBnaXZlbiBzZXF1ZW5jZSByZXBlYXRlZGx5LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnJlcGVhdCA9IGZ1bmN0aW9uIChyZXBlYXRDb3VudCkge1xuICAgIHJldHVybiBlbnVtZXJhYmxlUmVwZWF0KHRoaXMsIHJlcGVhdENvdW50KS5jb25jYXQoKTtcbiAgfTtcblxuICAvKipcbiAgICogIFJlcGVhdHMgdGhlIHNvdXJjZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIHRpbWVzIG9yIHVudGlsIGl0IHN1Y2Nlc3NmdWxseSB0ZXJtaW5hdGVzLiBJZiB0aGUgcmV0cnkgY291bnQgaXMgbm90IHNwZWNpZmllZCwgaXQgcmV0cmllcyBpbmRlZmluaXRlbHkuXG4gICAqICBOb3RlIGlmIHlvdSBlbmNvdW50ZXIgYW4gZXJyb3IgYW5kIHdhbnQgaXQgdG8gcmV0cnkgb25jZSwgdGhlbiB5b3UgbXVzdCB1c2UgLnJldHJ5KDIpO1xuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgdmFyIHJlcyA9IHJldHJpZWQgPSByZXRyeS5yZXBlYXQoKTtcbiAgICogIHZhciByZXMgPSByZXRyaWVkID0gcmV0cnkucmVwZWF0KDIpO1xuICAgKiBAcGFyYW0ge051bWJlcn0gW3JldHJ5Q291bnRdICBOdW1iZXIgb2YgdGltZXMgdG8gcmV0cnkgdGhlIHNlcXVlbmNlLiBJZiBub3QgcHJvdmlkZWQsIHJldHJ5IHRoZSBzZXF1ZW5jZSBpbmRlZmluaXRlbHkuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHByb2R1Y2luZyB0aGUgZWxlbWVudHMgb2YgdGhlIGdpdmVuIHNlcXVlbmNlIHJlcGVhdGVkbHkgdW50aWwgaXQgdGVybWluYXRlcyBzdWNjZXNzZnVsbHkuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucmV0cnkgPSBmdW5jdGlvbiAocmV0cnlDb3VudCkge1xuICAgIHJldHVybiBlbnVtZXJhYmxlUmVwZWF0KHRoaXMsIHJldHJ5Q291bnQpLmNhdGNoRXJyb3IoKTtcbiAgfTtcblxuICAvKipcbiAgICogIFJlcGVhdHMgdGhlIHNvdXJjZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHVwb24gZXJyb3IgZWFjaCB0aW1lIHRoZSBub3RpZmllciBlbWl0cyBvciB1bnRpbCBpdCBzdWNjZXNzZnVsbHkgdGVybWluYXRlcy4gXG4gICAqICBpZiB0aGUgbm90aWZpZXIgY29tcGxldGVzLCB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb21wbGV0ZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICB2YXIgdGltZXIgPSBPYnNlcnZhYmxlLnRpbWVyKDUwMCk7XG4gICAqICB2YXIgc291cmNlID0gb2JzZXJ2YWJsZS5yZXRyeVdoZW4odGltZXIpO1xuICAgKiBAcGFyYW0ge09ic2VydmFibGV9IFtub3RpZmllcl0gQW4gb2JzZXJ2YWJsZSB0aGF0IHRyaWdnZXJzIHRoZSByZXRyaWVzIG9yIGNvbXBsZXRlcyB0aGUgb2JzZXJ2YWJsZSB3aXRoIG9uTmV4dCBvciBvbkNvbXBsZXRlZCByZXNwZWN0aXZlbHkuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHByb2R1Y2luZyB0aGUgZWxlbWVudHMgb2YgdGhlIGdpdmVuIHNlcXVlbmNlIHJlcGVhdGVkbHkgdW50aWwgaXQgdGVybWluYXRlcyBzdWNjZXNzZnVsbHkuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucmV0cnlXaGVuID0gZnVuY3Rpb24gKG5vdGlmaWVyKSB7XG4gICAgcmV0dXJuIGVudW1lcmFibGVSZXBlYXQodGhpcykuY2F0Y2hFcnJvcldoZW4obm90aWZpZXIpO1xuICB9O1xuICB2YXIgU2Nhbk9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2Nhbk9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2Nhbk9ic2VydmFibGUoc291cmNlLCBhY2N1bXVsYXRvciwgaGFzU2VlZCwgc2VlZCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLmFjY3VtdWxhdG9yID0gYWNjdW11bGF0b3I7XG4gICAgICB0aGlzLmhhc1NlZWQgPSBoYXNTZWVkO1xuICAgICAgdGhpcy5zZWVkID0gc2VlZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNjYW5PYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU2Nhbk9ic2VydmVyKG8sdGhpcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2Nhbk9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU2Nhbk9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTY2FuT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2Nhbk9ic2VydmVyKG8sIHBhcmVudCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9wID0gcGFyZW50O1xuICAgICAgdGhpcy5fZm4gPSBwYXJlbnQuYWNjdW11bGF0b3I7XG4gICAgICB0aGlzLl9ocyA9IHBhcmVudC5oYXNTZWVkO1xuICAgICAgdGhpcy5fcyA9IHBhcmVudC5zZWVkO1xuICAgICAgdGhpcy5faGEgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2EgPSBudWxsO1xuICAgICAgdGhpcy5faHYgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2Nhbk9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICF0aGlzLl9odiAmJiAodGhpcy5faHYgPSB0cnVlKTtcbiAgICAgIGlmICh0aGlzLl9oYSkge1xuICAgICAgICB0aGlzLl9hID0gdHJ5Q2F0Y2godGhpcy5fZm4pKHRoaXMuX2EsIHgsIHRoaXMuX2ksIHRoaXMuX3ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYSA9IHRoaXMuX2hzID8gdHJ5Q2F0Y2godGhpcy5fZm4pKHRoaXMuX3MsIHgsIHRoaXMuX2ksIHRoaXMuX3ApIDogeDtcbiAgICAgICAgdGhpcy5faGEgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2EgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IodGhpcy5fYS5lKTsgfVxuICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fYSk7XG4gICAgICB0aGlzLl9pKys7XG4gICAgfTtcblxuICAgIFNjYW5PYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBTY2FuT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICF0aGlzLl9odiAmJiB0aGlzLl9ocyAmJiB0aGlzLl9vLm9uTmV4dCh0aGlzLl9zKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNjYW5PYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogIEFwcGxpZXMgYW4gYWNjdW11bGF0b3IgZnVuY3Rpb24gb3ZlciBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFuZCByZXR1cm5zIGVhY2ggaW50ZXJtZWRpYXRlIHJlc3VsdC4gVGhlIG9wdGlvbmFsIHNlZWQgdmFsdWUgaXMgdXNlZCBhcyB0aGUgaW5pdGlhbCBhY2N1bXVsYXRvciB2YWx1ZS5cbiAgKiAgRm9yIGFnZ3JlZ2F0aW9uIGJlaGF2aW9yIHdpdGggbm8gaW50ZXJtZWRpYXRlIHJlc3VsdHMsIHNlZSBPYnNlcnZhYmxlLmFnZ3JlZ2F0ZS5cbiAgKiBAcGFyYW0ge01peGVkfSBbc2VlZF0gVGhlIGluaXRpYWwgYWNjdW11bGF0b3IgdmFsdWUuXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gYWNjdW11bGF0b3IgQW4gYWNjdW11bGF0b3IgZnVuY3Rpb24gdG8gYmUgaW52b2tlZCBvbiBlYWNoIGVsZW1lbnQuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgYWNjdW11bGF0ZWQgdmFsdWVzLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2NhbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaGFzU2VlZCA9IGZhbHNlLCBzZWVkLCBhY2N1bXVsYXRvciA9IGFyZ3VtZW50c1swXTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgaGFzU2VlZCA9IHRydWU7XG4gICAgICBzZWVkID0gYXJndW1lbnRzWzFdO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFNjYW5PYnNlcnZhYmxlKHRoaXMsIGFjY3VtdWxhdG9yLCBoYXNTZWVkLCBzZWVkKTtcbiAgfTtcblxuICB2YXIgU2tpcExhc3RPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwTGFzdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcExhc3RPYnNlcnZhYmxlKHNvdXJjZSwgYykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9jID0gYztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBMYXN0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTa2lwTGFzdE9ic2VydmVyKG8sIHRoaXMuX2MpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBMYXN0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTa2lwTGFzdE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwTGFzdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNraXBMYXN0T2JzZXJ2ZXIobywgYykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9jID0gYztcbiAgICAgIHRoaXMuX3EgPSBbXTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fcS5wdXNoKHgpO1xuICAgICAgdGhpcy5fcS5sZW5ndGggPiB0aGlzLl9jICYmIHRoaXMuX28ub25OZXh0KHRoaXMuX3Euc2hpZnQoKSk7XG4gICAgfTtcblxuICAgIFNraXBMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgU2tpcExhc3RPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcExhc3RPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBCeXBhc3NlcyBhIHNwZWNpZmllZCBudW1iZXIgb2YgZWxlbWVudHMgYXQgdGhlIGVuZCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogIFRoaXMgb3BlcmF0b3IgYWNjdW11bGF0ZXMgYSBxdWV1ZSB3aXRoIGEgbGVuZ3RoIGVub3VnaCB0byBzdG9yZSB0aGUgZmlyc3QgYGNvdW50YCBlbGVtZW50cy4gQXMgbW9yZSBlbGVtZW50cyBhcmVcbiAgICogIHJlY2VpdmVkLCBlbGVtZW50cyBhcmUgdGFrZW4gZnJvbSB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlIGFuZCBwcm9kdWNlZCBvbiB0aGUgcmVzdWx0IHNlcXVlbmNlLiBUaGlzIGNhdXNlcyBlbGVtZW50cyB0byBiZSBkZWxheWVkLlxuICAgKiBAcGFyYW0gY291bnQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIGJ5cGFzcyBhdCB0aGUgZW5kIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZSBlbGVtZW50cyBleGNlcHQgZm9yIHRoZSBieXBhc3NlZCBvbmVzIGF0IHRoZSBlbmQuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2tpcExhc3QgPSBmdW5jdGlvbiAoY291bnQpIHtcbiAgICBpZiAoY291bnQgPCAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG4gICAgcmV0dXJuIG5ldyBTa2lwTGFzdE9ic2VydmFibGUodGhpcywgY291bnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgUHJlcGVuZHMgYSBzZXF1ZW5jZSBvZiB2YWx1ZXMgdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIGFuIG9wdGlvbmFsIHNjaGVkdWxlciBhbmQgYW4gYXJndW1lbnQgbGlzdCBvZiB2YWx1ZXMgdG8gcHJlcGVuZC5cbiAgICogIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gc291cmNlLnN0YXJ0V2l0aCgxLCAyLCAzKTtcbiAgICogIHZhciByZXMgPSBzb3VyY2Uuc3RhcnRXaXRoKFJ4LlNjaGVkdWxlci50aW1lb3V0LCAxLCAyLCAzKTtcbiAgICogQHBhcmFtIHtBcmd1bWVudHN9IGFyZ3MgVGhlIHNwZWNpZmllZCB2YWx1ZXMgdG8gcHJlcGVuZCB0byB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZVxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIHNvdXJjZSBzZXF1ZW5jZSBwcmVwZW5kZWQgd2l0aCB0aGUgc3BlY2lmaWVkIHZhbHVlcy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zdGFydFdpdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHZhbHVlcywgc2NoZWR1bGVyLCBzdGFydCA9IDA7XG4gICAgaWYgKCEhYXJndW1lbnRzLmxlbmd0aCAmJiBpc1NjaGVkdWxlcihhcmd1bWVudHNbMF0pKSB7XG4gICAgICBzY2hlZHVsZXIgPSBhcmd1bWVudHNbMF07XG4gICAgICBzdGFydCA9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjaGVkdWxlciA9IGltbWVkaWF0ZVNjaGVkdWxlcjtcbiAgICB9XG4gICAgZm9yKHZhciBhcmdzID0gW10sIGkgPSBzdGFydCwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pOyB9XG4gICAgcmV0dXJuIGVudW1lcmFibGVPZihbb2JzZXJ2YWJsZUZyb21BcnJheShhcmdzLCBzY2hlZHVsZXIpLCB0aGlzXSkuY29uY2F0KCk7XG4gIH07XG5cbiAgdmFyIFRha2VMYXN0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VMYXN0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGFrZUxhc3RPYnNlcnZlcihvLCBjKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2MgPSBjO1xuICAgICAgdGhpcy5fcSA9IFtdO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFrZUxhc3RPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9xLnB1c2goeCk7XG4gICAgICB0aGlzLl9xLmxlbmd0aCA+IHRoaXMuX2MgJiYgdGhpcy5fcS5zaGlmdCgpO1xuICAgIH07XG5cbiAgICBUYWtlTGFzdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFRha2VMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdoaWxlICh0aGlzLl9xLmxlbmd0aCA+IDApIHsgdGhpcy5fby5vbk5leHQodGhpcy5fcS5zaGlmdCgpKTsgfVxuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGFrZUxhc3RPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGEgc3BlY2lmaWVkIG51bWJlciBvZiBjb250aWd1b3VzIGVsZW1lbnRzIGZyb20gdGhlIGVuZCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogIFRoaXMgb3BlcmF0b3IgYWNjdW11bGF0ZXMgYSBidWZmZXIgd2l0aCBhIGxlbmd0aCBlbm91Z2ggdG8gc3RvcmUgZWxlbWVudHMgY291bnQgZWxlbWVudHMuIFVwb24gY29tcGxldGlvbiBvZlxuICAgKiAgdGhlIHNvdXJjZSBzZXF1ZW5jZSwgdGhpcyBidWZmZXIgaXMgZHJhaW5lZCBvbiB0aGUgcmVzdWx0IHNlcXVlbmNlLiBUaGlzIGNhdXNlcyB0aGUgZWxlbWVudHMgdG8gYmUgZGVsYXllZC5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE51bWJlciBvZiBlbGVtZW50cyB0byB0YWtlIGZyb20gdGhlIGVuZCBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gdGhlIGVuZCBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRha2VMYXN0ID0gZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgaWYgKGNvdW50IDwgMCkgeyB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFRha2VMYXN0T2JzZXJ2ZXIobywgY291bnQpKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9O1xuXG5vYnNlcnZhYmxlUHJvdG8uZmxhdE1hcENvbmNhdCA9IG9ic2VydmFibGVQcm90by5jb25jYXRNYXAgPSBmdW5jdGlvbihzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gbmV3IEZsYXRNYXBPYnNlcnZhYmxlKHRoaXMsIHNlbGVjdG9yLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykubWVyZ2UoMSk7XG59O1xuICB2YXIgTWFwT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTWFwT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIE1hcE9ic2VydmFibGUoc291cmNlLCBzZWxlY3RvciwgdGhpc0FyZykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLnNlbGVjdG9yID0gYmluZENhbGxiYWNrKHNlbGVjdG9yLCB0aGlzQXJnLCAzKTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlubmVyTWFwKHNlbGVjdG9yLCBzZWxmKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHgsIGksIG8pIHsgcmV0dXJuIHNlbGVjdG9yLmNhbGwodGhpcywgc2VsZi5zZWxlY3Rvcih4LCBpLCBvKSwgaSwgbyk7IH07XG4gICAgfVxuXG4gICAgTWFwT2JzZXJ2YWJsZS5wcm90b3R5cGUuaW50ZXJuYWxNYXAgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiBuZXcgTWFwT2JzZXJ2YWJsZSh0aGlzLnNvdXJjZSwgaW5uZXJNYXAoc2VsZWN0b3IsIHRoaXMpLCB0aGlzQXJnKTtcbiAgICB9O1xuXG4gICAgTWFwT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKG8sIHRoaXMuc2VsZWN0b3IsIHRoaXMpKTtcbiAgICB9O1xuXG4gICAgaW5oZXJpdHMoSW5uZXJPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihvLCBzZWxlY3Rvciwgc291cmNlKSB7XG4gICAgICB0aGlzLm8gPSBvO1xuICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLmkgPSAwO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbih4KSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5zZWxlY3RvcikoeCwgdGhpcy5pKyssIHRoaXMuc291cmNlKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLm8ub25FcnJvcihyZXN1bHQuZSk7IH1cbiAgICAgIHRoaXMuby5vbk5leHQocmVzdWx0KTtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTWFwT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogUHJvamVjdHMgZWFjaCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgaW50byBhIG5ldyBmb3JtIGJ5IGluY29ycG9yYXRpbmcgdGhlIGVsZW1lbnQncyBpbmRleC5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZWxlY3RvciBBIHRyYW5zZm9ybSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIHNvdXJjZSBlbGVtZW50OyB0aGUgc2Vjb25kIHBhcmFtZXRlciBvZiB0aGUgZnVuY3Rpb24gcmVwcmVzZW50cyB0aGUgaW5kZXggb2YgdGhlIHNvdXJjZSBlbGVtZW50LlxuICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGFyZSB0aGUgcmVzdWx0IG9mIGludm9raW5nIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50IG9mIHNvdXJjZS5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm1hcCA9IG9ic2VydmFibGVQcm90by5zZWxlY3QgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICB2YXIgc2VsZWN0b3JGbiA9IHR5cGVvZiBzZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJyA/IHNlbGVjdG9yIDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZWN0b3I7IH07XG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBNYXBPYnNlcnZhYmxlID9cbiAgICAgIHRoaXMuaW50ZXJuYWxNYXAoc2VsZWN0b3JGbiwgdGhpc0FyZykgOlxuICAgICAgbmV3IE1hcE9ic2VydmFibGUodGhpcywgc2VsZWN0b3JGbiwgdGhpc0FyZyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gcGx1Y2tlcihhcmdzLCBsZW4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gbWFwcGVyKHgpIHtcbiAgICAgIHZhciBjdXJyZW50UHJvcCA9IHg7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciBwID0gY3VycmVudFByb3BbYXJnc1tpXV07XG4gICAgICAgIGlmICh0eXBlb2YgcCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjdXJyZW50UHJvcCA9IHA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cnJlbnRQcm9wO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlIHZhbHVlIG9mIGEgc3BlY2lmaWVkIG5lc3RlZCBwcm9wZXJ0eSBmcm9tIGFsbCBlbGVtZW50cyBpblxuICAgKiB0aGUgT2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtBcmd1bWVudHN9IGFyZ3VtZW50cyBUaGUgbmVzdGVkIHByb3BlcnRpZXMgdG8gcGx1Y2suXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBSZXR1cm5zIGEgbmV3IE9ic2VydmFibGUgc2VxdWVuY2Ugb2YgcHJvcGVydHkgdmFsdWVzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnBsdWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgaWYgKGxlbiA9PT0gMCkgeyB0aHJvdyBuZXcgRXJyb3IoJ0xpc3Qgb2YgcHJvcGVydGllcyBjYW5ub3QgYmUgZW1wdHkuJyk7IH1cbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIHJldHVybiB0aGlzLm1hcChwbHVja2VyKGFyZ3MsIGxlbikpO1xuICB9O1xuXG5vYnNlcnZhYmxlUHJvdG8uZmxhdE1hcCA9IG9ic2VydmFibGVQcm90by5zZWxlY3RNYW55ID0gZnVuY3Rpb24oc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIG5ldyBGbGF0TWFwT2JzZXJ2YWJsZSh0aGlzLCBzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpLm1lcmdlQWxsKCk7XG59O1xuXG5SeC5PYnNlcnZhYmxlLnByb3RvdHlwZS5mbGF0TWFwTGF0ZXN0ID0gZnVuY3Rpb24oc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIG5ldyBGbGF0TWFwT2JzZXJ2YWJsZSh0aGlzLCBzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpLnN3aXRjaExhdGVzdCgpO1xufTtcbiAgdmFyIFNraXBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNraXBPYnNlcnZhYmxlKHNvdXJjZSwgY291bnQpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fY291bnQgPSBjb3VudDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFNraXBPYnNlcnZlcihvLCB0aGlzLl9jb3VudCkpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBTa2lwT2JzZXJ2ZXIobywgYykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9yID0gYztcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhTa2lwT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuXG4gICAgU2tpcE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9yIDw9IDApIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9yLS07XG4gICAgICB9XG4gICAgfTtcbiAgICBTa2lwT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24oZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgU2tpcE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbigpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFNraXBPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqIEJ5cGFzc2VzIGEgc3BlY2lmaWVkIG51bWJlciBvZiBlbGVtZW50cyBpbiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFuZCB0aGVuIHJldHVybnMgdGhlIHJlbWFpbmluZyBlbGVtZW50cy5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gc2tpcCBiZWZvcmUgcmV0dXJuaW5nIHRoZSByZW1haW5pbmcgZWxlbWVudHMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIHRoYXQgb2NjdXIgYWZ0ZXIgdGhlIHNwZWNpZmllZCBpbmRleCBpbiB0aGUgaW5wdXQgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2tpcCA9IGZ1bmN0aW9uIChjb3VudCkge1xuICAgIGlmIChjb3VudCA8IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cbiAgICByZXR1cm4gbmV3IFNraXBPYnNlcnZhYmxlKHRoaXMsIGNvdW50KTtcbiAgfTtcblxuICB2YXIgU2tpcFdoaWxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcFdoaWxlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTa2lwV2hpbGVPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBXaGlsZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU2tpcFdoaWxlT2JzZXJ2ZXIobywgdGhpcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcFdoaWxlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTa2lwV2hpbGVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcFdoaWxlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBTa2lwV2hpbGVPYnNlcnZlcihvLCBwKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICB0aGlzLl9yID0gZmFsc2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTa2lwV2hpbGVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAoIXRoaXMuX3IpIHtcbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX3AuX2ZuKSh4LCB0aGlzLl9pKyssIHRoaXMuX3ApO1xuICAgICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlcy5lKTsgfVxuICAgICAgICB0aGlzLl9yID0gIXJlcztcbiAgICAgIH1cbiAgICAgIHRoaXMuX3IgJiYgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgfTtcbiAgICBTa2lwV2hpbGVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgU2tpcFdoaWxlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFNraXBXaGlsZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIEJ5cGFzc2VzIGVsZW1lbnRzIGluIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYXMgbG9uZyBhcyBhIHNwZWNpZmllZCBjb25kaXRpb24gaXMgdHJ1ZSBhbmQgdGhlbiByZXR1cm5zIHRoZSByZW1haW5pbmcgZWxlbWVudHMuXG4gICAqICBUaGUgZWxlbWVudCdzIGluZGV4IGlzIHVzZWQgaW4gdGhlIGxvZ2ljIG9mIHRoZSBwcmVkaWNhdGUgZnVuY3Rpb24uXG4gICAqXG4gICAqICB2YXIgcmVzID0gc291cmNlLnNraXBXaGlsZShmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlIDwgMTA7IH0pO1xuICAgKiAgdmFyIHJlcyA9IHNvdXJjZS5za2lwV2hpbGUoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgeyByZXR1cm4gdmFsdWUgPCAxMCB8fCBpbmRleCA8IDEwOyB9KTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIEEgZnVuY3Rpb24gdG8gdGVzdCBlYWNoIGVsZW1lbnQgZm9yIGEgY29uZGl0aW9uOyB0aGUgc2Vjb25kIHBhcmFtZXRlciBvZiB0aGUgZnVuY3Rpb24gcmVwcmVzZW50cyB0aGUgaW5kZXggb2YgdGhlIHNvdXJjZSBlbGVtZW50LlxuICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgZnJvbSB0aGUgaW5wdXQgc2VxdWVuY2Ugc3RhcnRpbmcgYXQgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIGxpbmVhciBzZXJpZXMgdGhhdCBkb2VzIG5vdCBwYXNzIHRoZSB0ZXN0IHNwZWNpZmllZCBieSBwcmVkaWNhdGUuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2tpcFdoaWxlID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHZhciBmbiA9IGJpbmRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgIHJldHVybiBuZXcgU2tpcFdoaWxlT2JzZXJ2YWJsZSh0aGlzLCBmbik7XG4gIH07XG5cbiAgdmFyIFRha2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRha2VPYnNlcnZhYmxlKHNvdXJjZSwgY291bnQpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fY291bnQgPSBjb3VudDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRha2VPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFRha2VPYnNlcnZlcihvLCB0aGlzLl9jb3VudCkpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBUYWtlT2JzZXJ2ZXIobywgYykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9jID0gYztcbiAgICAgIHRoaXMuX3IgPSBjO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKFRha2VPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG5cbiAgICBUYWtlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKHRoaXMuX3ItLSA+IDApIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgICAgIHRoaXMuX3IgPD0gMCAmJiB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFRha2VPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgVGFrZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBUYWtlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhIHNwZWNpZmllZCBudW1iZXIgb2YgY29udGlndW91cyBlbGVtZW50cyBmcm9tIHRoZSBzdGFydCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciBmb3IgdGhlIGVkZ2UgY2FzZSBvZiB0YWtlKDApLlxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byByZXR1cm4uXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdXNlZCB0byBwcm9kdWNlIGFuIE9uQ29tcGxldGVkIG1lc3NhZ2UgaW4gY2FzZSA8cGFyYW1yZWYgbmFtZT1cImNvdW50IGNvdW50PC9wYXJhbXJlZj4gaXMgc2V0IHRvIDAuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgZWxlbWVudHMgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIGlucHV0IHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRha2UgPSBmdW5jdGlvbiAoY291bnQsIHNjaGVkdWxlcikge1xuICAgIGlmIChjb3VudCA8IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cbiAgICBpZiAoY291bnQgPT09IDApIHsgcmV0dXJuIG9ic2VydmFibGVFbXB0eShzY2hlZHVsZXIpOyB9XG4gICAgcmV0dXJuIG5ldyBUYWtlT2JzZXJ2YWJsZSh0aGlzLCBjb3VudCk7XG4gIH07XG5cbiAgdmFyIFRha2VXaGlsZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VXaGlsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGFrZVdoaWxlT2JzZXJ2YWJsZShzb3VyY2UsIGZuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUYWtlV2hpbGVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFRha2VXaGlsZU9ic2VydmVyKG8sIHRoaXMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRha2VXaGlsZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgVGFrZVdoaWxlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VXaGlsZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gVGFrZVdoaWxlT2JzZXJ2ZXIobywgcCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9wID0gcDtcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgdGhpcy5fciA9IHRydWU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUYWtlV2hpbGVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAodGhpcy5fcikge1xuICAgICAgICB0aGlzLl9yID0gdHJ5Q2F0Y2godGhpcy5fcC5fZm4pKHgsIHRoaXMuX2krKywgdGhpcy5fcCk7XG4gICAgICAgIGlmICh0aGlzLl9yID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHRoaXMuX3IuZSk7IH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9yKSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgVGFrZVdoaWxlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFRha2VXaGlsZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBUYWtlV2hpbGVPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGVsZW1lbnRzIGZyb20gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhcyBsb25nIGFzIGEgc3BlY2lmaWVkIGNvbmRpdGlvbiBpcyB0cnVlLlxuICAgKiAgVGhlIGVsZW1lbnQncyBpbmRleCBpcyB1c2VkIGluIHRoZSBsb2dpYyBvZiB0aGUgcHJlZGljYXRlIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgQSBmdW5jdGlvbiB0byB0ZXN0IGVhY2ggZWxlbWVudCBmb3IgYSBjb25kaXRpb247IHRoZSBzZWNvbmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiByZXByZXNlbnRzIHRoZSBpbmRleCBvZiB0aGUgc291cmNlIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBmcm9tIHRoZSBpbnB1dCBzZXF1ZW5jZSB0aGF0IG9jY3VyIGJlZm9yZSB0aGUgZWxlbWVudCBhdCB3aGljaCB0aGUgdGVzdCBubyBsb25nZXIgcGFzc2VzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRha2VXaGlsZSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICB2YXIgZm4gPSBiaW5kQ2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICByZXR1cm4gbmV3IFRha2VXaGlsZU9ic2VydmFibGUodGhpcywgZm4pO1xuICB9O1xuXG4gIHZhciBGaWx0ZXJPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhGaWx0ZXJPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gRmlsdGVyT2JzZXJ2YWJsZShzb3VyY2UsIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLnByZWRpY2F0ZSA9IGJpbmRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRmlsdGVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKG8sIHRoaXMucHJlZGljYXRlLCB0aGlzKSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGlubmVyUHJlZGljYXRlKHByZWRpY2F0ZSwgc2VsZikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHgsIGksIG8pIHsgcmV0dXJuIHNlbGYucHJlZGljYXRlKHgsIGksIG8pICYmIHByZWRpY2F0ZS5jYWxsKHRoaXMsIHgsIGksIG8pOyB9XG4gICAgfVxuXG4gICAgRmlsdGVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuaW50ZXJuYWxGaWx0ZXIgPSBmdW5jdGlvbihwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiBuZXcgRmlsdGVyT2JzZXJ2YWJsZSh0aGlzLnNvdXJjZSwgaW5uZXJQcmVkaWNhdGUocHJlZGljYXRlLCB0aGlzKSwgdGhpc0FyZyk7XG4gICAgfTtcblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIobywgcHJlZGljYXRlLCBzb3VyY2UpIHtcbiAgICAgIHRoaXMubyA9IG87XG4gICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5pID0gMDtcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oeCkge1xuICAgICAgdmFyIHNob3VsZFlpZWxkID0gdHJ5Q2F0Y2godGhpcy5wcmVkaWNhdGUpKHgsIHRoaXMuaSsrLCB0aGlzLnNvdXJjZSk7XG4gICAgICBpZiAoc2hvdWxkWWllbGQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm8ub25FcnJvcihzaG91bGRZaWVsZC5lKTtcbiAgICAgIH1cbiAgICAgIHNob3VsZFlpZWxkICYmIHRoaXMuby5vbk5leHQoeCk7XG4gICAgfTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEZpbHRlck9ic2VydmFibGU7XG5cbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAqICBGaWx0ZXJzIHRoZSBlbGVtZW50cyBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGJhc2VkIG9uIGEgcHJlZGljYXRlIGJ5IGluY29ycG9yYXRpbmcgdGhlIGVsZW1lbnQncyBpbmRleC5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgQSBmdW5jdGlvbiB0byB0ZXN0IGVhY2ggc291cmNlIGVsZW1lbnQgZm9yIGEgY29uZGl0aW9uOyB0aGUgc2Vjb25kIHBhcmFtZXRlciBvZiB0aGUgZnVuY3Rpb24gcmVwcmVzZW50cyB0aGUgaW5kZXggb2YgdGhlIHNvdXJjZSBlbGVtZW50LlxuICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgZWxlbWVudHMgZnJvbSB0aGUgaW5wdXQgc2VxdWVuY2UgdGhhdCBzYXRpc2Z5IHRoZSBjb25kaXRpb24uXG4gICovXG4gIG9ic2VydmFibGVQcm90by5maWx0ZXIgPSBvYnNlcnZhYmxlUHJvdG8ud2hlcmUgPSBmdW5jdGlvbiAocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBGaWx0ZXJPYnNlcnZhYmxlID8gdGhpcy5pbnRlcm5hbEZpbHRlcihwcmVkaWNhdGUsIHRoaXNBcmcpIDpcbiAgICAgIG5ldyBGaWx0ZXJPYnNlcnZhYmxlKHRoaXMsIHByZWRpY2F0ZSwgdGhpc0FyZyk7XG4gIH07XG5cbmZ1bmN0aW9uIGNyZWF0ZUNiT2JzZXJ2YWJsZShmbiwgY3R4LCBzZWxlY3RvciwgYXJncykge1xuICB2YXIgbyA9IG5ldyBBc3luY1N1YmplY3QoKTtcblxuICBhcmdzLnB1c2goY3JlYXRlQ2JIYW5kbGVyKG8sIGN0eCwgc2VsZWN0b3IpKTtcbiAgZm4uYXBwbHkoY3R4LCBhcmdzKTtcblxuICByZXR1cm4gby5hc09ic2VydmFibGUoKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2JIYW5kbGVyKG8sIGN0eCwgc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZXIgKCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCByZXN1bHRzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IHJlc3VsdHNbaV0gPSBhcmd1bWVudHNbaV07IH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKHNlbGVjdG9yKSkge1xuICAgICAgcmVzdWx0cyA9IHRyeUNhdGNoKHNlbGVjdG9yKS5hcHBseShjdHgsIHJlc3VsdHMpO1xuICAgICAgaWYgKHJlc3VsdHMgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmVzdWx0cy5lKTsgfVxuICAgICAgby5vbk5leHQocmVzdWx0cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgIG8ub25OZXh0KHJlc3VsdHNbMF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgby5vbk5leHQocmVzdWx0cyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgby5vbkNvbXBsZXRlZCgpO1xuICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBGdW5jdGlvbiB3aXRoIGEgY2FsbGJhY2sgYXMgdGhlIGxhc3QgcGFyYW1ldGVyIHRvIGNvbnZlcnQgdG8gYW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAqIEBwYXJhbSB7TWl4ZWR9IFtjdHhdIFRoZSBjb250ZXh0IGZvciB0aGUgZnVuYyBwYXJhbWV0ZXIgdG8gYmUgZXhlY3V0ZWQuICBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byB1bmRlZmluZWQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbc2VsZWN0b3JdIEEgc2VsZWN0b3Igd2hpY2ggdGFrZXMgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZSBjYWxsYmFjayB0byBwcm9kdWNlIGEgc2luZ2xlIGl0ZW0gdG8geWllbGQgb24gbmV4dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiwgd2hlbiBleGVjdXRlZCB3aXRoIHRoZSByZXF1aXJlZCBwYXJhbWV0ZXJzIG1pbnVzIHRoZSBjYWxsYmFjaywgcHJvZHVjZXMgYW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIGEgc2luZ2xlIHZhbHVlIG9mIHRoZSBhcmd1bWVudHMgdG8gdGhlIGNhbGxiYWNrIGFzIGFuIGFycmF5LlxuICovXG5PYnNlcnZhYmxlLmZyb21DYWxsYmFjayA9IGZ1bmN0aW9uIChmbiwgY3R4LCBzZWxlY3Rvcikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHR5cGVvZiBjdHggPT09ICd1bmRlZmluZWQnICYmIChjdHggPSB0aGlzKTsgXG5cbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gY3JlYXRlQ2JPYnNlcnZhYmxlKGZuLCBjdHgsIHNlbGVjdG9yLCBhcmdzKTtcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZU5vZGVPYnNlcnZhYmxlKGZuLCBjdHgsIHNlbGVjdG9yLCBhcmdzKSB7XG4gIHZhciBvID0gbmV3IEFzeW5jU3ViamVjdCgpO1xuXG4gIGFyZ3MucHVzaChjcmVhdGVOb2RlSGFuZGxlcihvLCBjdHgsIHNlbGVjdG9yKSk7XG4gIGZuLmFwcGx5KGN0eCwgYXJncyk7XG5cbiAgcmV0dXJuIG8uYXNPYnNlcnZhYmxlKCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU5vZGVIYW5kbGVyKG8sIGN0eCwgc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZXIgKCkge1xuICAgIHZhciBlcnIgPSBhcmd1bWVudHNbMF07XG4gICAgaWYgKGVycikgeyByZXR1cm4gby5vbkVycm9yKGVycik7IH1cblxuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCByZXN1bHRzID0gW107XG4gICAgZm9yKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7IHJlc3VsdHNbaSAtIDFdID0gYXJndW1lbnRzW2ldOyB9XG5cbiAgICBpZiAoaXNGdW5jdGlvbihzZWxlY3RvcikpIHtcbiAgICAgIHZhciByZXN1bHRzID0gdHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KGN0eCwgcmVzdWx0cyk7XG4gICAgICBpZiAocmVzdWx0cyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXN1bHRzLmUpOyB9XG4gICAgICBvLm9uTmV4dChyZXN1bHRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgby5vbk5leHQocmVzdWx0c1swXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvLm9uTmV4dChyZXN1bHRzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBvLm9uQ29tcGxldGVkKCk7XG4gIH07XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBOb2RlLmpzIGNhbGxiYWNrIHN0eWxlIGZ1bmN0aW9uIHRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuICBUaGlzIG11c3QgYmUgaW4gZnVuY3Rpb24gKGVyciwgLi4uKSBmb3JtYXQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY2FsbFxuICogQHBhcmFtIHtNaXhlZH0gW2N0eF0gVGhlIGNvbnRleHQgZm9yIHRoZSBmdW5jIHBhcmFtZXRlciB0byBiZSBleGVjdXRlZC4gIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIHVuZGVmaW5lZC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gQSBzZWxlY3RvciB3aGljaCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlIGNhbGxiYWNrIG1pbnVzIHRoZSBlcnJvciB0byBwcm9kdWNlIGEgc2luZ2xlIGl0ZW0gdG8geWllbGQgb24gbmV4dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQW4gYXN5bmMgZnVuY3Rpb24gd2hpY2ggd2hlbiBhcHBsaWVkLCByZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgY2FsbGJhY2sgYXJndW1lbnRzIGFzIGFuIGFycmF5LlxuICovXG5PYnNlcnZhYmxlLmZyb21Ob2RlQ2FsbGJhY2sgPSBmdW5jdGlvbiAoZm4sIGN0eCwgc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB0eXBlb2YgY3R4ID09PSAndW5kZWZpbmVkJyAmJiAoY3R4ID0gdGhpcyk7IFxuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gY3JlYXRlTm9kZU9ic2VydmFibGUoZm4sIGN0eCwgc2VsZWN0b3IsIGFyZ3MpO1xuICB9O1xufTtcblxuICBmdW5jdGlvbiBpc05vZGVMaXN0KGVsKSB7XG4gICAgaWYgKHJvb3QuU3RhdGljTm9kZUxpc3QpIHtcbiAgICAgIC8vIElFOCBTcGVjaWZpY1xuICAgICAgLy8gaW5zdGFuY2VvZiBpcyBzbG93ZXIgdGhhbiBPYmplY3QjdG9TdHJpbmcsIGJ1dCBPYmplY3QjdG9TdHJpbmcgd2lsbCBub3Qgd29yayBhcyBpbnRlbmRlZCBpbiBJRThcbiAgICAgIHJldHVybiBlbCBpbnN0YW5jZW9mIHJvb3QuU3RhdGljTm9kZUxpc3QgfHwgZWwgaW5zdGFuY2VvZiByb290Lk5vZGVMaXN0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGVsKSA9PT0gJ1tvYmplY3QgTm9kZUxpc3RdJztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBMaXN0ZW5EaXNwb3NhYmxlKGUsIG4sIGZuKSB7XG4gICAgdGhpcy5fZSA9IGU7XG4gICAgdGhpcy5fbiA9IG47XG4gICAgdGhpcy5fZm4gPSBmbjtcbiAgICB0aGlzLl9lLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5fbiwgdGhpcy5fZm4sIGZhbHNlKTtcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgfVxuICBMaXN0ZW5EaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLl9lLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5fbiwgdGhpcy5fZm4sIGZhbHNlKTtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUV2ZW50TGlzdGVuZXIgKGVsLCBldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICB2YXIgZGlzcG9zYWJsZXMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuXG4gICAgLy8gQXN1bWUgTm9kZUxpc3Qgb3IgSFRNTENvbGxlY3Rpb25cbiAgICB2YXIgZWxlbVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGVsKTtcbiAgICBpZiAoaXNOb2RlTGlzdChlbCkgfHwgZWxlbVRvU3RyaW5nID09PSAnW29iamVjdCBIVE1MQ29sbGVjdGlvbl0nKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZWwubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZGlzcG9zYWJsZXMuYWRkKGNyZWF0ZUV2ZW50TGlzdGVuZXIoZWwuaXRlbShpKSwgZXZlbnROYW1lLCBoYW5kbGVyKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChlbCkge1xuICAgICAgZGlzcG9zYWJsZXMuYWRkKG5ldyBMaXN0ZW5EaXNwb3NhYmxlKGVsLCBldmVudE5hbWUsIGhhbmRsZXIpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGlzcG9zYWJsZXM7XG4gIH1cblxuICAvKipcbiAgICogQ29uZmlndXJhdGlvbiBvcHRpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdG8gdXNlIG5hdGl2ZSBldmVudHMgb25seVxuICAgKi9cbiAgUnguY29uZmlnLnVzZU5hdGl2ZUV2ZW50cyA9IGZhbHNlO1xuXG4gIHZhciBFdmVudE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRXZlbnRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEV2ZW50T2JzZXJ2YWJsZShlbCwgbmFtZSwgZm4pIHtcbiAgICAgIHRoaXMuX2VsID0gZWw7XG4gICAgICB0aGlzLl9uID0gbmFtZTtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVIYW5kbGVyKG8sIGZuKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlciAoKSB7XG4gICAgICAgIHZhciByZXN1bHRzID0gYXJndW1lbnRzWzBdO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihmbikpIHtcbiAgICAgICAgICByZXN1bHRzID0gdHJ5Q2F0Y2goZm4pLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgaWYgKHJlc3VsdHMgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmVzdWx0cy5lKTsgfVxuICAgICAgICB9XG4gICAgICAgIG8ub25OZXh0KHJlc3VsdHMpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBFdmVudE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIGNyZWF0ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgIHRoaXMuX2VsLFxuICAgICAgICB0aGlzLl9uLFxuICAgICAgICBjcmVhdGVIYW5kbGVyKG8sIHRoaXMuX2ZuKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBFdmVudE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IGFkZGluZyBhbiBldmVudCBsaXN0ZW5lciB0byB0aGUgbWF0Y2hpbmcgRE9NRWxlbWVudCBvciBlYWNoIGl0ZW0gaW4gdGhlIE5vZGVMaXN0LlxuICAgKiBAcGFyYW0ge09iamVjdH0gZWxlbWVudCBUaGUgRE9NRWxlbWVudCBvciBOb2RlTGlzdCB0byBhdHRhY2ggYSBsaXN0ZW5lci5cbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSBUaGUgZXZlbnQgbmFtZSB0byBhdHRhY2ggdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gQSBzZWxlY3RvciB3aGljaCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlIGV2ZW50IGhhbmRsZXIgdG8gcHJvZHVjZSBhIHNpbmdsZSBpdGVtIHRvIHlpZWxkIG9uIG5leHQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIGV2ZW50cyBmcm9tIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBhbmQgdGhlIHNwZWNpZmllZCBldmVudC5cbiAgICovXG4gIE9ic2VydmFibGUuZnJvbUV2ZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50TmFtZSwgc2VsZWN0b3IpIHtcbiAgICAvLyBOb2RlLmpzIHNwZWNpZmljXG4gICAgaWYgKGVsZW1lbnQuYWRkTGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBmcm9tRXZlbnRQYXR0ZXJuKFxuICAgICAgICBmdW5jdGlvbiAoaCkgeyBlbGVtZW50LmFkZExpc3RlbmVyKGV2ZW50TmFtZSwgaCk7IH0sXG4gICAgICAgIGZ1bmN0aW9uIChoKSB7IGVsZW1lbnQucmVtb3ZlTGlzdGVuZXIoZXZlbnROYW1lLCBoKTsgfSxcbiAgICAgICAgc2VsZWN0b3IpO1xuICAgIH1cblxuICAgIC8vIFVzZSBvbmx5IGlmIG5vbi1uYXRpdmUgZXZlbnRzIGFyZSBhbGxvd2VkXG4gICAgaWYgKCFSeC5jb25maWcudXNlTmF0aXZlRXZlbnRzKSB7XG4gICAgICAvLyBIYW5kbGVzIGpxLCBBbmd1bGFyLmpzLCBaZXB0bywgTWFyaW9uZXR0ZSwgRW1iZXIuanNcbiAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5vbiA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZWxlbWVudC5vZmYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGZyb21FdmVudFBhdHRlcm4oXG4gICAgICAgICAgZnVuY3Rpb24gKGgpIHsgZWxlbWVudC5vbihldmVudE5hbWUsIGgpOyB9LFxuICAgICAgICAgIGZ1bmN0aW9uIChoKSB7IGVsZW1lbnQub2ZmKGV2ZW50TmFtZSwgaCk7IH0sXG4gICAgICAgICAgc2VsZWN0b3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgRXZlbnRPYnNlcnZhYmxlKGVsZW1lbnQsIGV2ZW50TmFtZSwgc2VsZWN0b3IpLnB1Ymxpc2goKS5yZWZDb3VudCgpO1xuICB9O1xuXG4gIHZhciBFdmVudFBhdHRlcm5PYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEV2ZW50UGF0dGVybk9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZShhZGQsIGRlbCwgZm4pIHtcbiAgICAgIHRoaXMuX2FkZCA9IGFkZDtcbiAgICAgIHRoaXMuX2RlbCA9IGRlbDtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVIYW5kbGVyKG8sIGZuKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlciAoKSB7XG4gICAgICAgIHZhciByZXN1bHRzID0gYXJndW1lbnRzWzBdO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihmbikpIHtcbiAgICAgICAgICByZXN1bHRzID0gdHJ5Q2F0Y2goZm4pLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgaWYgKHJlc3VsdHMgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmVzdWx0cy5lKTsgfVxuICAgICAgICB9XG4gICAgICAgIG8ub25OZXh0KHJlc3VsdHMpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBFdmVudFBhdHRlcm5PYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBmbiA9IGNyZWF0ZUhhbmRsZXIobywgdGhpcy5fZm4pO1xuICAgICAgdmFyIHJldHVyblZhbHVlID0gdGhpcy5fYWRkKGZuKTtcbiAgICAgIHJldHVybiBuZXcgRXZlbnRQYXR0ZXJuRGlzcG9zYWJsZSh0aGlzLl9kZWwsIGZuLCByZXR1cm5WYWx1ZSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEV2ZW50UGF0dGVybkRpc3Bvc2FibGUoZGVsLCBmbiwgcmV0KSB7XG4gICAgICB0aGlzLl9kZWwgPSBkZWw7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgdGhpcy5fcmV0ID0gcmV0O1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgRXZlbnRQYXR0ZXJuRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgaXNGdW5jdGlvbih0aGlzLl9kZWwpICYmIHRoaXMuX2RlbCh0aGlzLl9mbiwgdGhpcy5fcmV0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIEV2ZW50UGF0dGVybk9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGZyb20gYW4gZXZlbnQgZW1pdHRlciB2aWEgYW4gYWRkSGFuZGxlci9yZW1vdmVIYW5kbGVyIHBhaXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGFkZEhhbmRsZXIgVGhlIGZ1bmN0aW9uIHRvIGFkZCBhIGhhbmRsZXIgdG8gdGhlIGVtaXR0ZXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtyZW1vdmVIYW5kbGVyXSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gdG8gcmVtb3ZlIGEgaGFuZGxlciBmcm9tIGFuIGVtaXR0ZXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gQSBzZWxlY3RvciB3aGljaCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlIGV2ZW50IGhhbmRsZXIgdG8gcHJvZHVjZSBhIHNpbmdsZSBpdGVtIHRvIHlpZWxkIG9uIG5leHQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIHdyYXBzIGFuIGV2ZW50IGZyb20gYW4gZXZlbnQgZW1pdHRlclxuICAgKi9cbiAgdmFyIGZyb21FdmVudFBhdHRlcm4gPSBPYnNlcnZhYmxlLmZyb21FdmVudFBhdHRlcm4gPSBmdW5jdGlvbiAoYWRkSGFuZGxlciwgcmVtb3ZlSGFuZGxlciwgc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gbmV3IEV2ZW50UGF0dGVybk9ic2VydmFibGUoYWRkSGFuZGxlciwgcmVtb3ZlSGFuZGxlciwgc2VsZWN0b3IpLnB1Ymxpc2goKS5yZWZDb3VudCgpO1xuICB9O1xuXG4gIHZhciBGcm9tUHJvbWlzZU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRnJvbVByb21pc2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZyb21Qcm9taXNlT2JzZXJ2YWJsZShwLCBzKSB7XG4gICAgICB0aGlzLl9wID0gcDtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVOZXh0KHMsIHN0YXRlKSB7XG4gICAgICB2YXIgbyA9IHN0YXRlWzBdLCBkYXRhID0gc3RhdGVbMV07XG4gICAgICBvLm9uTmV4dChkYXRhKTtcbiAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZUVycm9yKHMsIHN0YXRlKSB7XG4gICAgICB2YXIgbyA9IHN0YXRlWzBdLCBlcnIgPSBzdGF0ZVsxXTtcbiAgICAgIG8ub25FcnJvcihlcnIpO1xuICAgIH1cblxuICAgIEZyb21Qcm9taXNlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBzYWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSwgc2VsZiA9IHRoaXM7XG5cbiAgICAgIHRoaXMuX3BcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICBzYWQuc2V0RGlzcG9zYWJsZShzZWxmLl9zLnNjaGVkdWxlKFtvLCBkYXRhXSwgc2NoZWR1bGVOZXh0KSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBzYWQuc2V0RGlzcG9zYWJsZShzZWxmLl9zLnNjaGVkdWxlKFtvLCBlcnJdLCBzY2hlZHVsZUVycm9yKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc2FkO1xuICAgIH07XG5cbiAgICByZXR1cm4gRnJvbVByb21pc2VPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogQ29udmVydHMgYSBQcm9taXNlIHRvIGFuIE9ic2VydmFibGUgc2VxdWVuY2VcbiAgKiBAcGFyYW0ge1Byb21pc2V9IEFuIEVTNiBDb21wbGlhbnQgcHJvbWlzZS5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCB3cmFwcyB0aGUgZXhpc3RpbmcgcHJvbWlzZSBzdWNjZXNzIGFuZCBmYWlsdXJlLlxuICAqL1xuICB2YXIgb2JzZXJ2YWJsZUZyb21Qcm9taXNlID0gT2JzZXJ2YWJsZS5mcm9tUHJvbWlzZSA9IGZ1bmN0aW9uIChwcm9taXNlLCBzY2hlZHVsZXIpIHtcbiAgICBzY2hlZHVsZXIgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgRnJvbVByb21pc2VPYnNlcnZhYmxlKHByb21pc2UsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgLypcbiAgICogQ29udmVydHMgYW4gZXhpc3Rpbmcgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0byBhbiBFUzYgQ29tcGF0aWJsZSBQcm9taXNlXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBwcm9taXNlID0gUnguT2JzZXJ2YWJsZS5yZXR1cm4oNDIpLnRvUHJvbWlzZShSU1ZQLlByb21pc2UpO1xuICAgKlxuICAgKiAvLyBXaXRoIGNvbmZpZ1xuICAgKiBSeC5jb25maWcuUHJvbWlzZSA9IFJTVlAuUHJvbWlzZTtcbiAgICogdmFyIHByb21pc2UgPSBSeC5PYnNlcnZhYmxlLnJldHVybig0MikudG9Qcm9taXNlKCk7XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcm9taXNlQ3Rvcl0gVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBwcm9taXNlLiBJZiBub3QgcHJvdmlkZWQsIGl0IGxvb2tzIGZvciBpdCBpbiBSeC5jb25maWcuUHJvbWlzZS5cbiAgICogQHJldHVybnMge1Byb21pc2V9IEFuIEVTNiBjb21wYXRpYmxlIHByb21pc2Ugd2l0aCB0aGUgbGFzdCB2YWx1ZSBmcm9tIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRvUHJvbWlzZSA9IGZ1bmN0aW9uIChwcm9taXNlQ3Rvcikge1xuICAgIHByb21pc2VDdG9yIHx8IChwcm9taXNlQ3RvciA9IFJ4LmNvbmZpZy5Qcm9taXNlKTtcbiAgICBpZiAoIXByb21pc2VDdG9yKSB7IHRocm93IG5ldyBOb3RTdXBwb3J0ZWRFcnJvcignUHJvbWlzZSB0eXBlIG5vdCBwcm92aWRlZCBub3IgaW4gUnguY29uZmlnLlByb21pc2UnKTsgfVxuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgcHJvbWlzZUN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgLy8gTm8gY2FuY2VsbGF0aW9uIGNhbiBiZSBkb25lXG4gICAgICB2YXIgdmFsdWU7XG4gICAgICBzb3VyY2Uuc3Vic2NyaWJlKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHZhbHVlID0gdjtcbiAgICAgIH0sIHJlamVjdCwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbnZva2VzIHRoZSBhc3luY2hyb25vdXMgZnVuY3Rpb24sIHN1cmZhY2luZyB0aGUgcmVzdWx0IHRocm91Z2ggYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY3Rpb25Bc3luYyBBc3luY2hyb25vdXMgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhIFByb21pc2UgdG8gcnVuLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBleHBvc2luZyB0aGUgZnVuY3Rpb24ncyByZXN1bHQgdmFsdWUsIG9yIGFuIGV4Y2VwdGlvbi5cbiAgICovXG4gIE9ic2VydmFibGUuc3RhcnRBc3luYyA9IGZ1bmN0aW9uIChmdW5jdGlvbkFzeW5jKSB7XG4gICAgdmFyIHByb21pc2UgPSB0cnlDYXRjaChmdW5jdGlvbkFzeW5jKSgpO1xuICAgIGlmIChwcm9taXNlID09PSBlcnJvck9iaikgeyByZXR1cm4gb2JzZXJ2YWJsZVRocm93KHByb21pc2UuZSk7IH1cbiAgICByZXR1cm4gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHByb21pc2UpO1xuICB9O1xuXG4gIHZhciBNdWx0aWNhc3RPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNdWx0aWNhc3RPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE11bHRpY2FzdE9ic2VydmFibGUoc291cmNlLCBmbjEsIGZuMikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9mbjEgPSBmbjE7XG4gICAgICB0aGlzLl9mbjIgPSBmbjI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBNdWx0aWNhc3RPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBjb25uZWN0YWJsZSA9IHRoaXMuc291cmNlLm11bHRpY2FzdCh0aGlzLl9mbjEoKSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUodGhpcy5fZm4yKGNvbm5lY3RhYmxlKS5zdWJzY3JpYmUobyksIGNvbm5lY3RhYmxlLmNvbm5lY3QoKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBNdWx0aWNhc3RPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqIE11bHRpY2FzdHMgdGhlIHNvdXJjZSBzZXF1ZW5jZSBub3RpZmljYXRpb25zIHRocm91Z2ggYW4gaW5zdGFudGlhdGVkIHN1YmplY3QgaW50byBhbGwgdXNlcyBvZiB0aGUgc2VxdWVuY2Ugd2l0aGluIGEgc2VsZWN0b3IgZnVuY3Rpb24uIEVhY2hcbiAgICogc3Vic2NyaXB0aW9uIHRvIHRoZSByZXN1bHRpbmcgc2VxdWVuY2UgY2F1c2VzIGEgc2VwYXJhdGUgbXVsdGljYXN0IGludm9jYXRpb24sIGV4cG9zaW5nIHRoZSBzZXF1ZW5jZSByZXN1bHRpbmcgZnJvbSB0aGUgc2VsZWN0b3IgZnVuY3Rpb24nc1xuICAgKiBpbnZvY2F0aW9uLiBGb3Igc3BlY2lhbGl6YXRpb25zIHdpdGggZml4ZWQgc3ViamVjdCB0eXBlcywgc2VlIFB1Ymxpc2gsIFB1Ymxpc2hMYXN0LCBhbmQgUmVwbGF5LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAxIC0gcmVzID0gc291cmNlLm11bHRpY2FzdChvYnNlcnZhYmxlKTtcbiAgICogMiAtIHJlcyA9IHNvdXJjZS5tdWx0aWNhc3QoZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IFN1YmplY3QoKTsgfSwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0pO1xuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufFN1YmplY3R9IHN1YmplY3RPclN1YmplY3RTZWxlY3RvclxuICAgKiBGYWN0b3J5IGZ1bmN0aW9uIHRvIGNyZWF0ZSBhbiBpbnRlcm1lZGlhdGUgc3ViamVjdCB0aHJvdWdoIHdoaWNoIHRoZSBzb3VyY2Ugc2VxdWVuY2UncyBlbGVtZW50cyB3aWxsIGJlIG11bHRpY2FzdCB0byB0aGUgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqIE9yOlxuICAgKiBTdWJqZWN0IHRvIHB1c2ggc291cmNlIGVsZW1lbnRzIGludG8uXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gT3B0aW9uYWwgc2VsZWN0b3IgZnVuY3Rpb24gd2hpY2ggY2FuIHVzZSB0aGUgbXVsdGljYXN0ZWQgc291cmNlIHNlcXVlbmNlIHN1YmplY3QgdG8gdGhlIHBvbGljaWVzIGVuZm9yY2VkIGJ5IHRoZSBjcmVhdGVkIHN1YmplY3QuIFNwZWNpZmllZCBvbmx5IGlmIDxwYXJhbXJlZiBuYW1lPVwic3ViamVjdE9yU3ViamVjdFNlbGVjdG9yXCIgaXMgYSBmYWN0b3J5IGZ1bmN0aW9uLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBhIHNlcXVlbmNlIHByb2R1Y2VkIGJ5IG11bHRpY2FzdGluZyB0aGUgc291cmNlIHNlcXVlbmNlIHdpdGhpbiBhIHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm11bHRpY2FzdCA9IGZ1bmN0aW9uIChzdWJqZWN0T3JTdWJqZWN0U2VsZWN0b3IsIHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24oc3ViamVjdE9yU3ViamVjdFNlbGVjdG9yKSA/XG4gICAgICBuZXcgTXVsdGljYXN0T2JzZXJ2YWJsZSh0aGlzLCBzdWJqZWN0T3JTdWJqZWN0U2VsZWN0b3IsIHNlbGVjdG9yKSA6XG4gICAgICBuZXcgQ29ubmVjdGFibGVPYnNlcnZhYmxlKHRoaXMsIHN1YmplY3RPclN1YmplY3RTZWxlY3Rvcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGlzIHRoZSByZXN1bHQgb2YgaW52b2tpbmcgdGhlIHNlbGVjdG9yIG9uIGEgY29ubmVjdGFibGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UuXG4gICAqIFRoaXMgb3BlcmF0b3IgaXMgYSBzcGVjaWFsaXphdGlvbiBvZiBNdWx0aWNhc3QgdXNpbmcgYSByZWd1bGFyIFN1YmplY3QuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXNyZXMgPSBzb3VyY2UucHVibGlzaCgpO1xuICAgKiB2YXIgcmVzID0gc291cmNlLnB1Ymxpc2goZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0pO1xuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbc2VsZWN0b3JdIFNlbGVjdG9yIGZ1bmN0aW9uIHdoaWNoIGNhbiB1c2UgdGhlIG11bHRpY2FzdGVkIHNvdXJjZSBzZXF1ZW5jZSBhcyBtYW55IHRpbWVzIGFzIG5lZWRlZCwgd2l0aG91dCBjYXVzaW5nIG11bHRpcGxlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIHNvdXJjZSBzZXF1ZW5jZS4gU3Vic2NyaWJlcnMgdG8gdGhlIGdpdmVuIHNvdXJjZSB3aWxsIHJlY2VpdmUgYWxsIG5vdGlmaWNhdGlvbnMgb2YgdGhlIHNvdXJjZSBmcm9tIHRoZSB0aW1lIG9mIHRoZSBzdWJzY3JpcHRpb24gb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aGluIGEgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucHVibGlzaCA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgIHJldHVybiBzZWxlY3RvciAmJiBpc0Z1bmN0aW9uKHNlbGVjdG9yKSA/XG4gICAgICB0aGlzLm11bHRpY2FzdChmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgU3ViamVjdCgpOyB9LCBzZWxlY3RvcikgOlxuICAgICAgdGhpcy5tdWx0aWNhc3QobmV3IFN1YmplY3QoKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UuXG4gICAqIFRoaXMgb3BlcmF0b3IgaXMgYSBzcGVjaWFsaXphdGlvbiBvZiBwdWJsaXNoIHdoaWNoIGNyZWF0ZXMgYSBzdWJzY3JpcHRpb24gd2hlbiB0aGUgbnVtYmVyIG9mIG9ic2VydmVycyBnb2VzIGZyb20gemVybyB0byBvbmUsIHRoZW4gc2hhcmVzIHRoYXQgc3Vic2NyaXB0aW9uIHdpdGggYWxsIHN1YnNlcXVlbnQgb2JzZXJ2ZXJzIHVudGlsIHRoZSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIHJldHVybnMgdG8gemVybywgYXQgd2hpY2ggcG9pbnQgdGhlIHN1YnNjcmlwdGlvbiBpcyBkaXNwb3NlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zaGFyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5wdWJsaXNoKCkucmVmQ291bnQoKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgc2VsZWN0b3Igb24gYSBjb25uZWN0YWJsZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZSBjb250YWluaW5nIG9ubHkgdGhlIGxhc3Qgbm90aWZpY2F0aW9uLlxuICAgKiBUaGlzIG9wZXJhdG9yIGlzIGEgc3BlY2lhbGl6YXRpb24gb2YgTXVsdGljYXN0IHVzaW5nIGEgQXN5bmNTdWJqZWN0LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcmVzID0gc291cmNlLnB1Ymxpc2hMYXN0KCk7XG4gICAqIHZhciByZXMgPSBzb3VyY2UucHVibGlzaExhc3QoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0pO1xuICAgKlxuICAgKiBAcGFyYW0gc2VsZWN0b3IgW09wdGlvbmFsXSBTZWxlY3RvciBmdW5jdGlvbiB3aGljaCBjYW4gdXNlIHRoZSBtdWx0aWNhc3RlZCBzb3VyY2Ugc2VxdWVuY2UgYXMgbWFueSB0aW1lcyBhcyBuZWVkZWQsIHdpdGhvdXQgY2F1c2luZyBtdWx0aXBsZSBzdWJzY3JpcHRpb25zIHRvIHRoZSBzb3VyY2Ugc2VxdWVuY2UuIFN1YnNjcmliZXJzIHRvIHRoZSBnaXZlbiBzb3VyY2Ugd2lsbCBvbmx5IHJlY2VpdmUgdGhlIGxhc3Qgbm90aWZpY2F0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aGluIGEgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucHVibGlzaExhc3QgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gc2VsZWN0b3IgJiYgaXNGdW5jdGlvbihzZWxlY3RvcikgP1xuICAgICAgdGhpcy5tdWx0aWNhc3QoZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IEFzeW5jU3ViamVjdCgpOyB9LCBzZWxlY3RvcikgOlxuICAgICAgdGhpcy5tdWx0aWNhc3QobmV3IEFzeW5jU3ViamVjdCgpKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgc2VsZWN0b3Igb24gYSBjb25uZWN0YWJsZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZSBhbmQgc3RhcnRzIHdpdGggaW5pdGlhbFZhbHVlLlxuICAgKiBUaGlzIG9wZXJhdG9yIGlzIGEgc3BlY2lhbGl6YXRpb24gb2YgTXVsdGljYXN0IHVzaW5nIGEgQmVoYXZpb3JTdWJqZWN0LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcmVzID0gc291cmNlLnB1Ymxpc2hWYWx1ZSg0Mik7XG4gICAqIHZhciByZXMgPSBzb3VyY2UucHVibGlzaFZhbHVlKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnNlbGVjdChmdW5jdGlvbiAoeSkgeyByZXR1cm4geSAqIHk7IH0pIH0sIDQyKTtcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBPcHRpb25hbCBzZWxlY3RvciBmdW5jdGlvbiB3aGljaCBjYW4gdXNlIHRoZSBtdWx0aWNhc3RlZCBzb3VyY2Ugc2VxdWVuY2UgYXMgbWFueSB0aW1lcyBhcyBuZWVkZWQsIHdpdGhvdXQgY2F1c2luZyBtdWx0aXBsZSBzdWJzY3JpcHRpb25zIHRvIHRoZSBzb3VyY2Ugc2VxdWVuY2UuIFN1YnNjcmliZXJzIHRvIHRoZSBnaXZlbiBzb3VyY2Ugd2lsbCByZWNlaXZlIGltbWVkaWF0ZWx5IHJlY2VpdmUgdGhlIGluaXRpYWwgdmFsdWUsIGZvbGxvd2VkIGJ5IGFsbCBub3RpZmljYXRpb25zIG9mIHRoZSBzb3VyY2UgZnJvbSB0aGUgdGltZSBvZiB0aGUgc3Vic2NyaXB0aW9uIG9uLlxuICAgKiBAcGFyYW0ge01peGVkfSBpbml0aWFsVmFsdWUgSW5pdGlhbCB2YWx1ZSByZWNlaXZlZCBieSBvYnNlcnZlcnMgdXBvbiBzdWJzY3JpcHRpb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aGluIGEgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucHVibGlzaFZhbHVlID0gZnVuY3Rpb24gKGluaXRpYWxWYWx1ZU9yU2VsZWN0b3IsIGluaXRpYWxWYWx1ZSkge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAyID9cbiAgICAgIHRoaXMubXVsdGljYXN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCZWhhdmlvclN1YmplY3QoaW5pdGlhbFZhbHVlKTtcbiAgICAgIH0sIGluaXRpYWxWYWx1ZU9yU2VsZWN0b3IpIDpcbiAgICAgIHRoaXMubXVsdGljYXN0KG5ldyBCZWhhdmlvclN1YmplY3QoaW5pdGlhbFZhbHVlT3JTZWxlY3RvcikpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzaGFyZXMgYSBzaW5nbGUgc3Vic2NyaXB0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlIGFuZCBzdGFydHMgd2l0aCBhbiBpbml0aWFsVmFsdWUuXG4gICAqIFRoaXMgb3BlcmF0b3IgaXMgYSBzcGVjaWFsaXphdGlvbiBvZiBwdWJsaXNoVmFsdWUgd2hpY2ggY3JlYXRlcyBhIHN1YnNjcmlwdGlvbiB3aGVuIHRoZSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIGdvZXMgZnJvbSB6ZXJvIHRvIG9uZSwgdGhlbiBzaGFyZXMgdGhhdCBzdWJzY3JpcHRpb24gd2l0aCBhbGwgc3Vic2VxdWVudCBvYnNlcnZlcnMgdW50aWwgdGhlIG51bWJlciBvZiBvYnNlcnZlcnMgcmV0dXJucyB0byB6ZXJvLCBhdCB3aGljaCBwb2ludCB0aGUgc3Vic2NyaXB0aW9uIGlzIGRpc3Bvc2VkLlxuICAgKiBAcGFyYW0ge01peGVkfSBpbml0aWFsVmFsdWUgSW5pdGlhbCB2YWx1ZSByZWNlaXZlZCBieSBvYnNlcnZlcnMgdXBvbiBzdWJzY3JpcHRpb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2hhcmVWYWx1ZSA9IGZ1bmN0aW9uIChpbml0aWFsVmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5wdWJsaXNoVmFsdWUoaW5pdGlhbFZhbHVlKS5yZWZDb3VudCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGludm9raW5nIHRoZSBzZWxlY3RvciBvbiBhIGNvbm5lY3RhYmxlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzaGFyZXMgYSBzaW5nbGUgc3Vic2NyaXB0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlIHJlcGxheWluZyBub3RpZmljYXRpb25zIHN1YmplY3QgdG8gYSBtYXhpbXVtIHRpbWUgbGVuZ3RoIGZvciB0aGUgcmVwbGF5IGJ1ZmZlci5cbiAgICogVGhpcyBvcGVyYXRvciBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIE11bHRpY2FzdCB1c2luZyBhIFJlcGxheVN1YmplY3QuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSBzb3VyY2UucmVwbGF5KG51bGwsIDMpO1xuICAgKiB2YXIgcmVzID0gc291cmNlLnJlcGxheShudWxsLCAzLCA1MDApO1xuICAgKiB2YXIgcmVzID0gc291cmNlLnJlcGxheShudWxsLCAzLCA1MDAsIHNjaGVkdWxlcik7XG4gICAqIHZhciByZXMgPSBzb3VyY2UucmVwbGF5KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnRha2UoNikucmVwZWF0KCk7IH0sIDMsIDUwMCwgc2NoZWR1bGVyKTtcbiAgICpcbiAgICogQHBhcmFtIHNlbGVjdG9yIFtPcHRpb25hbF0gU2VsZWN0b3IgZnVuY3Rpb24gd2hpY2ggY2FuIHVzZSB0aGUgbXVsdGljYXN0ZWQgc291cmNlIHNlcXVlbmNlIGFzIG1hbnkgdGltZXMgYXMgbmVlZGVkLCB3aXRob3V0IGNhdXNpbmcgbXVsdGlwbGUgc3Vic2NyaXB0aW9ucyB0byB0aGUgc291cmNlIHNlcXVlbmNlLiBTdWJzY3JpYmVycyB0byB0aGUgZ2l2ZW4gc291cmNlIHdpbGwgcmVjZWl2ZSBhbGwgdGhlIG5vdGlmaWNhdGlvbnMgb2YgdGhlIHNvdXJjZSBzdWJqZWN0IHRvIHRoZSBzcGVjaWZpZWQgcmVwbGF5IGJ1ZmZlciB0cmltbWluZyBwb2xpY3kuXG4gICAqIEBwYXJhbSBidWZmZXJTaXplIFtPcHRpb25hbF0gTWF4aW11bSBlbGVtZW50IGNvdW50IG9mIHRoZSByZXBsYXkgYnVmZmVyLlxuICAgKiBAcGFyYW0gd2luZG93U2l6ZSBbT3B0aW9uYWxdIE1heGltdW0gdGltZSBsZW5ndGggb2YgdGhlIHJlcGxheSBidWZmZXIuXG4gICAqIEBwYXJhbSBzY2hlZHVsZXIgW09wdGlvbmFsXSBTY2hlZHVsZXIgd2hlcmUgY29ubmVjdGVkIG9ic2VydmVycyB3aXRoaW4gdGhlIHNlbGVjdG9yIGZ1bmN0aW9uIHdpbGwgYmUgaW52b2tlZCBvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoaW4gYSBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5yZXBsYXkgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIGJ1ZmZlclNpemUsIHdpbmRvd1NpemUsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBzZWxlY3RvciAmJiBpc0Z1bmN0aW9uKHNlbGVjdG9yKSA/XG4gICAgICB0aGlzLm11bHRpY2FzdChmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgUmVwbGF5U3ViamVjdChidWZmZXJTaXplLCB3aW5kb3dTaXplLCBzY2hlZHVsZXIpOyB9LCBzZWxlY3RvcikgOlxuICAgICAgdGhpcy5tdWx0aWNhc3QobmV3IFJlcGxheVN1YmplY3QoYnVmZmVyU2l6ZSwgd2luZG93U2l6ZSwgc2NoZWR1bGVyKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UgcmVwbGF5aW5nIG5vdGlmaWNhdGlvbnMgc3ViamVjdCB0byBhIG1heGltdW0gdGltZSBsZW5ndGggZm9yIHRoZSByZXBsYXkgYnVmZmVyLlxuICAgKiBUaGlzIG9wZXJhdG9yIGlzIGEgc3BlY2lhbGl6YXRpb24gb2YgcmVwbGF5IHdoaWNoIGNyZWF0ZXMgYSBzdWJzY3JpcHRpb24gd2hlbiB0aGUgbnVtYmVyIG9mIG9ic2VydmVycyBnb2VzIGZyb20gemVybyB0byBvbmUsIHRoZW4gc2hhcmVzIHRoYXQgc3Vic2NyaXB0aW9uIHdpdGggYWxsIHN1YnNlcXVlbnQgb2JzZXJ2ZXJzIHVudGlsIHRoZSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIHJldHVybnMgdG8gemVybywgYXQgd2hpY2ggcG9pbnQgdGhlIHN1YnNjcmlwdGlvbiBpcyBkaXNwb3NlZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5zaGFyZVJlcGxheSgzKTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5zaGFyZVJlcGxheSgzLCA1MDApO1xuICAgKiB2YXIgcmVzID0gc291cmNlLnNoYXJlUmVwbGF5KDMsIDUwMCwgc2NoZWR1bGVyKTtcbiAgICpcblxuICAgKiBAcGFyYW0gYnVmZmVyU2l6ZSBbT3B0aW9uYWxdIE1heGltdW0gZWxlbWVudCBjb3VudCBvZiB0aGUgcmVwbGF5IGJ1ZmZlci5cbiAgICogQHBhcmFtIHdpbmRvdyBbT3B0aW9uYWxdIE1heGltdW0gdGltZSBsZW5ndGggb2YgdGhlIHJlcGxheSBidWZmZXIuXG4gICAqIEBwYXJhbSBzY2hlZHVsZXIgW09wdGlvbmFsXSBTY2hlZHVsZXIgd2hlcmUgY29ubmVjdGVkIG9ic2VydmVycyB3aXRoaW4gdGhlIHNlbGVjdG9yIGZ1bmN0aW9uIHdpbGwgYmUgaW52b2tlZCBvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zaGFyZVJlcGxheSA9IGZ1bmN0aW9uIChidWZmZXJTaXplLCB3aW5kb3dTaXplLCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gdGhpcy5yZXBsYXkobnVsbCwgYnVmZmVyU2l6ZSwgd2luZG93U2l6ZSwgc2NoZWR1bGVyKS5yZWZDb3VudCgpO1xuICB9O1xuXG4gIHZhciBSZWZDb3VudE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFJlZkNvdW50T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBSZWZDb3VudE9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2NvdW50ID0gMDtcbiAgICAgIHRoaXMuX2Nvbm5lY3RhYmxlU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFJlZkNvdW50T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG8pO1xuICAgICAgKyt0aGlzLl9jb3VudCA9PT0gMSAmJiAodGhpcy5fY29ubmVjdGFibGVTdWJzY3JpcHRpb24gPSB0aGlzLnNvdXJjZS5jb25uZWN0KCkpO1xuICAgICAgcmV0dXJuIG5ldyBSZWZDb3VudERpc3Bvc2FibGUodGhpcywgc3Vic2NyaXB0aW9uKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gUmVmQ291bnREaXNwb3NhYmxlKHAsIHMpIHtcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBSZWZDb3VudERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9zLmRpc3Bvc2UoKTtcbiAgICAgICAgLS10aGlzLl9wLl9jb3VudCA9PT0gMCAmJiB0aGlzLl9wLl9jb25uZWN0YWJsZVN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBSZWZDb3VudE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgQ29ubmVjdGFibGVPYnNlcnZhYmxlID0gUnguQ29ubmVjdGFibGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb25uZWN0YWJsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ29ubmVjdGFibGVPYnNlcnZhYmxlKHNvdXJjZSwgc3ViamVjdCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9jb25uZWN0aW9uID0gbnVsbDtcbiAgICAgIHRoaXMuX3NvdXJjZSA9IHNvdXJjZS5hc09ic2VydmFibGUoKTtcbiAgICAgIHRoaXMuX3N1YmplY3QgPSBzdWJqZWN0O1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ29ubmVjdERpc3Bvc2FibGUocGFyZW50LCBzdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuX3AgPSBwYXJlbnQ7XG4gICAgICB0aGlzLl9zID0gc3Vic2NyaXB0aW9uO1xuICAgIH1cblxuICAgIENvbm5lY3REaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX3MpIHtcbiAgICAgICAgdGhpcy5fcy5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuX3MgPSBudWxsO1xuICAgICAgICB0aGlzLl9wLl9jb25uZWN0aW9uID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLl9jb25uZWN0aW9uKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLl9zb3VyY2Uuc3Vic2NyaWJlKHRoaXMuX3N1YmplY3QpO1xuICAgICAgICB0aGlzLl9jb25uZWN0aW9uID0gbmV3IENvbm5lY3REaXNwb3NhYmxlKHRoaXMsIHN1YnNjcmlwdGlvbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fY29ubmVjdGlvbjtcbiAgICB9O1xuXG4gICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdWJqZWN0LnN1YnNjcmliZShvKTtcbiAgICB9O1xuXG4gICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5yZWZDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBuZXcgUmVmQ291bnRPYnNlcnZhYmxlKHRoaXMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29ubmVjdGFibGVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGUpKTtcblxuICB2YXIgVGltZXJPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRpbWVyT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUaW1lck9ic2VydmFibGUoZHQsIHMpIHtcbiAgICAgIHRoaXMuX2R0ID0gZHQ7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRpbWVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcy5zY2hlZHVsZUZ1dHVyZShvLCB0aGlzLl9kdCwgc2NoZWR1bGVNZXRob2QpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzLCBvKSB7XG4gICAgICBvLm9uTmV4dCgwKTtcbiAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gVGltZXJPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgZnVuY3Rpb24gX29ic2VydmFibGVUaW1lcihkdWVUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gbmV3IFRpbWVyT2JzZXJ2YWJsZShkdWVUaW1lLCBzY2hlZHVsZXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZVRpbWVyRGF0ZUFuZFBlcmlvZChkdWVUaW1lLCBwZXJpb2QsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBkID0gZHVlVGltZSwgcCA9IG5vcm1hbGl6ZVRpbWUocGVyaW9kKTtcbiAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUoMCwgZCwgZnVuY3Rpb24gKGNvdW50LCBzZWxmKSB7XG4gICAgICAgIGlmIChwID4gMCkge1xuICAgICAgICAgIHZhciBub3cgPSBzY2hlZHVsZXIubm93KCk7XG4gICAgICAgICAgZCA9IG5ldyBEYXRlKGQuZ2V0VGltZSgpICsgcCk7XG4gICAgICAgICAgZC5nZXRUaW1lKCkgPD0gbm93ICYmIChkID0gbmV3IERhdGUobm93ICsgcCkpO1xuICAgICAgICB9XG4gICAgICAgIG9ic2VydmVyLm9uTmV4dChjb3VudCk7XG4gICAgICAgIHNlbGYoY291bnQgKyAxLCBuZXcgRGF0ZShkKSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9ic2VydmFibGVUaW1lclRpbWVTcGFuQW5kUGVyaW9kKGR1ZVRpbWUsIHBlcmlvZCwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIGR1ZVRpbWUgPT09IHBlcmlvZCA/XG4gICAgICBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZVBlcmlvZGljKDAsIHBlcmlvZCwgZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGNvdW50KTtcbiAgICAgICAgICByZXR1cm4gY291bnQgKyAxO1xuICAgICAgICB9KTtcbiAgICAgIH0pIDpcbiAgICAgIG9ic2VydmFibGVEZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlVGltZXJEYXRlQW5kUGVyaW9kKG5ldyBEYXRlKHNjaGVkdWxlci5ub3coKSArIGR1ZVRpbWUpLCBwZXJpb2QsIHNjaGVkdWxlcik7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgcHJvZHVjZXMgYSB2YWx1ZSBhZnRlciBlYWNoIHBlcmlvZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIDEgLSByZXMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuICAgKiAgMiAtIHJlcyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCwgUnguU2NoZWR1bGVyLnRpbWVvdXQpO1xuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gcGVyaW9kIFBlcmlvZCBmb3IgcHJvZHVjaW5nIHRoZSB2YWx1ZXMgaW4gdGhlIHJlc3VsdGluZyBzZXF1ZW5jZSAoc3BlY2lmaWVkIGFzIGFuIGludGVnZXIgZGVub3RpbmcgbWlsbGlzZWNvbmRzKS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBSeC5TY2hlZHVsZXIudGltZW91dCBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHByb2R1Y2VzIGEgdmFsdWUgYWZ0ZXIgZWFjaCBwZXJpb2QuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZWludGVydmFsID0gT2JzZXJ2YWJsZS5pbnRlcnZhbCA9IGZ1bmN0aW9uIChwZXJpb2QsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBvYnNlcnZhYmxlVGltZXJUaW1lU3BhbkFuZFBlcmlvZChwZXJpb2QsIHBlcmlvZCwgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSA/IHNjaGVkdWxlciA6IGRlZmF1bHRTY2hlZHVsZXIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgcHJvZHVjZXMgYSB2YWx1ZSBhZnRlciBkdWVUaW1lIGhhcyBlbGFwc2VkIGFuZCB0aGVuIGFmdGVyIGVhY2ggcGVyaW9kLlxuICAgKiBAcGFyYW0ge051bWJlcn0gZHVlVGltZSBBYnNvbHV0ZSAoc3BlY2lmaWVkIGFzIGEgRGF0ZSBvYmplY3QpIG9yIHJlbGF0aXZlIHRpbWUgKHNwZWNpZmllZCBhcyBhbiBpbnRlZ2VyIGRlbm90aW5nIG1pbGxpc2Vjb25kcykgYXQgd2hpY2ggdG8gcHJvZHVjZSB0aGUgZmlyc3QgdmFsdWUuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IFtwZXJpb2RPclNjaGVkdWxlcl0gIFBlcmlvZCB0byBwcm9kdWNlIHN1YnNlcXVlbnQgdmFsdWVzIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpLCBvciB0aGUgc2NoZWR1bGVyIHRvIHJ1biB0aGUgdGltZXIgb24uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSByZXN1bHRpbmcgdGltZXIgaXMgbm90IHJlY3VycmluZy5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIHRoZSB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgcHJvZHVjZXMgYSB2YWx1ZSBhZnRlciBkdWUgdGltZSBoYXMgZWxhcHNlZCBhbmQgdGhlbiBlYWNoIHBlcmlvZC5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlVGltZXIgPSBPYnNlcnZhYmxlLnRpbWVyID0gZnVuY3Rpb24gKGR1ZVRpbWUsIHBlcmlvZE9yU2NoZWR1bGVyLCBzY2hlZHVsZXIpIHtcbiAgICB2YXIgcGVyaW9kO1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIGlmIChwZXJpb2RPclNjaGVkdWxlciAhPSBudWxsICYmIHR5cGVvZiBwZXJpb2RPclNjaGVkdWxlciA9PT0gJ251bWJlcicpIHtcbiAgICAgIHBlcmlvZCA9IHBlcmlvZE9yU2NoZWR1bGVyO1xuICAgIH0gZWxzZSBpZiAoaXNTY2hlZHVsZXIocGVyaW9kT3JTY2hlZHVsZXIpKSB7XG4gICAgICBzY2hlZHVsZXIgPSBwZXJpb2RPclNjaGVkdWxlcjtcbiAgICB9XG4gICAgaWYgKChkdWVUaW1lIGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgZHVlVGltZSA9PT0gJ251bWJlcicpICYmIHBlcmlvZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gX29ic2VydmFibGVUaW1lcihkdWVUaW1lLCBzY2hlZHVsZXIpO1xuICAgIH1cbiAgICBpZiAoZHVlVGltZSBpbnN0YW5jZW9mIERhdGUgJiYgcGVyaW9kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBvYnNlcnZhYmxlVGltZXJEYXRlQW5kUGVyaW9kKGR1ZVRpbWUuZ2V0VGltZSgpLCBwZXJpb2RPclNjaGVkdWxlciwgc2NoZWR1bGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG9ic2VydmFibGVUaW1lclRpbWVTcGFuQW5kUGVyaW9kKGR1ZVRpbWUsIHBlcmlvZCwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICBmdW5jdGlvbiBvYnNlcnZhYmxlRGVsYXlSZWxhdGl2ZShzb3VyY2UsIGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGFjdGl2ZSA9IGZhbHNlLFxuICAgICAgICBjYW5jZWxhYmxlID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSxcbiAgICAgICAgZXhjZXB0aW9uID0gbnVsbCxcbiAgICAgICAgcSA9IFtdLFxuICAgICAgICBydW5uaW5nID0gZmFsc2UsXG4gICAgICAgIHN1YnNjcmlwdGlvbjtcbiAgICAgIHN1YnNjcmlwdGlvbiA9IHNvdXJjZS5tYXRlcmlhbGl6ZSgpLnRpbWVzdGFtcChzY2hlZHVsZXIpLnN1YnNjcmliZShmdW5jdGlvbiAobm90aWZpY2F0aW9uKSB7XG4gICAgICAgIHZhciBkLCBzaG91bGRSdW47XG4gICAgICAgIGlmIChub3RpZmljYXRpb24udmFsdWUua2luZCA9PT0gJ0UnKSB7XG4gICAgICAgICAgcSA9IFtdO1xuICAgICAgICAgIHEucHVzaChub3RpZmljYXRpb24pO1xuICAgICAgICAgIGV4Y2VwdGlvbiA9IG5vdGlmaWNhdGlvbi52YWx1ZS5lcnJvcjtcbiAgICAgICAgICBzaG91bGRSdW4gPSAhcnVubmluZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBxLnB1c2goeyB2YWx1ZTogbm90aWZpY2F0aW9uLnZhbHVlLCB0aW1lc3RhbXA6IG5vdGlmaWNhdGlvbi50aW1lc3RhbXAgKyBkdWVUaW1lIH0pO1xuICAgICAgICAgIHNob3VsZFJ1biA9ICFhY3RpdmU7XG4gICAgICAgICAgYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvdWxkUnVuKSB7XG4gICAgICAgICAgaWYgKGV4Y2VwdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgby5vbkVycm9yKGV4Y2VwdGlvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgICAgIGNhbmNlbGFibGUuc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgICAgICAgIGQuc2V0RGlzcG9zYWJsZShzY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUobnVsbCwgZHVlVGltZSwgZnVuY3Rpb24gKF8sIHNlbGYpIHtcbiAgICAgICAgICAgICAgdmFyIGUsIHJlY3Vyc2VEdWVUaW1lLCByZXN1bHQsIHNob3VsZFJlY3Vyc2U7XG4gICAgICAgICAgICAgIGlmIChleGNlcHRpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcnVubmluZyA9IHRydWU7XG4gICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChxLmxlbmd0aCA+IDAgJiYgcVswXS50aW1lc3RhbXAgLSBzY2hlZHVsZXIubm93KCkgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcS5zaGlmdCgpLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICByZXN1bHQuYWNjZXB0KG8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSB3aGlsZSAocmVzdWx0ICE9PSBudWxsKTtcbiAgICAgICAgICAgICAgc2hvdWxkUmVjdXJzZSA9IGZhbHNlO1xuICAgICAgICAgICAgICByZWN1cnNlRHVlVGltZSA9IDA7XG4gICAgICAgICAgICAgIGlmIChxLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzaG91bGRSZWN1cnNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZWN1cnNlRHVlVGltZSA9IE1hdGgubWF4KDAsIHFbMF0udGltZXN0YW1wIC0gc2NoZWR1bGVyLm5vdygpKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlID0gZXhjZXB0aW9uO1xuICAgICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIGlmIChlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNob3VsZFJlY3Vyc2UpIHtcbiAgICAgICAgICAgICAgICBzZWxmKG51bGwsIHJlY3Vyc2VEdWVUaW1lKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9uLCBjYW5jZWxhYmxlKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZURlbGF5QWJzb2x1dGUoc291cmNlLCBkdWVUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gb2JzZXJ2YWJsZURlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBvYnNlcnZhYmxlRGVsYXlSZWxhdGl2ZShzb3VyY2UsIGR1ZVRpbWUgLSBzY2hlZHVsZXIubm93KCksIHNjaGVkdWxlcik7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWxheVdpdGhTZWxlY3Rvcihzb3VyY2UsIHN1YnNjcmlwdGlvbkRlbGF5LCBkZWxheUR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICB2YXIgc3ViRGVsYXksIHNlbGVjdG9yO1xuICAgIGlmIChpc0Z1bmN0aW9uKHN1YnNjcmlwdGlvbkRlbGF5KSkge1xuICAgICAgc2VsZWN0b3IgPSBzdWJzY3JpcHRpb25EZWxheTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ViRGVsYXkgPSBzdWJzY3JpcHRpb25EZWxheTtcbiAgICAgIHNlbGVjdG9yID0gZGVsYXlEdXJhdGlvblNlbGVjdG9yO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBkZWxheXMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpLCBhdEVuZCA9IGZhbHNlLCBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuXG4gICAgICBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShcbiAgICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgdmFyIGRlbGF5ID0gdHJ5Q2F0Y2goc2VsZWN0b3IpKHgpO1xuICAgICAgICAgICAgaWYgKGRlbGF5ID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKGRlbGF5LmUpOyB9XG4gICAgICAgICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICAgICAgZGVsYXlzLmFkZChkKTtcbiAgICAgICAgICAgIGQuc2V0RGlzcG9zYWJsZShkZWxheS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBvLm9uTmV4dCh4KTtcbiAgICAgICAgICAgICAgICBkZWxheXMucmVtb3ZlKGQpO1xuICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LFxuICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgby5vbk5leHQoeCk7XG4gICAgICAgICAgICAgICAgZGVsYXlzLnJlbW92ZShkKTtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICkpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LFxuICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGF0RW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgfVxuICAgICAgICApKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZG9uZSAoKSB7XG4gICAgICAgIGF0RW5kICYmIGRlbGF5cy5sZW5ndGggPT09IDAgJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXN1YkRlbGF5KSB7XG4gICAgICAgIHN0YXJ0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShzdWJEZWxheS5zdWJzY3JpYmUoc3RhcnQsIGZ1bmN0aW9uIChlKSB7IG8ub25FcnJvcihlKTsgfSwgc3RhcnQpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbiwgZGVsYXlzKTtcbiAgICB9LCB0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgVGltZSBzaGlmdHMgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgZHVlVGltZS5cbiAgICogIFRoZSByZWxhdGl2ZSB0aW1lIGludGVydmFscyBiZXR3ZWVuIHRoZSB2YWx1ZXMgYXJlIHByZXNlcnZlZC5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR1ZVRpbWUgQWJzb2x1dGUgKHNwZWNpZmllZCBhcyBhIERhdGUgb2JqZWN0KSBvciByZWxhdGl2ZSB0aW1lIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpIGJ5IHdoaWNoIHRvIHNoaWZ0IHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHJ1biB0aGUgZGVsYXkgdGltZXJzIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZW91dCBzY2hlZHVsZXIgaXMgdXNlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRpbWUtc2hpZnRlZCBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5kZWxheSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZmlyc3RBcmcgPSBhcmd1bWVudHNbMF07XG4gICAgaWYgKHR5cGVvZiBmaXJzdEFyZyA9PT0gJ251bWJlcicgfHwgZmlyc3RBcmcgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICB2YXIgZHVlVGltZSA9IGZpcnN0QXJnLCBzY2hlZHVsZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICAgIHJldHVybiBkdWVUaW1lIGluc3RhbmNlb2YgRGF0ZSA/XG4gICAgICAgIG9ic2VydmFibGVEZWxheUFic29sdXRlKHRoaXMsIGR1ZVRpbWUsIHNjaGVkdWxlcikgOlxuICAgICAgICBvYnNlcnZhYmxlRGVsYXlSZWxhdGl2ZSh0aGlzLCBkdWVUaW1lLCBzY2hlZHVsZXIpO1xuICAgIH0gZWxzZSBpZiAoT2JzZXJ2YWJsZS5pc09ic2VydmFibGUoZmlyc3RBcmcpIHx8IGlzRnVuY3Rpb24oZmlyc3RBcmcpKSB7XG4gICAgICByZXR1cm4gZGVsYXlXaXRoU2VsZWN0b3IodGhpcywgZmlyc3RBcmcsIGFyZ3VtZW50c1sxXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMnKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIERlYm91bmNlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGVib3VuY2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIERlYm91bmNlT2JzZXJ2YWJsZShzb3VyY2UsIGR0LCBzKSB7XG4gICAgICBpc1NjaGVkdWxlcihzKSB8fCAocyA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9kdCA9IGR0O1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEZWJvdW5jZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGNhbmNlbGFibGUgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKFxuICAgICAgICB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IERlYm91bmNlT2JzZXJ2ZXIobywgdGhpcy5zb3VyY2UsIHRoaXMuX2R0LCB0aGlzLl9zLCBjYW5jZWxhYmxlKSksXG4gICAgICAgIGNhbmNlbGFibGUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRGVib3VuY2VPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIERlYm91bmNlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKERlYm91bmNlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRGVib3VuY2VPYnNlcnZlcihvYnNlcnZlciwgc291cmNlLCBkdWVUaW1lLCBzY2hlZHVsZXIsIGNhbmNlbGFibGUpIHtcbiAgICAgIHRoaXMuX28gPSBvYnNlcnZlcjtcbiAgICAgIHRoaXMuX3MgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9kID0gZHVlVGltZTtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIHRoaXMuX2MgPSBjYW5jZWxhYmxlO1xuICAgICAgdGhpcy5fdiA9IG51bGw7XG4gICAgICB0aGlzLl9odiA9IGZhbHNlO1xuICAgICAgdGhpcy5faWQgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRGVib3VuY2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9odiA9IHRydWU7XG4gICAgICB0aGlzLl92ID0geDtcbiAgICAgIHZhciBjdXJyZW50SWQgPSArK3RoaXMuX2lkLCBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICB0aGlzLl9jLnNldERpc3Bvc2FibGUoZCk7XG4gICAgICBkLnNldERpc3Bvc2FibGUodGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlRnV0dXJlKHRoaXMsIHRoaXMuX2QsIGZ1bmN0aW9uIChfLCBzZWxmKSB7XG4gICAgICAgIHNlbGYuX2h2ICYmIHNlbGYuX2lkID09PSBjdXJyZW50SWQgJiYgc2VsZi5fby5vbk5leHQoeCk7XG4gICAgICAgIHNlbGYuX2h2ID0gZmFsc2U7XG4gICAgICB9KSk7XG4gICAgfTtcblxuICAgIERlYm91bmNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX2MuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgICAgdGhpcy5faHYgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2lkKys7XG4gICAgfTtcblxuICAgIERlYm91bmNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX2MuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5faHYgJiYgdGhpcy5fby5vbk5leHQodGhpcy5fdik7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB0aGlzLl9odiA9IGZhbHNlO1xuICAgICAgdGhpcy5faWQrKztcbiAgICB9O1xuXG4gICAgcmV0dXJuIERlYm91bmNlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIGZ1bmN0aW9uIGRlYm91bmNlV2l0aFNlbGVjdG9yKHNvdXJjZSwgZHVyYXRpb25TZWxlY3Rvcikge1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHZhbHVlLCBoYXNWYWx1ZSA9IGZhbHNlLCBjYW5jZWxhYmxlID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSwgaWQgPSAwO1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgdmFyIHRocm90dGxlID0gdHJ5Q2F0Y2goZHVyYXRpb25TZWxlY3RvcikoeCk7XG4gICAgICAgICAgaWYgKHRocm90dGxlID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHRocm90dGxlLmUpOyB9XG5cbiAgICAgICAgICBpc1Byb21pc2UodGhyb3R0bGUpICYmICh0aHJvdHRsZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZSh0aHJvdHRsZSkpO1xuXG4gICAgICAgICAgaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICAgIHZhbHVlID0geDtcbiAgICAgICAgICBpZCsrO1xuICAgICAgICAgIHZhciBjdXJyZW50aWQgPSBpZCwgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICAgIGNhbmNlbGFibGUuc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgICAgICBkLnNldERpc3Bvc2FibGUodGhyb3R0bGUuc3Vic2NyaWJlKFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBoYXNWYWx1ZSAmJiBpZCA9PT0gY3VycmVudGlkICYmIG8ub25OZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgZC5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBoYXNWYWx1ZSAmJiBpZCA9PT0gY3VycmVudGlkICYmIG8ub25OZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgZC5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgY2FuY2VsYWJsZS5kaXNwb3NlKCk7XG4gICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICAgIGhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgaWQrKztcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNhbmNlbGFibGUuZGlzcG9zZSgpO1xuICAgICAgICAgIGhhc1ZhbHVlICYmIG8ub25OZXh0KHZhbHVlKTtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICBpZCsrO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbiwgY2FuY2VsYWJsZSk7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIG9ic2VydmFibGVQcm90by5kZWJvdW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaXNGdW5jdGlvbiAoYXJndW1lbnRzWzBdKSkge1xuICAgICAgcmV0dXJuIGRlYm91bmNlV2l0aFNlbGVjdG9yKHRoaXMsIGFyZ3VtZW50c1swXSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIG5ldyBEZWJvdW5jZU9ic2VydmFibGUodGhpcywgYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnRzJyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBUaW1lc3RhbXBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUaW1lc3RhbXBPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRpbWVzdGFtcE9ic2VydmFibGUoc291cmNlLCBzKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGltZXN0YW1wT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBUaW1lc3RhbXBPYnNlcnZlcihvLCB0aGlzLl9zKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBUaW1lc3RhbXBPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFRpbWVzdGFtcE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUaW1lc3RhbXBPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUaW1lc3RhbXBPYnNlcnZlcihvLCBzKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGltZXN0YW1wT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fby5vbk5leHQoeyB2YWx1ZTogeCwgdGltZXN0YW1wOiB0aGlzLl9zLm5vdygpIH0pO1xuICAgIH07XG5cbiAgICBUaW1lc3RhbXBPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBUaW1lc3RhbXBPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGltZXN0YW1wT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgUmVjb3JkcyB0aGUgdGltZXN0YW1wIGZvciBlYWNoIHZhbHVlIGluIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAxIC0gcmVzID0gc291cmNlLnRpbWVzdGFtcCgpOyAvLyBwcm9kdWNlcyB7IHZhbHVlOiB4LCB0aW1lc3RhbXA6IHRzIH1cbiAgICogIDIgLSByZXMgPSBzb3VyY2UudGltZXN0YW1wKFJ4LlNjaGVkdWxlci5kZWZhdWx0KTtcbiAgICpcbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdXNlZCB0byBjb21wdXRlIHRpbWVzdGFtcHMuIElmIG5vdCBzcGVjaWZpZWQsIHRoZSBkZWZhdWx0IHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRpbWVzdGFtcCBpbmZvcm1hdGlvbiBvbiB2YWx1ZXMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGltZXN0YW1wID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgVGltZXN0YW1wT2JzZXJ2YWJsZSh0aGlzLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHNhbXBsZU9ic2VydmFibGUoc291cmNlLCBzYW1wbGVyKSB7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgYXRFbmQgPSBmYWxzZSwgdmFsdWUsIGhhc1ZhbHVlID0gZmFsc2U7XG5cbiAgICAgIGZ1bmN0aW9uIHNhbXBsZVN1YnNjcmliZSgpIHtcbiAgICAgICAgaWYgKGhhc1ZhbHVlKSB7XG4gICAgICAgICAgaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICBvLm9uTmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgYXRFbmQgJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc291cmNlU3Vic2NyaXB0aW9uID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICBzb3VyY2VTdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAobmV3VmFsdWUpIHtcbiAgICAgICAgICBoYXNWYWx1ZSA9IHRydWU7XG4gICAgICAgICAgdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgYXRFbmQgPSB0cnVlO1xuICAgICAgICAgIHNvdXJjZVN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICkpO1xuXG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoXG4gICAgICAgIHNvdXJjZVN1YnNjcmlwdGlvbixcbiAgICAgICAgc2FtcGxlci5zdWJzY3JpYmUoc2FtcGxlU3Vic2NyaWJlLCBmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH0sIHNhbXBsZVN1YnNjcmliZSlcbiAgICAgICk7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgU2FtcGxlcyB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhdCBlYWNoIGludGVydmFsLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgMSAtIHJlcyA9IHNvdXJjZS5zYW1wbGUoc2FtcGxlT2JzZXJ2YWJsZSk7IC8vIFNhbXBsZXIgdGljayBzZXF1ZW5jZVxuICAgKiAgMiAtIHJlcyA9IHNvdXJjZS5zYW1wbGUoNTAwMCk7IC8vIDUgc2Vjb25kc1xuICAgKiAgMiAtIHJlcyA9IHNvdXJjZS5zYW1wbGUoNTAwMCwgUnguU2NoZWR1bGVyLnRpbWVvdXQpOyAvLyA1IHNlY29uZHNcbiAgICpcbiAgICogQHBhcmFtIHtNaXhlZH0gaW50ZXJ2YWxPclNhbXBsZXIgSW50ZXJ2YWwgYXQgd2hpY2ggdG8gc2FtcGxlIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpIG9yIFNhbXBsZXIgT2JzZXJ2YWJsZS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIHRoZSBzYW1wbGluZyB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBTYW1wbGVkIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2FtcGxlID0gb2JzZXJ2YWJsZVByb3RvLnRocm90dGxlTGF0ZXN0ID0gZnVuY3Rpb24gKGludGVydmFsT3JTYW1wbGVyLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gdHlwZW9mIGludGVydmFsT3JTYW1wbGVyID09PSAnbnVtYmVyJyA/XG4gICAgICBzYW1wbGVPYnNlcnZhYmxlKHRoaXMsIG9ic2VydmFibGVpbnRlcnZhbChpbnRlcnZhbE9yU2FtcGxlciwgc2NoZWR1bGVyKSkgOlxuICAgICAgc2FtcGxlT2JzZXJ2YWJsZSh0aGlzLCBpbnRlcnZhbE9yU2FtcGxlcik7XG4gIH07XG5cbiAgdmFyIFRpbWVvdXRFcnJvciA9IFJ4LlRpbWVvdXRFcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdUaW1lb3V0IGhhcyBvY2N1cnJlZCc7XG4gICAgdGhpcy5uYW1lID0gJ1RpbWVvdXRFcnJvcic7XG4gICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgfTtcbiAgVGltZW91dEVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcblxuICBmdW5jdGlvbiB0aW1lb3V0V2l0aFNlbGVjdG9yKHNvdXJjZSwgZmlyc3RUaW1lb3V0LCB0aW1lb3V0RHVyYXRpb25TZWxlY3Rvciwgb3RoZXIpIHtcbiAgICBpZiAoaXNGdW5jdGlvbihmaXJzdFRpbWVvdXQpKSB7XG4gICAgICBvdGhlciA9IHRpbWVvdXREdXJhdGlvblNlbGVjdG9yO1xuICAgICAgdGltZW91dER1cmF0aW9uU2VsZWN0b3IgPSBmaXJzdFRpbWVvdXQ7XG4gICAgICBmaXJzdFRpbWVvdXQgPSBvYnNlcnZhYmxlTmV2ZXIoKTtcbiAgICB9XG4gICAgT2JzZXJ2YWJsZS5pc09ic2VydmFibGUob3RoZXIpIHx8IChvdGhlciA9IG9ic2VydmFibGVUaHJvdyhuZXcgVGltZW91dEVycm9yKCkpKTtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuICAgICAgICB0aW1lciA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksXG4gICAgICAgIG9yaWdpbmFsID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cbiAgICAgIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKG9yaWdpbmFsKTtcblxuICAgICAgdmFyIGlkID0gMCwgc3dpdGNoZWQgPSBmYWxzZTtcblxuICAgICAgZnVuY3Rpb24gc2V0VGltZXIodGltZW91dCkge1xuICAgICAgICB2YXIgbXlJZCA9IGlkLCBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gdGltZXJXaW5zKCkge1xuICAgICAgICAgIHN3aXRjaGVkID0gKG15SWQgPT09IGlkKTtcbiAgICAgICAgICByZXR1cm4gc3dpdGNoZWQ7XG4gICAgICAgIH1cblxuICAgICAgICB0aW1lci5zZXREaXNwb3NhYmxlKGQpO1xuICAgICAgICBkLnNldERpc3Bvc2FibGUodGltZW91dC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRpbWVyV2lucygpICYmIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKG90aGVyLnN1YnNjcmliZShvKSk7XG4gICAgICAgICAgZC5kaXNwb3NlKCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgdGltZXJXaW5zKCkgJiYgby5vbkVycm9yKGUpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGltZXJXaW5zKCkgJiYgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUob3RoZXIuc3Vic2NyaWJlKG8pKTtcbiAgICAgICAgfSkpO1xuICAgICAgfTtcblxuICAgICAgc2V0VGltZXIoZmlyc3RUaW1lb3V0KTtcblxuICAgICAgZnVuY3Rpb24gb1dpbnMoKSB7XG4gICAgICAgIHZhciByZXMgPSAhc3dpdGNoZWQ7XG4gICAgICAgIGlmIChyZXMpIHsgaWQrKzsgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfVxuXG4gICAgICBvcmlnaW5hbC5zZXREaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgaWYgKG9XaW5zKCkpIHtcbiAgICAgICAgICBvLm9uTmV4dCh4KTtcbiAgICAgICAgICB2YXIgdGltZW91dCA9IHRyeUNhdGNoKHRpbWVvdXREdXJhdGlvblNlbGVjdG9yKSh4KTtcbiAgICAgICAgICBpZiAodGltZW91dCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcih0aW1lb3V0LmUpOyB9XG4gICAgICAgICAgc2V0VGltZXIoaXNQcm9taXNlKHRpbWVvdXQpID8gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHRpbWVvdXQpIDogdGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIG9XaW5zKCkgJiYgby5vbkVycm9yKGUpO1xuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBvV2lucygpICYmIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb24sIHRpbWVyKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGltZW91dChzb3VyY2UsIGR1ZVRpbWUsIG90aGVyLCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoaXNTY2hlZHVsZXIob3RoZXIpKSB7XG4gICAgICBzY2hlZHVsZXIgPSBvdGhlcjtcbiAgICAgIG90aGVyID0gb2JzZXJ2YWJsZVRocm93KG5ldyBUaW1lb3V0RXJyb3IoKSk7XG4gICAgfVxuICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEVycm9yKSB7IG90aGVyID0gb2JzZXJ2YWJsZVRocm93KG90aGVyKTsgfVxuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIE9ic2VydmFibGUuaXNPYnNlcnZhYmxlKG90aGVyKSB8fCAob3RoZXIgPSBvYnNlcnZhYmxlVGhyb3cobmV3IFRpbWVvdXRFcnJvcigpKSk7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgaWQgPSAwLFxuICAgICAgICBvcmlnaW5hbCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLFxuICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuICAgICAgICBzd2l0Y2hlZCA9IGZhbHNlLFxuICAgICAgICB0aW1lciA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG5cbiAgICAgIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKG9yaWdpbmFsKTtcblxuICAgICAgZnVuY3Rpb24gY3JlYXRlVGltZXIoKSB7XG4gICAgICAgIHZhciBteUlkID0gaWQ7XG4gICAgICAgIHRpbWVyLnNldERpc3Bvc2FibGUoc2NoZWR1bGVyLnNjaGVkdWxlRnV0dXJlKG51bGwsIGR1ZVRpbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzd2l0Y2hlZCA9IGlkID09PSBteUlkO1xuICAgICAgICAgIGlmIChzd2l0Y2hlZCkge1xuICAgICAgICAgICAgaXNQcm9taXNlKG90aGVyKSAmJiAob3RoZXIgPSBvYnNlcnZhYmxlRnJvbVByb21pc2Uob3RoZXIpKTtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKG90aGVyLnN1YnNjcmliZShvKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICB9XG5cbiAgICAgIGNyZWF0ZVRpbWVyKCk7XG5cbiAgICAgIG9yaWdpbmFsLnNldERpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShmdW5jdGlvbiAoeCkge1xuICAgICAgICBpZiAoIXN3aXRjaGVkKSB7XG4gICAgICAgICAgaWQrKztcbiAgICAgICAgICBvLm9uTmV4dCh4KTtcbiAgICAgICAgICBjcmVhdGVUaW1lcigpO1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoIXN3aXRjaGVkKSB7XG4gICAgICAgICAgaWQrKztcbiAgICAgICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFzd2l0Y2hlZCkge1xuICAgICAgICAgIGlkKys7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9uLCB0aW1lcik7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIG9ic2VydmFibGVQcm90by50aW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBmaXJzdEFyZyA9IGFyZ3VtZW50c1swXTtcbiAgICBpZiAoZmlyc3RBcmcgaW5zdGFuY2VvZiBEYXRlIHx8IHR5cGVvZiBmaXJzdEFyZyA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJldHVybiB0aW1lb3V0KHRoaXMsIGZpcnN0QXJnLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG4gICAgfSBlbHNlIGlmIChPYnNlcnZhYmxlLmlzT2JzZXJ2YWJsZShmaXJzdEFyZykgfHwgaXNGdW5jdGlvbihmaXJzdEFyZykpIHtcbiAgICAgIHJldHVybiB0aW1lb3V0V2l0aFNlbGVjdG9yKHRoaXMsIGZpcnN0QXJnLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMnKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIG9ubHkgdGhlIGZpcnN0IGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgZHVyaW5nIHNlcXVlbnRpYWwgdGltZSB3aW5kb3dzIG9mIGEgc3BlY2lmaWVkIGR1cmF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gd2luZG93RHVyYXRpb24gdGltZSB0byB3YWl0IGJlZm9yZSBlbWl0dGluZyBhbm90aGVyIGl0ZW0gYWZ0ZXIgZW1pdHRpbmcgdGhlIGxhc3QgaXRlbVxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gdGhlIFNjaGVkdWxlciB0byB1c2UgaW50ZXJuYWxseSB0byBtYW5hZ2UgdGhlIHRpbWVycyB0aGF0IGhhbmRsZSB0aW1lb3V0IGZvciBlYWNoIGl0ZW0uIElmIG5vdCBwcm92aWRlZCwgZGVmYXVsdHMgdG8gU2NoZWR1bGVyLnRpbWVvdXQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgcGVyZm9ybXMgdGhlIHRocm90dGxlIG9wZXJhdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50aHJvdHRsZSA9IGZ1bmN0aW9uICh3aW5kb3dEdXJhdGlvbiwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgdmFyIGR1cmF0aW9uID0gK3dpbmRvd0R1cmF0aW9uIHx8IDA7XG4gICAgaWYgKGR1cmF0aW9uIDw9IDApIHsgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3dpbmRvd0R1cmF0aW9uIGNhbm5vdCBiZSBsZXNzIG9yIGVxdWFsIHplcm8uJyk7IH1cbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBsYXN0T25OZXh0ID0gMDtcbiAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIHZhciBub3cgPSBzY2hlZHVsZXIubm93KCk7XG4gICAgICAgICAgaWYgKGxhc3RPbk5leHQgPT09IDAgfHwgbm93IC0gbGFzdE9uTmV4dCA+PSBkdXJhdGlvbikge1xuICAgICAgICAgICAgbGFzdE9uTmV4dCA9IG5vdztcbiAgICAgICAgICAgIG8ub25OZXh0KHgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH0sIGZ1bmN0aW9uICgpIHsgby5vbkNvbXBsZXRlZCgpOyB9XG4gICAgICApO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgdmFyIFBhdXNhYmxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUGF1c2FibGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFBhdXNhYmxlT2JzZXJ2YWJsZShzb3VyY2UsIHBhdXNlcikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXcgU3ViamVjdCgpO1xuXG4gICAgICBpZiAocGF1c2VyICYmIHBhdXNlci5zdWJzY3JpYmUpIHtcbiAgICAgICAgdGhpcy5wYXVzZXIgPSB0aGlzLmNvbnRyb2xsZXIubWVyZ2UocGF1c2VyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGF1c2VyID0gdGhpcy5jb250cm9sbGVyO1xuICAgICAgfVxuXG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBQYXVzYWJsZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGNvbm4gPSB0aGlzLnNvdXJjZS5wdWJsaXNoKCksXG4gICAgICAgIHN1YnNjcmlwdGlvbiA9IGNvbm4uc3Vic2NyaWJlKG8pLFxuICAgICAgICBjb25uZWN0aW9uID0gZGlzcG9zYWJsZUVtcHR5O1xuXG4gICAgICB2YXIgcGF1c2FibGUgPSB0aGlzLnBhdXNlci5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpLnN1YnNjcmliZShmdW5jdGlvbiAoYikge1xuICAgICAgICBpZiAoYikge1xuICAgICAgICAgIGNvbm5lY3Rpb24gPSBjb25uLmNvbm5lY3QoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25uZWN0aW9uLmRpc3Bvc2UoKTtcbiAgICAgICAgICBjb25uZWN0aW9uID0gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShbc3Vic2NyaXB0aW9uLCBjb25uZWN0aW9uLCBwYXVzYWJsZV0pO1xuICAgIH07XG5cbiAgICBQYXVzYWJsZU9ic2VydmFibGUucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jb250cm9sbGVyLm9uTmV4dChmYWxzZSk7XG4gICAgfTtcblxuICAgIFBhdXNhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jb250cm9sbGVyLm9uTmV4dCh0cnVlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBhdXNhYmxlT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgICogUGF1c2VzIHRoZSB1bmRlcmx5aW5nIG9ic2VydmFibGUgc2VxdWVuY2UgYmFzZWQgdXBvbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCB5aWVsZHMgdHJ1ZS9mYWxzZS5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHBhdXNlciA9IG5ldyBSeC5TdWJqZWN0KCk7XG4gICAqIHZhciBzb3VyY2UgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMCkucGF1c2FibGUocGF1c2VyKTtcbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBwYXVzZXIgVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdXNlZCB0byBwYXVzZSB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIGlzIHBhdXNlZCBiYXNlZCB1cG9uIHRoZSBwYXVzZXIuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucGF1c2FibGUgPSBmdW5jdGlvbiAocGF1c2VyKSB7XG4gICAgcmV0dXJuIG5ldyBQYXVzYWJsZU9ic2VydmFibGUodGhpcywgcGF1c2VyKTtcbiAgfTtcblxuICBmdW5jdGlvbiBjb21iaW5lTGF0ZXN0U291cmNlKHNvdXJjZSwgc3ViamVjdCwgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBoYXNWYWx1ZSA9IFtmYWxzZSwgZmFsc2VdLFxuICAgICAgICBoYXNWYWx1ZUFsbCA9IGZhbHNlLFxuICAgICAgICBpc0RvbmUgPSBmYWxzZSxcbiAgICAgICAgdmFsdWVzID0gbmV3IEFycmF5KDIpLFxuICAgICAgICBlcnI7XG5cbiAgICAgIGZ1bmN0aW9uIG5leHQoeCwgaSkge1xuICAgICAgICB2YWx1ZXNbaV0gPSB4O1xuICAgICAgICBoYXNWYWx1ZVtpXSA9IHRydWU7XG4gICAgICAgIGlmIChoYXNWYWx1ZUFsbCB8fCAoaGFzVmFsdWVBbGwgPSBoYXNWYWx1ZS5ldmVyeShpZGVudGl0eSkpKSB7XG4gICAgICAgICAgaWYgKGVycikgeyByZXR1cm4gby5vbkVycm9yKGVycik7IH1cbiAgICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2gocmVzdWx0U2VsZWN0b3IpLmFwcGx5KG51bGwsIHZhbHVlcyk7XG4gICAgICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgICAgICBvLm9uTmV4dChyZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlzRG9uZSAmJiB2YWx1ZXNbMV0gJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoXG4gICAgICAgIHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgICAgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIG5leHQoeCwgMCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlc1sxXSkge1xuICAgICAgICAgICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBlcnIgPSBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaXNEb25lID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhbHVlc1sxXSAmJiBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfSksXG4gICAgICAgIHN1YmplY3Quc3Vic2NyaWJlKFxuICAgICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICBuZXh0KHgsIDEpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LFxuICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlzRG9uZSA9IHRydWU7XG4gICAgICAgICAgICBuZXh0KHRydWUsIDEpO1xuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIHZhciBQYXVzYWJsZUJ1ZmZlcmVkT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUoc291cmNlLCBwYXVzZXIpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IFN1YmplY3QoKTtcblxuICAgICAgaWYgKHBhdXNlciAmJiBwYXVzZXIuc3Vic2NyaWJlKSB7XG4gICAgICAgIHRoaXMucGF1c2VyID0gdGhpcy5jb250cm9sbGVyLm1lcmdlKHBhdXNlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBhdXNlciA9IHRoaXMuY29udHJvbGxlcjtcbiAgICAgIH1cblxuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHEgPSBbXSwgcHJldmlvdXNTaG91bGRGaXJlO1xuXG4gICAgICBmdW5jdGlvbiBkcmFpblF1ZXVlKCkgeyB3aGlsZSAocS5sZW5ndGggPiAwKSB7IG8ub25OZXh0KHEuc2hpZnQoKSk7IH0gfVxuXG4gICAgICB2YXIgc3Vic2NyaXB0aW9uID1cbiAgICAgICAgY29tYmluZUxhdGVzdFNvdXJjZShcbiAgICAgICAgICB0aGlzLnNvdXJjZSxcbiAgICAgICAgICB0aGlzLnBhdXNlci5zdGFydFdpdGgoZmFsc2UpLmRpc3RpbmN0VW50aWxDaGFuZ2VkKCksXG4gICAgICAgICAgZnVuY3Rpb24gKGRhdGEsIHNob3VsZEZpcmUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IGRhdGEsIHNob3VsZEZpcmU6IHNob3VsZEZpcmUgfTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5zdWJzY3JpYmUoXG4gICAgICAgICAgICBmdW5jdGlvbiAocmVzdWx0cykge1xuICAgICAgICAgICAgICBpZiAocHJldmlvdXNTaG91bGRGaXJlICE9PSB1bmRlZmluZWQgJiYgcmVzdWx0cy5zaG91bGRGaXJlICE9PSBwcmV2aW91c1Nob3VsZEZpcmUpIHtcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Nob3VsZEZpcmUgPSByZXN1bHRzLnNob3VsZEZpcmU7XG4gICAgICAgICAgICAgICAgLy8gY2hhbmdlIGluIHNob3VsZEZpcmVcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0cy5zaG91bGRGaXJlKSB7IGRyYWluUXVldWUoKTsgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByZXZpb3VzU2hvdWxkRmlyZSA9IHJlc3VsdHMuc2hvdWxkRmlyZTtcbiAgICAgICAgICAgICAgICAvLyBuZXcgZGF0YVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzLnNob3VsZEZpcmUpIHtcbiAgICAgICAgICAgICAgICAgIG8ub25OZXh0KHJlc3VsdHMuZGF0YSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHEucHVzaChyZXN1bHRzLmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgICAgICAgICAgICBvLm9uRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGRyYWluUXVldWUoKTtcbiAgICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICByZXR1cm4gc3Vic2NyaXB0aW9uOyAgICAgIFxuICAgIH07XG5cbiAgICBQYXVzYWJsZUJ1ZmZlcmVkT2JzZXJ2YWJsZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNvbnRyb2xsZXIub25OZXh0KGZhbHNlKTtcbiAgICB9O1xuXG4gICAgUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY29udHJvbGxlci5vbk5leHQodHJ1ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBQYXVzYWJsZUJ1ZmZlcmVkT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgICogUGF1c2VzIHRoZSB1bmRlcmx5aW5nIG9ic2VydmFibGUgc2VxdWVuY2UgYmFzZWQgdXBvbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCB5aWVsZHMgdHJ1ZS9mYWxzZSxcbiAgICogYW5kIHlpZWxkcyB0aGUgdmFsdWVzIHRoYXQgd2VyZSBidWZmZXJlZCB3aGlsZSBwYXVzZWQuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBwYXVzZXIgPSBuZXcgUnguU3ViamVjdCgpO1xuICAgKiB2YXIgc291cmNlID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDApLnBhdXNhYmxlQnVmZmVyZWQocGF1c2VyKTtcbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBwYXVzZXIgVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdXNlZCB0byBwYXVzZSB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIGlzIHBhdXNlZCBiYXNlZCB1cG9uIHRoZSBwYXVzZXIuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucGF1c2FibGVCdWZmZXJlZCA9IGZ1bmN0aW9uIChwYXVzZXIpIHtcbiAgICByZXR1cm4gbmV3IFBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlKHRoaXMsIHBhdXNlcik7XG4gIH07XG5cbiAgdmFyIENvbnRyb2xsZWRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb250cm9sbGVkT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb250cm9sbGVkT2JzZXJ2YWJsZSAoc291cmNlLCBlbmFibGVRdWV1ZSwgc2NoZWR1bGVyKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuc3ViamVjdCA9IG5ldyBDb250cm9sbGVkU3ViamVjdChlbmFibGVRdWV1ZSwgc2NoZWR1bGVyKTtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlLm11bHRpY2FzdCh0aGlzLnN1YmplY3QpLnJlZkNvdW50KCk7XG4gICAgfVxuXG4gICAgQ29udHJvbGxlZE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShvKTtcbiAgICB9O1xuXG4gICAgQ29udHJvbGxlZE9ic2VydmFibGUucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiAobnVtYmVyT2ZJdGVtcykge1xuICAgICAgcmV0dXJuIHRoaXMuc3ViamVjdC5yZXF1ZXN0KG51bWJlck9mSXRlbXMgPT0gbnVsbCA/IC0xIDogbnVtYmVyT2ZJdGVtcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb250cm9sbGVkT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGUpKTtcblxuICB2YXIgQ29udHJvbGxlZFN1YmplY3QgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvbnRyb2xsZWRTdWJqZWN0LCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENvbnRyb2xsZWRTdWJqZWN0KGVuYWJsZVF1ZXVlLCBzY2hlZHVsZXIpIHtcbiAgICAgIGVuYWJsZVF1ZXVlID09IG51bGwgJiYgKGVuYWJsZVF1ZXVlID0gdHJ1ZSk7XG5cbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5zdWJqZWN0ID0gbmV3IFN1YmplY3QoKTtcbiAgICAgIHRoaXMuZW5hYmxlUXVldWUgPSBlbmFibGVRdWV1ZTtcbiAgICAgIHRoaXMucXVldWUgPSBlbmFibGVRdWV1ZSA/IFtdIDogbnVsbDtcbiAgICAgIHRoaXMucmVxdWVzdGVkQ291bnQgPSAwO1xuICAgICAgdGhpcy5yZXF1ZXN0ZWREaXNwb3NhYmxlID0gbnVsbDtcbiAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgdGhpcy5oYXNGYWlsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlciB8fCBjdXJyZW50VGhyZWFkU2NoZWR1bGVyO1xuICAgIH1cblxuICAgIGFkZFByb3BlcnRpZXMoQ29udHJvbGxlZFN1YmplY3QucHJvdG90eXBlLCBPYnNlcnZlciwge1xuICAgICAgX3N1YnNjcmliZTogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ViamVjdC5zdWJzY3JpYmUobyk7XG4gICAgICB9LFxuICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlUXVldWUgfHwgdGhpcy5xdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLnN1YmplY3Qub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB0aGlzLmRpc3Bvc2VDdXJyZW50UmVxdWVzdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucXVldWUucHVzaChOb3RpZmljYXRpb24uY3JlYXRlT25Db21wbGV0ZWQoKSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbkVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5oYXNGYWlsZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVRdWV1ZSB8fCB0aGlzLnF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuc3ViamVjdC5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICB0aGlzLmRpc3Bvc2VDdXJyZW50UmVxdWVzdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucXVldWUucHVzaChOb3RpZmljYXRpb24uY3JlYXRlT25FcnJvcihlcnJvcikpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25OZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMucmVxdWVzdGVkQ291bnQgPD0gMCkge1xuICAgICAgICAgIHRoaXMuZW5hYmxlUXVldWUgJiYgdGhpcy5xdWV1ZS5wdXNoKE5vdGlmaWNhdGlvbi5jcmVhdGVPbk5leHQodmFsdWUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAodGhpcy5yZXF1ZXN0ZWRDb3VudC0tID09PSAwKSAmJiB0aGlzLmRpc3Bvc2VDdXJyZW50UmVxdWVzdCgpO1xuICAgICAgICAgIHRoaXMuc3ViamVjdC5vbk5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgX3Byb2Nlc3NSZXF1ZXN0OiBmdW5jdGlvbiAobnVtYmVyT2ZJdGVtcykge1xuICAgICAgICBpZiAodGhpcy5lbmFibGVRdWV1ZSkge1xuICAgICAgICAgIHdoaWxlICh0aGlzLnF1ZXVlLmxlbmd0aCA+IDAgJiYgKG51bWJlck9mSXRlbXMgPiAwIHx8IHRoaXMucXVldWVbMF0ua2luZCAhPT0gJ04nKSkge1xuICAgICAgICAgICAgdmFyIGZpcnN0ID0gdGhpcy5xdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgZmlyc3QuYWNjZXB0KHRoaXMuc3ViamVjdCk7XG4gICAgICAgICAgICBpZiAoZmlyc3Qua2luZCA9PT0gJ04nKSB7XG4gICAgICAgICAgICAgIG51bWJlck9mSXRlbXMtLTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuZGlzcG9zZUN1cnJlbnRSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVtYmVyT2ZJdGVtcztcbiAgICAgIH0sXG4gICAgICByZXF1ZXN0OiBmdW5jdGlvbiAobnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZGlzcG9zZUN1cnJlbnRSZXF1ZXN0KCk7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB0aGlzLnJlcXVlc3RlZERpc3Bvc2FibGUgPSB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShudW1iZXIsXG4gICAgICAgIGZ1bmN0aW9uKHMsIGkpIHtcbiAgICAgICAgICB2YXIgcmVtYWluaW5nID0gc2VsZi5fcHJvY2Vzc1JlcXVlc3QoaSk7XG4gICAgICAgICAgdmFyIHN0b3BwZWQgPSBzZWxmLmhhc0NvbXBsZXRlZCB8fCBzZWxmLmhhc0ZhaWxlZDtcbiAgICAgICAgICBpZiAoIXN0b3BwZWQgJiYgcmVtYWluaW5nID4gMCkge1xuICAgICAgICAgICAgc2VsZi5yZXF1ZXN0ZWRDb3VudCA9IHJlbWFpbmluZztcblxuICAgICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVDcmVhdGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBzZWxmLnJlcXVlc3RlZENvdW50ID0gMDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAvLyBTY2hlZHVsZWQgaXRlbSBpcyBzdGlsbCBpbiBwcm9ncmVzcy4gUmV0dXJuIGEgbmV3XG4gICAgICAgICAgICAgIC8vIGRpc3Bvc2FibGUgdG8gYWxsb3cgdGhlIHJlcXVlc3QgdG8gYmUgaW50ZXJydXB0ZWRcbiAgICAgICAgICAgICAgLy8gdmlhIGRpc3Bvc2UuXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0ZWREaXNwb3NhYmxlO1xuICAgICAgfSxcbiAgICAgIGRpc3Bvc2VDdXJyZW50UmVxdWVzdDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5yZXF1ZXN0ZWREaXNwb3NhYmxlKSB7XG4gICAgICAgICAgdGhpcy5yZXF1ZXN0ZWREaXNwb3NhYmxlLmRpc3Bvc2UoKTtcbiAgICAgICAgICB0aGlzLnJlcXVlc3RlZERpc3Bvc2FibGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gQ29udHJvbGxlZFN1YmplY3Q7XG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIC8qKlxuICAgKiBBdHRhY2hlcyBhIGNvbnRyb2xsZXIgdG8gdGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgYWJpbGl0eSB0byBxdWV1ZS5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHNvdXJjZSA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwKS5jb250cm9sbGVkKCk7XG4gICAqIHNvdXJjZS5yZXF1ZXN0KDMpOyAvLyBSZWFkcyAzIHZhbHVlc1xuICAgKiBAcGFyYW0ge2Jvb2x9IGVuYWJsZVF1ZXVlIHRydXRoeSB2YWx1ZSB0byBkZXRlcm1pbmUgaWYgdmFsdWVzIHNob3VsZCBiZSBxdWV1ZWQgcGVuZGluZyB0aGUgbmV4dCByZXF1ZXN0XG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBzY2hlZHVsZXIgZGV0ZXJtaW5lcyBob3cgdGhlIHJlcXVlc3RzIHdpbGwgYmUgc2NoZWR1bGVkXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCBvbmx5IHByb3BhZ2F0ZXMgdmFsdWVzIG9uIHJlcXVlc3QuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uY29udHJvbGxlZCA9IGZ1bmN0aW9uIChlbmFibGVRdWV1ZSwgc2NoZWR1bGVyKSB7XG5cbiAgICBpZiAoZW5hYmxlUXVldWUgJiYgaXNTY2hlZHVsZXIoZW5hYmxlUXVldWUpKSB7XG4gICAgICBzY2hlZHVsZXIgPSBlbmFibGVRdWV1ZTtcbiAgICAgIGVuYWJsZVF1ZXVlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoZW5hYmxlUXVldWUgPT0gbnVsbCkgeyAgZW5hYmxlUXVldWUgPSB0cnVlOyB9XG4gICAgcmV0dXJuIG5ldyBDb250cm9sbGVkT2JzZXJ2YWJsZSh0aGlzLCBlbmFibGVRdWV1ZSwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICAvKipcbiAgICogUGlwZXMgdGhlIGV4aXN0aW5nIE9ic2VydmFibGUgc2VxdWVuY2UgaW50byBhIE5vZGUuanMgU3RyZWFtLlxuICAgKiBAcGFyYW0ge1N0cmVhbX0gZGVzdCBUaGUgZGVzdGluYXRpb24gTm9kZS5qcyBzdHJlYW0uXG4gICAqIEByZXR1cm5zIHtTdHJlYW19IFRoZSBkZXN0aW5hdGlvbiBzdHJlYW0uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucGlwZSA9IGZ1bmN0aW9uIChkZXN0KSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMucGF1c2FibGVCdWZmZXJlZCgpO1xuXG4gICAgZnVuY3Rpb24gb25EcmFpbigpIHtcbiAgICAgIHNvdXJjZS5yZXN1bWUoKTtcbiAgICB9XG5cbiAgICBkZXN0LmFkZExpc3RlbmVyKCdkcmFpbicsIG9uRHJhaW4pO1xuXG4gICAgc291cmNlLnN1YnNjcmliZShcbiAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICFkZXN0LndyaXRlKFN0cmluZyh4KSkgJiYgc291cmNlLnBhdXNlKCk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24gKGVycikge1xuICAgICAgICBkZXN0LmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIEhhY2sgY2hlY2sgYmVjYXVzZSBTVERJTyBpcyBub3QgY2xvc2FibGVcbiAgICAgICAgIWRlc3QuX2lzU3RkaW8gJiYgZGVzdC5lbmQoKTtcbiAgICAgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZHJhaW4nLCBvbkRyYWluKTtcbiAgICAgIH0pO1xuXG4gICAgc291cmNlLnJlc3VtZSgpO1xuXG4gICAgcmV0dXJuIGRlc3Q7XG4gIH07XG5cbiAgdmFyIFRyYW5zZHVjZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUcmFuc2R1Y2VPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUcmFuc2R1Y2VPYnNlcnZlcihvLCB4Zm9ybSkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl94Zm9ybSA9IHhmb3JtO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVHJhbnNkdWNlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX3hmb3JtWydAQHRyYW5zZHVjZXIvc3RlcCddKS5jYWxsKHRoaXMuX3hmb3JtLCB0aGlzLl9vLCB4KTtcbiAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHRoaXMuX28ub25FcnJvcihyZXMuZSk7IH1cbiAgICB9O1xuXG4gICAgVHJhbnNkdWNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuXG4gICAgVHJhbnNkdWNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3hmb3JtWydAQHRyYW5zZHVjZXIvcmVzdWx0J10odGhpcy5fbyk7XG4gICAgfTtcblxuICAgIHJldHVybiBUcmFuc2R1Y2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgZnVuY3Rpb24gdHJhbnNmb3JtRm9yT2JzZXJ2ZXIobykge1xuICAgIHJldHVybiB7XG4gICAgICAnQEB0cmFuc2R1Y2VyL2luaXQnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG87XG4gICAgICB9LFxuICAgICAgJ0BAdHJhbnNkdWNlci9zdGVwJzogZnVuY3Rpb24ob2JzLCBpbnB1dCkge1xuICAgICAgICByZXR1cm4gb2JzLm9uTmV4dChpbnB1dCk7XG4gICAgICB9LFxuICAgICAgJ0BAdHJhbnNkdWNlci9yZXN1bHQnOiBmdW5jdGlvbihvYnMpIHtcbiAgICAgICAgcmV0dXJuIG9icy5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZXMgYSB0cmFuc2R1Y2VyIHRvIHRyYW5zZm9ybSB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZVxuICAgKiBAcGFyYW0ge1RyYW5zZHVjZXJ9IHRyYW5zZHVjZXIgQSB0cmFuc2R1Y2VyIHRvIGV4ZWN1dGVcbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgcmVzdWx0cyBmcm9tIHRoZSB0cmFuc2R1Y2VyLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRyYW5zZHVjZSA9IGZ1bmN0aW9uKHRyYW5zZHVjZXIpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24obykge1xuICAgICAgdmFyIHhmb3JtID0gdHJhbnNkdWNlcih0cmFuc2Zvcm1Gb3JPYnNlcnZlcihvKSk7XG4gICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgVHJhbnNkdWNlT2JzZXJ2ZXIobywgeGZvcm0pKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9O1xuXG4gIHZhciBBbm9ueW1vdXNPYnNlcnZhYmxlID0gUnguQW5vbnltb3VzT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQW5vbnltb3VzT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIC8vIEZpeCBzdWJzY3JpYmVyIHRvIGNoZWNrIGZvciB1bmRlZmluZWQgb3IgZnVuY3Rpb24gcmV0dXJuZWQgdG8gZGVjb3JhdGUgYXMgRGlzcG9zYWJsZVxuICAgIGZ1bmN0aW9uIGZpeFN1YnNjcmliZXIoc3Vic2NyaWJlcikge1xuICAgICAgcmV0dXJuIHN1YnNjcmliZXIgJiYgaXNGdW5jdGlvbihzdWJzY3JpYmVyLmRpc3Bvc2UpID8gc3Vic2NyaWJlciA6XG4gICAgICAgIGlzRnVuY3Rpb24oc3Vic2NyaWJlcikgPyBkaXNwb3NhYmxlQ3JlYXRlKHN1YnNjcmliZXIpIDogZGlzcG9zYWJsZUVtcHR5O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldERpc3Bvc2FibGUocywgc3RhdGUpIHtcbiAgICAgIHZhciBhZG8gPSBzdGF0ZVswXSwgc2VsZiA9IHN0YXRlWzFdO1xuICAgICAgdmFyIHN1YiA9IHRyeUNhdGNoKHNlbGYuX19zdWJzY3JpYmUpLmNhbGwoc2VsZiwgYWRvKTtcbiAgICAgIGlmIChzdWIgPT09IGVycm9yT2JqICYmICFhZG8uZmFpbChlcnJvck9iai5lKSkgeyB0aHJvd2VyKGVycm9yT2JqLmUpOyB9XG4gICAgICBhZG8uc2V0RGlzcG9zYWJsZShmaXhTdWJzY3JpYmVyKHN1YikpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIEFub255bW91c09ic2VydmFibGUoc3Vic2NyaWJlLCBwYXJlbnQpIHtcbiAgICAgIHRoaXMuc291cmNlID0gcGFyZW50O1xuICAgICAgdGhpcy5fX3N1YnNjcmliZSA9IHN1YnNjcmliZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEFub255bW91c09ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGFkbyA9IG5ldyBBdXRvRGV0YWNoT2JzZXJ2ZXIobyksIHN0YXRlID0gW2FkbywgdGhpc107XG5cbiAgICAgIGlmIChjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlUmVxdWlyZWQoKSkge1xuICAgICAgICBjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlLCBzZXREaXNwb3NhYmxlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldERpc3Bvc2FibGUobnVsbCwgc3RhdGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFkbztcbiAgICB9O1xuXG4gICAgcmV0dXJuIEFub255bW91c09ic2VydmFibGU7XG5cbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgdmFyIEF1dG9EZXRhY2hPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQXV0b0RldGFjaE9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gQXV0b0RldGFjaE9ic2VydmVyKG9ic2VydmVyKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICAgIHRoaXMubSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgIH1cblxuICAgIHZhciBBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUgPSBBdXRvRGV0YWNoT2JzZXJ2ZXIucHJvdG90eXBlO1xuXG4gICAgQXV0b0RldGFjaE9ic2VydmVyUHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLm9ic2VydmVyLm9uTmV4dCkuY2FsbCh0aGlzLm9ic2VydmVyLCB2YWx1ZSk7XG4gICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikge1xuICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhyb3dlcihyZXN1bHQuZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEF1dG9EZXRhY2hPYnNlcnZlclByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLm9ic2VydmVyLm9uRXJyb3IpLmNhbGwodGhpcy5vYnNlcnZlciwgZXJyKTtcbiAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgcmVzdWx0ID09PSBlcnJvck9iaiAmJiB0aHJvd2VyKHJlc3VsdC5lKTtcbiAgICB9O1xuXG4gICAgQXV0b0RldGFjaE9ic2VydmVyUHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLm9ic2VydmVyLm9uQ29tcGxldGVkKS5jYWxsKHRoaXMub2JzZXJ2ZXIpO1xuICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICByZXN1bHQgPT09IGVycm9yT2JqICYmIHRocm93ZXIocmVzdWx0LmUpO1xuICAgIH07XG5cbiAgICBBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUuc2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICh2YWx1ZSkgeyB0aGlzLm0uc2V0RGlzcG9zYWJsZSh2YWx1ZSk7IH07XG4gICAgQXV0b0RldGFjaE9ic2VydmVyUHJvdG90eXBlLmdldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLm0uZ2V0RGlzcG9zYWJsZSgpOyB9O1xuXG4gICAgQXV0b0RldGFjaE9ic2VydmVyUHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfX3N1cGVyX18ucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMubS5kaXNwb3NlKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBBdXRvRGV0YWNoT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIHZhciBJbm5lclN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIChzLCBvKSB7XG4gICAgdGhpcy5fcyA9IHM7XG4gICAgdGhpcy5fbyA9IG87XG4gIH07XG5cbiAgSW5uZXJTdWJzY3JpcHRpb24ucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLl9zLmlzRGlzcG9zZWQgJiYgdGhpcy5fbyAhPT0gbnVsbCkge1xuICAgICAgdmFyIGlkeCA9IHRoaXMuX3Mub2JzZXJ2ZXJzLmluZGV4T2YodGhpcy5fbyk7XG4gICAgICB0aGlzLl9zLm9ic2VydmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgIHRoaXMuX28gPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogIFJlcHJlc2VudHMgYW4gb2JqZWN0IHRoYXQgaXMgYm90aCBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFzIHdlbGwgYXMgYW4gb2JzZXJ2ZXIuXG4gICAqICBFYWNoIG5vdGlmaWNhdGlvbiBpcyBicm9hZGNhc3RlZCB0byBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMuXG4gICAqL1xuICB2YXIgU3ViamVjdCA9IFJ4LlN1YmplY3QgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFN1YmplY3QsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU3ViamVjdCgpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBhZGRQcm9wZXJ0aWVzKFN1YmplY3QucHJvdG90eXBlLCBPYnNlcnZlci5wcm90b3R5cGUsIHtcbiAgICAgIF9zdWJzY3JpYmU6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG8pO1xuICAgICAgICAgIHJldHVybiBuZXcgSW5uZXJTdWJzY3JpcHRpb24odGhpcywgbyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcbiAgICAgICAgICBvLm9uRXJyb3IodGhpcy5lcnJvcik7XG4gICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgICAgfVxuICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG4gICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuICAgICAgICovXG4gICAgICBoYXNPYnNlcnZlcnM6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA+IDA7IH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgZW5kIG9mIHRoZSBzZXF1ZW5jZS5cbiAgICAgICAqL1xuICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIG9zW2ldLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBleGNlcHRpb24uXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSBlcnJvciBUaGUgZXhjZXB0aW9uIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgb3NbaV0ub25FcnJvcihlcnJvcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBhcnJpdmFsIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBpbiB0aGUgc2VxdWVuY2UuXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VuZCB0byBhbGwgb2JzZXJ2ZXJzLlxuICAgICAgICovXG4gICAgICBvbk5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBvc1tpXS5vbk5leHQodmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogVW5zdWJzY3JpYmUgYWxsIG9ic2VydmVycyBhbmQgcmVsZWFzZSByZXNvdXJjZXMuXG4gICAgICAgKi9cbiAgICAgIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHN1YmplY3QgZnJvbSB0aGUgc3BlY2lmaWVkIG9ic2VydmVyIGFuZCBvYnNlcnZhYmxlLlxuICAgICAqIEBwYXJhbSB7T2JzZXJ2ZXJ9IG9ic2VydmVyIFRoZSBvYnNlcnZlciB1c2VkIHRvIHNlbmQgbWVzc2FnZXMgdG8gdGhlIHN1YmplY3QuXG4gICAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBvYnNlcnZhYmxlIFRoZSBvYnNlcnZhYmxlIHVzZWQgdG8gc3Vic2NyaWJlIHRvIG1lc3NhZ2VzIHNlbnQgZnJvbSB0aGUgc3ViamVjdC5cbiAgICAgKiBAcmV0dXJucyB7U3ViamVjdH0gU3ViamVjdCBpbXBsZW1lbnRlZCB1c2luZyB0aGUgZ2l2ZW4gb2JzZXJ2ZXIgYW5kIG9ic2VydmFibGUuXG4gICAgICovXG4gICAgU3ViamVjdC5jcmVhdGUgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIG9ic2VydmFibGUpIHtcbiAgICAgIHJldHVybiBuZXcgQW5vbnltb3VzU3ViamVjdChvYnNlcnZlciwgb2JzZXJ2YWJsZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBTdWJqZWN0O1xuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgICogIFJlcHJlc2VudHMgdGhlIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLlxuICAgKiAgVGhlIGxhc3QgdmFsdWUgYmVmb3JlIHRoZSBPbkNvbXBsZXRlZCBub3RpZmljYXRpb24sIG9yIHRoZSBlcnJvciByZWNlaXZlZCB0aHJvdWdoIE9uRXJyb3IsIGlzIHNlbnQgdG8gYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzLlxuICAgKi9cbiAgdmFyIEFzeW5jU3ViamVjdCA9IFJ4LkFzeW5jU3ViamVjdCA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQXN5bmNTdWJqZWN0LCBfX3N1cGVyX18pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHN1YmplY3QgdGhhdCBjYW4gb25seSByZWNlaXZlIG9uZSB2YWx1ZSBhbmQgdGhhdCB2YWx1ZSBpcyBjYWNoZWQgZm9yIGFsbCBmdXR1cmUgb2JzZXJ2YXRpb25zLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEFzeW5jU3ViamVjdCgpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBhZGRQcm9wZXJ0aWVzKEFzeW5jU3ViamVjdC5wcm90b3R5cGUsIE9ic2VydmVyLnByb3RvdHlwZSwge1xuICAgICAgX3N1YnNjcmliZTogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcblxuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvKTtcbiAgICAgICAgICByZXR1cm4gbmV3IElubmVyU3Vic2NyaXB0aW9uKHRoaXMsIG8pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcbiAgICAgICAgICBvLm9uRXJyb3IodGhpcy5lcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNWYWx1ZSkge1xuICAgICAgICAgIG8ub25OZXh0KHRoaXMudmFsdWUpO1xuICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuICAgICAgICogQHJldHVybnMge0Jvb2xlYW59IEluZGljYXRlcyB3aGV0aGVyIHRoZSBzdWJqZWN0IGhhcyBvYnNlcnZlcnMgc3Vic2NyaWJlZCB0byBpdC5cbiAgICAgICAqL1xuICAgICAgaGFzT2JzZXJ2ZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzLm9ic2VydmVycy5sZW5ndGggPiAwO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLCBhbHNvIGNhdXNpbmcgdGhlIGxhc3QgcmVjZWl2ZWQgdmFsdWUgdG8gYmUgc2VudCBvdXQgKGlmIGFueSkuXG4gICAgICAgKi9cbiAgICAgIG9uQ29tcGxldGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpLCBsZW47XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgdmFyIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDtcblxuICAgICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgdmFyIG8gPSBvc1tpXTtcbiAgICAgICAgICAgICAgby5vbk5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgIG9zW2ldLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBlcnJvci5cbiAgICAgICAqIEBwYXJhbSB7TWl4ZWR9IGVycm9yIFRoZSBFcnJvciB0byBzZW5kIHRvIGFsbCBvYnNlcnZlcnMuXG4gICAgICAgKi9cbiAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcblxuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgb3NbaV0ub25FcnJvcihlcnJvcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogU2VuZHMgYSB2YWx1ZSB0byB0aGUgc3ViamVjdC4gVGhlIGxhc3QgdmFsdWUgcmVjZWl2ZWQgYmVmb3JlIHN1Y2Nlc3NmdWwgdGVybWluYXRpb24gd2lsbCBiZSBzZW50IHRvIGFsbCBzdWJzY3JpYmVkIGFuZCBmdXR1cmUgb2JzZXJ2ZXJzLlxuICAgICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgVGhlIHZhbHVlIHRvIHN0b3JlIGluIHRoZSBzdWJqZWN0LlxuICAgICAgICovXG4gICAgICBvbk5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBVbnN1YnNjcmliZSBhbGwgb2JzZXJ2ZXJzIGFuZCByZWxlYXNlIHJlc291cmNlcy5cbiAgICAgICAqL1xuICAgICAgZGlzcG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9ic2VydmVycyA9IG51bGw7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBBc3luY1N1YmplY3Q7XG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIHZhciBBbm9ueW1vdXNTdWJqZWN0ID0gUnguQW5vbnltb3VzU3ViamVjdCA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQW5vbnltb3VzU3ViamVjdCwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBBbm9ueW1vdXNTdWJqZWN0KG9ic2VydmVyLCBvYnNlcnZhYmxlKSB7XG4gICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgICB0aGlzLm9ic2VydmFibGUgPSBvYnNlcnZhYmxlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgYWRkUHJvcGVydGllcyhBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZSwgT2JzZXJ2ZXIucHJvdG90eXBlLCB7XG4gICAgICBfc3Vic2NyaWJlOiBmdW5jdGlvbiAobykge1xuICAgICAgICByZXR1cm4gdGhpcy5vYnNlcnZhYmxlLnN1YnNjcmliZShvKTtcbiAgICAgIH0sXG4gICAgICBvbkNvbXBsZXRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICB9LFxuICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25FcnJvcihlcnJvcik7XG4gICAgICB9LFxuICAgICAgb25OZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vbk5leHQodmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIEFub255bW91c1N1YmplY3Q7XG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIC8qKlxuICAgKiAgUmVwcmVzZW50cyBhIHZhbHVlIHRoYXQgY2hhbmdlcyBvdmVyIHRpbWUuXG4gICAqICBPYnNlcnZlcnMgY2FuIHN1YnNjcmliZSB0byB0aGUgc3ViamVjdCB0byByZWNlaXZlIHRoZSBsYXN0IChvciBpbml0aWFsKSB2YWx1ZSBhbmQgYWxsIHN1YnNlcXVlbnQgbm90aWZpY2F0aW9ucy5cbiAgICovXG4gIHZhciBCZWhhdmlvclN1YmplY3QgPSBSeC5CZWhhdmlvclN1YmplY3QgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEJlaGF2aW9yU3ViamVjdCwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBCZWhhdmlvclN1YmplY3QodmFsdWUpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBhZGRQcm9wZXJ0aWVzKEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUsIE9ic2VydmVyLnByb3RvdHlwZSwge1xuICAgICAgX3N1YnNjcmliZTogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gobyk7XG4gICAgICAgICAgby5vbk5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBJbm5lclN1YnNjcmlwdGlvbih0aGlzLCBvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYXNFcnJvcikge1xuICAgICAgICAgIG8ub25FcnJvcih0aGlzLmVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIEdldHMgdGhlIGN1cnJlbnQgdmFsdWUgb3IgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgICAgICAqIFZhbHVlIGlzIGZyb3plbiBhZnRlciBvbkNvbXBsZXRlZCBpcyBjYWxsZWQuXG4gICAgICAgKiBBZnRlciBvbkVycm9yIGlzIGNhbGxlZCBhbHdheXMgdGhyb3dzIHRoZSBzcGVjaWZpZWQgZXhjZXB0aW9uLlxuICAgICAgICogQW4gZXhjZXB0aW9uIGlzIGFsd2F5cyB0aHJvd24gYWZ0ZXIgZGlzcG9zZSBpcyBjYWxsZWQuXG4gICAgICAgKiBAcmV0dXJucyB7TWl4ZWR9IFRoZSBpbml0aWFsIHZhbHVlIHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3IgdW50aWwgb25OZXh0IGlzIGNhbGxlZDsgYWZ0ZXIgd2hpY2gsIHRoZSBsYXN0IHZhbHVlIHBhc3NlZCB0byBvbk5leHQuXG4gICAgICAgKi9cbiAgICAgIGdldFZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7IHRocm93ZXIodGhpcy5lcnJvcik7IH1cbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG4gICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuICAgICAgICovXG4gICAgICBoYXNPYnNlcnZlcnM6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA+IDA7IH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgZW5kIG9mIHRoZSBzZXF1ZW5jZS5cbiAgICAgICAqL1xuICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7IHJldHVybjsgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIG9zW2ldLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBleGNlcHRpb24uXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSBlcnJvciBUaGUgZXhjZXB0aW9uIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkgeyByZXR1cm47IH1cbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIG9zW2ldLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgYXJyaXZhbCBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuICAgICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25OZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7IHJldHVybjsgfVxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIG9zW2ldLm9uTmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFVuc3Vic2NyaWJlIGFsbCBvYnNlcnZlcnMgYW5kIHJlbGVhc2UgcmVzb3VyY2VzLlxuICAgICAgICovXG4gICAgICBkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbnVsbDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIEJlaGF2aW9yU3ViamVjdDtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgYW4gb2JqZWN0IHRoYXQgaXMgYm90aCBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFzIHdlbGwgYXMgYW4gb2JzZXJ2ZXIuXG4gICAqIEVhY2ggbm90aWZpY2F0aW9uIGlzIGJyb2FkY2FzdGVkIHRvIGFsbCBzdWJzY3JpYmVkIGFuZCBmdXR1cmUgb2JzZXJ2ZXJzLCBzdWJqZWN0IHRvIGJ1ZmZlciB0cmltbWluZyBwb2xpY2llcy5cbiAgICovXG4gIHZhciBSZXBsYXlTdWJqZWN0ID0gUnguUmVwbGF5U3ViamVjdCA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cbiAgICB2YXIgbWF4U2FmZUludGVnZXIgPSBNYXRoLnBvdygyLCA1MykgLSAxO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlUmVtb3ZhYmxlRGlzcG9zYWJsZShzdWJqZWN0LCBvYnNlcnZlcikge1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVDcmVhdGUoZnVuY3Rpb24gKCkge1xuICAgICAgICBvYnNlcnZlci5kaXNwb3NlKCk7XG4gICAgICAgICFzdWJqZWN0LmlzRGlzcG9zZWQgJiYgc3ViamVjdC5vYnNlcnZlcnMuc3BsaWNlKHN1YmplY3Qub2JzZXJ2ZXJzLmluZGV4T2Yob2JzZXJ2ZXIpLCAxKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGluaGVyaXRzKFJlcGxheVN1YmplY3QsIF9fc3VwZXJfXyk7XG5cbiAgICAvKipcbiAgICAgKiAgSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFJlcGxheVN1YmplY3QgY2xhc3Mgd2l0aCB0aGUgc3BlY2lmaWVkIGJ1ZmZlciBzaXplLCB3aW5kb3cgc2l6ZSBhbmQgc2NoZWR1bGVyLlxuICAgICAqICBAcGFyYW0ge051bWJlcn0gW2J1ZmZlclNpemVdIE1heGltdW0gZWxlbWVudCBjb3VudCBvZiB0aGUgcmVwbGF5IGJ1ZmZlci5cbiAgICAgKiAgQHBhcmFtIHtOdW1iZXJ9IFt3aW5kb3dTaXplXSBNYXhpbXVtIHRpbWUgbGVuZ3RoIG9mIHRoZSByZXBsYXkgYnVmZmVyLlxuICAgICAqICBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRoZSBvYnNlcnZlcnMgYXJlIGludm9rZWQgb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gUmVwbGF5U3ViamVjdChidWZmZXJTaXplLCB3aW5kb3dTaXplLCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IGJ1ZmZlclNpemUgPT0gbnVsbCA/IG1heFNhZmVJbnRlZ2VyIDogYnVmZmVyU2l6ZTtcbiAgICAgIHRoaXMud2luZG93U2l6ZSA9IHdpbmRvd1NpemUgPT0gbnVsbCA/IG1heFNhZmVJbnRlZ2VyIDogd2luZG93U2l6ZTtcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyIHx8IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXI7XG4gICAgICB0aGlzLnEgPSBbXTtcbiAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgICB0aGlzLmVycm9yID0gbnVsbDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGFkZFByb3BlcnRpZXMoUmVwbGF5U3ViamVjdC5wcm90b3R5cGUsIE9ic2VydmVyLnByb3RvdHlwZSwge1xuICAgICAgX3N1YnNjcmliZTogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgdmFyIHNvID0gbmV3IFNjaGVkdWxlZE9ic2VydmVyKHRoaXMuc2NoZWR1bGVyLCBvKSwgc3Vic2NyaXB0aW9uID0gY3JlYXRlUmVtb3ZhYmxlRGlzcG9zYWJsZSh0aGlzLCBzbyk7XG5cbiAgICAgICAgdGhpcy5fdHJpbSh0aGlzLnNjaGVkdWxlci5ub3coKSk7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2goc28pO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBzby5vbk5leHQodGhpcy5xW2ldLnZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICAgc28ub25FcnJvcih0aGlzLmVycm9yKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgIHNvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cblxuICAgICAgICBzby5lbnN1cmVBY3RpdmUoKTtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBzdWJqZWN0IGhhcyBvYnNlcnZlcnMgc3Vic2NyaWJlZCB0byBpdC5cbiAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufSBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG4gICAgICAgKi9cbiAgICAgIGhhc09ic2VydmVyczogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vYnNlcnZlcnMubGVuZ3RoID4gMDtcbiAgICAgIH0sXG4gICAgICBfdHJpbTogZnVuY3Rpb24gKG5vdykge1xuICAgICAgICB3aGlsZSAodGhpcy5xLmxlbmd0aCA+IHRoaXMuYnVmZmVyU2l6ZSkge1xuICAgICAgICAgIHRoaXMucS5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlICh0aGlzLnEubGVuZ3RoID4gMCAmJiAobm93IC0gdGhpcy5xWzBdLmludGVydmFsKSA+IHRoaXMud2luZG93U2l6ZSkge1xuICAgICAgICAgIHRoaXMucS5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMgYWJvdXQgdGhlIGFycml2YWwgb2YgdGhlIHNwZWNpZmllZCBlbGVtZW50IGluIHRoZSBzZXF1ZW5jZS5cbiAgICAgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZW5kIHRvIGFsbCBvYnNlcnZlcnMuXG4gICAgICAgKi9cbiAgICAgIG9uTmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkgeyByZXR1cm47IH1cbiAgICAgICAgdmFyIG5vdyA9IHRoaXMuc2NoZWR1bGVyLm5vdygpO1xuICAgICAgICB0aGlzLnEucHVzaCh7IGludGVydmFsOiBub3csIHZhbHVlOiB2YWx1ZSB9KTtcbiAgICAgICAgdGhpcy5fdHJpbShub3cpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIHZhciBvYnNlcnZlciA9IG9zW2ldO1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dCh2YWx1ZSk7XG4gICAgICAgICAgb2JzZXJ2ZXIuZW5zdXJlQWN0aXZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgZXhjZXB0aW9uLlxuICAgICAgICogQHBhcmFtIHtNaXhlZH0gZXJyb3IgVGhlIGV4Y2VwdGlvbiB0byBzZW5kIHRvIGFsbCBvYnNlcnZlcnMuXG4gICAgICAgKi9cbiAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgdmFyIG5vdyA9IHRoaXMuc2NoZWR1bGVyLm5vdygpO1xuICAgICAgICB0aGlzLl90cmltKG5vdyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIHZhciBvYnNlcnZlciA9IG9zW2ldO1xuICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgIG9ic2VydmVyLmVuc3VyZUFjdGl2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMgYWJvdXQgdGhlIGVuZCBvZiB0aGUgc2VxdWVuY2UuXG4gICAgICAgKi9cbiAgICAgIG9uQ29tcGxldGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkgeyByZXR1cm47IH1cbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB2YXIgbm93ID0gdGhpcy5zY2hlZHVsZXIubm93KCk7XG4gICAgICAgIHRoaXMuX3RyaW0obm93KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgdmFyIG9ic2VydmVyID0gb3NbaV07XG4gICAgICAgICAgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICBvYnNlcnZlci5lbnN1cmVBY3RpdmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogVW5zdWJzY3JpYmUgYWxsIG9ic2VydmVycyBhbmQgcmVsZWFzZSByZXNvdXJjZXMuXG4gICAgICAgKi9cbiAgICAgIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIFJlcGxheVN1YmplY3Q7XG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIC8qKlxuICAqIFVzZWQgdG8gcGF1c2UgYW5kIHJlc3VtZSBzdHJlYW1zLlxuICAqL1xuICBSeC5QYXVzZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFBhdXNlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBQYXVzZXIoKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXVzZXMgdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UuXG4gICAgICovXG4gICAgUGF1c2VyLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uICgpIHsgdGhpcy5vbk5leHQoZmFsc2UpOyB9O1xuXG4gICAgLyoqXG4gICAgKiBSZXN1bWVzIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlLlxuICAgICovXG4gICAgUGF1c2VyLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7IHRoaXMub25OZXh0KHRydWUpOyB9O1xuXG4gICAgcmV0dXJuIFBhdXNlcjtcbiAgfShTdWJqZWN0KSk7XG5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgcm9vdC5SeCA9IFJ4O1xuXG4gICAgZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFJ4O1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUpIHtcbiAgICAvLyBpbiBOb2RlLmpzIG9yIFJpbmdvSlNcbiAgICBpZiAobW9kdWxlRXhwb3J0cykge1xuICAgICAgKGZyZWVNb2R1bGUuZXhwb3J0cyA9IFJ4KS5SeCA9IFJ4O1xuICAgIH0gZWxzZSB7XG4gICAgICBmcmVlRXhwb3J0cy5SeCA9IFJ4O1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBpbiBhIGJyb3dzZXIgb3IgUmhpbm9cbiAgICByb290LlJ4ID0gUng7XG4gIH1cblxuICAvLyBBbGwgY29kZSBiZWZvcmUgdGhpcyBwb2ludCB3aWxsIGJlIGZpbHRlcmVkIGZyb20gc3RhY2sgdHJhY2VzLlxuICB2YXIgckVuZGluZ0xpbmUgPSBjYXB0dXJlTGluZSgpO1xuXG59LmNhbGwodGhpcykpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcngtbGl0ZS9yeC5saXRlLmpzXG4gKiogbW9kdWxlIGlkID0gMzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qXHJcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcclxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXHJcbiovXHJcbnZhciBzdHlsZXNJbkRvbSA9IHt9LFxyXG5cdG1lbW9pemUgPSBmdW5jdGlvbihmbikge1xyXG5cdFx0dmFyIG1lbW87XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cdFx0XHRyZXR1cm4gbWVtbztcclxuXHRcdH07XHJcblx0fSxcclxuXHRpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAvbXNpZSBbNi05XVxcYi8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTtcclxuXHR9KSxcclxuXHRnZXRIZWFkRWxlbWVudCA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xyXG5cdFx0cmV0dXJuIGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xyXG5cdH0pLFxyXG5cdHNpbmdsZXRvbkVsZW1lbnQgPSBudWxsLFxyXG5cdHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XHJcblx0aWYodHlwZW9mIERFQlVHICE9PSBcInVuZGVmaW5lZFwiICYmIERFQlVHKSB7XHJcblx0XHRpZih0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcclxuXHR9XHJcblxyXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxyXG5cdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcclxuXHRpZiAodHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcclxuXHJcblx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0KTtcclxuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xyXG5cclxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcclxuXHRcdHZhciBtYXlSZW1vdmUgPSBbXTtcclxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XHJcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xyXG5cdFx0XHRkb21TdHlsZS5yZWZzLS07XHJcblx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcclxuXHRcdH1cclxuXHRcdGlmKG5ld0xpc3QpIHtcclxuXHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0KTtcclxuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcclxuXHRcdH1cclxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xyXG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XHJcblx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKVxyXG5cdFx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oKTtcclxuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKSB7XHJcblx0Zm9yKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XHJcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcclxuXHRcdGlmKGRvbVN0eWxlKSB7XHJcblx0XHRcdGRvbVN0eWxlLnJlZnMrKztcclxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XHJcblx0XHRcdH1cclxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dmFyIHBhcnRzID0gW107XHJcblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMobGlzdCkge1xyXG5cdHZhciBzdHlsZXMgPSBbXTtcclxuXHR2YXIgbmV3U3R5bGVzID0ge307XHJcblx0Zm9yKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcclxuXHRcdHZhciBpZCA9IGl0ZW1bMF07XHJcblx0XHR2YXIgY3NzID0gaXRlbVsxXTtcclxuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XHJcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcclxuXHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcclxuXHRcdGlmKCFuZXdTdHlsZXNbaWRdKVxyXG5cdFx0XHRzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge2lkOiBpZCwgcGFydHM6IFtwYXJ0XX0pO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHRuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XHJcblx0fVxyXG5cdHJldHVybiBzdHlsZXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudCgpIHtcclxuXHR2YXIgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG5cdHZhciBoZWFkID0gZ2V0SGVhZEVsZW1lbnQoKTtcclxuXHRzdHlsZUVsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuXHRoZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XHJcblx0cmV0dXJuIHN0eWxlRWxlbWVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlTGlua0VsZW1lbnQoKSB7XHJcblx0dmFyIGxpbmtFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcblx0dmFyIGhlYWQgPSBnZXRIZWFkRWxlbWVudCgpO1xyXG5cdGxpbmtFbGVtZW50LnJlbCA9IFwic3R5bGVzaGVldFwiO1xyXG5cdGhlYWQuYXBwZW5kQ2hpbGQobGlua0VsZW1lbnQpO1xyXG5cdHJldHVybiBsaW5rRWxlbWVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XHJcblx0dmFyIHN0eWxlRWxlbWVudCwgdXBkYXRlLCByZW1vdmU7XHJcblxyXG5cdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xyXG5cdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XHJcblx0XHRzdHlsZUVsZW1lbnQgPSBzaW5nbGV0b25FbGVtZW50IHx8IChzaW5nbGV0b25FbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KCkpO1xyXG5cdFx0dXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCwgc3R5bGVJbmRleCwgZmFsc2UpO1xyXG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCwgc3R5bGVJbmRleCwgdHJ1ZSk7XHJcblx0fSBlbHNlIGlmKG9iai5zb3VyY2VNYXAgJiZcclxuXHRcdHR5cGVvZiBVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxyXG5cdFx0dHlwZW9mIFVSTC5jcmVhdGVPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxyXG5cdFx0dHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxyXG5cdFx0dHlwZW9mIEJsb2IgPT09IFwiZnVuY3Rpb25cIiAmJlxyXG5cdFx0dHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIikge1xyXG5cdFx0c3R5bGVFbGVtZW50ID0gY3JlYXRlTGlua0VsZW1lbnQoKTtcclxuXHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xyXG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudCk7XHJcblx0XHRcdGlmKHN0eWxlRWxlbWVudC5ocmVmKVxyXG5cdFx0XHRcdFVSTC5yZXZva2VPYmplY3RVUkwoc3R5bGVFbGVtZW50LmhyZWYpO1xyXG5cdFx0fTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0c3R5bGVFbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KCk7XHJcblx0XHR1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50KTtcclxuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdHVwZGF0ZShvYmopO1xyXG5cclxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XHJcblx0XHRpZihuZXdPYmopIHtcclxuXHRcdFx0aWYobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKVxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZW1vdmUoKTtcclxuXHRcdH1cclxuXHR9O1xyXG59XHJcblxyXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xyXG5cdHZhciB0ZXh0U3RvcmUgPSBbXTtcclxuXHJcblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcclxuXHRcdHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcclxuXHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xyXG5cdH07XHJcbn0pKCk7XHJcblxyXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlRWxlbWVudCwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XHJcblx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xyXG5cclxuXHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcclxuXHRcdHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xyXG5cdFx0dmFyIGNoaWxkTm9kZXMgPSBzdHlsZUVsZW1lbnQuY2hpbGROb2RlcztcclxuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcclxuXHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChjc3NOb2RlKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGVFbGVtZW50LCBvYmopIHtcclxuXHR2YXIgY3NzID0gb2JqLmNzcztcclxuXHR2YXIgbWVkaWEgPSBvYmoubWVkaWE7XHJcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XHJcblxyXG5cdGlmKG1lZGlhKSB7XHJcblx0XHRzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXHJcblx0fVxyXG5cclxuXHRpZihzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xyXG5cdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcclxuXHR9IGVsc2Uge1xyXG5cdFx0d2hpbGUoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcclxuXHRcdFx0c3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcclxuXHRcdH1cclxuXHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZUxpbmsobGlua0VsZW1lbnQsIG9iaikge1xyXG5cdHZhciBjc3MgPSBvYmouY3NzO1xyXG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcclxuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcclxuXHJcblx0aWYoc291cmNlTWFwKSB7XHJcblx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxyXG5cdFx0Y3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIiArIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSkgKyBcIiAqL1wiO1xyXG5cdH1cclxuXHJcblx0dmFyIGJsb2IgPSBuZXcgQmxvYihbY3NzXSwgeyB0eXBlOiBcInRleHQvY3NzXCIgfSk7XHJcblxyXG5cdHZhciBvbGRTcmMgPSBsaW5rRWxlbWVudC5ocmVmO1xyXG5cclxuXHRsaW5rRWxlbWVudC5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuXHJcblx0aWYob2xkU3JjKVxyXG5cdFx0VVJMLnJldm9rZU9iamVjdFVSTChvbGRTcmMpO1xyXG59XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3N0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcbiAqKiBtb2R1bGUgaWQgPSAzNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi9ub2RlX21vZHVsZXMvYXV0b3ByZWZpeGVyLWxvYWRlci9pbmRleC5qcz9icm93c2Vycz1sYXN0IDIgdmVyc2lvbiEuLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL21haW4uc2Nzc1wiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi9ub2RlX21vZHVsZXMvYXV0b3ByZWZpeGVyLWxvYWRlci9pbmRleC5qcz9icm93c2Vycz1sYXN0IDIgdmVyc2lvbiEuLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL21haW4uc2Nzc1wiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uL25vZGVfbW9kdWxlcy9hdXRvcHJlZml4ZXItbG9hZGVyL2luZGV4LmpzP2Jyb3dzZXJzPWxhc3QgMiB2ZXJzaW9uIS4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vbWFpbi5zY3NzXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL3N0eWxlL21haW4uc2Nzc1xuICoqIG1vZHVsZSBpZCA9IDM3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB2aWV3Qm94PVxcXCIwIDAgMjY4MSA4MTRcXFwiIHZlcnNpb249XFxcIjEuMVxcXCIgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB4bWxuczp4bGluaz1cXFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1xcXCIgeG1sbnM6c2tldGNoPVxcXCJodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2gvbnNcXFwiPjx0aXRsZT5DbGltYiBMb2dvIEJldGE8L3RpdGxlPjxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPjxkZWZzPjwvZGVmcz48ZyBpZD1cXFwiUGFnZS0xXFxcIiBzdHJva2U9XFxcIm5vbmVcXFwiIHN0cm9rZS13aWR0aD1cXFwiMVxcXCIgZmlsbD1cXFwibm9uZVxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBza2V0Y2g6dHlwZT1cXFwiTVNQYWdlXFxcIj48ZyBpZD1cXFwiQ2xpbWItTG9nby1CZXRhXFxcIiBza2V0Y2g6dHlwZT1cXFwiTVNBcnRib2FyZEdyb3VwXFxcIiBmaWxsPVxcXCIjMTkzNzREXFxcIj48ZyBpZD1cXFwiY2xpLS0tLWIuc29jaWFsLSstUGF0aC1Db3B5LSstVHlwZS1zb21ldGhpbmctQ29weS1Db3B5LUNvcHktQ29weS1Db3B5XFxcIiBza2V0Y2g6dHlwZT1cXFwiTVNMYXllckdyb3VwXFxcIiB0cmFuc2Zvcm09XFxcInRyYW5zbGF0ZSgyMDYuMDAwMDAwLCAyNDkuMDAwMDAwKVxcXCI+PGcgaWQ9XFxcImNsaS0tLS1iLnNvY2lhbC0rLVBhdGgtQ29weVxcXCIgc2tldGNoOnR5cGU9XFxcIk1TU2hhcGVHcm91cFxcXCI+PHBhdGggZD1cXFwiTTcyMy4zNzQyMDcsMTg3LjQ0MjIxMSBMNzY3LjAyNzY0MSwzMzcuMzgzNTc1IEM3NjcuNTEwODg5LDM0MS4yNjU1NTIgNzcxLjg2MDEyNCwzNDUuMTQ3NTI5IDc3Ni4yMDkzNTksMzQ1LjE0NzUyOSBMODMzLjIzMjY2NCwzNDUuMTQ3NTI5IEM4MzkuMDMxNjQ0LDM0NS4xNDc1MjkgODQzLjM4MDg3OSwzNDAuNzgwMzA1IDg0Mi40MTQzODMsMzM0LjQ3MjA5MiBMNzM5LjQ4MjQ4NSw4LjM4NjAxOTgyIEM3MzguOTk5MjM3LDQuMDE4Nzk1NjQgNzM0LjY1MDAwMiwwLjYyMjA2NTcyOCA3MzAuNzg0MDE1LDAuNjIyMDY1NzI4IEw3MjMuMDUyMDQxLDAuNjIyMDY1NzI4IEM3MjAuNjM1OCwwLjYyMjA2NTcyOCA3MTYuMjg2NTY1LDIuNTYzMDU0MjUgNzE0LjgzNjgyLDUuNDc0NTM3MDQgTDY0My41MTQzMDIsMjA5LjAxOTA2MiBMNTc2LjQ5NDAwMywxMDUuNDMxNzg4IEM1NzMuNzIxMDU4LDEwMS4xNDU4OTUgNTY3LjM0MjUzOSw5Ny42NzE0OTE5IDU2Mi4yNTU2LDk3LjY3MTQ5MTkgTDU1Mi4xNzkwMzMsOTcuNjcxNDkxOSBDNTQ3LjA4ODMyNiw5Ny42NzE0OTE5IDU0MS41MjkzODQsMTAxLjU1ODc0OSA1MzkuNzcwMDYxLDEwNi4zMzQxODcgTDQ1NC45ODAwNjgsMzM2LjQ4NDgzMyBDNDUzLjIxNzQ5LDM0MS4yNjkxMDggNDU1LjkyNzA4NiwzNDUuMTQ3NTI5IDQ2MS4wMTQxMDIsMzQ1LjE0NzUyOSBMNTIyLjEzODA2NywzNDUuMTQ3NTI5IEM1MjcuMjMzMTUsMzQ1LjE0NzUyOSA1MzIuNzkxMDU0LDM0MS4yNjE3MzMgNTM0LjU1Mjc5NywzMzYuNDY2MTcxIEw1NzEuNDczMTQ0LDIzNS45NjY5MjQgTDY0Mi4xMDg1MjgsMzQ2LjEwNzcxMiBDNjQzLjQ4NzE0MSwzNDguMjU3MzYzIDY0Ni42NjcwOTIsMzUwIDY0OS4yMTIzMDcsMzUwIEw2NTkuOTcxNDEyLDM1MCBDNjYyLjUxNjEwOCwzNTAgNjY1LjI4MjA0NCwzNDguMDQ1MDc4IDY2Ni4xNDE5ODIsMzQ1LjY1MzkxOCBMNjgzLjgyNzI2MSwyOTYuNDc3ODcyIEw3MjMuMzc0MjA3LDE4Ny40NDIyMTEgWlxcXCIgaWQ9XFxcIlBhdGgtQ29weVxcXCI+PC9wYXRoPjxwYXRoIGQ9XFxcIk0wLjE0NTIxMzQ0MSwyNDcuMDg1MTAxIEMwLjE0NTIxMzQ0MSwzMDUuMjM0MDQgNDkuMDg3MjM3NywzNDguODQ1NzQ1IDEwNC4zMjg3MywzNDguODQ1NzQ1IEMxMzkuMjE4MDk0LDM0OC44NDU3NDUgMTY0LjQxNTk2OCwzMzUuMjc3NjU5IDE4Mi4zNDUyMjQsMzA4LjE0MTQ4NyBDMTg1LjczNzI0NiwzMDMuMjk1NzQyIDE4My4zMTQzNzMsMjk4LjQ0OTk5NyAxNzguOTUzMjAzLDI5NC41NzM0MDEgTDE0OS44Nzg3MzMsMjY5LjM3NTUyNyBDMTQ2Ljk3MTI4NiwyNjYuOTUyNjU1IDE0Mi42MTAxMTYsMjY3LjkyMTgwNCAxMzkuMjE4MDk0LDI3MS4zMTM4MjUgQzEzMS40NjQ5MDIsMjc5LjA2NzAxNyAxMjMuMjI3MTM2LDI4Ni4zMzU2MzUgMTA2LjI2NzAyOCwyODYuMzM1NjM1IEM4NC45NDU3NTA1LDI4Ni4zMzU2MzUgNjguNDcwMjE3NiwyNjguODkwOTUzIDY4LjQ3MDIxNzYsMjQ3LjA4NTEwMSBDNjguNDcwMjE3NiwyMjUuNzYzODIzIDg1LjkxNDg5OTUsMjA3LjgzNDU2NiAxMDcuMjM2MTc3LDIwNy44MzQ1NjYgQzExOC4zODEzOTEsMjA3LjgzNDU2NiAxMjguNTU3NDU1LDIxMy4xNjQ4ODYgMTM1LjM0MTQ5OCwyMjAuNDMzNTAzIEMxMzcuNzY0MzcxLDIyMi44NTYzNzYgMTQzLjU3OTI2NSwyMjMuODI1NTI1IDE0Ni4wMDIxMzcsMjIxLjQwMjY1MiBMMTc1LjA3NjYwNywxOTMuNzgxOTA2IEMxNzkuNDM3Nzc3LDE4OS45MDUzMSAxODAuODkxNTAxLDE4NC41NzQ5OSAxNzcuNDk5NDgsMTgwLjIxMzgyIEMxNTkuMDg1NjQ5LDE1Ny45MjMzOTMgMTM1LjM0MTQ5OCwxNDUuMzI0NDU2IDEwNC44MTMzMDUsMTQ1LjMyNDQ1NiBDNDkuNTcxODEyMiwxNDUuMzI0NDU2IDAuMTQ1MjEzNDQxLDE4OS45MDUzMSAwLjE0NTIxMzQ0MSwyNDcuMDg1MTAxIEwwLjE0NTIxMzQ0MSwyNDcuMDg1MTAxIFogTTIxOC42ODgzMTIsMzM0Ljc5MzA4NSBDMjE4LjY4ODMxMiwzMzkuNjM4ODMgMjIzLjA0OTQ4MiwzNDQgMjI3Ljg5NTIyNywzNDQgTDI4MS4xOTg0MjIsMzQ0IEMyODYuMDQ0MTY3LDM0NCAyOTAuNDA1MzM3LDMzOS42Mzg4MyAyOTAuNDA1MzM3LDMzNC43OTMwODUgTDI5MC40MDUzMzcsMTQuMDA0NzY3MiBDMjkwLjQwNTMzNyw5LjE1OTAyMjI2IDI4Ni4wNDQxNjcsNC43OTc4NTE3OSAyODEuMTk4NDIyLDQuNzk3ODUxNzkgTDIyNy44OTUyMjcsNC43OTc4NTE3OSBDMjIzLjA0OTQ4Miw0Ljc5Nzg1MTc5IDIxOC42ODgzMTIsOS4xNTkwMjIyNiAyMTguNjg4MzEyLDE0LjAwNDc2NzIgTDIxOC42ODgzMTIsMzM0Ljc5MzA4NSBaIE0zNzguMTEzMzIxLDkxLjUzNjY4NjggQzM5OS40MzQ1OTksOTEuNTM2Njg2OCA0MTYuODc5MjgxLDc0LjU3NjU3OTQgNDE2Ljg3OTI4MSw1My4yNTUzMDE1IEM0MTYuODc5MjgxLDMxLjkzNDAyMzYgMzk5LjQzNDU5OSwxNC40ODkzNDE3IDM3OC4xMTMzMjEsMTQuNDg5MzQxNyBDMzU2Ljc5MjA0NCwxNC40ODkzNDE3IDMzOS44MzE5MzYsMzEuOTM0MDIzNiAzMzkuODMxOTM2LDUzLjI1NTMwMTUgQzMzOS44MzE5MzYsNzQuNTc2NTc5NCAzNTYuNzkyMDQ0LDkxLjUzNjY4NjggMzc4LjExMzMyMSw5MS41MzY2ODY4IEwzNzguMTEzMzIxLDkxLjUzNjY4NjggWiBNMzQyLjczOTM4MywzMzQuNzkzMDg1IEMzNDIuNzM5MzgzLDMzOS42Mzg4MyAzNDcuMTAwNTU0LDM0NCAzNTEuOTQ2Mjk5LDM0NCBMNDA1LjI0OTQ5MywzNDQgQzQxMC4wOTUyMzgsMzQ0IDQxNC40NTY0MDksMzM5LjYzODgzIDQxNC40NTY0MDksMzM0Ljc5MzA4NSBMNDE0LjQ1NjQwOSwxNTkuMzc3MTE2IEM0MTQuNDU2NDA5LDE1NC4wNDY3OTcgNDEwLjA5NTIzOCwxNTAuMTcwMjAxIDQwNS4yNDk0OTMsMTUwLjE3MDIwMSBMMzUxLjk0NjI5OSwxNTAuMTcwMjAxIEMzNDcuMTAwNTU0LDE1MC4xNzAyMDEgMzQyLjczOTM4MywxNTQuMDQ2Nzk3IDM0Mi43MzkzODMsMTU5LjM3NzExNiBMMzQyLjczOTM4MywzMzQuNzkzMDg1IFogTTg4OS4xNTQzMSwzMzQuNzkzMDg1IEM4ODkuMTU0MzEsMzM5LjYzODgzIDg5My41MTU0ODEsMzQ0IDg5OC4zNjEyMjYsMzQ0IEw5MjEuMTM2MjI3LDM0NCBDOTI1Ljk4MTk3MiwzNDQgOTI5LjM3Mzk5NCwzMzkuNjM4ODMgOTMxLjMxMjI5MiwzMzQuMzA4NTEgTDkzNy4xMjcxODUsMzE4LjMxNzU1MiBDOTM3LjEyNzE4NSwzMTguMzE3NTUyIDk1OS40MTc2MTIsMzQ4Ljg0NTc0NSAxMDAyLjA2MDE3LDM0OC44NDU3NDUgQzEwNTYuODE3MDksMzQ4Ljg0NTc0NSAxMDk4LjAwNTkyLDMwMi44MTExNjggMTA5OC4wMDU5MiwyNDcuMDg1MTAxIEMxMDk4LjAwNTkyLDE3OC43NjAwOTYgMTA1My40MjUwNiwxNDUuMzI0NDU2IDEwMDEuNTc1NTksMTQ1LjMyNDQ1NiBDOTg1LjEwMDA2MSwxNDUuMzI0NDU2IDk2Ny4xNzA4MDQsMTUxLjEzOTM1IDk2MS4zNTU5MSwxNTQuNTMxMzcxIEw5NjEuMzU1OTEsMTQuMDA0NzY3MiBDOTYxLjM1NTkxLDkuMTU5MDIyMjYgOTU2Ljk5NDc0LDQuNzk3ODUxNzkgOTUyLjE0ODk5NSw0Ljc5Nzg1MTc5IEw4OTguMzYxMjI2LDQuNzk3ODUxNzkgQzg5My41MTU0ODEsNC43OTc4NTE3OSA4ODkuMTU0MzEsOS4xNTkwMjIyNiA4ODkuMTU0MzEsMTQuMDA0NzY3MiBMODg5LjE1NDMxLDMzNC43OTMwODUgWiBNOTUzLjYwMjcxOCwyNDYuNjAwNTI2IEM5NTMuNjAyNzE4LDIyNC43OTQ2NzQgOTcwLjA3ODI1MSwyMDcuODM0NTY2IDk5Mi4zNjg2NzgsMjA3LjgzNDU2NiBDMTAxNC42NTkxMSwyMDcuODM0NTY2IDEwMzEuNjE5MjEsMjI0Ljc5NDY3NCAxMDMxLjYxOTIxLDI0Ni42MDA1MjYgQzEwMzEuNjE5MjEsMjY4Ljg5MDk1MyAxMDE0LjY1OTExLDI4Ni4zMzU2MzUgOTkyLjM2ODY3OCwyODYuMzM1NjM1IEM5NzAuMDc4MjUxLDI4Ni4zMzU2MzUgOTUzLjYwMjcxOCwyNjguODkwOTUzIDk1My42MDI3MTgsMjQ2LjYwMDUyNiBMOTUzLjYwMjcxOCwyNDYuNjAwNTI2IFogTTExMzQuMjU2NDUsMzIxLjIyNDk5OSBDMTEzNC4yNTY0NSwzMzYuMjQ2ODA4IDExNDYuODU1MzksMzQ4Ljg0NTc0NSAxMTYxLjg3NzIsMzQ4Ljg0NTc0NSBDMTE3Ny4zODM1OCwzNDguODQ1NzQ1IDExODkuNDk3OTUsMzM2LjI0NjgwOCAxMTg5LjQ5Nzk1LDMyMS4yMjQ5OTkgQzExODkuNDk3OTUsMzA1LjcxODYxNSAxMTc3LjM4MzU4LDI5My42MDQyNTIgMTE2MS44NzcyLDI5My42MDQyNTIgQzExNDYuODU1MzksMjkzLjYwNDI1MiAxMTM0LjI1NjQ1LDMwNS43MTg2MTUgMTEzNC4yNTY0NSwzMjEuMjI0OTk5IEwxMTM0LjI1NjQ1LDMyMS4yMjQ5OTkgWiBNMTIzNi4wMTcxLDMzMi44NTQ3ODcgQzEyNDUuNzA4NTksMzQwLjYwNzk3OSAxMjY5LjkzNzMxLDM0OC44NDU3NDUgMTMwMS45MTkyMywzNDguODQ1NzQ1IEMxMzU2LjY3NjE1LDM0OC44NDU3NDUgMTM4My44MTIzMiwzMjEuMjI0OTk5IDEzODMuODEyMzIsMjg3LjMwNDc4NCBDMTM4My44MTIzMiwyNDguNTM4ODI0IDEzNTYuNjc2MTUsMjMzLjAzMjQ0IDEzMTcuNDI1NjEsMjE5LjQ2NDM1NCBDMTMwMC45NTAwOCwyMTMuNjQ5NDYgMTI5NS42MTk3NiwyMDguODAzNzE1IDEyOTUuNjE5NzYsMjAzLjk1Nzk3IEMxMjk1LjYxOTc2LDE5OC42Mjc2NTEgMTI5OS45ODA5MywxOTcuMTczOTI3IDEzMDYuMjgwNCwxOTcuMTczOTI3IEMxMzI1LjE3ODgsMTk3LjE3MzkyNyAxMzQ3LjQ2OTIzLDIwOC4zMTkxNDEgMTM0Ny40NjkyMywyMDguMzE5MTQxIEMxMzUxLjM0NTgzLDIwOS43NzI4NjQgMTM1Ni4xOTE1NywyMDguMzE5MTQxIDEzNTcuNjQ1MywyMDUuNDExNjk0IEwxMzc1LjU3NDU1LDE3Mi40NjA2MjggQzEzNzguNDgyLDE2Ny42MTQ4ODMgMTM3NS4wODk5OCwxNjMuMjUzNzEyIDEzNzAuNzI4ODEsMTYwLjM0NjI2NSBDMTM2MC4wNjgxNywxNTMuNTYyMjIzIDEzMzYuODA4NTksMTQ1LjMyNDQ1NiAxMzA2LjI4MDQsMTQ1LjMyNDQ1NiBDMTI1My45NDYzNSwxNDUuMzI0NDU2IDEyMzAuNjg2NzgsMTcxLjQ5MTQ3OSAxMjMwLjY4Njc4LDIwMy45NTc5NyBDMTIzMC42ODY3OCwyMzQuMDAxNTg5IDEyNDcuMTYyMzEsMjU1LjgwNzQ0MSAxMjg0Ljk1OTEyLDI2OC44OTA5NTMgQzEzMDkuNjcyNDIsMjc3LjYxMzI5NCAxMzEyLjU3OTg3LDI4NC4zOTczMzcgMTMxMi41Nzk4NywyODkuMjQzMDgyIEMxMzEyLjU3OTg3LDI5NS4wNTc5NzYgMTMwOC4yMTg3LDI5Ny45NjU0MjMgMTMwMy4zNzI5NSwyOTcuOTY1NDIzIEMxMjgyLjUzNjI1LDI5Ny45NjU0MjMgMTI1OS43NjEyNSwyODUuMzY2NDg2IDEyNTkuNzYxMjUsMjg1LjM2NjQ4NiBDMTI1NS44ODQ2NSwyODMuNDI4MTg4IDEyNTEuMDM4OTEsMjg2LjMzNTYzNSAxMjQ5LjU4NTE4LDI4OS4yNDMwODIgTDEyMzIuNjI1MDgsMzIyLjY3ODcyMiBDMTIzMC4yMDIyLDMyNy4wMzk4OTMgMTIzMi42MjUwOCwzMjkuOTQ3MzQgMTIzNi4wMTcxLDMzMi44NTQ3ODcgTDEyMzYuMDE3MSwzMzIuODU0Nzg3IFogTTE0MDcuNTU2NDcsMjQ2LjYwMDUyNiBDMTQwNy41NTY0NywzMDIuMzI2NTkzIDE0NTMuMTA2NDcsMzQ4Ljg0NTc0NSAxNTA4LjM0Nzk2LDM0OC44NDU3NDUgQzE1NjMuNTg5NDYsMzQ4Ljg0NTc0NSAxNjA5LjEzOTQ2LDMwMi4zMjY1OTMgMTYwOS4xMzk0NiwyNDYuNjAwNTI2IEMxNjA5LjEzOTQ2LDE5MS44NDM2MDggMTU2My41ODk0NiwxNDUuMzI0NDU2IDE1MDguMzQ3OTYsMTQ1LjMyNDQ1NiBDMTQ1My4xMDY0NywxNDUuMzI0NDU2IDE0MDcuNTU2NDcsMTkxLjg0MzYwOCAxNDA3LjU1NjQ3LDI0Ni42MDA1MjYgTDE0MDcuNTU2NDcsMjQ2LjYwMDUyNiBaIE0xNDcwLjA2NjU4LDI0Ni42MDA1MjYgQzE0NzAuMDY2NTgsMjI1LjI3OTI0OCAxNDg3LjAyNjY5LDIwNy44MzQ1NjYgMTUwOC4zNDc5NiwyMDcuODM0NTY2IEMxNTI5LjY2OTI0LDIwNy44MzQ1NjYgMTU0Ni42MjkzNSwyMjUuMjc5MjQ4IDE1NDYuNjI5MzUsMjQ2LjYwMDUyNiBDMTU0Ni42MjkzNSwyNjguNDA2Mzc4IDE1MjkuNjY5MjQsMjg2LjMzNTYzNSAxNTA4LjM0Nzk2LDI4Ni4zMzU2MzUgQzE0ODcuMDI2NjksMjg2LjMzNTYzNSAxNDcwLjA2NjU4LDI2OC40MDYzNzggMTQ3MC4wNjY1OCwyNDYuNjAwNTI2IEwxNDcwLjA2NjU4LDI0Ni42MDA1MjYgWiBNMTYzMS40Mjk4OSwyNDcuMDg1MTAxIEMxNjMxLjQyOTg5LDMwNS4yMzQwNCAxNjgwLjM3MTkxLDM0OC44NDU3NDUgMTczNS42MTM0LDM0OC44NDU3NDUgQzE3NzAuNTAyNzcsMzQ4Ljg0NTc0NSAxNzk1LjcwMDY0LDMzNS4yNzc2NTkgMTgxMy42Mjk5LDMwOC4xNDE0ODcgQzE4MTcuMDIxOTIsMzAzLjI5NTc0MiAxODE0LjU5OTA1LDI5OC40NDk5OTcgMTgxMC4yMzc4OCwyOTQuNTczNDAxIEwxNzgxLjE2MzQxLDI2OS4zNzU1MjcgQzE3NzguMjU1OTYsMjY2Ljk1MjY1NSAxNzczLjg5NDc5LDI2Ny45MjE4MDQgMTc3MC41MDI3NywyNzEuMzEzODI1IEMxNzYyLjc0OTU4LDI3OS4wNjcwMTcgMTc1NC41MTE4MSwyODYuMzM1NjM1IDE3MzcuNTUxNywyODYuMzM1NjM1IEMxNzE2LjIzMDQyLDI4Ni4zMzU2MzUgMTY5OS43NTQ4OSwyNjguODkwOTUzIDE2OTkuNzU0ODksMjQ3LjA4NTEwMSBDMTY5OS43NTQ4OSwyMjUuNzYzODIzIDE3MTcuMTk5NTcsMjA3LjgzNDU2NiAxNzM4LjUyMDg1LDIwNy44MzQ1NjYgQzE3NDkuNjY2MDYsMjA3LjgzNDU2NiAxNzU5Ljg0MjEzLDIxMy4xNjQ4ODYgMTc2Ni42MjYxNywyMjAuNDMzNTAzIEMxNzY5LjA0OTA0LDIyMi44NTYzNzYgMTc3NC44NjM5NCwyMjMuODI1NTI1IDE3NzcuMjg2ODEsMjIxLjQwMjY1MiBMMTgwNi4zNjEyOCwxOTMuNzgxOTA2IEMxODEwLjcyMjQ1LDE4OS45MDUzMSAxODEyLjE3NjE3LDE4NC41NzQ5OSAxODA4Ljc4NDE1LDE4MC4yMTM4MiBDMTc5MC4zNzAzMiwxNTcuOTIzMzkzIDE3NjYuNjI2MTcsMTQ1LjMyNDQ1NiAxNzM2LjA5Nzk4LDE0NS4zMjQ0NTYgQzE2ODAuODU2NDksMTQ1LjMyNDQ1NiAxNjMxLjQyOTg5LDE4OS45MDUzMSAxNjMxLjQyOTg5LDI0Ny4wODUxMDEgTDE2MzEuNDI5ODksMjQ3LjA4NTEwMSBaIE0xODg1LjM0NjkyLDkxLjUzNjY4NjggQzE5MDYuNjY4Miw5MS41MzY2ODY4IDE5MjQuMTEyODgsNzQuNTc2NTc5NCAxOTI0LjExMjg4LDUzLjI1NTMwMTUgQzE5MjQuMTEyODgsMzEuOTM0MDIzNiAxOTA2LjY2ODIsMTQuNDg5MzQxNyAxODg1LjM0NjkyLDE0LjQ4OTM0MTcgQzE4NjQuMDI1NjUsMTQuNDg5MzQxNyAxODQ3LjA2NTU0LDMxLjkzNDAyMzYgMTg0Ny4wNjU1NCw1My4yNTUzMDE1IEMxODQ3LjA2NTU0LDc0LjU3NjU3OTQgMTg2NC4wMjU2NSw5MS41MzY2ODY4IDE4ODUuMzQ2OTIsOTEuNTM2Njg2OCBMMTg4NS4zNDY5Miw5MS41MzY2ODY4IFogTTE4NDkuOTcyOTksMzM0Ljc5MzA4NSBDMTg0OS45NzI5OSwzMzkuNjM4ODMgMTg1NC4zMzQxNiwzNDQgMTg1OS4xNzk5LDM0NCBMMTkxMi40ODMxLDM0NCBDMTkxNy4zMjg4NCwzNDQgMTkyMS42OTAwMSwzMzkuNjM4ODMgMTkyMS42OTAwMSwzMzQuNzkzMDg1IEwxOTIxLjY5MDAxLDE1OS4zNzcxMTYgQzE5MjEuNjkwMDEsMTU0LjA0Njc5NyAxOTE3LjMyODg0LDE1MC4xNzAyMDEgMTkxMi40ODMxLDE1MC4xNzAyMDEgTDE4NTkuMTc5OSwxNTAuMTcwMjAxIEMxODU0LjMzNDE2LDE1MC4xNzAyMDEgMTg0OS45NzI5OSwxNTQuMDQ2Nzk3IDE4NDkuOTcyOTksMTU5LjM3NzExNiBMMTg0OS45NzI5OSwzMzQuNzkzMDg1IFogTTE5NjAuOTQwNTUsMjg0Ljg4MTkxMSBDMTk2MC45NDA1NSwzMjMuMTYzMjk3IDE5ODkuNTMwNDQsMzQ4Ljg0NTc0NSAyMDI3LjgxMTgzLDM0OC44NDU3NDUgQzIwNTguMzQwMDIsMzQ4Ljg0NTc0NSAyMDc1LjMwMDEzLDMzNC43OTMwODUgMjA4Ni40NDUzNCwzMjQuNjE3MDIgTDIwOTMuMjI5MzgsMzM3LjcwMDUzMiBDMjA5NS42NTIyNiwzNDMuMDMwODUxIDIwOTkuMDQ0MjgsMzQ0IDIxMDEuOTUxNzIsMzQ0IEwyMTIzLjI3MywzNDQgQzIxMjguMTE4NzUsMzQ0IDIxMzIuNDc5OTIsMzM5LjYzODgzIDIxMzIuNDc5OTIsMzM0Ljc5MzA4NSBMMjEzMi40Nzk5MiwyMjcuNzAyMTIxIEMyMTMyLjQ3OTkyLDE3MC41MjIzMyAyMTEwLjY3NDA3LDE0NS4zMjQ0NTYgMjA1MC41ODY4MywxNDUuMzI0NDU2IEMyMDI0LjQxOTgsMTQ1LjMyNDQ1NiAxOTkwLjQ5OTU5LDE1MS4xMzkzNSAxOTg2LjEzODQyLDE1Mi41OTMwNzQgQzE5ODEuNzc3MjUsMTU0LjA0Njc5NyAxOTc3LjQxNjA4LDE1Ny40Mzg4MTggMTk3OC44Njk4LDE2NS42NzY1ODUgTDE5ODMuMjMwOTcsMTk2LjIwNDc3OCBDMTk4NC4yMDAxMiwyMDMuNDczMzk2IDE5ODcuNTkyMTQsMjA4LjgwMzcxNSAxOTk0Ljg2MDc2LDIwNi4zODA4NDMgQzIwMDcuNDU5NywyMDIuNTA0MjQ3IDIwMzAuMjM0NywxOTkuMTEyMjI1IDIwNDMuMzE4MjEsMTk5LjExMjIyNSBDMjA2Ni41Nzc3OSwxOTkuMTEyMjI1IDIwNjkuNDg1MjMsMjA4LjgwMzcxNSAyMDY5LjQ4NTIzLDIyNy43MDIxMjEgQzIwNjkuNDg1MjMsMjI3LjcwMjEyMSAyMDUzLjk3ODg1LDIxOS45NDg5MjkgMjAzMi4xNzMsMjE5Ljk0ODkyOSBDMTk4OC4wNzY3MiwyMTkuOTQ4OTI5IDE5NjAuOTQwNTUsMjQ3LjU2OTY3NSAxOTYwLjk0MDU1LDI4NC44ODE5MTEgTDE5NjAuOTQwNTUsMjg0Ljg4MTkxMSBaIE0yMDIzLjkzNTIzLDI4MC4wMzYxNjYgQzIwMjMuOTM1MjMsMjY4Ljg5MDk1MyAyMDMzLjE0MjE1LDI1OS42ODQwMzcgMjA0NC43NzE5MywyNTkuNjg0MDM3IEMyMDU2LjQwMTcyLDI1OS42ODQwMzcgMjA2NS42MDg2NCwyNjguODkwOTUzIDIwNjYuMDkzMjEsMjgwLjAzNjE2NiBDMjA2Ni4wOTMyMSwyOTEuNjY1OTU0IDIwNTYuNDAxNzIsMzAxLjM1NzQ0NCAyMDQ0Ljc3MTkzLDMwMS4zNTc0NDQgQzIwMzMuMTQyMTUsMzAxLjM1NzQ0NCAyMDIzLjkzNTIzLDI5MS42NjU5NTQgMjAyMy45MzUyMywyODAuMDM2MTY2IEwyMDIzLjkzNTIzLDI4MC4wMzYxNjYgWiBNMjE4MS45MDY1MiwzMzQuNzkzMDg1IEMyMTgxLjkwNjUyLDMzOS42Mzg4MyAyMTg2LjI2NzY5LDM0NCAyMTkxLjExMzQzLDM0NCBMMjI0NC40MTY2MywzNDQgQzIyNDkuMjYyMzcsMzQ0IDIyNTMuNjIzNTQsMzM5LjYzODgzIDIyNTMuNjIzNTQsMzM0Ljc5MzA4NSBMMjI1My42MjM1NCwxNC4wMDQ3NjcyIEMyMjUzLjYyMzU0LDkuMTU5MDIyMjYgMjI0OS4yNjIzNyw0Ljc5Nzg1MTc5IDIyNDQuNDE2NjMsNC43OTc4NTE3OSBMMjE5MS4xMTM0Myw0Ljc5Nzg1MTc5IEMyMTg2LjI2NzY5LDQuNzk3ODUxNzkgMjE4MS45MDY1Miw5LjE1OTAyMjI2IDIxODEuOTA2NTIsMTQuMDA0NzY3MiBMMjE4MS45MDY1MiwzMzQuNzkzMDg1IFpcXFwiIGlkPVxcXCJjbGktLS0tYi5zb2NpYWxcXFwiPjwvcGF0aD48L2c+PC9nPjwvZz48L2c+PC9zdmc+XCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2ltZy9jbGltYl9sb2dvLnN2Z1xuICoqIG1vZHVsZSBpZCA9IDM4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiEgaHR0cHM6Ly9tdGhzLmJlL3B1bnljb2RlIHYxLjMuMiBieSBAbWF0aGlhcyAqL1xuOyhmdW5jdGlvbihyb290KSB7XG5cblx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlcyAqL1xuXHR2YXIgZnJlZUV4cG9ydHMgPSB0eXBlb2YgZXhwb3J0cyA9PSAnb2JqZWN0JyAmJiBleHBvcnRzICYmXG5cdFx0IWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0cztcblx0dmFyIGZyZWVNb2R1bGUgPSB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZSAmJlxuXHRcdCFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlO1xuXHR2YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsO1xuXHRpZiAoXG5cdFx0ZnJlZUdsb2JhbC5nbG9iYWwgPT09IGZyZWVHbG9iYWwgfHxcblx0XHRmcmVlR2xvYmFsLndpbmRvdyA9PT0gZnJlZUdsb2JhbCB8fFxuXHRcdGZyZWVHbG9iYWwuc2VsZiA9PT0gZnJlZUdsb2JhbFxuXHQpIHtcblx0XHRyb290ID0gZnJlZUdsb2JhbDtcblx0fVxuXG5cdC8qKlxuXHQgKiBUaGUgYHB1bnljb2RlYCBvYmplY3QuXG5cdCAqIEBuYW1lIHB1bnljb2RlXG5cdCAqIEB0eXBlIE9iamVjdFxuXHQgKi9cblx0dmFyIHB1bnljb2RlLFxuXG5cdC8qKiBIaWdoZXN0IHBvc2l0aXZlIHNpZ25lZCAzMi1iaXQgZmxvYXQgdmFsdWUgKi9cblx0bWF4SW50ID0gMjE0NzQ4MzY0NywgLy8gYWthLiAweDdGRkZGRkZGIG9yIDJeMzEtMVxuXG5cdC8qKiBCb290c3RyaW5nIHBhcmFtZXRlcnMgKi9cblx0YmFzZSA9IDM2LFxuXHR0TWluID0gMSxcblx0dE1heCA9IDI2LFxuXHRza2V3ID0gMzgsXG5cdGRhbXAgPSA3MDAsXG5cdGluaXRpYWxCaWFzID0gNzIsXG5cdGluaXRpYWxOID0gMTI4LCAvLyAweDgwXG5cdGRlbGltaXRlciA9ICctJywgLy8gJ1xceDJEJ1xuXG5cdC8qKiBSZWd1bGFyIGV4cHJlc3Npb25zICovXG5cdHJlZ2V4UHVueWNvZGUgPSAvXnhuLS0vLFxuXHRyZWdleE5vbkFTQ0lJID0gL1teXFx4MjAtXFx4N0VdLywgLy8gdW5wcmludGFibGUgQVNDSUkgY2hhcnMgKyBub24tQVNDSUkgY2hhcnNcblx0cmVnZXhTZXBhcmF0b3JzID0gL1tcXHgyRVxcdTMwMDJcXHVGRjBFXFx1RkY2MV0vZywgLy8gUkZDIDM0OTAgc2VwYXJhdG9yc1xuXG5cdC8qKiBFcnJvciBtZXNzYWdlcyAqL1xuXHRlcnJvcnMgPSB7XG5cdFx0J292ZXJmbG93JzogJ092ZXJmbG93OiBpbnB1dCBuZWVkcyB3aWRlciBpbnRlZ2VycyB0byBwcm9jZXNzJyxcblx0XHQnbm90LWJhc2ljJzogJ0lsbGVnYWwgaW5wdXQgPj0gMHg4MCAobm90IGEgYmFzaWMgY29kZSBwb2ludCknLFxuXHRcdCdpbnZhbGlkLWlucHV0JzogJ0ludmFsaWQgaW5wdXQnXG5cdH0sXG5cblx0LyoqIENvbnZlbmllbmNlIHNob3J0Y3V0cyAqL1xuXHRiYXNlTWludXNUTWluID0gYmFzZSAtIHRNaW4sXG5cdGZsb29yID0gTWF0aC5mbG9vcixcblx0c3RyaW5nRnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZSxcblxuXHQvKiogVGVtcG9yYXJ5IHZhcmlhYmxlICovXG5cdGtleTtcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHQvKipcblx0ICogQSBnZW5lcmljIGVycm9yIHV0aWxpdHkgZnVuY3Rpb24uXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBlcnJvciB0eXBlLlxuXHQgKiBAcmV0dXJucyB7RXJyb3J9IFRocm93cyBhIGBSYW5nZUVycm9yYCB3aXRoIHRoZSBhcHBsaWNhYmxlIGVycm9yIG1lc3NhZ2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBlcnJvcih0eXBlKSB7XG5cdFx0dGhyb3cgUmFuZ2VFcnJvcihlcnJvcnNbdHlwZV0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEEgZ2VuZXJpYyBgQXJyYXkjbWFwYCB1dGlsaXR5IGZ1bmN0aW9uLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCBmb3IgZXZlcnkgYXJyYXlcblx0ICogaXRlbS5cblx0ICogQHJldHVybnMge0FycmF5fSBBIG5ldyBhcnJheSBvZiB2YWx1ZXMgcmV0dXJuZWQgYnkgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwKGFycmF5LCBmbikge1xuXHRcdHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xuXHRcdHdoaWxlIChsZW5ndGgtLSkge1xuXHRcdFx0cmVzdWx0W2xlbmd0aF0gPSBmbihhcnJheVtsZW5ndGhdKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdC8qKlxuXHQgKiBBIHNpbXBsZSBgQXJyYXkjbWFwYC1saWtlIHdyYXBwZXIgdG8gd29yayB3aXRoIGRvbWFpbiBuYW1lIHN0cmluZ3Mgb3IgZW1haWxcblx0ICogYWRkcmVzc2VzLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZG9tYWluIFRoZSBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCBmb3IgZXZlcnlcblx0ICogY2hhcmFjdGVyLlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IEEgbmV3IHN0cmluZyBvZiBjaGFyYWN0ZXJzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFja1xuXHQgKiBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcERvbWFpbihzdHJpbmcsIGZuKSB7XG5cdFx0dmFyIHBhcnRzID0gc3RyaW5nLnNwbGl0KCdAJyk7XG5cdFx0dmFyIHJlc3VsdCA9ICcnO1xuXHRcdGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG5cdFx0XHQvLyBJbiBlbWFpbCBhZGRyZXNzZXMsIG9ubHkgdGhlIGRvbWFpbiBuYW1lIHNob3VsZCBiZSBwdW55Y29kZWQuIExlYXZlXG5cdFx0XHQvLyB0aGUgbG9jYWwgcGFydCAoaS5lLiBldmVyeXRoaW5nIHVwIHRvIGBAYCkgaW50YWN0LlxuXHRcdFx0cmVzdWx0ID0gcGFydHNbMF0gKyAnQCc7XG5cdFx0XHRzdHJpbmcgPSBwYXJ0c1sxXTtcblx0XHR9XG5cdFx0Ly8gQXZvaWQgYHNwbGl0KHJlZ2V4KWAgZm9yIElFOCBjb21wYXRpYmlsaXR5LiBTZWUgIzE3LlxuXHRcdHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKHJlZ2V4U2VwYXJhdG9ycywgJ1xceDJFJyk7XG5cdFx0dmFyIGxhYmVscyA9IHN0cmluZy5zcGxpdCgnLicpO1xuXHRcdHZhciBlbmNvZGVkID0gbWFwKGxhYmVscywgZm4pLmpvaW4oJy4nKTtcblx0XHRyZXR1cm4gcmVzdWx0ICsgZW5jb2RlZDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIG51bWVyaWMgY29kZSBwb2ludHMgb2YgZWFjaCBVbmljb2RlXG5cdCAqIGNoYXJhY3RlciBpbiB0aGUgc3RyaW5nLiBXaGlsZSBKYXZhU2NyaXB0IHVzZXMgVUNTLTIgaW50ZXJuYWxseSxcblx0ICogdGhpcyBmdW5jdGlvbiB3aWxsIGNvbnZlcnQgYSBwYWlyIG9mIHN1cnJvZ2F0ZSBoYWx2ZXMgKGVhY2ggb2Ygd2hpY2hcblx0ICogVUNTLTIgZXhwb3NlcyBhcyBzZXBhcmF0ZSBjaGFyYWN0ZXJzKSBpbnRvIGEgc2luZ2xlIGNvZGUgcG9pbnQsXG5cdCAqIG1hdGNoaW5nIFVURi0xNi5cblx0ICogQHNlZSBgcHVueWNvZGUudWNzMi5lbmNvZGVgXG5cdCAqIEBzZWUgPGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nPlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMlxuXHQgKiBAbmFtZSBkZWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZyBUaGUgVW5pY29kZSBpbnB1dCBzdHJpbmcgKFVDUy0yKS5cblx0ICogQHJldHVybnMge0FycmF5fSBUaGUgbmV3IGFycmF5IG9mIGNvZGUgcG9pbnRzLlxuXHQgKi9cblx0ZnVuY3Rpb24gdWNzMmRlY29kZShzdHJpbmcpIHtcblx0XHR2YXIgb3V0cHV0ID0gW10sXG5cdFx0ICAgIGNvdW50ZXIgPSAwLFxuXHRcdCAgICBsZW5ndGggPSBzdHJpbmcubGVuZ3RoLFxuXHRcdCAgICB2YWx1ZSxcblx0XHQgICAgZXh0cmE7XG5cdFx0d2hpbGUgKGNvdW50ZXIgPCBsZW5ndGgpIHtcblx0XHRcdHZhbHVlID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtcblx0XHRcdGlmICh2YWx1ZSA+PSAweEQ4MDAgJiYgdmFsdWUgPD0gMHhEQkZGICYmIGNvdW50ZXIgPCBsZW5ndGgpIHtcblx0XHRcdFx0Ly8gaGlnaCBzdXJyb2dhdGUsIGFuZCB0aGVyZSBpcyBhIG5leHQgY2hhcmFjdGVyXG5cdFx0XHRcdGV4dHJhID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtcblx0XHRcdFx0aWYgKChleHRyYSAmIDB4RkMwMCkgPT0gMHhEQzAwKSB7IC8vIGxvdyBzdXJyb2dhdGVcblx0XHRcdFx0XHRvdXRwdXQucHVzaCgoKHZhbHVlICYgMHgzRkYpIDw8IDEwKSArIChleHRyYSAmIDB4M0ZGKSArIDB4MTAwMDApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIHVubWF0Y2hlZCBzdXJyb2dhdGU7IG9ubHkgYXBwZW5kIHRoaXMgY29kZSB1bml0LCBpbiBjYXNlIHRoZSBuZXh0XG5cdFx0XHRcdFx0Ly8gY29kZSB1bml0IGlzIHRoZSBoaWdoIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2godmFsdWUpO1xuXHRcdFx0XHRcdGNvdW50ZXItLTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0b3V0cHV0LnB1c2godmFsdWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gb3V0cHV0O1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBzdHJpbmcgYmFzZWQgb24gYW4gYXJyYXkgb2YgbnVtZXJpYyBjb2RlIHBvaW50cy5cblx0ICogQHNlZSBgcHVueWNvZGUudWNzMi5kZWNvZGVgXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZS51Y3MyXG5cdCAqIEBuYW1lIGVuY29kZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBjb2RlUG9pbnRzIFRoZSBhcnJheSBvZiBudW1lcmljIGNvZGUgcG9pbnRzLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgbmV3IFVuaWNvZGUgc3RyaW5nIChVQ1MtMikuXG5cdCAqL1xuXHRmdW5jdGlvbiB1Y3MyZW5jb2RlKGFycmF5KSB7XG5cdFx0cmV0dXJuIG1hcChhcnJheSwgZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdHZhciBvdXRwdXQgPSAnJztcblx0XHRcdGlmICh2YWx1ZSA+IDB4RkZGRikge1xuXHRcdFx0XHR2YWx1ZSAtPSAweDEwMDAwO1xuXHRcdFx0XHRvdXRwdXQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKTtcblx0XHRcdFx0dmFsdWUgPSAweERDMDAgfCB2YWx1ZSAmIDB4M0ZGO1xuXHRcdFx0fVxuXHRcdFx0b3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSk7XG5cdFx0XHRyZXR1cm4gb3V0cHV0O1xuXHRcdH0pLmpvaW4oJycpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgYmFzaWMgY29kZSBwb2ludCBpbnRvIGEgZGlnaXQvaW50ZWdlci5cblx0ICogQHNlZSBgZGlnaXRUb0Jhc2ljKClgXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlUG9pbnQgVGhlIGJhc2ljIG51bWVyaWMgY29kZSBwb2ludCB2YWx1ZS5cblx0ICogQHJldHVybnMge051bWJlcn0gVGhlIG51bWVyaWMgdmFsdWUgb2YgYSBiYXNpYyBjb2RlIHBvaW50IChmb3IgdXNlIGluXG5cdCAqIHJlcHJlc2VudGluZyBpbnRlZ2VycykgaW4gdGhlIHJhbmdlIGAwYCB0byBgYmFzZSAtIDFgLCBvciBgYmFzZWAgaWZcblx0ICogdGhlIGNvZGUgcG9pbnQgZG9lcyBub3QgcmVwcmVzZW50IGEgdmFsdWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNpY1RvRGlnaXQoY29kZVBvaW50KSB7XG5cdFx0aWYgKGNvZGVQb2ludCAtIDQ4IDwgMTApIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSAyMjtcblx0XHR9XG5cdFx0aWYgKGNvZGVQb2ludCAtIDY1IDwgMjYpIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSA2NTtcblx0XHR9XG5cdFx0aWYgKGNvZGVQb2ludCAtIDk3IDwgMjYpIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSA5Nztcblx0XHR9XG5cdFx0cmV0dXJuIGJhc2U7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBkaWdpdC9pbnRlZ2VyIGludG8gYSBiYXNpYyBjb2RlIHBvaW50LlxuXHQgKiBAc2VlIGBiYXNpY1RvRGlnaXQoKWBcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGRpZ2l0IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludC5cblx0ICogQHJldHVybnMge051bWJlcn0gVGhlIGJhc2ljIGNvZGUgcG9pbnQgd2hvc2UgdmFsdWUgKHdoZW4gdXNlZCBmb3Jcblx0ICogcmVwcmVzZW50aW5nIGludGVnZXJzKSBpcyBgZGlnaXRgLCB3aGljaCBuZWVkcyB0byBiZSBpbiB0aGUgcmFuZ2Vcblx0ICogYDBgIHRvIGBiYXNlIC0gMWAuIElmIGBmbGFnYCBpcyBub24temVybywgdGhlIHVwcGVyY2FzZSBmb3JtIGlzXG5cdCAqIHVzZWQ7IGVsc2UsIHRoZSBsb3dlcmNhc2UgZm9ybSBpcyB1c2VkLiBUaGUgYmVoYXZpb3IgaXMgdW5kZWZpbmVkXG5cdCAqIGlmIGBmbGFnYCBpcyBub24temVybyBhbmQgYGRpZ2l0YCBoYXMgbm8gdXBwZXJjYXNlIGZvcm0uXG5cdCAqL1xuXHRmdW5jdGlvbiBkaWdpdFRvQmFzaWMoZGlnaXQsIGZsYWcpIHtcblx0XHQvLyAgMC4uMjUgbWFwIHRvIEFTQ0lJIGEuLnogb3IgQS4uWlxuXHRcdC8vIDI2Li4zNSBtYXAgdG8gQVNDSUkgMC4uOVxuXHRcdHJldHVybiBkaWdpdCArIDIyICsgNzUgKiAoZGlnaXQgPCAyNikgLSAoKGZsYWcgIT0gMCkgPDwgNSk7XG5cdH1cblxuXHQvKipcblx0ICogQmlhcyBhZGFwdGF0aW9uIGZ1bmN0aW9uIGFzIHBlciBzZWN0aW9uIDMuNCBvZiBSRkMgMzQ5Mi5cblx0ICogaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzQ5MiNzZWN0aW9uLTMuNFxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gYWRhcHQoZGVsdGEsIG51bVBvaW50cywgZmlyc3RUaW1lKSB7XG5cdFx0dmFyIGsgPSAwO1xuXHRcdGRlbHRhID0gZmlyc3RUaW1lID8gZmxvb3IoZGVsdGEgLyBkYW1wKSA6IGRlbHRhID4+IDE7XG5cdFx0ZGVsdGEgKz0gZmxvb3IoZGVsdGEgLyBudW1Qb2ludHMpO1xuXHRcdGZvciAoLyogbm8gaW5pdGlhbGl6YXRpb24gKi87IGRlbHRhID4gYmFzZU1pbnVzVE1pbiAqIHRNYXggPj4gMTsgayArPSBiYXNlKSB7XG5cdFx0XHRkZWx0YSA9IGZsb29yKGRlbHRhIC8gYmFzZU1pbnVzVE1pbik7XG5cdFx0fVxuXHRcdHJldHVybiBmbG9vcihrICsgKGJhc2VNaW51c1RNaW4gKyAxKSAqIGRlbHRhIC8gKGRlbHRhICsgc2tldykpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scyB0byBhIHN0cmluZyBvZiBVbmljb2RlXG5cdCAqIHN5bWJvbHMuXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMuXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSByZXN1bHRpbmcgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scy5cblx0ICovXG5cdGZ1bmN0aW9uIGRlY29kZShpbnB1dCkge1xuXHRcdC8vIERvbid0IHVzZSBVQ1MtMlxuXHRcdHZhciBvdXRwdXQgPSBbXSxcblx0XHQgICAgaW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGgsXG5cdFx0ICAgIG91dCxcblx0XHQgICAgaSA9IDAsXG5cdFx0ICAgIG4gPSBpbml0aWFsTixcblx0XHQgICAgYmlhcyA9IGluaXRpYWxCaWFzLFxuXHRcdCAgICBiYXNpYyxcblx0XHQgICAgaixcblx0XHQgICAgaW5kZXgsXG5cdFx0ICAgIG9sZGksXG5cdFx0ICAgIHcsXG5cdFx0ICAgIGssXG5cdFx0ICAgIGRpZ2l0LFxuXHRcdCAgICB0LFxuXHRcdCAgICAvKiogQ2FjaGVkIGNhbGN1bGF0aW9uIHJlc3VsdHMgKi9cblx0XHQgICAgYmFzZU1pbnVzVDtcblxuXHRcdC8vIEhhbmRsZSB0aGUgYmFzaWMgY29kZSBwb2ludHM6IGxldCBgYmFzaWNgIGJlIHRoZSBudW1iZXIgb2YgaW5wdXQgY29kZVxuXHRcdC8vIHBvaW50cyBiZWZvcmUgdGhlIGxhc3QgZGVsaW1pdGVyLCBvciBgMGAgaWYgdGhlcmUgaXMgbm9uZSwgdGhlbiBjb3B5XG5cdFx0Ly8gdGhlIGZpcnN0IGJhc2ljIGNvZGUgcG9pbnRzIHRvIHRoZSBvdXRwdXQuXG5cblx0XHRiYXNpYyA9IGlucHV0Lmxhc3RJbmRleE9mKGRlbGltaXRlcik7XG5cdFx0aWYgKGJhc2ljIDwgMCkge1xuXHRcdFx0YmFzaWMgPSAwO1xuXHRcdH1cblxuXHRcdGZvciAoaiA9IDA7IGogPCBiYXNpYzsgKytqKSB7XG5cdFx0XHQvLyBpZiBpdCdzIG5vdCBhIGJhc2ljIGNvZGUgcG9pbnRcblx0XHRcdGlmIChpbnB1dC5jaGFyQ29kZUF0KGopID49IDB4ODApIHtcblx0XHRcdFx0ZXJyb3IoJ25vdC1iYXNpYycpO1xuXHRcdFx0fVxuXHRcdFx0b3V0cHV0LnB1c2goaW5wdXQuY2hhckNvZGVBdChqKSk7XG5cdFx0fVxuXG5cdFx0Ly8gTWFpbiBkZWNvZGluZyBsb29wOiBzdGFydCBqdXN0IGFmdGVyIHRoZSBsYXN0IGRlbGltaXRlciBpZiBhbnkgYmFzaWMgY29kZVxuXHRcdC8vIHBvaW50cyB3ZXJlIGNvcGllZDsgc3RhcnQgYXQgdGhlIGJlZ2lubmluZyBvdGhlcndpc2UuXG5cblx0XHRmb3IgKGluZGV4ID0gYmFzaWMgPiAwID8gYmFzaWMgKyAxIDogMDsgaW5kZXggPCBpbnB1dExlbmd0aDsgLyogbm8gZmluYWwgZXhwcmVzc2lvbiAqLykge1xuXG5cdFx0XHQvLyBgaW5kZXhgIGlzIHRoZSBpbmRleCBvZiB0aGUgbmV4dCBjaGFyYWN0ZXIgdG8gYmUgY29uc3VtZWQuXG5cdFx0XHQvLyBEZWNvZGUgYSBnZW5lcmFsaXplZCB2YXJpYWJsZS1sZW5ndGggaW50ZWdlciBpbnRvIGBkZWx0YWAsXG5cdFx0XHQvLyB3aGljaCBnZXRzIGFkZGVkIHRvIGBpYC4gVGhlIG92ZXJmbG93IGNoZWNraW5nIGlzIGVhc2llclxuXHRcdFx0Ly8gaWYgd2UgaW5jcmVhc2UgYGlgIGFzIHdlIGdvLCB0aGVuIHN1YnRyYWN0IG9mZiBpdHMgc3RhcnRpbmdcblx0XHRcdC8vIHZhbHVlIGF0IHRoZSBlbmQgdG8gb2J0YWluIGBkZWx0YWAuXG5cdFx0XHRmb3IgKG9sZGkgPSBpLCB3ID0gMSwgayA9IGJhc2U7IC8qIG5vIGNvbmRpdGlvbiAqLzsgayArPSBiYXNlKSB7XG5cblx0XHRcdFx0aWYgKGluZGV4ID49IGlucHV0TGVuZ3RoKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ2ludmFsaWQtaW5wdXQnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGRpZ2l0ID0gYmFzaWNUb0RpZ2l0KGlucHV0LmNoYXJDb2RlQXQoaW5kZXgrKykpO1xuXG5cdFx0XHRcdGlmIChkaWdpdCA+PSBiYXNlIHx8IGRpZ2l0ID4gZmxvb3IoKG1heEludCAtIGkpIC8gdykpIHtcblx0XHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGkgKz0gZGlnaXQgKiB3O1xuXHRcdFx0XHR0ID0gayA8PSBiaWFzID8gdE1pbiA6IChrID49IGJpYXMgKyB0TWF4ID8gdE1heCA6IGsgLSBiaWFzKTtcblxuXHRcdFx0XHRpZiAoZGlnaXQgPCB0KSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRiYXNlTWludXNUID0gYmFzZSAtIHQ7XG5cdFx0XHRcdGlmICh3ID4gZmxvb3IobWF4SW50IC8gYmFzZU1pbnVzVCkpIHtcblx0XHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHcgKj0gYmFzZU1pbnVzVDtcblxuXHRcdFx0fVxuXG5cdFx0XHRvdXQgPSBvdXRwdXQubGVuZ3RoICsgMTtcblx0XHRcdGJpYXMgPSBhZGFwdChpIC0gb2xkaSwgb3V0LCBvbGRpID09IDApO1xuXG5cdFx0XHQvLyBgaWAgd2FzIHN1cHBvc2VkIHRvIHdyYXAgYXJvdW5kIGZyb20gYG91dGAgdG8gYDBgLFxuXHRcdFx0Ly8gaW5jcmVtZW50aW5nIGBuYCBlYWNoIHRpbWUsIHNvIHdlJ2xsIGZpeCB0aGF0IG5vdzpcblx0XHRcdGlmIChmbG9vcihpIC8gb3V0KSA+IG1heEludCAtIG4pIHtcblx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHR9XG5cblx0XHRcdG4gKz0gZmxvb3IoaSAvIG91dCk7XG5cdFx0XHRpICU9IG91dDtcblxuXHRcdFx0Ly8gSW5zZXJ0IGBuYCBhdCBwb3NpdGlvbiBgaWAgb2YgdGhlIG91dHB1dFxuXHRcdFx0b3V0cHV0LnNwbGljZShpKyssIDAsIG4pO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHVjczJlbmNvZGUob3V0cHV0KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMgKGUuZy4gYSBkb21haW4gbmFtZSBsYWJlbCkgdG8gYVxuXHQgKiBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgcmVzdWx0aW5nIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBlbmNvZGUoaW5wdXQpIHtcblx0XHR2YXIgbixcblx0XHQgICAgZGVsdGEsXG5cdFx0ICAgIGhhbmRsZWRDUENvdW50LFxuXHRcdCAgICBiYXNpY0xlbmd0aCxcblx0XHQgICAgYmlhcyxcblx0XHQgICAgaixcblx0XHQgICAgbSxcblx0XHQgICAgcSxcblx0XHQgICAgayxcblx0XHQgICAgdCxcblx0XHQgICAgY3VycmVudFZhbHVlLFxuXHRcdCAgICBvdXRwdXQgPSBbXSxcblx0XHQgICAgLyoqIGBpbnB1dExlbmd0aGAgd2lsbCBob2xkIHRoZSBudW1iZXIgb2YgY29kZSBwb2ludHMgaW4gYGlucHV0YC4gKi9cblx0XHQgICAgaW5wdXRMZW5ndGgsXG5cdFx0ICAgIC8qKiBDYWNoZWQgY2FsY3VsYXRpb24gcmVzdWx0cyAqL1xuXHRcdCAgICBoYW5kbGVkQ1BDb3VudFBsdXNPbmUsXG5cdFx0ICAgIGJhc2VNaW51c1QsXG5cdFx0ICAgIHFNaW51c1Q7XG5cblx0XHQvLyBDb252ZXJ0IHRoZSBpbnB1dCBpbiBVQ1MtMiB0byBVbmljb2RlXG5cdFx0aW5wdXQgPSB1Y3MyZGVjb2RlKGlucHV0KTtcblxuXHRcdC8vIENhY2hlIHRoZSBsZW5ndGhcblx0XHRpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aDtcblxuXHRcdC8vIEluaXRpYWxpemUgdGhlIHN0YXRlXG5cdFx0biA9IGluaXRpYWxOO1xuXHRcdGRlbHRhID0gMDtcblx0XHRiaWFzID0gaW5pdGlhbEJpYXM7XG5cblx0XHQvLyBIYW5kbGUgdGhlIGJhc2ljIGNvZGUgcG9pbnRzXG5cdFx0Zm9yIChqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHtcblx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXHRcdFx0aWYgKGN1cnJlbnRWYWx1ZSA8IDB4ODApIHtcblx0XHRcdFx0b3V0cHV0LnB1c2goc3RyaW5nRnJvbUNoYXJDb2RlKGN1cnJlbnRWYWx1ZSkpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGhhbmRsZWRDUENvdW50ID0gYmFzaWNMZW5ndGggPSBvdXRwdXQubGVuZ3RoO1xuXG5cdFx0Ly8gYGhhbmRsZWRDUENvdW50YCBpcyB0aGUgbnVtYmVyIG9mIGNvZGUgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIGhhbmRsZWQ7XG5cdFx0Ly8gYGJhc2ljTGVuZ3RoYCBpcyB0aGUgbnVtYmVyIG9mIGJhc2ljIGNvZGUgcG9pbnRzLlxuXG5cdFx0Ly8gRmluaXNoIHRoZSBiYXNpYyBzdHJpbmcgLSBpZiBpdCBpcyBub3QgZW1wdHkgLSB3aXRoIGEgZGVsaW1pdGVyXG5cdFx0aWYgKGJhc2ljTGVuZ3RoKSB7XG5cdFx0XHRvdXRwdXQucHVzaChkZWxpbWl0ZXIpO1xuXHRcdH1cblxuXHRcdC8vIE1haW4gZW5jb2RpbmcgbG9vcDpcblx0XHR3aGlsZSAoaGFuZGxlZENQQ291bnQgPCBpbnB1dExlbmd0aCkge1xuXG5cdFx0XHQvLyBBbGwgbm9uLWJhc2ljIGNvZGUgcG9pbnRzIDwgbiBoYXZlIGJlZW4gaGFuZGxlZCBhbHJlYWR5LiBGaW5kIHRoZSBuZXh0XG5cdFx0XHQvLyBsYXJnZXIgb25lOlxuXHRcdFx0Zm9yIChtID0gbWF4SW50LCBqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHtcblx0XHRcdFx0Y3VycmVudFZhbHVlID0gaW5wdXRbal07XG5cdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPj0gbiAmJiBjdXJyZW50VmFsdWUgPCBtKSB7XG5cdFx0XHRcdFx0bSA9IGN1cnJlbnRWYWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBJbmNyZWFzZSBgZGVsdGFgIGVub3VnaCB0byBhZHZhbmNlIHRoZSBkZWNvZGVyJ3MgPG4saT4gc3RhdGUgdG8gPG0sMD4sXG5cdFx0XHQvLyBidXQgZ3VhcmQgYWdhaW5zdCBvdmVyZmxvd1xuXHRcdFx0aGFuZGxlZENQQ291bnRQbHVzT25lID0gaGFuZGxlZENQQ291bnQgKyAxO1xuXHRcdFx0aWYgKG0gLSBuID4gZmxvb3IoKG1heEludCAtIGRlbHRhKSAvIGhhbmRsZWRDUENvdW50UGx1c09uZSkpIHtcblx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHR9XG5cblx0XHRcdGRlbHRhICs9IChtIC0gbikgKiBoYW5kbGVkQ1BDb3VudFBsdXNPbmU7XG5cdFx0XHRuID0gbTtcblxuXHRcdFx0Zm9yIChqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHtcblx0XHRcdFx0Y3VycmVudFZhbHVlID0gaW5wdXRbal07XG5cblx0XHRcdFx0aWYgKGN1cnJlbnRWYWx1ZSA8IG4gJiYgKytkZWx0YSA+IG1heEludCkge1xuXHRcdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGN1cnJlbnRWYWx1ZSA9PSBuKSB7XG5cdFx0XHRcdFx0Ly8gUmVwcmVzZW50IGRlbHRhIGFzIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXJcblx0XHRcdFx0XHRmb3IgKHEgPSBkZWx0YSwgayA9IGJhc2U7IC8qIG5vIGNvbmRpdGlvbiAqLzsgayArPSBiYXNlKSB7XG5cdFx0XHRcdFx0XHR0ID0gayA8PSBiaWFzID8gdE1pbiA6IChrID49IGJpYXMgKyB0TWF4ID8gdE1heCA6IGsgLSBiaWFzKTtcblx0XHRcdFx0XHRcdGlmIChxIDwgdCkge1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHFNaW51c1QgPSBxIC0gdDtcblx0XHRcdFx0XHRcdGJhc2VNaW51c1QgPSBiYXNlIC0gdDtcblx0XHRcdFx0XHRcdG91dHB1dC5wdXNoKFxuXHRcdFx0XHRcdFx0XHRzdHJpbmdGcm9tQ2hhckNvZGUoZGlnaXRUb0Jhc2ljKHQgKyBxTWludXNUICUgYmFzZU1pbnVzVCwgMCkpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0cSA9IGZsb29yKHFNaW51c1QgLyBiYXNlTWludXNUKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRvdXRwdXQucHVzaChzdHJpbmdGcm9tQ2hhckNvZGUoZGlnaXRUb0Jhc2ljKHEsIDApKSk7XG5cdFx0XHRcdFx0YmlhcyA9IGFkYXB0KGRlbHRhLCBoYW5kbGVkQ1BDb3VudFBsdXNPbmUsIGhhbmRsZWRDUENvdW50ID09IGJhc2ljTGVuZ3RoKTtcblx0XHRcdFx0XHRkZWx0YSA9IDA7XG5cdFx0XHRcdFx0KytoYW5kbGVkQ1BDb3VudDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQrK2RlbHRhO1xuXHRcdFx0KytuO1xuXG5cdFx0fVxuXHRcdHJldHVybiBvdXRwdXQuam9pbignJyk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBQdW55Y29kZSBzdHJpbmcgcmVwcmVzZW50aW5nIGEgZG9tYWluIG5hbWUgb3IgYW4gZW1haWwgYWRkcmVzc1xuXHQgKiB0byBVbmljb2RlLiBPbmx5IHRoZSBQdW55Y29kZWQgcGFydHMgb2YgdGhlIGlucHV0IHdpbGwgYmUgY29udmVydGVkLCBpLmUuXG5cdCAqIGl0IGRvZXNuJ3QgbWF0dGVyIGlmIHlvdSBjYWxsIGl0IG9uIGEgc3RyaW5nIHRoYXQgaGFzIGFscmVhZHkgYmVlblxuXHQgKiBjb252ZXJ0ZWQgdG8gVW5pY29kZS5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgUHVueWNvZGVkIGRvbWFpbiBuYW1lIG9yIGVtYWlsIGFkZHJlc3MgdG9cblx0ICogY29udmVydCB0byBVbmljb2RlLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgVW5pY29kZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgZ2l2ZW4gUHVueWNvZGVcblx0ICogc3RyaW5nLlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9Vbmljb2RlKGlucHV0KSB7XG5cdFx0cmV0dXJuIG1hcERvbWFpbihpbnB1dCwgZnVuY3Rpb24oc3RyaW5nKSB7XG5cdFx0XHRyZXR1cm4gcmVnZXhQdW55Y29kZS50ZXN0KHN0cmluZylcblx0XHRcdFx0PyBkZWNvZGUoc3RyaW5nLnNsaWNlKDQpLnRvTG93ZXJDYXNlKCkpXG5cdFx0XHRcdDogc3RyaW5nO1xuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgVW5pY29kZSBzdHJpbmcgcmVwcmVzZW50aW5nIGEgZG9tYWluIG5hbWUgb3IgYW4gZW1haWwgYWRkcmVzcyB0b1xuXHQgKiBQdW55Y29kZS4gT25seSB0aGUgbm9uLUFTQ0lJIHBhcnRzIG9mIHRoZSBkb21haW4gbmFtZSB3aWxsIGJlIGNvbnZlcnRlZCxcblx0ICogaS5lLiBpdCBkb2Vzbid0IG1hdHRlciBpZiB5b3UgY2FsbCBpdCB3aXRoIGEgZG9tYWluIHRoYXQncyBhbHJlYWR5IGluXG5cdCAqIEFTQ0lJLlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzIHRvIGNvbnZlcnQsIGFzIGFcblx0ICogVW5pY29kZSBzdHJpbmcuXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBQdW55Y29kZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgZ2l2ZW4gZG9tYWluIG5hbWUgb3Jcblx0ICogZW1haWwgYWRkcmVzcy5cblx0ICovXG5cdGZ1bmN0aW9uIHRvQVNDSUkoaW5wdXQpIHtcblx0XHRyZXR1cm4gbWFwRG9tYWluKGlucHV0LCBmdW5jdGlvbihzdHJpbmcpIHtcblx0XHRcdHJldHVybiByZWdleE5vbkFTQ0lJLnRlc3Qoc3RyaW5nKVxuXHRcdFx0XHQ/ICd4bi0tJyArIGVuY29kZShzdHJpbmcpXG5cdFx0XHRcdDogc3RyaW5nO1xuXHRcdH0pO1xuXHR9XG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0LyoqIERlZmluZSB0aGUgcHVibGljIEFQSSAqL1xuXHRwdW55Y29kZSA9IHtcblx0XHQvKipcblx0XHQgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgUHVueWNvZGUuanMgdmVyc2lvbiBudW1iZXIuXG5cdFx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdFx0ICogQHR5cGUgU3RyaW5nXG5cdFx0ICovXG5cdFx0J3ZlcnNpb24nOiAnMS4zLjInLFxuXHRcdC8qKlxuXHRcdCAqIEFuIG9iamVjdCBvZiBtZXRob2RzIHRvIGNvbnZlcnQgZnJvbSBKYXZhU2NyaXB0J3MgaW50ZXJuYWwgY2hhcmFjdGVyXG5cdFx0ICogcmVwcmVzZW50YXRpb24gKFVDUy0yKSB0byBVbmljb2RlIGNvZGUgcG9pbnRzLCBhbmQgYmFjay5cblx0XHQgKiBAc2VlIDxodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZz5cblx0XHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0XHQgKiBAdHlwZSBPYmplY3Rcblx0XHQgKi9cblx0XHQndWNzMic6IHtcblx0XHRcdCdkZWNvZGUnOiB1Y3MyZGVjb2RlLFxuXHRcdFx0J2VuY29kZSc6IHVjczJlbmNvZGVcblx0XHR9LFxuXHRcdCdkZWNvZGUnOiBkZWNvZGUsXG5cdFx0J2VuY29kZSc6IGVuY29kZSxcblx0XHQndG9BU0NJSSc6IHRvQVNDSUksXG5cdFx0J3RvVW5pY29kZSc6IHRvVW5pY29kZVxuXHR9O1xuXG5cdC8qKiBFeHBvc2UgYHB1bnljb2RlYCAqL1xuXHQvLyBTb21lIEFNRCBidWlsZCBvcHRpbWl6ZXJzLCBsaWtlIHIuanMsIGNoZWNrIGZvciBzcGVjaWZpYyBjb25kaXRpb24gcGF0dGVybnNcblx0Ly8gbGlrZSB0aGUgZm9sbG93aW5nOlxuXHRpZiAoXG5cdFx0dHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmXG5cdFx0dHlwZW9mIGRlZmluZS5hbWQgPT0gJ29iamVjdCcgJiZcblx0XHRkZWZpbmUuYW1kXG5cdCkge1xuXHRcdGRlZmluZSgncHVueWNvZGUnLCBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBwdW55Y29kZTtcblx0XHR9KTtcblx0fSBlbHNlIGlmIChmcmVlRXhwb3J0cyAmJiBmcmVlTW9kdWxlKSB7XG5cdFx0aWYgKG1vZHVsZS5leHBvcnRzID09IGZyZWVFeHBvcnRzKSB7IC8vIGluIE5vZGUuanMgb3IgUmluZ29KUyB2MC44LjArXG5cdFx0XHRmcmVlTW9kdWxlLmV4cG9ydHMgPSBwdW55Y29kZTtcblx0XHR9IGVsc2UgeyAvLyBpbiBOYXJ3aGFsIG9yIFJpbmdvSlMgdjAuNy4wLVxuXHRcdFx0Zm9yIChrZXkgaW4gcHVueWNvZGUpIHtcblx0XHRcdFx0cHVueWNvZGUuaGFzT3duUHJvcGVydHkoa2V5KSAmJiAoZnJlZUV4cG9ydHNba2V5XSA9IHB1bnljb2RlW2tleV0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fSBlbHNlIHsgLy8gaW4gUmhpbm8gb3IgYSB3ZWIgYnJvd3NlclxuXHRcdHJvb3QucHVueWNvZGUgPSBwdW55Y29kZTtcblx0fVxuXG59KHRoaXMpKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9wdW55Y29kZS9wdW55Y29kZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vLyBJZiBvYmouaGFzT3duUHJvcGVydHkgaGFzIGJlZW4gb3ZlcnJpZGRlbiwgdGhlbiBjYWxsaW5nXG4vLyBvYmouaGFzT3duUHJvcGVydHkocHJvcCkgd2lsbCBicmVhay5cbi8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2pveWVudC9ub2RlL2lzc3Vlcy8xNzA3XG5mdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHFzLCBzZXAsIGVxLCBvcHRpb25zKSB7XG4gIHNlcCA9IHNlcCB8fCAnJic7XG4gIGVxID0gZXEgfHwgJz0nO1xuICB2YXIgb2JqID0ge307XG5cbiAgaWYgKHR5cGVvZiBxcyAhPT0gJ3N0cmluZycgfHwgcXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIHZhciByZWdleHAgPSAvXFwrL2c7XG4gIHFzID0gcXMuc3BsaXQoc2VwKTtcblxuICB2YXIgbWF4S2V5cyA9IDEwMDA7XG4gIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLm1heEtleXMgPT09ICdudW1iZXInKSB7XG4gICAgbWF4S2V5cyA9IG9wdGlvbnMubWF4S2V5cztcbiAgfVxuXG4gIHZhciBsZW4gPSBxcy5sZW5ndGg7XG4gIC8vIG1heEtleXMgPD0gMCBtZWFucyB0aGF0IHdlIHNob3VsZCBub3QgbGltaXQga2V5cyBjb3VudFxuICBpZiAobWF4S2V5cyA+IDAgJiYgbGVuID4gbWF4S2V5cykge1xuICAgIGxlbiA9IG1heEtleXM7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgdmFyIHggPSBxc1tpXS5yZXBsYWNlKHJlZ2V4cCwgJyUyMCcpLFxuICAgICAgICBpZHggPSB4LmluZGV4T2YoZXEpLFxuICAgICAgICBrc3RyLCB2c3RyLCBrLCB2O1xuXG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICBrc3RyID0geC5zdWJzdHIoMCwgaWR4KTtcbiAgICAgIHZzdHIgPSB4LnN1YnN0cihpZHggKyAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAga3N0ciA9IHg7XG4gICAgICB2c3RyID0gJyc7XG4gICAgfVxuXG4gICAgayA9IGRlY29kZVVSSUNvbXBvbmVudChrc3RyKTtcbiAgICB2ID0gZGVjb2RlVVJJQ29tcG9uZW50KHZzdHIpO1xuXG4gICAgaWYgKCFoYXNPd25Qcm9wZXJ0eShvYmosIGspKSB7XG4gICAgICBvYmpba10gPSB2O1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShvYmpba10pKSB7XG4gICAgICBvYmpba10ucHVzaCh2KTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2JqW2tdID0gW29ialtrXSwgdl07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9iajtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vdXJsL34vcXVlcnlzdHJpbmcvZGVjb2RlLmpzXG4gKiogbW9kdWxlIGlkID0gNDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBzdHJpbmdpZnlQcmltaXRpdmUgPSBmdW5jdGlvbih2KSB7XG4gIHN3aXRjaCAodHlwZW9mIHYpIHtcbiAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgcmV0dXJuIHY7XG5cbiAgICBjYXNlICdib29sZWFuJzpcbiAgICAgIHJldHVybiB2ID8gJ3RydWUnIDogJ2ZhbHNlJztcblxuICAgIGNhc2UgJ251bWJlcic6XG4gICAgICByZXR1cm4gaXNGaW5pdGUodikgPyB2IDogJyc7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICcnO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaiwgc2VwLCBlcSwgbmFtZSkge1xuICBzZXAgPSBzZXAgfHwgJyYnO1xuICBlcSA9IGVxIHx8ICc9JztcbiAgaWYgKG9iaiA9PT0gbnVsbCkge1xuICAgIG9iaiA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLm1hcChmdW5jdGlvbihrKSB7XG4gICAgICB2YXIga3MgPSBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKGspKSArIGVxO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqW2tdKSkge1xuICAgICAgICByZXR1cm4gb2JqW2tdLm1hcChmdW5jdGlvbih2KSB7XG4gICAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZSh2KSk7XG4gICAgICAgIH0pLmpvaW4oc2VwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBrcyArIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUob2JqW2tdKSk7XG4gICAgICB9XG4gICAgfSkuam9pbihzZXApO1xuXG4gIH1cblxuICBpZiAoIW5hbWUpIHJldHVybiAnJztcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUobmFtZSkpICsgZXEgK1xuICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmopKTtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vdXJsL34vcXVlcnlzdHJpbmcvZW5jb2RlLmpzXG4gKiogbW9kdWxlIGlkID0gNDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5kZWNvZGUgPSBleHBvcnRzLnBhcnNlID0gcmVxdWlyZSgnLi9kZWNvZGUnKTtcbmV4cG9ydHMuZW5jb2RlID0gZXhwb3J0cy5zdHJpbmdpZnkgPSByZXF1aXJlKCcuL2VuY29kZScpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3VybC9+L3F1ZXJ5c3RyaW5nL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gNDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG52YXIgcHVueWNvZGUgPSByZXF1aXJlKCdwdW55Y29kZScpO1xuXG5leHBvcnRzLnBhcnNlID0gdXJsUGFyc2U7XG5leHBvcnRzLnJlc29sdmUgPSB1cmxSZXNvbHZlO1xuZXhwb3J0cy5yZXNvbHZlT2JqZWN0ID0gdXJsUmVzb2x2ZU9iamVjdDtcbmV4cG9ydHMuZm9ybWF0ID0gdXJsRm9ybWF0O1xuXG5leHBvcnRzLlVybCA9IFVybDtcblxuZnVuY3Rpb24gVXJsKCkge1xuICB0aGlzLnByb3RvY29sID0gbnVsbDtcbiAgdGhpcy5zbGFzaGVzID0gbnVsbDtcbiAgdGhpcy5hdXRoID0gbnVsbDtcbiAgdGhpcy5ob3N0ID0gbnVsbDtcbiAgdGhpcy5wb3J0ID0gbnVsbDtcbiAgdGhpcy5ob3N0bmFtZSA9IG51bGw7XG4gIHRoaXMuaGFzaCA9IG51bGw7XG4gIHRoaXMuc2VhcmNoID0gbnVsbDtcbiAgdGhpcy5xdWVyeSA9IG51bGw7XG4gIHRoaXMucGF0aG5hbWUgPSBudWxsO1xuICB0aGlzLnBhdGggPSBudWxsO1xuICB0aGlzLmhyZWYgPSBudWxsO1xufVxuXG4vLyBSZWZlcmVuY2U6IFJGQyAzOTg2LCBSRkMgMTgwOCwgUkZDIDIzOTZcblxuLy8gZGVmaW5lIHRoZXNlIGhlcmUgc28gYXQgbGVhc3QgdGhleSBvbmx5IGhhdmUgdG8gYmVcbi8vIGNvbXBpbGVkIG9uY2Ugb24gdGhlIGZpcnN0IG1vZHVsZSBsb2FkLlxudmFyIHByb3RvY29sUGF0dGVybiA9IC9eKFthLXowLTkuKy1dKzopL2ksXG4gICAgcG9ydFBhdHRlcm4gPSAvOlswLTldKiQvLFxuXG4gICAgLy8gUkZDIDIzOTY6IGNoYXJhY3RlcnMgcmVzZXJ2ZWQgZm9yIGRlbGltaXRpbmcgVVJMcy5cbiAgICAvLyBXZSBhY3R1YWxseSBqdXN0IGF1dG8tZXNjYXBlIHRoZXNlLlxuICAgIGRlbGltcyA9IFsnPCcsICc+JywgJ1wiJywgJ2AnLCAnICcsICdcXHInLCAnXFxuJywgJ1xcdCddLFxuXG4gICAgLy8gUkZDIDIzOTY6IGNoYXJhY3RlcnMgbm90IGFsbG93ZWQgZm9yIHZhcmlvdXMgcmVhc29ucy5cbiAgICB1bndpc2UgPSBbJ3snLCAnfScsICd8JywgJ1xcXFwnLCAnXicsICdgJ10uY29uY2F0KGRlbGltcyksXG5cbiAgICAvLyBBbGxvd2VkIGJ5IFJGQ3MsIGJ1dCBjYXVzZSBvZiBYU1MgYXR0YWNrcy4gIEFsd2F5cyBlc2NhcGUgdGhlc2UuXG4gICAgYXV0b0VzY2FwZSA9IFsnXFwnJ10uY29uY2F0KHVud2lzZSksXG4gICAgLy8gQ2hhcmFjdGVycyB0aGF0IGFyZSBuZXZlciBldmVyIGFsbG93ZWQgaW4gYSBob3N0bmFtZS5cbiAgICAvLyBOb3RlIHRoYXQgYW55IGludmFsaWQgY2hhcnMgYXJlIGFsc28gaGFuZGxlZCwgYnV0IHRoZXNlXG4gICAgLy8gYXJlIHRoZSBvbmVzIHRoYXQgYXJlICpleHBlY3RlZCogdG8gYmUgc2Vlbiwgc28gd2UgZmFzdC1wYXRoXG4gICAgLy8gdGhlbS5cbiAgICBub25Ib3N0Q2hhcnMgPSBbJyUnLCAnLycsICc/JywgJzsnLCAnIyddLmNvbmNhdChhdXRvRXNjYXBlKSxcbiAgICBob3N0RW5kaW5nQ2hhcnMgPSBbJy8nLCAnPycsICcjJ10sXG4gICAgaG9zdG5hbWVNYXhMZW4gPSAyNTUsXG4gICAgaG9zdG5hbWVQYXJ0UGF0dGVybiA9IC9eW2EtejAtOUEtWl8tXXswLDYzfSQvLFxuICAgIGhvc3RuYW1lUGFydFN0YXJ0ID0gL14oW2EtejAtOUEtWl8tXXswLDYzfSkoLiopJC8sXG4gICAgLy8gcHJvdG9jb2xzIHRoYXQgY2FuIGFsbG93IFwidW5zYWZlXCIgYW5kIFwidW53aXNlXCIgY2hhcnMuXG4gICAgdW5zYWZlUHJvdG9jb2wgPSB7XG4gICAgICAnamF2YXNjcmlwdCc6IHRydWUsXG4gICAgICAnamF2YXNjcmlwdDonOiB0cnVlXG4gICAgfSxcbiAgICAvLyBwcm90b2NvbHMgdGhhdCBuZXZlciBoYXZlIGEgaG9zdG5hbWUuXG4gICAgaG9zdGxlc3NQcm90b2NvbCA9IHtcbiAgICAgICdqYXZhc2NyaXB0JzogdHJ1ZSxcbiAgICAgICdqYXZhc2NyaXB0Oic6IHRydWVcbiAgICB9LFxuICAgIC8vIHByb3RvY29scyB0aGF0IGFsd2F5cyBjb250YWluIGEgLy8gYml0LlxuICAgIHNsYXNoZWRQcm90b2NvbCA9IHtcbiAgICAgICdodHRwJzogdHJ1ZSxcbiAgICAgICdodHRwcyc6IHRydWUsXG4gICAgICAnZnRwJzogdHJ1ZSxcbiAgICAgICdnb3BoZXInOiB0cnVlLFxuICAgICAgJ2ZpbGUnOiB0cnVlLFxuICAgICAgJ2h0dHA6JzogdHJ1ZSxcbiAgICAgICdodHRwczonOiB0cnVlLFxuICAgICAgJ2Z0cDonOiB0cnVlLFxuICAgICAgJ2dvcGhlcjonOiB0cnVlLFxuICAgICAgJ2ZpbGU6JzogdHJ1ZVxuICAgIH0sXG4gICAgcXVlcnlzdHJpbmcgPSByZXF1aXJlKCdxdWVyeXN0cmluZycpO1xuXG5mdW5jdGlvbiB1cmxQYXJzZSh1cmwsIHBhcnNlUXVlcnlTdHJpbmcsIHNsYXNoZXNEZW5vdGVIb3N0KSB7XG4gIGlmICh1cmwgJiYgaXNPYmplY3QodXJsKSAmJiB1cmwgaW5zdGFuY2VvZiBVcmwpIHJldHVybiB1cmw7XG5cbiAgdmFyIHUgPSBuZXcgVXJsO1xuICB1LnBhcnNlKHVybCwgcGFyc2VRdWVyeVN0cmluZywgc2xhc2hlc0Rlbm90ZUhvc3QpO1xuICByZXR1cm4gdTtcbn1cblxuVXJsLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uKHVybCwgcGFyc2VRdWVyeVN0cmluZywgc2xhc2hlc0Rlbm90ZUhvc3QpIHtcbiAgaWYgKCFpc1N0cmluZyh1cmwpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlBhcmFtZXRlciAndXJsJyBtdXN0IGJlIGEgc3RyaW5nLCBub3QgXCIgKyB0eXBlb2YgdXJsKTtcbiAgfVxuXG4gIHZhciByZXN0ID0gdXJsO1xuXG4gIC8vIHRyaW0gYmVmb3JlIHByb2NlZWRpbmcuXG4gIC8vIFRoaXMgaXMgdG8gc3VwcG9ydCBwYXJzZSBzdHVmZiBsaWtlIFwiICBodHRwOi8vZm9vLmNvbSAgXFxuXCJcbiAgcmVzdCA9IHJlc3QudHJpbSgpO1xuXG4gIHZhciBwcm90byA9IHByb3RvY29sUGF0dGVybi5leGVjKHJlc3QpO1xuICBpZiAocHJvdG8pIHtcbiAgICBwcm90byA9IHByb3RvWzBdO1xuICAgIHZhciBsb3dlclByb3RvID0gcHJvdG8udG9Mb3dlckNhc2UoKTtcbiAgICB0aGlzLnByb3RvY29sID0gbG93ZXJQcm90bztcbiAgICByZXN0ID0gcmVzdC5zdWJzdHIocHJvdG8ubGVuZ3RoKTtcbiAgfVxuXG4gIC8vIGZpZ3VyZSBvdXQgaWYgaXQncyBnb3QgYSBob3N0XG4gIC8vIHVzZXJAc2VydmVyIGlzICphbHdheXMqIGludGVycHJldGVkIGFzIGEgaG9zdG5hbWUsIGFuZCB1cmxcbiAgLy8gcmVzb2x1dGlvbiB3aWxsIHRyZWF0IC8vZm9vL2JhciBhcyBob3N0PWZvbyxwYXRoPWJhciBiZWNhdXNlIHRoYXQnc1xuICAvLyBob3cgdGhlIGJyb3dzZXIgcmVzb2x2ZXMgcmVsYXRpdmUgVVJMcy5cbiAgaWYgKHNsYXNoZXNEZW5vdGVIb3N0IHx8IHByb3RvIHx8IHJlc3QubWF0Y2goL15cXC9cXC9bXkBcXC9dK0BbXkBcXC9dKy8pKSB7XG4gICAgdmFyIHNsYXNoZXMgPSByZXN0LnN1YnN0cigwLCAyKSA9PT0gJy8vJztcbiAgICBpZiAoc2xhc2hlcyAmJiAhKHByb3RvICYmIGhvc3RsZXNzUHJvdG9jb2xbcHJvdG9dKSkge1xuICAgICAgcmVzdCA9IHJlc3Quc3Vic3RyKDIpO1xuICAgICAgdGhpcy5zbGFzaGVzID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWhvc3RsZXNzUHJvdG9jb2xbcHJvdG9dICYmXG4gICAgICAoc2xhc2hlcyB8fCAocHJvdG8gJiYgIXNsYXNoZWRQcm90b2NvbFtwcm90b10pKSkge1xuXG4gICAgLy8gdGhlcmUncyBhIGhvc3RuYW1lLlxuICAgIC8vIHRoZSBmaXJzdCBpbnN0YW5jZSBvZiAvLCA/LCA7LCBvciAjIGVuZHMgdGhlIGhvc3QuXG4gICAgLy9cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBAIGluIHRoZSBob3N0bmFtZSwgdGhlbiBub24taG9zdCBjaGFycyAqYXJlKiBhbGxvd2VkXG4gICAgLy8gdG8gdGhlIGxlZnQgb2YgdGhlIGxhc3QgQCBzaWduLCB1bmxlc3Mgc29tZSBob3N0LWVuZGluZyBjaGFyYWN0ZXJcbiAgICAvLyBjb21lcyAqYmVmb3JlKiB0aGUgQC1zaWduLlxuICAgIC8vIFVSTHMgYXJlIG9ibm94aW91cy5cbiAgICAvL1xuICAgIC8vIGV4OlxuICAgIC8vIGh0dHA6Ly9hQGJAYy8gPT4gdXNlcjphQGIgaG9zdDpjXG4gICAgLy8gaHR0cDovL2FAYj9AYyA9PiB1c2VyOmEgaG9zdDpjIHBhdGg6Lz9AY1xuXG4gICAgLy8gdjAuMTIgVE9ETyhpc2FhY3MpOiBUaGlzIGlzIG5vdCBxdWl0ZSBob3cgQ2hyb21lIGRvZXMgdGhpbmdzLlxuICAgIC8vIFJldmlldyBvdXIgdGVzdCBjYXNlIGFnYWluc3QgYnJvd3NlcnMgbW9yZSBjb21wcmVoZW5zaXZlbHkuXG5cbiAgICAvLyBmaW5kIHRoZSBmaXJzdCBpbnN0YW5jZSBvZiBhbnkgaG9zdEVuZGluZ0NoYXJzXG4gICAgdmFyIGhvc3RFbmQgPSAtMTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhvc3RFbmRpbmdDaGFycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGhlYyA9IHJlc3QuaW5kZXhPZihob3N0RW5kaW5nQ2hhcnNbaV0pO1xuICAgICAgaWYgKGhlYyAhPT0gLTEgJiYgKGhvc3RFbmQgPT09IC0xIHx8IGhlYyA8IGhvc3RFbmQpKVxuICAgICAgICBob3N0RW5kID0gaGVjO1xuICAgIH1cblxuICAgIC8vIGF0IHRoaXMgcG9pbnQsIGVpdGhlciB3ZSBoYXZlIGFuIGV4cGxpY2l0IHBvaW50IHdoZXJlIHRoZVxuICAgIC8vIGF1dGggcG9ydGlvbiBjYW5ub3QgZ28gcGFzdCwgb3IgdGhlIGxhc3QgQCBjaGFyIGlzIHRoZSBkZWNpZGVyLlxuICAgIHZhciBhdXRoLCBhdFNpZ247XG4gICAgaWYgKGhvc3RFbmQgPT09IC0xKSB7XG4gICAgICAvLyBhdFNpZ24gY2FuIGJlIGFueXdoZXJlLlxuICAgICAgYXRTaWduID0gcmVzdC5sYXN0SW5kZXhPZignQCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBhdFNpZ24gbXVzdCBiZSBpbiBhdXRoIHBvcnRpb24uXG4gICAgICAvLyBodHRwOi8vYUBiL2NAZCA9PiBob3N0OmIgYXV0aDphIHBhdGg6L2NAZFxuICAgICAgYXRTaWduID0gcmVzdC5sYXN0SW5kZXhPZignQCcsIGhvc3RFbmQpO1xuICAgIH1cblxuICAgIC8vIE5vdyB3ZSBoYXZlIGEgcG9ydGlvbiB3aGljaCBpcyBkZWZpbml0ZWx5IHRoZSBhdXRoLlxuICAgIC8vIFB1bGwgdGhhdCBvZmYuXG4gICAgaWYgKGF0U2lnbiAhPT0gLTEpIHtcbiAgICAgIGF1dGggPSByZXN0LnNsaWNlKDAsIGF0U2lnbik7XG4gICAgICByZXN0ID0gcmVzdC5zbGljZShhdFNpZ24gKyAxKTtcbiAgICAgIHRoaXMuYXV0aCA9IGRlY29kZVVSSUNvbXBvbmVudChhdXRoKTtcbiAgICB9XG5cbiAgICAvLyB0aGUgaG9zdCBpcyB0aGUgcmVtYWluaW5nIHRvIHRoZSBsZWZ0IG9mIHRoZSBmaXJzdCBub24taG9zdCBjaGFyXG4gICAgaG9zdEVuZCA9IC0xO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9uSG9zdENoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaGVjID0gcmVzdC5pbmRleE9mKG5vbkhvc3RDaGFyc1tpXSk7XG4gICAgICBpZiAoaGVjICE9PSAtMSAmJiAoaG9zdEVuZCA9PT0gLTEgfHwgaGVjIDwgaG9zdEVuZCkpXG4gICAgICAgIGhvc3RFbmQgPSBoZWM7XG4gICAgfVxuICAgIC8vIGlmIHdlIHN0aWxsIGhhdmUgbm90IGhpdCBpdCwgdGhlbiB0aGUgZW50aXJlIHRoaW5nIGlzIGEgaG9zdC5cbiAgICBpZiAoaG9zdEVuZCA9PT0gLTEpXG4gICAgICBob3N0RW5kID0gcmVzdC5sZW5ndGg7XG5cbiAgICB0aGlzLmhvc3QgPSByZXN0LnNsaWNlKDAsIGhvc3RFbmQpO1xuICAgIHJlc3QgPSByZXN0LnNsaWNlKGhvc3RFbmQpO1xuXG4gICAgLy8gcHVsbCBvdXQgcG9ydC5cbiAgICB0aGlzLnBhcnNlSG9zdCgpO1xuXG4gICAgLy8gd2UndmUgaW5kaWNhdGVkIHRoYXQgdGhlcmUgaXMgYSBob3N0bmFtZSxcbiAgICAvLyBzbyBldmVuIGlmIGl0J3MgZW1wdHksIGl0IGhhcyB0byBiZSBwcmVzZW50LlxuICAgIHRoaXMuaG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lIHx8ICcnO1xuXG4gICAgLy8gaWYgaG9zdG5hbWUgYmVnaW5zIHdpdGggWyBhbmQgZW5kcyB3aXRoIF1cbiAgICAvLyBhc3N1bWUgdGhhdCBpdCdzIGFuIElQdjYgYWRkcmVzcy5cbiAgICB2YXIgaXB2Nkhvc3RuYW1lID0gdGhpcy5ob3N0bmFtZVswXSA9PT0gJ1snICYmXG4gICAgICAgIHRoaXMuaG9zdG5hbWVbdGhpcy5ob3N0bmFtZS5sZW5ndGggLSAxXSA9PT0gJ10nO1xuXG4gICAgLy8gdmFsaWRhdGUgYSBsaXR0bGUuXG4gICAgaWYgKCFpcHY2SG9zdG5hbWUpIHtcbiAgICAgIHZhciBob3N0cGFydHMgPSB0aGlzLmhvc3RuYW1lLnNwbGl0KC9cXC4vKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gaG9zdHBhcnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgcGFydCA9IGhvc3RwYXJ0c1tpXTtcbiAgICAgICAgaWYgKCFwYXJ0KSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFwYXJ0Lm1hdGNoKGhvc3RuYW1lUGFydFBhdHRlcm4pKSB7XG4gICAgICAgICAgdmFyIG5ld3BhcnQgPSAnJztcbiAgICAgICAgICBmb3IgKHZhciBqID0gMCwgayA9IHBhcnQubGVuZ3RoOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgICBpZiAocGFydC5jaGFyQ29kZUF0KGopID4gMTI3KSB7XG4gICAgICAgICAgICAgIC8vIHdlIHJlcGxhY2Ugbm9uLUFTQ0lJIGNoYXIgd2l0aCBhIHRlbXBvcmFyeSBwbGFjZWhvbGRlclxuICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRoaXMgdG8gbWFrZSBzdXJlIHNpemUgb2YgaG9zdG5hbWUgaXMgbm90XG4gICAgICAgICAgICAgIC8vIGJyb2tlbiBieSByZXBsYWNpbmcgbm9uLUFTQ0lJIGJ5IG5vdGhpbmdcbiAgICAgICAgICAgICAgbmV3cGFydCArPSAneCc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBuZXdwYXJ0ICs9IHBhcnRbal07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHdlIHRlc3QgYWdhaW4gd2l0aCBBU0NJSSBjaGFyIG9ubHlcbiAgICAgICAgICBpZiAoIW5ld3BhcnQubWF0Y2goaG9zdG5hbWVQYXJ0UGF0dGVybikpIHtcbiAgICAgICAgICAgIHZhciB2YWxpZFBhcnRzID0gaG9zdHBhcnRzLnNsaWNlKDAsIGkpO1xuICAgICAgICAgICAgdmFyIG5vdEhvc3QgPSBob3N0cGFydHMuc2xpY2UoaSArIDEpO1xuICAgICAgICAgICAgdmFyIGJpdCA9IHBhcnQubWF0Y2goaG9zdG5hbWVQYXJ0U3RhcnQpO1xuICAgICAgICAgICAgaWYgKGJpdCkge1xuICAgICAgICAgICAgICB2YWxpZFBhcnRzLnB1c2goYml0WzFdKTtcbiAgICAgICAgICAgICAgbm90SG9zdC51bnNoaWZ0KGJpdFsyXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm90SG9zdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgcmVzdCA9ICcvJyArIG5vdEhvc3Quam9pbignLicpICsgcmVzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaG9zdG5hbWUgPSB2YWxpZFBhcnRzLmpvaW4oJy4nKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmhvc3RuYW1lLmxlbmd0aCA+IGhvc3RuYW1lTWF4TGVuKSB7XG4gICAgICB0aGlzLmhvc3RuYW1lID0gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGhvc3RuYW1lcyBhcmUgYWx3YXlzIGxvd2VyIGNhc2UuXG4gICAgICB0aGlzLmhvc3RuYW1lID0gdGhpcy5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIGlmICghaXB2Nkhvc3RuYW1lKSB7XG4gICAgICAvLyBJRE5BIFN1cHBvcnQ6IFJldHVybnMgYSBwdW55IGNvZGVkIHJlcHJlc2VudGF0aW9uIG9mIFwiZG9tYWluXCIuXG4gICAgICAvLyBJdCBvbmx5IGNvbnZlcnRzIHRoZSBwYXJ0IG9mIHRoZSBkb21haW4gbmFtZSB0aGF0XG4gICAgICAvLyBoYXMgbm9uIEFTQ0lJIGNoYXJhY3RlcnMuIEkuZS4gaXQgZG9zZW50IG1hdHRlciBpZlxuICAgICAgLy8geW91IGNhbGwgaXQgd2l0aCBhIGRvbWFpbiB0aGF0IGFscmVhZHkgaXMgaW4gQVNDSUkuXG4gICAgICB2YXIgZG9tYWluQXJyYXkgPSB0aGlzLmhvc3RuYW1lLnNwbGl0KCcuJyk7XG4gICAgICB2YXIgbmV3T3V0ID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvbWFpbkFycmF5Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBzID0gZG9tYWluQXJyYXlbaV07XG4gICAgICAgIG5ld091dC5wdXNoKHMubWF0Y2goL1teQS1aYS16MC05Xy1dLykgP1xuICAgICAgICAgICAgJ3huLS0nICsgcHVueWNvZGUuZW5jb2RlKHMpIDogcyk7XG4gICAgICB9XG4gICAgICB0aGlzLmhvc3RuYW1lID0gbmV3T3V0LmpvaW4oJy4nKTtcbiAgICB9XG5cbiAgICB2YXIgcCA9IHRoaXMucG9ydCA/ICc6JyArIHRoaXMucG9ydCA6ICcnO1xuICAgIHZhciBoID0gdGhpcy5ob3N0bmFtZSB8fCAnJztcbiAgICB0aGlzLmhvc3QgPSBoICsgcDtcbiAgICB0aGlzLmhyZWYgKz0gdGhpcy5ob3N0O1xuXG4gICAgLy8gc3RyaXAgWyBhbmQgXSBmcm9tIHRoZSBob3N0bmFtZVxuICAgIC8vIHRoZSBob3N0IGZpZWxkIHN0aWxsIHJldGFpbnMgdGhlbSwgdGhvdWdoXG4gICAgaWYgKGlwdjZIb3N0bmFtZSkge1xuICAgICAgdGhpcy5ob3N0bmFtZSA9IHRoaXMuaG9zdG5hbWUuc3Vic3RyKDEsIHRoaXMuaG9zdG5hbWUubGVuZ3RoIC0gMik7XG4gICAgICBpZiAocmVzdFswXSAhPT0gJy8nKSB7XG4gICAgICAgIHJlc3QgPSAnLycgKyByZXN0O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIG5vdyByZXN0IGlzIHNldCB0byB0aGUgcG9zdC1ob3N0IHN0dWZmLlxuICAvLyBjaG9wIG9mZiBhbnkgZGVsaW0gY2hhcnMuXG4gIGlmICghdW5zYWZlUHJvdG9jb2xbbG93ZXJQcm90b10pIHtcblxuICAgIC8vIEZpcnN0LCBtYWtlIDEwMCUgc3VyZSB0aGF0IGFueSBcImF1dG9Fc2NhcGVcIiBjaGFycyBnZXRcbiAgICAvLyBlc2NhcGVkLCBldmVuIGlmIGVuY29kZVVSSUNvbXBvbmVudCBkb2Vzbid0IHRoaW5rIHRoZXlcbiAgICAvLyBuZWVkIHRvIGJlLlxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXV0b0VzY2FwZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBhZSA9IGF1dG9Fc2NhcGVbaV07XG4gICAgICB2YXIgZXNjID0gZW5jb2RlVVJJQ29tcG9uZW50KGFlKTtcbiAgICAgIGlmIChlc2MgPT09IGFlKSB7XG4gICAgICAgIGVzYyA9IGVzY2FwZShhZSk7XG4gICAgICB9XG4gICAgICByZXN0ID0gcmVzdC5zcGxpdChhZSkuam9pbihlc2MpO1xuICAgIH1cbiAgfVxuXG5cbiAgLy8gY2hvcCBvZmYgZnJvbSB0aGUgdGFpbCBmaXJzdC5cbiAgdmFyIGhhc2ggPSByZXN0LmluZGV4T2YoJyMnKTtcbiAgaWYgKGhhc2ggIT09IC0xKSB7XG4gICAgLy8gZ290IGEgZnJhZ21lbnQgc3RyaW5nLlxuICAgIHRoaXMuaGFzaCA9IHJlc3Quc3Vic3RyKGhhc2gpO1xuICAgIHJlc3QgPSByZXN0LnNsaWNlKDAsIGhhc2gpO1xuICB9XG4gIHZhciBxbSA9IHJlc3QuaW5kZXhPZignPycpO1xuICBpZiAocW0gIT09IC0xKSB7XG4gICAgdGhpcy5zZWFyY2ggPSByZXN0LnN1YnN0cihxbSk7XG4gICAgdGhpcy5xdWVyeSA9IHJlc3Quc3Vic3RyKHFtICsgMSk7XG4gICAgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcbiAgICAgIHRoaXMucXVlcnkgPSBxdWVyeXN0cmluZy5wYXJzZSh0aGlzLnF1ZXJ5KTtcbiAgICB9XG4gICAgcmVzdCA9IHJlc3Quc2xpY2UoMCwgcW0pO1xuICB9IGVsc2UgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcbiAgICAvLyBubyBxdWVyeSBzdHJpbmcsIGJ1dCBwYXJzZVF1ZXJ5U3RyaW5nIHN0aWxsIHJlcXVlc3RlZFxuICAgIHRoaXMuc2VhcmNoID0gJyc7XG4gICAgdGhpcy5xdWVyeSA9IHt9O1xuICB9XG4gIGlmIChyZXN0KSB0aGlzLnBhdGhuYW1lID0gcmVzdDtcbiAgaWYgKHNsYXNoZWRQcm90b2NvbFtsb3dlclByb3RvXSAmJlxuICAgICAgdGhpcy5ob3N0bmFtZSAmJiAhdGhpcy5wYXRobmFtZSkge1xuICAgIHRoaXMucGF0aG5hbWUgPSAnLyc7XG4gIH1cblxuICAvL3RvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0XG4gIGlmICh0aGlzLnBhdGhuYW1lIHx8IHRoaXMuc2VhcmNoKSB7XG4gICAgdmFyIHAgPSB0aGlzLnBhdGhuYW1lIHx8ICcnO1xuICAgIHZhciBzID0gdGhpcy5zZWFyY2ggfHwgJyc7XG4gICAgdGhpcy5wYXRoID0gcCArIHM7XG4gIH1cblxuICAvLyBmaW5hbGx5LCByZWNvbnN0cnVjdCB0aGUgaHJlZiBiYXNlZCBvbiB3aGF0IGhhcyBiZWVuIHZhbGlkYXRlZC5cbiAgdGhpcy5ocmVmID0gdGhpcy5mb3JtYXQoKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBmb3JtYXQgYSBwYXJzZWQgb2JqZWN0IGludG8gYSB1cmwgc3RyaW5nXG5mdW5jdGlvbiB1cmxGb3JtYXQob2JqKSB7XG4gIC8vIGVuc3VyZSBpdCdzIGFuIG9iamVjdCwgYW5kIG5vdCBhIHN0cmluZyB1cmwuXG4gIC8vIElmIGl0J3MgYW4gb2JqLCB0aGlzIGlzIGEgbm8tb3AuXG4gIC8vIHRoaXMgd2F5LCB5b3UgY2FuIGNhbGwgdXJsX2Zvcm1hdCgpIG9uIHN0cmluZ3NcbiAgLy8gdG8gY2xlYW4gdXAgcG90ZW50aWFsbHkgd29ua3kgdXJscy5cbiAgaWYgKGlzU3RyaW5nKG9iaikpIG9iaiA9IHVybFBhcnNlKG9iaik7XG4gIGlmICghKG9iaiBpbnN0YW5jZW9mIFVybCkpIHJldHVybiBVcmwucHJvdG90eXBlLmZvcm1hdC5jYWxsKG9iaik7XG4gIHJldHVybiBvYmouZm9ybWF0KCk7XG59XG5cblVybC5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhdXRoID0gdGhpcy5hdXRoIHx8ICcnO1xuICBpZiAoYXV0aCkge1xuICAgIGF1dGggPSBlbmNvZGVVUklDb21wb25lbnQoYXV0aCk7XG4gICAgYXV0aCA9IGF1dGgucmVwbGFjZSgvJTNBL2ksICc6Jyk7XG4gICAgYXV0aCArPSAnQCc7XG4gIH1cblxuICB2YXIgcHJvdG9jb2wgPSB0aGlzLnByb3RvY29sIHx8ICcnLFxuICAgICAgcGF0aG5hbWUgPSB0aGlzLnBhdGhuYW1lIHx8ICcnLFxuICAgICAgaGFzaCA9IHRoaXMuaGFzaCB8fCAnJyxcbiAgICAgIGhvc3QgPSBmYWxzZSxcbiAgICAgIHF1ZXJ5ID0gJyc7XG5cbiAgaWYgKHRoaXMuaG9zdCkge1xuICAgIGhvc3QgPSBhdXRoICsgdGhpcy5ob3N0O1xuICB9IGVsc2UgaWYgKHRoaXMuaG9zdG5hbWUpIHtcbiAgICBob3N0ID0gYXV0aCArICh0aGlzLmhvc3RuYW1lLmluZGV4T2YoJzonKSA9PT0gLTEgP1xuICAgICAgICB0aGlzLmhvc3RuYW1lIDpcbiAgICAgICAgJ1snICsgdGhpcy5ob3N0bmFtZSArICddJyk7XG4gICAgaWYgKHRoaXMucG9ydCkge1xuICAgICAgaG9zdCArPSAnOicgKyB0aGlzLnBvcnQ7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRoaXMucXVlcnkgJiZcbiAgICAgIGlzT2JqZWN0KHRoaXMucXVlcnkpICYmXG4gICAgICBPYmplY3Qua2V5cyh0aGlzLnF1ZXJ5KS5sZW5ndGgpIHtcbiAgICBxdWVyeSA9IHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeSh0aGlzLnF1ZXJ5KTtcbiAgfVxuXG4gIHZhciBzZWFyY2ggPSB0aGlzLnNlYXJjaCB8fCAocXVlcnkgJiYgKCc/JyArIHF1ZXJ5KSkgfHwgJyc7XG5cbiAgaWYgKHByb3RvY29sICYmIHByb3RvY29sLnN1YnN0cigtMSkgIT09ICc6JykgcHJvdG9jb2wgKz0gJzonO1xuXG4gIC8vIG9ubHkgdGhlIHNsYXNoZWRQcm90b2NvbHMgZ2V0IHRoZSAvLy4gIE5vdCBtYWlsdG86LCB4bXBwOiwgZXRjLlxuICAvLyB1bmxlc3MgdGhleSBoYWQgdGhlbSB0byBiZWdpbiB3aXRoLlxuICBpZiAodGhpcy5zbGFzaGVzIHx8XG4gICAgICAoIXByb3RvY29sIHx8IHNsYXNoZWRQcm90b2NvbFtwcm90b2NvbF0pICYmIGhvc3QgIT09IGZhbHNlKSB7XG4gICAgaG9zdCA9ICcvLycgKyAoaG9zdCB8fCAnJyk7XG4gICAgaWYgKHBhdGhuYW1lICYmIHBhdGhuYW1lLmNoYXJBdCgwKSAhPT0gJy8nKSBwYXRobmFtZSA9ICcvJyArIHBhdGhuYW1lO1xuICB9IGVsc2UgaWYgKCFob3N0KSB7XG4gICAgaG9zdCA9ICcnO1xuICB9XG5cbiAgaWYgKGhhc2ggJiYgaGFzaC5jaGFyQXQoMCkgIT09ICcjJykgaGFzaCA9ICcjJyArIGhhc2g7XG4gIGlmIChzZWFyY2ggJiYgc2VhcmNoLmNoYXJBdCgwKSAhPT0gJz8nKSBzZWFyY2ggPSAnPycgKyBzZWFyY2g7XG5cbiAgcGF0aG5hbWUgPSBwYXRobmFtZS5yZXBsYWNlKC9bPyNdL2csIGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChtYXRjaCk7XG4gIH0pO1xuICBzZWFyY2ggPSBzZWFyY2gucmVwbGFjZSgnIycsICclMjMnKTtcblxuICByZXR1cm4gcHJvdG9jb2wgKyBob3N0ICsgcGF0aG5hbWUgKyBzZWFyY2ggKyBoYXNoO1xufTtcblxuZnVuY3Rpb24gdXJsUmVzb2x2ZShzb3VyY2UsIHJlbGF0aXZlKSB7XG4gIHJldHVybiB1cmxQYXJzZShzb3VyY2UsIGZhbHNlLCB0cnVlKS5yZXNvbHZlKHJlbGF0aXZlKTtcbn1cblxuVXJsLnByb3RvdHlwZS5yZXNvbHZlID0gZnVuY3Rpb24ocmVsYXRpdmUpIHtcbiAgcmV0dXJuIHRoaXMucmVzb2x2ZU9iamVjdCh1cmxQYXJzZShyZWxhdGl2ZSwgZmFsc2UsIHRydWUpKS5mb3JtYXQoKTtcbn07XG5cbmZ1bmN0aW9uIHVybFJlc29sdmVPYmplY3Qoc291cmNlLCByZWxhdGl2ZSkge1xuICBpZiAoIXNvdXJjZSkgcmV0dXJuIHJlbGF0aXZlO1xuICByZXR1cm4gdXJsUGFyc2Uoc291cmNlLCBmYWxzZSwgdHJ1ZSkucmVzb2x2ZU9iamVjdChyZWxhdGl2ZSk7XG59XG5cblVybC5wcm90b3R5cGUucmVzb2x2ZU9iamVjdCA9IGZ1bmN0aW9uKHJlbGF0aXZlKSB7XG4gIGlmIChpc1N0cmluZyhyZWxhdGl2ZSkpIHtcbiAgICB2YXIgcmVsID0gbmV3IFVybCgpO1xuICAgIHJlbC5wYXJzZShyZWxhdGl2ZSwgZmFsc2UsIHRydWUpO1xuICAgIHJlbGF0aXZlID0gcmVsO1xuICB9XG5cbiAgdmFyIHJlc3VsdCA9IG5ldyBVcmwoKTtcbiAgT2JqZWN0LmtleXModGhpcykuZm9yRWFjaChmdW5jdGlvbihrKSB7XG4gICAgcmVzdWx0W2tdID0gdGhpc1trXTtcbiAgfSwgdGhpcyk7XG5cbiAgLy8gaGFzaCBpcyBhbHdheXMgb3ZlcnJpZGRlbiwgbm8gbWF0dGVyIHdoYXQuXG4gIC8vIGV2ZW4gaHJlZj1cIlwiIHdpbGwgcmVtb3ZlIGl0LlxuICByZXN1bHQuaGFzaCA9IHJlbGF0aXZlLmhhc2g7XG5cbiAgLy8gaWYgdGhlIHJlbGF0aXZlIHVybCBpcyBlbXB0eSwgdGhlbiB0aGVyZSdzIG5vdGhpbmcgbGVmdCB0byBkbyBoZXJlLlxuICBpZiAocmVsYXRpdmUuaHJlZiA9PT0gJycpIHtcbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gaHJlZnMgbGlrZSAvL2Zvby9iYXIgYWx3YXlzIGN1dCB0byB0aGUgcHJvdG9jb2wuXG4gIGlmIChyZWxhdGl2ZS5zbGFzaGVzICYmICFyZWxhdGl2ZS5wcm90b2NvbCkge1xuICAgIC8vIHRha2UgZXZlcnl0aGluZyBleGNlcHQgdGhlIHByb3RvY29sIGZyb20gcmVsYXRpdmVcbiAgICBPYmplY3Qua2V5cyhyZWxhdGl2ZSkuZm9yRWFjaChmdW5jdGlvbihrKSB7XG4gICAgICBpZiAoayAhPT0gJ3Byb3RvY29sJylcbiAgICAgICAgcmVzdWx0W2tdID0gcmVsYXRpdmVba107XG4gICAgfSk7XG5cbiAgICAvL3VybFBhcnNlIGFwcGVuZHMgdHJhaWxpbmcgLyB0byB1cmxzIGxpa2UgaHR0cDovL3d3dy5leGFtcGxlLmNvbVxuICAgIGlmIChzbGFzaGVkUHJvdG9jb2xbcmVzdWx0LnByb3RvY29sXSAmJlxuICAgICAgICByZXN1bHQuaG9zdG5hbWUgJiYgIXJlc3VsdC5wYXRobmFtZSkge1xuICAgICAgcmVzdWx0LnBhdGggPSByZXN1bHQucGF0aG5hbWUgPSAnLyc7XG4gICAgfVxuXG4gICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGlmIChyZWxhdGl2ZS5wcm90b2NvbCAmJiByZWxhdGl2ZS5wcm90b2NvbCAhPT0gcmVzdWx0LnByb3RvY29sKSB7XG4gICAgLy8gaWYgaXQncyBhIGtub3duIHVybCBwcm90b2NvbCwgdGhlbiBjaGFuZ2luZ1xuICAgIC8vIHRoZSBwcm90b2NvbCBkb2VzIHdlaXJkIHRoaW5nc1xuICAgIC8vIGZpcnN0LCBpZiBpdCdzIG5vdCBmaWxlOiwgdGhlbiB3ZSBNVVNUIGhhdmUgYSBob3N0LFxuICAgIC8vIGFuZCBpZiB0aGVyZSB3YXMgYSBwYXRoXG4gICAgLy8gdG8gYmVnaW4gd2l0aCwgdGhlbiB3ZSBNVVNUIGhhdmUgYSBwYXRoLlxuICAgIC8vIGlmIGl0IGlzIGZpbGU6LCB0aGVuIHRoZSBob3N0IGlzIGRyb3BwZWQsXG4gICAgLy8gYmVjYXVzZSB0aGF0J3Mga25vd24gdG8gYmUgaG9zdGxlc3MuXG4gICAgLy8gYW55dGhpbmcgZWxzZSBpcyBhc3N1bWVkIHRvIGJlIGFic29sdXRlLlxuICAgIGlmICghc2xhc2hlZFByb3RvY29sW3JlbGF0aXZlLnByb3RvY29sXSkge1xuICAgICAgT2JqZWN0LmtleXMocmVsYXRpdmUpLmZvckVhY2goZnVuY3Rpb24oaykge1xuICAgICAgICByZXN1bHRba10gPSByZWxhdGl2ZVtrXTtcbiAgICAgIH0pO1xuICAgICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHJlc3VsdC5wcm90b2NvbCA9IHJlbGF0aXZlLnByb3RvY29sO1xuICAgIGlmICghcmVsYXRpdmUuaG9zdCAmJiAhaG9zdGxlc3NQcm90b2NvbFtyZWxhdGl2ZS5wcm90b2NvbF0pIHtcbiAgICAgIHZhciByZWxQYXRoID0gKHJlbGF0aXZlLnBhdGhuYW1lIHx8ICcnKS5zcGxpdCgnLycpO1xuICAgICAgd2hpbGUgKHJlbFBhdGgubGVuZ3RoICYmICEocmVsYXRpdmUuaG9zdCA9IHJlbFBhdGguc2hpZnQoKSkpO1xuICAgICAgaWYgKCFyZWxhdGl2ZS5ob3N0KSByZWxhdGl2ZS5ob3N0ID0gJyc7XG4gICAgICBpZiAoIXJlbGF0aXZlLmhvc3RuYW1lKSByZWxhdGl2ZS5ob3N0bmFtZSA9ICcnO1xuICAgICAgaWYgKHJlbFBhdGhbMF0gIT09ICcnKSByZWxQYXRoLnVuc2hpZnQoJycpO1xuICAgICAgaWYgKHJlbFBhdGgubGVuZ3RoIDwgMikgcmVsUGF0aC51bnNoaWZ0KCcnKTtcbiAgICAgIHJlc3VsdC5wYXRobmFtZSA9IHJlbFBhdGguam9pbignLycpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQucGF0aG5hbWUgPSByZWxhdGl2ZS5wYXRobmFtZTtcbiAgICB9XG4gICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcbiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcbiAgICByZXN1bHQuaG9zdCA9IHJlbGF0aXZlLmhvc3QgfHwgJyc7XG4gICAgcmVzdWx0LmF1dGggPSByZWxhdGl2ZS5hdXRoO1xuICAgIHJlc3VsdC5ob3N0bmFtZSA9IHJlbGF0aXZlLmhvc3RuYW1lIHx8IHJlbGF0aXZlLmhvc3Q7XG4gICAgcmVzdWx0LnBvcnQgPSByZWxhdGl2ZS5wb3J0O1xuICAgIC8vIHRvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0XG4gICAgaWYgKHJlc3VsdC5wYXRobmFtZSB8fCByZXN1bHQuc2VhcmNoKSB7XG4gICAgICB2YXIgcCA9IHJlc3VsdC5wYXRobmFtZSB8fCAnJztcbiAgICAgIHZhciBzID0gcmVzdWx0LnNlYXJjaCB8fCAnJztcbiAgICAgIHJlc3VsdC5wYXRoID0gcCArIHM7XG4gICAgfVxuICAgIHJlc3VsdC5zbGFzaGVzID0gcmVzdWx0LnNsYXNoZXMgfHwgcmVsYXRpdmUuc2xhc2hlcztcbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgdmFyIGlzU291cmNlQWJzID0gKHJlc3VsdC5wYXRobmFtZSAmJiByZXN1bHQucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpLFxuICAgICAgaXNSZWxBYnMgPSAoXG4gICAgICAgICAgcmVsYXRpdmUuaG9zdCB8fFxuICAgICAgICAgIHJlbGF0aXZlLnBhdGhuYW1lICYmIHJlbGF0aXZlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nXG4gICAgICApLFxuICAgICAgbXVzdEVuZEFicyA9IChpc1JlbEFicyB8fCBpc1NvdXJjZUFicyB8fFxuICAgICAgICAgICAgICAgICAgICAocmVzdWx0Lmhvc3QgJiYgcmVsYXRpdmUucGF0aG5hbWUpKSxcbiAgICAgIHJlbW92ZUFsbERvdHMgPSBtdXN0RW5kQWJzLFxuICAgICAgc3JjUGF0aCA9IHJlc3VsdC5wYXRobmFtZSAmJiByZXN1bHQucGF0aG5hbWUuc3BsaXQoJy8nKSB8fCBbXSxcbiAgICAgIHJlbFBhdGggPSByZWxhdGl2ZS5wYXRobmFtZSAmJiByZWxhdGl2ZS5wYXRobmFtZS5zcGxpdCgnLycpIHx8IFtdLFxuICAgICAgcHN5Y2hvdGljID0gcmVzdWx0LnByb3RvY29sICYmICFzbGFzaGVkUHJvdG9jb2xbcmVzdWx0LnByb3RvY29sXTtcblxuICAvLyBpZiB0aGUgdXJsIGlzIGEgbm9uLXNsYXNoZWQgdXJsLCB0aGVuIHJlbGF0aXZlXG4gIC8vIGxpbmtzIGxpa2UgLi4vLi4gc2hvdWxkIGJlIGFibGVcbiAgLy8gdG8gY3Jhd2wgdXAgdG8gdGhlIGhvc3RuYW1lLCBhcyB3ZWxsLiAgVGhpcyBpcyBzdHJhbmdlLlxuICAvLyByZXN1bHQucHJvdG9jb2wgaGFzIGFscmVhZHkgYmVlbiBzZXQgYnkgbm93LlxuICAvLyBMYXRlciBvbiwgcHV0IHRoZSBmaXJzdCBwYXRoIHBhcnQgaW50byB0aGUgaG9zdCBmaWVsZC5cbiAgaWYgKHBzeWNob3RpYykge1xuICAgIHJlc3VsdC5ob3N0bmFtZSA9ICcnO1xuICAgIHJlc3VsdC5wb3J0ID0gbnVsbDtcbiAgICBpZiAocmVzdWx0Lmhvc3QpIHtcbiAgICAgIGlmIChzcmNQYXRoWzBdID09PSAnJykgc3JjUGF0aFswXSA9IHJlc3VsdC5ob3N0O1xuICAgICAgZWxzZSBzcmNQYXRoLnVuc2hpZnQocmVzdWx0Lmhvc3QpO1xuICAgIH1cbiAgICByZXN1bHQuaG9zdCA9ICcnO1xuICAgIGlmIChyZWxhdGl2ZS5wcm90b2NvbCkge1xuICAgICAgcmVsYXRpdmUuaG9zdG5hbWUgPSBudWxsO1xuICAgICAgcmVsYXRpdmUucG9ydCA9IG51bGw7XG4gICAgICBpZiAocmVsYXRpdmUuaG9zdCkge1xuICAgICAgICBpZiAocmVsUGF0aFswXSA9PT0gJycpIHJlbFBhdGhbMF0gPSByZWxhdGl2ZS5ob3N0O1xuICAgICAgICBlbHNlIHJlbFBhdGgudW5zaGlmdChyZWxhdGl2ZS5ob3N0KTtcbiAgICAgIH1cbiAgICAgIHJlbGF0aXZlLmhvc3QgPSBudWxsO1xuICAgIH1cbiAgICBtdXN0RW5kQWJzID0gbXVzdEVuZEFicyAmJiAocmVsUGF0aFswXSA9PT0gJycgfHwgc3JjUGF0aFswXSA9PT0gJycpO1xuICB9XG5cbiAgaWYgKGlzUmVsQWJzKSB7XG4gICAgLy8gaXQncyBhYnNvbHV0ZS5cbiAgICByZXN1bHQuaG9zdCA9IChyZWxhdGl2ZS5ob3N0IHx8IHJlbGF0aXZlLmhvc3QgPT09ICcnKSA/XG4gICAgICAgICAgICAgICAgICByZWxhdGl2ZS5ob3N0IDogcmVzdWx0Lmhvc3Q7XG4gICAgcmVzdWx0Lmhvc3RuYW1lID0gKHJlbGF0aXZlLmhvc3RuYW1lIHx8IHJlbGF0aXZlLmhvc3RuYW1lID09PSAnJykgP1xuICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlLmhvc3RuYW1lIDogcmVzdWx0Lmhvc3RuYW1lO1xuICAgIHJlc3VsdC5zZWFyY2ggPSByZWxhdGl2ZS5zZWFyY2g7XG4gICAgcmVzdWx0LnF1ZXJ5ID0gcmVsYXRpdmUucXVlcnk7XG4gICAgc3JjUGF0aCA9IHJlbFBhdGg7XG4gICAgLy8gZmFsbCB0aHJvdWdoIHRvIHRoZSBkb3QtaGFuZGxpbmcgYmVsb3cuXG4gIH0gZWxzZSBpZiAocmVsUGF0aC5sZW5ndGgpIHtcbiAgICAvLyBpdCdzIHJlbGF0aXZlXG4gICAgLy8gdGhyb3cgYXdheSB0aGUgZXhpc3RpbmcgZmlsZSwgYW5kIHRha2UgdGhlIG5ldyBwYXRoIGluc3RlYWQuXG4gICAgaWYgKCFzcmNQYXRoKSBzcmNQYXRoID0gW107XG4gICAgc3JjUGF0aC5wb3AoKTtcbiAgICBzcmNQYXRoID0gc3JjUGF0aC5jb25jYXQocmVsUGF0aCk7XG4gICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcbiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcbiAgfSBlbHNlIGlmICghaXNOdWxsT3JVbmRlZmluZWQocmVsYXRpdmUuc2VhcmNoKSkge1xuICAgIC8vIGp1c3QgcHVsbCBvdXQgdGhlIHNlYXJjaC5cbiAgICAvLyBsaWtlIGhyZWY9Jz9mb28nLlxuICAgIC8vIFB1dCB0aGlzIGFmdGVyIHRoZSBvdGhlciB0d28gY2FzZXMgYmVjYXVzZSBpdCBzaW1wbGlmaWVzIHRoZSBib29sZWFuc1xuICAgIGlmIChwc3ljaG90aWMpIHtcbiAgICAgIHJlc3VsdC5ob3N0bmFtZSA9IHJlc3VsdC5ob3N0ID0gc3JjUGF0aC5zaGlmdCgpO1xuICAgICAgLy9vY2NhdGlvbmFseSB0aGUgYXV0aCBjYW4gZ2V0IHN0dWNrIG9ubHkgaW4gaG9zdFxuICAgICAgLy90aGlzIGVzcGVjaWFseSBoYXBwZW5zIGluIGNhc2VzIGxpa2VcbiAgICAgIC8vdXJsLnJlc29sdmVPYmplY3QoJ21haWx0bzpsb2NhbDFAZG9tYWluMScsICdsb2NhbDJAZG9tYWluMicpXG4gICAgICB2YXIgYXV0aEluSG9zdCA9IHJlc3VsdC5ob3N0ICYmIHJlc3VsdC5ob3N0LmluZGV4T2YoJ0AnKSA+IDAgP1xuICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuaG9zdC5zcGxpdCgnQCcpIDogZmFsc2U7XG4gICAgICBpZiAoYXV0aEluSG9zdCkge1xuICAgICAgICByZXN1bHQuYXV0aCA9IGF1dGhJbkhvc3Quc2hpZnQoKTtcbiAgICAgICAgcmVzdWx0Lmhvc3QgPSByZXN1bHQuaG9zdG5hbWUgPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJlc3VsdC5zZWFyY2ggPSByZWxhdGl2ZS5zZWFyY2g7XG4gICAgcmVzdWx0LnF1ZXJ5ID0gcmVsYXRpdmUucXVlcnk7XG4gICAgLy90byBzdXBwb3J0IGh0dHAucmVxdWVzdFxuICAgIGlmICghaXNOdWxsKHJlc3VsdC5wYXRobmFtZSkgfHwgIWlzTnVsbChyZXN1bHQuc2VhcmNoKSkge1xuICAgICAgcmVzdWx0LnBhdGggPSAocmVzdWx0LnBhdGhuYW1lID8gcmVzdWx0LnBhdGhuYW1lIDogJycpICtcbiAgICAgICAgICAgICAgICAgICAgKHJlc3VsdC5zZWFyY2ggPyByZXN1bHQuc2VhcmNoIDogJycpO1xuICAgIH1cbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgaWYgKCFzcmNQYXRoLmxlbmd0aCkge1xuICAgIC8vIG5vIHBhdGggYXQgYWxsLiAgZWFzeS5cbiAgICAvLyB3ZSd2ZSBhbHJlYWR5IGhhbmRsZWQgdGhlIG90aGVyIHN0dWZmIGFib3ZlLlxuICAgIHJlc3VsdC5wYXRobmFtZSA9IG51bGw7XG4gICAgLy90byBzdXBwb3J0IGh0dHAucmVxdWVzdFxuICAgIGlmIChyZXN1bHQuc2VhcmNoKSB7XG4gICAgICByZXN1bHQucGF0aCA9ICcvJyArIHJlc3VsdC5zZWFyY2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5wYXRoID0gbnVsbDtcbiAgICB9XG4gICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIGlmIGEgdXJsIEVORHMgaW4gLiBvciAuLiwgdGhlbiBpdCBtdXN0IGdldCBhIHRyYWlsaW5nIHNsYXNoLlxuICAvLyBob3dldmVyLCBpZiBpdCBlbmRzIGluIGFueXRoaW5nIGVsc2Ugbm9uLXNsYXNoeSxcbiAgLy8gdGhlbiBpdCBtdXN0IE5PVCBnZXQgYSB0cmFpbGluZyBzbGFzaC5cbiAgdmFyIGxhc3QgPSBzcmNQYXRoLnNsaWNlKC0xKVswXTtcbiAgdmFyIGhhc1RyYWlsaW5nU2xhc2ggPSAoXG4gICAgICAocmVzdWx0Lmhvc3QgfHwgcmVsYXRpdmUuaG9zdCkgJiYgKGxhc3QgPT09ICcuJyB8fCBsYXN0ID09PSAnLi4nKSB8fFxuICAgICAgbGFzdCA9PT0gJycpO1xuXG4gIC8vIHN0cmlwIHNpbmdsZSBkb3RzLCByZXNvbHZlIGRvdWJsZSBkb3RzIHRvIHBhcmVudCBkaXJcbiAgLy8gaWYgdGhlIHBhdGggdHJpZXMgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIGB1cGAgZW5kcyB1cCA+IDBcbiAgdmFyIHVwID0gMDtcbiAgZm9yICh2YXIgaSA9IHNyY1BhdGgubGVuZ3RoOyBpID49IDA7IGktLSkge1xuICAgIGxhc3QgPSBzcmNQYXRoW2ldO1xuICAgIGlmIChsYXN0ID09ICcuJykge1xuICAgICAgc3JjUGF0aC5zcGxpY2UoaSwgMSk7XG4gICAgfSBlbHNlIGlmIChsYXN0ID09PSAnLi4nKSB7XG4gICAgICBzcmNQYXRoLnNwbGljZShpLCAxKTtcbiAgICAgIHVwKys7XG4gICAgfSBlbHNlIGlmICh1cCkge1xuICAgICAgc3JjUGF0aC5zcGxpY2UoaSwgMSk7XG4gICAgICB1cC0tO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBwYXRoIGlzIGFsbG93ZWQgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIHJlc3RvcmUgbGVhZGluZyAuLnNcbiAgaWYgKCFtdXN0RW5kQWJzICYmICFyZW1vdmVBbGxEb3RzKSB7XG4gICAgZm9yICg7IHVwLS07IHVwKSB7XG4gICAgICBzcmNQYXRoLnVuc2hpZnQoJy4uJyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKG11c3RFbmRBYnMgJiYgc3JjUGF0aFswXSAhPT0gJycgJiZcbiAgICAgICghc3JjUGF0aFswXSB8fCBzcmNQYXRoWzBdLmNoYXJBdCgwKSAhPT0gJy8nKSkge1xuICAgIHNyY1BhdGgudW5zaGlmdCgnJyk7XG4gIH1cblxuICBpZiAoaGFzVHJhaWxpbmdTbGFzaCAmJiAoc3JjUGF0aC5qb2luKCcvJykuc3Vic3RyKC0xKSAhPT0gJy8nKSkge1xuICAgIHNyY1BhdGgucHVzaCgnJyk7XG4gIH1cblxuICB2YXIgaXNBYnNvbHV0ZSA9IHNyY1BhdGhbMF0gPT09ICcnIHx8XG4gICAgICAoc3JjUGF0aFswXSAmJiBzcmNQYXRoWzBdLmNoYXJBdCgwKSA9PT0gJy8nKTtcblxuICAvLyBwdXQgdGhlIGhvc3QgYmFja1xuICBpZiAocHN5Y2hvdGljKSB7XG4gICAgcmVzdWx0Lmhvc3RuYW1lID0gcmVzdWx0Lmhvc3QgPSBpc0Fic29sdXRlID8gJycgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjUGF0aC5sZW5ndGggPyBzcmNQYXRoLnNoaWZ0KCkgOiAnJztcbiAgICAvL29jY2F0aW9uYWx5IHRoZSBhdXRoIGNhbiBnZXQgc3R1Y2sgb25seSBpbiBob3N0XG4gICAgLy90aGlzIGVzcGVjaWFseSBoYXBwZW5zIGluIGNhc2VzIGxpa2VcbiAgICAvL3VybC5yZXNvbHZlT2JqZWN0KCdtYWlsdG86bG9jYWwxQGRvbWFpbjEnLCAnbG9jYWwyQGRvbWFpbjInKVxuICAgIHZhciBhdXRoSW5Ib3N0ID0gcmVzdWx0Lmhvc3QgJiYgcmVzdWx0Lmhvc3QuaW5kZXhPZignQCcpID4gMCA/XG4gICAgICAgICAgICAgICAgICAgICByZXN1bHQuaG9zdC5zcGxpdCgnQCcpIDogZmFsc2U7XG4gICAgaWYgKGF1dGhJbkhvc3QpIHtcbiAgICAgIHJlc3VsdC5hdXRoID0gYXV0aEluSG9zdC5zaGlmdCgpO1xuICAgICAgcmVzdWx0Lmhvc3QgPSByZXN1bHQuaG9zdG5hbWUgPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7XG4gICAgfVxuICB9XG5cbiAgbXVzdEVuZEFicyA9IG11c3RFbmRBYnMgfHwgKHJlc3VsdC5ob3N0ICYmIHNyY1BhdGgubGVuZ3RoKTtcblxuICBpZiAobXVzdEVuZEFicyAmJiAhaXNBYnNvbHV0ZSkge1xuICAgIHNyY1BhdGgudW5zaGlmdCgnJyk7XG4gIH1cblxuICBpZiAoIXNyY1BhdGgubGVuZ3RoKSB7XG4gICAgcmVzdWx0LnBhdGhuYW1lID0gbnVsbDtcbiAgICByZXN1bHQucGF0aCA9IG51bGw7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0LnBhdGhuYW1lID0gc3JjUGF0aC5qb2luKCcvJyk7XG4gIH1cblxuICAvL3RvIHN1cHBvcnQgcmVxdWVzdC5odHRwXG4gIGlmICghaXNOdWxsKHJlc3VsdC5wYXRobmFtZSkgfHwgIWlzTnVsbChyZXN1bHQuc2VhcmNoKSkge1xuICAgIHJlc3VsdC5wYXRoID0gKHJlc3VsdC5wYXRobmFtZSA/IHJlc3VsdC5wYXRobmFtZSA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAocmVzdWx0LnNlYXJjaCA/IHJlc3VsdC5zZWFyY2ggOiAnJyk7XG4gIH1cbiAgcmVzdWx0LmF1dGggPSByZWxhdGl2ZS5hdXRoIHx8IHJlc3VsdC5hdXRoO1xuICByZXN1bHQuc2xhc2hlcyA9IHJlc3VsdC5zbGFzaGVzIHx8IHJlbGF0aXZlLnNsYXNoZXM7XG4gIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuVXJsLnByb3RvdHlwZS5wYXJzZUhvc3QgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGhvc3QgPSB0aGlzLmhvc3Q7XG4gIHZhciBwb3J0ID0gcG9ydFBhdHRlcm4uZXhlYyhob3N0KTtcbiAgaWYgKHBvcnQpIHtcbiAgICBwb3J0ID0gcG9ydFswXTtcbiAgICBpZiAocG9ydCAhPT0gJzonKSB7XG4gICAgICB0aGlzLnBvcnQgPSBwb3J0LnN1YnN0cigxKTtcbiAgICB9XG4gICAgaG9zdCA9IGhvc3Quc3Vic3RyKDAsIGhvc3QubGVuZ3RoIC0gcG9ydC5sZW5ndGgpO1xuICB9XG4gIGlmIChob3N0KSB0aGlzLmhvc3RuYW1lID0gaG9zdDtcbn07XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gXCJzdHJpbmdcIjtcbn1cblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gIGFyZyA9PSBudWxsO1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3VybC91cmwuanNcbiAqKiBtb2R1bGUgaWQgPSA0M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzQ0X187XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcIlJlYWN0RE9NXCJcbiAqKiBtb2R1bGUgaWQgPSA0NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==